/*!
 * Sir Trevor JS v0.9.0-beta9
 *
 * Released under the MIT license
 * www.opensource.org/licenses/MIT
 *
 * 2024-06-10
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SirTrevor=e():t.SirTrevor=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=94)}([function(t,e,n){"use strict";e.isEmpty=n(121),e.isFunction=n(28),e.isObject=n(18),e.isString=n(131),e.isUndefined=n(132),e.result=n(133),e.template=n(134),e.uniqueId=n(141)},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(3),s=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,a={getInstance:function(t){return r.isUndefined(t)?i.instances[0]:r.isString(t)?i.instances.find((function(e){return e.ID===t})):i.instances[t]},getInstanceBySelection:function(){return a.getInstance(o.getClosest(window.getSelection().anchorNode.parentNode,".st-block").getAttribute("data-instance"))},getBlockBySelection:function(){var t=a.getInstanceBySelection();if(t)return t.findBlockById(o.getClosest(window.getSelection().anchorNode.parentNode,".st-block").id)},log:function(){!r.isUndefined(console)&&i.debug&&console.log.apply(console,arguments)},isURI:function(t){return s.test(t)},titleize:function(t){return null===t?"":(t=String(t).toLowerCase()).replace(/(?:^|\s|-)\S/g,(function(t){return t.toUpperCase()}))},classify:function(t){return a.titleize(String(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()},flatten:function(t){var e={};return(Array.isArray(t)?t:Object.keys(t)).forEach((function(t){e[t]=!0})),e},underscored:function(t){return t.trim().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},reverse:function(t){return t.split("").reverse().join("")},toSlug:function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},leftTrim:function(t){return t.replace(/^\s+/,"")}};t.exports=a},function(t,e,n){"use strict";var r=n(0),i={title:function(t){return i18n.t("blocks:".concat(t.type,":drop_title"))||r.result(t,"title")},html:['<div class="st-block__dropzone">','<svg role="img" class="st-icon"><use xlink:href="<%= config.defaults.iconUrl %>#<%= _.result(block, "icon_name") %>"/></svg>','<p><%= i18n.t("general:drop", { block: "<span>" + block.drop_options.title(block) + "</span>" }) %>',"</p></div>"].join("\n"),re_render_on_reorder:!1},o={html:['<input type="text" placeholder="<%= i18n.t("general:paste") %>"',' class="st-block__paste-input st-paste-block">'].join("")},s={html:['<div class="st-block__upload-container">','<input type="file" type="st-file-upload">','<button class="st-upload-btn"><%= i18n.t("general:upload") %></button>',"</div>"].join("\n")};t.exports={debug:!1,scribeDebug:!1,skipValidation:!1,version:"0.4.0",language:"en",instances:[],defaults:{defaultType:!1,spinner:{className:"st-spinner",lines:9,length:8,width:3,radius:6,color:"#000",speed:1.4,trail:57,shadow:!1,left:"50%",top:"50%"},Block:{drop_options:i,paste_options:o,upload_options:s},blockLimit:0,blockTypeLimits:{},required:[],uploadUrl:"/attachments",attachmentName:"attachment[name]",attachmentFile:"attachment[file]",attachmentUid:"attachment[uid]",baseImageUrl:"/sir-trevor-uploads/",iconUrl:"../src/icons/sir-trevor-icons.svg",errorsContainer:void 0,convertFromMarkdown:!0,joinListBlocksOnBlockRemove:!1,headingLevels:[2],defaultHeadingLevel:2,formatBar:{commands:[{name:"Bold",title:"bold",iconName:"fmt-bold",cmd:"bold",keyCode:66,text:"B"},{name:"Italic",title:"italic",iconName:"fmt-italic",cmd:"italic",keyCode:73,text:"i"},{name:"Link",title:"link",iconName:"fmt-link",cmd:"linkPrompt",keyCode:75,text:"link"},{name:"Unlink",title:"unlink",iconName:"fmt-unlink",cmd:"unlink",text:"link"},{name:"Heading",title:"heading",iconName:"fmt-heading",cmd:"heading",text:"heading"},{name:"Quote",title:"quote",iconName:"fmt-quote",cmd:"quote",text:"quote"}]},ajaxOptions:{headers:{}},focusOnInit:!0,selectionMouse:!0,selectionCopy:!0,selectionCut:!0,selectionPaste:!0,selectionLimitToEditor:!0,enableExternalLinks:!1}}},function(t,e,n){"use strict";var r,i,o=n(0),s=Object.create(null);s.setAttributes=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.html&&(t.innerHTML=o.result(e,"html"),delete e.html),e.text&&(t.textContent=e.text,delete e.text),Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])})),t},s.createElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement(t);return s.setAttributes(n,e),n},s.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},s.remove=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},s.replaceWith=function(t,e){s.remove(e),t.parentNode.replaceChild(e,t)},s.hide=function(t){t.style.display="none"},s.show=function(t){t.style.display=""},s.matches=(r=Element.prototype,i=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=0;e[n]&&e[n]!==this;)n++;return!!e[n]},function(t,e){return i.call(t,e)}),s.getClosest=function(t,e){for(;t&&t!==document.body&&!s.matches(t,e);t=t.parentNode);return t},s.wrap=function(t,e){return e=e||document.createElement("div"),t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),e.appendChild(t)},s.createDocumentFragmentFromString=function(t){var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.childNodes[0];)e.appendChild(n.childNodes[0]);return e},s.createElementFromString=function(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes[0]},t.exports=s},function(t,e,n){"use strict";t.exports=Object.assign({},n(10))},function(t,e,n){t.exports=function(){"use strict";var t=Array.prototype.slice;function e(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function n(t){return s(t)?t:z(t)}function r(t){return a(t)?t:H(t)}function i(t){return c(t)?t:$(t)}function o(t){return s(t)&&!u(t)?t:K(t)}function s(t){return!(!t||!t[f])}function a(t){return!(!t||!t[d])}function c(t){return!(!t||!t[h])}function u(t){return a(t)||c(t)}function l(t){return!(!t||!t[p])}e(r,n),e(i,n),e(o,n),n.isIterable=s,n.isKeyed=a,n.isIndexed=c,n.isAssociative=u,n.isOrdered=l,n.Keyed=r,n.Indexed=i,n.Set=o;var f="@@__IMMUTABLE_ITERABLE__@@",d="@@__IMMUTABLE_KEYED__@@",h="@@__IMMUTABLE_INDEXED__@@",p="@@__IMMUTABLE_ORDERED__@@",v={},m={value:!1},y={value:!1};function g(t){return t.value=!1,t}function b(t){t&&(t.value=!0)}function _(){}function w(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;i<n;i++)r[i]=t[i+e];return r}function k(t){return void 0===t.size&&(t.size=t.__iterate(E)),t.size}function x(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?k(t)+e:e}function E(){return!0}function S(t,e,n){return(0===t||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function T(t,e){return A(t,e,0)}function C(t,e){return A(t,e,e)}function A(t,e,n){return void 0===t?n:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}var I,O,B,L="function"==typeof Symbol&&Symbol.iterator,j=L||"@@iterator";function D(t){this.next=t}function M(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function N(){return{value:void 0,done:!0}}function P(t){return!!F(t)}function U(t){return t&&"function"==typeof t.next}function R(t){var e=F(t);return e&&e.call(t)}function F(t){var e=t&&(L&&t[L]||t["@@iterator"]);if("function"==typeof e)return e}function q(t){return t&&"number"==typeof t.length}function z(t){return null==t?Q():s(t)?t.toSeq():function(t){var e=tt(t)||"object"==typeof t&&new V(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}(t)}function H(t){return null==t?Q().toKeyedSeq():s(t)?a(t)?t.toSeq():t.fromEntrySeq():Y(t)}function $(t){return null==t?Q():s(t)?a(t)?t.entrySeq():t.toIndexedSeq():Z(t)}function K(t){return(null==t?Q():s(t)?a(t)?t.entrySeq():t:Z(t)).toSetSeq()}function W(t){this._array=t,this.size=t.length}function V(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function G(t){this._iterable=t,this.size=t.length||t.size}function J(t){this._iterator=t,this._iteratorCache=[]}function X(t){return!(!t||!t["@@__IMMUTABLE_SEQ__@@"])}function Q(){return I||(I=new W([]))}function Y(t){var e=Array.isArray(t)?new W(t).fromEntrySeq():U(t)?new J(t).fromEntrySeq():P(t)?new G(t).fromEntrySeq():"object"==typeof t?new V(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function Z(t){var e=tt(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function tt(t){return q(t)?new W(t):U(t)?new J(t):P(t)?new G(t):void 0}function et(t,e,n,r){var i=t._cache;if(i){for(var o=i.length-1,s=0;s<=o;s++){var a=i[n?o-s:s];if(!1===e(a[1],r?a[0]:s,t))return s+1}return s}return t.__iterateUncached(e,n)}function nt(t,e,n,r){var i=t._cache;if(i){var o=i.length-1,s=0;return new D((function(){var t=i[n?o-s:s];return s++>o?{value:void 0,done:!0}:M(e,r?t[0]:s-1,t[1])}))}return t.__iteratorUncached(e,n)}function rt(t,e){return e?function t(e,n,r,i){return Array.isArray(n)?e.call(i,r,$(n).map((function(r,i){return t(e,r,i,n)}))):ot(n)?e.call(i,r,H(n).map((function(r,i){return t(e,r,i,n)}))):n}(e,t,"",{"":t}):it(t)}function it(t){return Array.isArray(t)?$(t).map(it).toList():ot(t)?H(t).map(it).toMap():t}function ot(t){return t&&(t.constructor===Object||void 0===t.constructor)}function st(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function at(t,e){if(t===e)return!0;if(!s(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||a(t)!==a(e)||c(t)!==c(e)||l(t)!==l(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!u(t);if(l(t)){var r=t.entries();return e.every((function(t,e){var i=r.next().value;return i&&st(i[1],t)&&(n||st(i[0],e))}))&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var f=!0,d=e.__iterate((function(e,r){if(n?!t.has(e):i?!st(e,t.get(r,v)):!st(t.get(r,v),e))return f=!1,!1}));return f&&t.size===d}function ct(t,e){if(!(this instanceof ct))return new ct(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(O)return O;O=this}}function ut(t,e){if(!t)throw new Error(e)}function lt(t,e,n){if(!(this instanceof lt))return new lt(t,e,n);if(ut(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),e<t&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(B)return B;B=this}}function ft(){throw TypeError("Abstract")}function dt(){}function ht(){}function pt(){}D.prototype.toString=function(){return"[Iterator]"},D.KEYS=0,D.VALUES=1,D.ENTRIES=2,D.prototype.inspect=D.prototype.toSource=function(){return this.toString()},D.prototype[j]=function(){return this},e(z,n),z.of=function(){return z(arguments)},z.prototype.toSeq=function(){return this},z.prototype.toString=function(){return this.__toString("Seq {","}")},z.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},z.prototype.__iterate=function(t,e){return et(this,t,e,!0)},z.prototype.__iterator=function(t,e){return nt(this,t,e,!0)},e(H,z),H.prototype.toKeyedSeq=function(){return this},e($,z),$.of=function(){return $(arguments)},$.prototype.toIndexedSeq=function(){return this},$.prototype.toString=function(){return this.__toString("Seq [","]")},$.prototype.__iterate=function(t,e){return et(this,t,e,!1)},$.prototype.__iterator=function(t,e){return nt(this,t,e,!1)},e(K,z),K.of=function(){return K(arguments)},K.prototype.toSetSeq=function(){return this},z.isSeq=X,z.Keyed=H,z.Set=K,z.Indexed=$,z.prototype["@@__IMMUTABLE_SEQ__@@"]=!0,e(W,$),W.prototype.get=function(t,e){return this.has(t)?this._array[x(this,t)]:e},W.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length-1,i=0;i<=r;i++)if(!1===t(n[e?r-i:i],i,this))return i+1;return i},W.prototype.__iterator=function(t,e){var n=this._array,r=n.length-1,i=0;return new D((function(){return i>r?{value:void 0,done:!0}:M(t,i,n[e?r-i++:i++])}))},e(V,H),V.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},V.prototype.has=function(t){return this._object.hasOwnProperty(t)},V.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length-1,o=0;o<=i;o++){var s=r[e?i-o:o];if(!1===t(n[s],s,this))return o+1}return o},V.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length-1,o=0;return new D((function(){var s=r[e?i-o:o];return o++>i?{value:void 0,done:!0}:M(t,s,n[s])}))},V.prototype[p]=!0,e(G,$),G.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=R(this._iterable),r=0;if(U(n))for(var i;!(i=n.next()).done&&!1!==t(i.value,r++,this););return r},G.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=R(this._iterable);if(!U(n))return new D(N);var r=0;return new D((function(){var e=n.next();return e.done?e:M(t,r++,e.value)}))},e(J,$),J.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n,r=this._iterator,i=this._iteratorCache,o=0;o<i.length;)if(!1===t(i[o],o++,this))return o;for(;!(n=r.next()).done;){var s=n.value;if(i[o]=s,!1===t(s,o++,this))break}return o},J.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,i=0;return new D((function(){if(i>=r.length){var e=n.next();if(e.done)return e;r[i]=e.value}return M(t,i,r[i++])}))},e(ct,$),ct.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},ct.prototype.get=function(t,e){return this.has(t)?this._value:e},ct.prototype.includes=function(t){return st(this._value,t)},ct.prototype.slice=function(t,e){var n=this.size;return S(t,e,n)?this:new ct(this._value,C(e,n)-T(t,n))},ct.prototype.reverse=function(){return this},ct.prototype.indexOf=function(t){return st(this._value,t)?0:-1},ct.prototype.lastIndexOf=function(t){return st(this._value,t)?this.size:-1},ct.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(!1===t(this._value,n,this))return n+1;return n},ct.prototype.__iterator=function(t,e){var n=this,r=0;return new D((function(){return r<n.size?M(t,r++,n._value):{value:void 0,done:!0}}))},ct.prototype.equals=function(t){return t instanceof ct?st(this._value,t._value):at(t)},e(lt,$),lt.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},lt.prototype.get=function(t,e){return this.has(t)?this._start+x(this,t)*this._step:e},lt.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},lt.prototype.slice=function(t,e){return S(t,e,this.size)?this:(t=T(t,this.size),(e=C(e,this.size))<=t?new lt(0,0):new lt(this.get(t,this._end),this.get(e,this._end),this._step))},lt.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},lt.prototype.lastIndexOf=function(t){return this.indexOf(t)},lt.prototype.__iterate=function(t,e){for(var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;o<=n;o++){if(!1===t(i,o,this))return o+1;i+=e?-r:r}return o},lt.prototype.__iterator=function(t,e){var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;return new D((function(){var s=i;return i+=e?-r:r,o>n?{value:void 0,done:!0}:M(t,o++,s)}))},lt.prototype.equals=function(t){return t instanceof lt?this._start===t._start&&this._end===t._end&&this._step===t._step:at(this,t)},e(ft,n),e(dt,ft),e(ht,ft),e(pt,ft),ft.Keyed=dt,ft.Indexed=ht,ft.Set=pt;var vt="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),r=65535&(e|=0);return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0};function mt(t){return t>>>1&1073741824|3221225471&t}function yt(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!=t||t===1/0)return 0;var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)n^=t/=4294967295;return mt(n)}if("string"===e)return t.length>St?function(t){var e=At[t];return void 0===e&&(e=gt(t),Ct===Tt&&(Ct=0,At={}),Ct++,At[t]=e),e}(t):gt(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return function(t){var e;if(kt&&void 0!==(e=bt.get(t)))return e;if(void 0!==(e=t[Et]))return e;if(!wt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Et]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=++xt,1073741824&xt&&(xt=0),kt)bt.set(t,e);else{if(void 0!==_t&&!1===_t(t))throw new Error("Non-extensible objects are not allowed as keys.");if(wt)Object.defineProperty(t,Et,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Et]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Et]=e}}return e}(t);if("function"==typeof t.toString)return gt(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function gt(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return mt(e)}var bt,_t=Object.isExtensible,wt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),kt="function"==typeof WeakMap;kt&&(bt=new WeakMap);var xt=0,Et="__immutablehash__";"function"==typeof Symbol&&(Et=Symbol(Et));var St=16,Tt=255,Ct=0,At={};function It(t){ut(t!==1/0,"Cannot perform this action with an infinite size.")}function Ot(t){return null==t?$t():Bt(t)&&!l(t)?t:$t().withMutations((function(e){var n=r(t);It(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}function Bt(t){return!(!t||!t[jt])}e(Ot,dt),Ot.of=function(){var e=t.call(arguments,0);return $t().withMutations((function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}}))},Ot.prototype.toString=function(){return this.__toString("Map {","}")},Ot.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},Ot.prototype.set=function(t,e){return Kt(this,t,e)},Ot.prototype.setIn=function(t,e){return this.updateIn(t,v,(function(){return e}))},Ot.prototype.remove=function(t){return Kt(this,t,v)},Ot.prototype.deleteIn=function(t){return this.updateIn(t,(function(){return v}))},Ot.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},Ot.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var r=function t(e,n,r,i){var o=e===v,s=n.next();if(s.done){var a=o?r:e,c=i(a);return c===a?e:c}ut(o||e&&e.set,"invalid keyPath");var u=s.value,l=o?v:e.get(u,v),f=t(l,n,r,i);return f===l?e:f===v?e.remove(u):(o?$t():e).set(u,f)}(this,Je(t),e,n);return r===v?void 0:r},Ot.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):$t()},Ot.prototype.merge=function(){return Jt(this,void 0,arguments)},Ot.prototype.mergeWith=function(e){var n=t.call(arguments,1);return Jt(this,e,n)},Ot.prototype.mergeIn=function(e){var n=t.call(arguments,1);return this.updateIn(e,$t(),(function(t){return"function"==typeof t.merge?t.merge.apply(t,n):n[n.length-1]}))},Ot.prototype.mergeDeep=function(){return Jt(this,Xt,arguments)},Ot.prototype.mergeDeepWith=function(e){var n=t.call(arguments,1);return Jt(this,Qt(e),n)},Ot.prototype.mergeDeepIn=function(e){var n=t.call(arguments,1);return this.updateIn(e,$t(),(function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,n):n[n.length-1]}))},Ot.prototype.sort=function(t){return we(Ue(this,t))},Ot.prototype.sortBy=function(t,e){return we(Ue(this,e,t))},Ot.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},Ot.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new _)},Ot.prototype.asImmutable=function(){return this.__ensureOwner()},Ot.prototype.wasAltered=function(){return this.__altered},Ot.prototype.__iterator=function(t,e){return new Ft(this,t,e)},Ot.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate((function(e){return r++,t(e[1],e[0],n)}),e),r},Ot.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ht(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Ot.isMap=Bt;var Lt,jt="@@__IMMUTABLE_MAP__@@",Dt=Ot.prototype;function Mt(t,e){this.ownerID=t,this.entries=e}function Nt(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function Pt(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function Ut(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function Rt(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function Ft(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&zt(t._root)}function qt(t,e){return M(t,e[0],e[1])}function zt(t,e){return{node:t,index:0,__prev:e}}function Ht(t,e,n,r){var i=Object.create(Dt);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function $t(){return Lt||(Lt=Ht(0))}function Kt(t,e,n){var r,i;if(t._root){var o=g(m),s=g(y);if(r=Wt(t._root,t.__ownerID,0,void 0,e,n,o,s),!s.value)return t;i=t.size+(o.value?n===v?-1:1:0)}else{if(n===v)return t;i=1,r=new Mt(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=i,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?Ht(i,r):$t()}function Wt(t,e,n,r,i,o,s,a){return t?t.update(e,n,r,i,o,s,a):o===v?t:(b(a),b(s),new Rt(e,r,[i,o]))}function Vt(t){return t.constructor===Rt||t.constructor===Ut}function Gt(t,e,n,r,i){if(t.keyHash===r)return new Ut(e,r,[t.entry,i]);var o,s=31&(0===n?t.keyHash:t.keyHash>>>n),a=31&(0===n?r:r>>>n);return new Nt(e,1<<s|1<<a,s===a?[Gt(t,e,n+5,r,i)]:(o=new Rt(e,r,i),s<a?[t,o]:[o,t]))}function Jt(t,e,n){for(var i=[],o=0;o<n.length;o++){var a=n[o],c=r(a);s(a)||(c=c.map((function(t){return rt(t)}))),i.push(c)}return Yt(t,e,i)}function Xt(t,e,n){return t&&t.mergeDeep&&s(e)?t.mergeDeep(e):st(t,e)?t:e}function Qt(t){return function(e,n,r){if(e&&e.mergeDeepWith&&s(n))return e.mergeDeepWith(t,n);var i=t(e,n,r);return st(e,i)?e:i}}function Yt(t,e,n){return 0===(n=n.filter((function(t){return 0!==t.size}))).length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations((function(t){for(var r=e?function(n,r){t.update(r,v,(function(t){return t===v?n:e(t,n,r)}))}:function(e,n){t.set(n,e)},i=0;i<n.length;i++)n[i].forEach(r)})):t.constructor(n[0])}function Zt(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function te(t,e,n,r){var i=r?t:w(t);return i[e]=n,i}Dt[jt]=!0,Dt.delete=Dt.remove,Dt.removeIn=Dt.deleteIn,Mt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(st(n,i[o][0]))return i[o][1];return r},Mt.prototype.update=function(t,e,n,r,i,o,s){for(var a=i===v,c=this.entries,u=0,l=c.length;u<l&&!st(r,c[u][0]);u++);var f=u<l;if(f?c[u][1]===i:a)return this;if(b(s),(a||!f)&&b(o),!a||1!==c.length){if(!f&&!a&&c.length>=ee)return function(t,e,n,r){t||(t=new _);for(var i=new Rt(t,yt(n),[n,r]),o=0;o<e.length;o++){var s=e[o];i=i.update(t,0,void 0,s[0],s[1])}return i}(t,c,r,i);var d=t&&t===this.ownerID,h=d?c:w(c);return f?a?u===l-1?h.pop():h[u]=h.pop():h[u]=[r,i]:h.push([r,i]),d?(this.entries=h,this):new Mt(t,h)}},Nt.prototype.get=function(t,e,n,r){void 0===e&&(e=yt(n));var i=1<<(31&(0===t?e:e>>>t)),o=this.bitmap;return 0==(o&i)?r:this.nodes[Zt(o&i-1)].get(t+5,e,n,r)},Nt.prototype.update=function(t,e,n,r,i,o,s){void 0===n&&(n=yt(r));var a=31&(0===e?n:n>>>e),c=1<<a,u=this.bitmap,l=0!=(u&c);if(!l&&i===v)return this;var f=Zt(u&c-1),d=this.nodes,h=l?d[f]:void 0,p=Wt(h,t,e+5,n,r,i,o,s);if(p===h)return this;if(!l&&p&&d.length>=ne)return function(t,e,n,r,i){for(var o=0,s=new Array(32),a=0;0!==n;a++,n>>>=1)s[a]=1&n?e[o++]:void 0;return s[r]=i,new Pt(t,o+1,s)}(t,d,u,a,p);if(l&&!p&&2===d.length&&Vt(d[1^f]))return d[1^f];if(l&&p&&1===d.length&&Vt(p))return p;var m=t&&t===this.ownerID,y=l?p?u:u^c:u|c,g=l?p?te(d,f,p,m):function(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,s=0;s<r;s++)s===e&&(o=1),i[s]=t[s+o];return i}(d,f,m):function(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),s=0,a=0;a<i;a++)a===e?(o[a]=n,s=-1):o[a]=t[a+s];return o}(d,f,p,m);return m?(this.bitmap=y,this.nodes=g,this):new Nt(t,y,g)},Pt.prototype.get=function(t,e,n,r){void 0===e&&(e=yt(n));var i=31&(0===t?e:e>>>t),o=this.nodes[i];return o?o.get(t+5,e,n,r):r},Pt.prototype.update=function(t,e,n,r,i,o,s){void 0===n&&(n=yt(r));var a=31&(0===e?n:n>>>e),c=i===v,u=this.nodes,l=u[a];if(c&&!l)return this;var f=Wt(l,t,e+5,n,r,i,o,s);if(f===l)return this;var d=this.count;if(l){if(!f&&--d<re)return function(t,e,n,r){for(var i=0,o=0,s=new Array(n),a=0,c=1,u=e.length;a<u;a++,c<<=1){var l=e[a];void 0!==l&&a!==r&&(i|=c,s[o++]=l)}return new Nt(t,i,s)}(t,u,d,a)}else d++;var h=t&&t===this.ownerID,p=te(u,a,f,h);return h?(this.count=d,this.nodes=p,this):new Pt(t,d,p)},Ut.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(st(n,i[o][0]))return i[o][1];return r},Ut.prototype.update=function(t,e,n,r,i,o,s){void 0===n&&(n=yt(r));var a=i===v;if(n!==this.keyHash)return a?this:(b(s),b(o),Gt(this,t,e,n,[r,i]));for(var c=this.entries,u=0,l=c.length;u<l&&!st(r,c[u][0]);u++);var f=u<l;if(f?c[u][1]===i:a)return this;if(b(s),(a||!f)&&b(o),a&&2===l)return new Rt(t,this.keyHash,c[1^u]);var d=t&&t===this.ownerID,h=d?c:w(c);return f?a?u===l-1?h.pop():h[u]=h.pop():h[u]=[r,i]:h.push([r,i]),d?(this.entries=h,this):new Ut(t,this.keyHash,h)},Rt.prototype.get=function(t,e,n,r){return st(n,this.entry[0])?this.entry[1]:r},Rt.prototype.update=function(t,e,n,r,i,o,s){var a=i===v,c=st(r,this.entry[0]);return(c?i===this.entry[1]:a)?this:(b(s),a?void b(o):c?t&&t===this.ownerID?(this.entry[1]=i,this):new Rt(t,this.keyHash,[r,i]):(b(o),Gt(this,t,e,yt(r),[r,i])))},Mt.prototype.iterate=Ut.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===t(n[e?i-r:r]))return!1},Nt.prototype.iterate=Pt.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[e?i-r:r];if(o&&!1===o.iterate(t,e))return!1}},Rt.prototype.iterate=function(t,e){return t(this.entry)},e(Ft,D),Ft.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,r=e.node,i=e.index++;if(r.entry){if(0===i)return qt(t,r.entry)}else if(r.entries){if(i<=(n=r.entries.length-1))return qt(t,r.entries[this._reverse?n-i:i])}else if(i<=(n=r.nodes.length-1)){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return qt(t,o.entry);e=this._stack=zt(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var ee=8,ne=16,re=8;function ie(t){var e=pe();if(null==t)return e;if(oe(t))return t;var n=i(t),r=n.size;return 0===r?e:(It(r),r>0&&r<32?he(0,r,5,null,new ce(n.toArray())):e.withMutations((function(t){t.setSize(r),n.forEach((function(e,n){return t.set(n,e)}))})))}function oe(t){return!(!t||!t[se])}e(ie,ht),ie.of=function(){return this(arguments)},ie.prototype.toString=function(){return this.__toString("List [","]")},ie.prototype.get=function(t,e){if((t=x(this,t))>=0&&t<this.size){var n=ye(this,t+=this._origin);return n&&n.array[31&t]}return e},ie.prototype.set=function(t,e){return function(t,e,n){if((e=x(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?ge(t,e).set(0,n):ge(t,0,e+1).set(e,n)}));e+=t._origin;var r=t._tail,i=t._root,o=g(y);return e>=_e(t._capacity)?r=ve(r,t.__ownerID,0,e,n,o):i=ve(i,t.__ownerID,t._level,e,n,o),o.value?t.__ownerID?(t._root=i,t._tail=r,t.__hash=void 0,t.__altered=!0,t):he(t._origin,t._capacity,t._level,i,r):t}(this,t,e)},ie.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},ie.prototype.insert=function(t,e){return this.splice(t,0,e)},ie.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):pe()},ie.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(n){ge(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])}))},ie.prototype.pop=function(){return ge(this,0,-1)},ie.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){ge(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])}))},ie.prototype.shift=function(){return ge(this,1)},ie.prototype.merge=function(){return be(this,void 0,arguments)},ie.prototype.mergeWith=function(e){var n=t.call(arguments,1);return be(this,e,n)},ie.prototype.mergeDeep=function(){return be(this,Xt,arguments)},ie.prototype.mergeDeepWith=function(e){var n=t.call(arguments,1);return be(this,Qt(e),n)},ie.prototype.setSize=function(t){return ge(this,0,t)},ie.prototype.slice=function(t,e){var n=this.size;return S(t,e,n)?this:ge(this,T(t,n),C(e,n))},ie.prototype.__iterator=function(t,e){var n=0,r=de(this,e);return new D((function(){var e=r();return e===fe?{value:void 0,done:!0}:M(t,n++,e)}))},ie.prototype.__iterate=function(t,e){for(var n,r=0,i=de(this,e);(n=i())!==fe&&!1!==t(n,r++,this););return r},ie.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?he(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},ie.isList=oe;var se="@@__IMMUTABLE_LIST__@@",ae=ie.prototype;function ce(t,e){this.array=t,this.ownerID=e}ae[se]=!0,ae.delete=ae.remove,ae.setIn=Dt.setIn,ae.deleteIn=ae.removeIn=Dt.removeIn,ae.update=Dt.update,ae.updateIn=Dt.updateIn,ae.mergeIn=Dt.mergeIn,ae.mergeDeepIn=Dt.mergeDeepIn,ae.withMutations=Dt.withMutations,ae.asMutable=Dt.asMutable,ae.asImmutable=Dt.asImmutable,ae.wasAltered=Dt.wasAltered,ce.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&31;if(r>=this.array.length)return new ce([],t);var i,o=0===r;if(e>0){var s=this.array[r];if((i=s&&s.removeBefore(t,e-5,n))===s&&o)return this}if(o&&!i)return this;var a=me(this,t);if(!o)for(var c=0;c<r;c++)a.array[c]=void 0;return i&&(a.array[r]=i),a},ce.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r,i=n-1>>>e&31;if(i>=this.array.length)return this;if(e>0){var o=this.array[i];if((r=o&&o.removeAfter(t,e-5,n))===o&&i===this.array.length-1)return this}var s=me(this,t);return s.array.splice(i+1),r&&(s.array[i]=r),s};var ue,le,fe={};function de(t,e){var n=t._origin,r=t._capacity,i=_e(r),o=t._tail;return s(t._root,t._level,0);function s(t,a,c){return 0===a?function(t,s){var a=s===i?o&&o.array:t&&t.array,c=s>n?0:n-s,u=r-s;return u>32&&(u=32),function(){if(c===u)return fe;var t=e?--u:c++;return a&&a[t]}}(t,c):function(t,i,o){var a,c=t&&t.array,u=o>n?0:n-o>>i,l=1+(r-o>>i);return l>32&&(l=32),function(){for(;;){if(a){var t=a();if(t!==fe)return t;a=null}if(u===l)return fe;var n=e?--l:u++;a=s(c&&c[n],i-5,o+(n<<i))}}}(t,a,c)}}function he(t,e,n,r,i,o,s){var a=Object.create(ae);return a.size=e-t,a._origin=t,a._capacity=e,a._level=n,a._root=r,a._tail=i,a.__ownerID=o,a.__hash=s,a.__altered=!1,a}function pe(){return ue||(ue=he(0,0,5))}function ve(t,e,n,r,i,o){var s,a=r>>>n&31,c=t&&a<t.array.length;if(!c&&void 0===i)return t;if(n>0){var u=t&&t.array[a],l=ve(u,e,n-5,r,i,o);return l===u?t:((s=me(t,e)).array[a]=l,s)}return c&&t.array[a]===i?t:(b(o),s=me(t,e),void 0===i&&a===s.array.length-1?s.array.pop():s.array[a]=i,s)}function me(t,e){return e&&t&&e===t.ownerID?t:new ce(t?t.array.slice():[],e)}function ye(t,e){if(e>=_e(t._capacity))return t._tail;if(e<1<<t._level+5){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&31],r-=5;return n}}function ge(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new _,i=t._origin,o=t._capacity,s=i+e,a=void 0===n?o:n<0?o+n:i+n;if(s===i&&a===o)return t;if(s>=a)return t.clear();for(var c=t._level,u=t._root,l=0;s+l<0;)u=new ce(u&&u.array.length?[void 0,u]:[],r),l+=1<<(c+=5);l&&(s+=l,i+=l,a+=l,o+=l);for(var f=_e(o),d=_e(a);d>=1<<c+5;)u=new ce(u&&u.array.length?[u]:[],r),c+=5;var h=t._tail,p=d<f?ye(t,a-1):d>f?new ce([],r):h;if(h&&d>f&&s<o&&h.array.length){for(var v=u=me(u,r),m=c;m>5;m-=5){var y=f>>>m&31;v=v.array[y]=me(v.array[y],r)}v.array[f>>>5&31]=h}if(a<o&&(p=p&&p.removeAfter(r,0,a)),s>=d)s-=d,a-=d,c=5,u=null,p=p&&p.removeBefore(r,0,s);else if(s>i||d<f){for(l=0;u;){var g=s>>>c&31;if(g!==d>>>c&31)break;g&&(l+=(1<<c)*g),c-=5,u=u.array[g]}u&&s>i&&(u=u.removeBefore(r,c,s-l)),u&&d<f&&(u=u.removeAfter(r,c,d-l)),l&&(s-=l,a-=l)}return t.__ownerID?(t.size=a-s,t._origin=s,t._capacity=a,t._level=c,t._root=u,t._tail=p,t.__hash=void 0,t.__altered=!0,t):he(s,a,c,u,p)}function be(t,e,n){for(var r=[],o=0,a=0;a<n.length;a++){var c=n[a],u=i(c);u.size>o&&(o=u.size),s(c)||(u=u.map((function(t){return rt(t)}))),r.push(u)}return o>t.size&&(t=t.setSize(o)),Yt(t,e,r)}function _e(t){return t<32?0:t-1>>>5<<5}function we(t){return null==t?Ee():ke(t)?t:Ee().withMutations((function(e){var n=r(t);It(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}function ke(t){return Bt(t)&&l(t)}function xe(t,e,n,r){var i=Object.create(we.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function Ee(){return le||(le=xe($t(),pe()))}function Se(t,e,n){var r,i,o=t._map,s=t._list,a=o.get(e),c=void 0!==a;if(n===v){if(!c)return t;s.size>=32&&s.size>=2*o.size?(r=(i=s.filter((function(t,e){return void 0!==t&&a!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=a===s.size-1?s.pop():s.set(a,void 0))}else if(c){if(n===s.get(a)[1])return t;r=o,i=s.set(a,[e,n])}else r=o.set(e,s.size),i=s.set(s.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t):xe(r,i)}function Te(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function Ce(t){this._iter=t,this.size=t.size}function Ae(t){this._iter=t,this.size=t.size}function Ie(t){this._iter=t,this.size=t.size}function Oe(t){var e=We(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Ve,e.__iterateUncached=function(e,n){var r=this;return t.__iterate((function(t,n){return!1!==e(n,t,r)}),n)},e.__iteratorUncached=function(e,n){if(2===e){var r=t.__iterator(e,n);return new D((function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(1===e?0:1,n)},e}function Be(t,e,n){var r=We(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,v);return o===v?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate((function(t,i,s){return!1!==r(e.call(n,t,i,s),i,o)}),i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(2,i);return new D((function(){var i=o.next();if(i.done)return i;var s=i.value,a=s[0];return M(r,a,e.call(n,s[1],a,t),i)}))},r}function Le(t,e){var n=We(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=Oe(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,r){return t.get(e?n:-1-n,r)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=Ve,n.__iterate=function(e,n){var r=this;return t.__iterate((function(t,n){return e(t,n,r)}),!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function je(t,e,n,r){var i=We(t);return r&&(i.has=function(r){var i=t.get(r,v);return i!==v&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,v);return o!==v&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var s=this,a=0;return t.__iterate((function(t,o,c){if(e.call(n,t,o,c))return a++,i(t,r?o:a-1,s)}),o),a},i.__iteratorUncached=function(i,o){var s=t.__iterator(2,o),a=0;return new D((function(){for(;;){var o=s.next();if(o.done)return o;var c=o.value,u=c[0],l=c[1];if(e.call(n,l,u,t))return M(i,r?u:a++,l,o)}}))},i}function De(t,e,n,r){var i=t.size;if(void 0!==e&&(e|=0),void 0!==n&&(n===1/0?n=i:n|=0),S(e,n,i))return t;var o=T(e,i),s=C(n,i);if(o!=o||s!=s)return De(t.toSeq().cacheResult(),e,n,r);var a,c=s-o;c==c&&(a=c<0?0:c);var u=We(t);return u.size=0===a?a:t.size&&a||void 0,!r&&X(t)&&a>=0&&(u.get=function(e,n){return(e=x(this,e))>=0&&e<a?t.get(e+o,n):n}),u.__iterateUncached=function(e,n){var i=this;if(0===a)return 0;if(n)return this.cacheResult().__iterate(e,n);var s=0,c=!0,u=0;return t.__iterate((function(t,n){if(!c||!(c=s++<o))return u++,!1!==e(t,r?n:u-1,i)&&u!==a})),u},u.__iteratorUncached=function(e,n){if(0!==a&&n)return this.cacheResult().__iterator(e,n);var i=0!==a&&t.__iterator(e,n),s=0,c=0;return new D((function(){for(;s++<o;)i.next();if(++c>a)return{value:void 0,done:!0};var t=i.next();return r||1===e?t:M(e,c-1,0===e?void 0:t.value[1],t)}))},u}function Me(t,e,n,r){var i=We(t);return i.__iterateUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterate(i,o);var a=!0,c=0;return t.__iterate((function(t,o,u){if(!a||!(a=e.call(n,t,o,u)))return c++,i(t,r?o:c-1,s)})),c},i.__iteratorUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterator(i,o);var a=t.__iterator(2,o),c=!0,u=0;return new D((function(){var t,o,l;do{if((t=a.next()).done)return r||1===i?t:M(i,u++,0===i?void 0:t.value[1],t);var f=t.value;o=f[0],l=f[1],c&&(c=e.call(n,l,o,s))}while(c);return 2===i?t:M(i,o,l,t)}))},i}function Ne(t,e){var n=a(t),i=[t].concat(e).map((function(t){return s(t)?n&&(t=r(t)):t=n?Y(t):Z(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===i.length)return t;if(1===i.length){var o=i[0];if(o===t||n&&a(o)||c(t)&&c(o))return o}var u=new W(i);return n?u=u.toKeyedSeq():c(t)||(u=u.toSetSeq()),(u=u.flatten(!0)).size=i.reduce((function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}}),0),u}function Pe(t,e,n){var r=We(t);return r.__iterateUncached=function(r,i){var o=0,a=!1;return function t(c,u){var l=this;c.__iterate((function(i,c){return(!e||u<e)&&s(i)?t(i,u+1):!1===r(i,n?c:o++,l)&&(a=!0),!a}),i)}(t,0),o},r.__iteratorUncached=function(r,i){var o=t.__iterator(r,i),a=[],c=0;return new D((function(){for(;o;){var t=o.next();if(!1===t.done){var u=t.value;if(2===r&&(u=u[1]),e&&!(a.length<e)||!s(u))return n?t:M(r,c++,u,t);a.push(o),o=u.__iterator(r,i)}else o=a.pop()}return{value:void 0,done:!0}}))},r}function Ue(t,e,n){e||(e=Ge);var r=a(t),i=0,o=t.toSeq().map((function(e,r){return[r,e,i++,n?n(e,r,t):e]})).toArray();return o.sort((function(t,n){return e(t[3],n[3])||t[2]-n[2]})).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?H(o):c(t)?$(o):K(o)}function Re(t,e,n){if(e||(e=Ge),n){var r=t.toSeq().map((function(e,r){return[e,n(e,r,t)]})).reduce((function(t,n){return Fe(e,t[1],n[1])?n:t}));return r&&r[0]}return t.reduce((function(t,n){return Fe(e,t,n)?n:t}))}function Fe(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(null==n||n!=n)||r>0}function qe(t,e,r){var i=We(t);return i.size=new W(r).map((function(t){return t.size})).min(),i.__iterate=function(t,e){for(var n,r=this.__iterator(1,e),i=0;!(n=r.next()).done&&!1!==t(n.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=r.map((function(t){return t=n(t),R(i?t.reverse():t)})),s=0,a=!1;return new D((function(){var n;return a||(n=o.map((function(t){return t.next()})),a=n.some((function(t){return t.done}))),a?{value:void 0,done:!0}:M(t,s++,e.apply(null,n.map((function(t){return t.value}))))}))},i}function ze(t,e){return X(t)?e:t.constructor(e)}function He(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function $e(t){return It(t.size),k(t)}function Ke(t){return a(t)?r:c(t)?i:o}function We(t){return Object.create((a(t)?H:c(t)?$:K).prototype)}function Ve(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):z.prototype.cacheResult.call(this)}function Ge(t,e){return t>e?1:t<e?-1:0}function Je(t){var e=R(t);if(!e){if(!q(t))throw new TypeError("Expected iterable or array-like: "+t);e=R(n(t))}return e}function Xe(t,e){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var s=Object.keys(t);!function(t,e){try{e.forEach(tn.bind(void 0,t))}catch(t){}}(i,s),i.size=s.length,i._name=e,i._keys=s,i._defaultValues=t}this._map=Ot(o)},i=r.prototype=Object.create(Qe);return i.constructor=r,r}e(we,Ot),we.of=function(){return this(arguments)},we.prototype.toString=function(){return this.__toString("OrderedMap {","}")},we.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},we.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ee()},we.prototype.set=function(t,e){return Se(this,t,e)},we.prototype.remove=function(t){return Se(this,t,v)},we.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},we.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],n)}),e)},we.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},we.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?xe(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},we.isOrderedMap=ke,we.prototype[p]=!0,we.prototype.delete=we.prototype.remove,e(Te,H),Te.prototype.get=function(t,e){return this._iter.get(t,e)},Te.prototype.has=function(t){return this._iter.has(t)},Te.prototype.valueSeq=function(){return this._iter.valueSeq()},Te.prototype.reverse=function(){var t=this,e=Le(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},Te.prototype.map=function(t,e){var n=this,r=Be(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},Te.prototype.__iterate=function(t,e){var n,r=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?$e(this):0,function(i){return t(i,e?--n:n++,r)}),e)},Te.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(1,e),r=e?$e(this):0;return new D((function(){var i=n.next();return i.done?i:M(t,e?--r:r++,i.value,i)}))},Te.prototype[p]=!0,e(Ce,$),Ce.prototype.includes=function(t){return this._iter.includes(t)},Ce.prototype.__iterate=function(t,e){var n=this,r=0;return this._iter.__iterate((function(e){return t(e,r++,n)}),e)},Ce.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e),r=0;return new D((function(){var e=n.next();return e.done?e:M(t,r++,e.value,e)}))},e(Ae,K),Ae.prototype.has=function(t){return this._iter.includes(t)},Ae.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){return t(e,e,n)}),e)},Ae.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e);return new D((function(){var e=n.next();return e.done?e:M(t,e.value,e.value,e)}))},e(Ie,H),Ie.prototype.entrySeq=function(){return this._iter.toSeq()},Ie.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){if(e){He(e);var r=s(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}}),e)},Ie.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e);return new D((function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){He(r);var i=s(r);return M(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}}))},Ce.prototype.cacheResult=Te.prototype.cacheResult=Ae.prototype.cacheResult=Ie.prototype.cacheResult=Ve,e(Xe,dt),Xe.prototype.toString=function(){return this.__toString(Ze(this)+" {","}")},Xe.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Xe.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},Xe.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=Ye(this,$t()))},Xe.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Ze(this));if(this._map&&!this._map.has(t)&&e===this._defaultValues[t])return this;var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:Ye(this,n)},Xe.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:Ye(this,e)},Xe.prototype.wasAltered=function(){return this._map.wasAltered()},Xe.prototype.__iterator=function(t,e){var n=this;return r(this._defaultValues).map((function(t,e){return n.get(e)})).__iterator(t,e)},Xe.prototype.__iterate=function(t,e){var n=this;return r(this._defaultValues).map((function(t,e){return n.get(e)})).__iterate(t,e)},Xe.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?Ye(this,e,t):(this.__ownerID=t,this._map=e,this)};var Qe=Xe.prototype;function Ye(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._map=e,r.__ownerID=n,r}function Ze(t){return t._name||t.constructor.name||"Record"}function tn(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){ut(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function en(t){return null==t?un():nn(t)&&!l(t)?t:un().withMutations((function(e){var n=o(t);It(n.size),n.forEach((function(t){return e.add(t)}))}))}function nn(t){return!(!t||!t[on])}Qe.delete=Qe.remove,Qe.deleteIn=Qe.removeIn=Dt.removeIn,Qe.merge=Dt.merge,Qe.mergeWith=Dt.mergeWith,Qe.mergeIn=Dt.mergeIn,Qe.mergeDeep=Dt.mergeDeep,Qe.mergeDeepWith=Dt.mergeDeepWith,Qe.mergeDeepIn=Dt.mergeDeepIn,Qe.setIn=Dt.setIn,Qe.update=Dt.update,Qe.updateIn=Dt.updateIn,Qe.withMutations=Dt.withMutations,Qe.asMutable=Dt.asMutable,Qe.asImmutable=Dt.asImmutable,e(en,pt),en.of=function(){return this(arguments)},en.fromKeys=function(t){return this(r(t).keySeq())},en.prototype.toString=function(){return this.__toString("Set {","}")},en.prototype.has=function(t){return this._map.has(t)},en.prototype.add=function(t){return an(this,this._map.set(t,!0))},en.prototype.remove=function(t){return an(this,this._map.remove(t))},en.prototype.clear=function(){return an(this,this._map.clear())},en.prototype.union=function(){var e=t.call(arguments,0);return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(t){for(var n=0;n<e.length;n++)o(e[n]).forEach((function(e){return t.add(e)}))})):this.constructor(e[0])},en.prototype.intersect=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return o(t)}));var n=this;return this.withMutations((function(t){n.forEach((function(n){e.every((function(t){return t.includes(n)}))||t.remove(n)}))}))},en.prototype.subtract=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return o(t)}));var n=this;return this.withMutations((function(t){n.forEach((function(n){e.some((function(t){return t.includes(n)}))&&t.remove(n)}))}))},en.prototype.merge=function(){return this.union.apply(this,arguments)},en.prototype.mergeWith=function(e){var n=t.call(arguments,1);return this.union.apply(this,n)},en.prototype.sort=function(t){return ln(Ue(this,t))},en.prototype.sortBy=function(t,e){return ln(Ue(this,e,t))},en.prototype.wasAltered=function(){return this._map.wasAltered()},en.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate((function(e,r){return t(r,r,n)}),e)},en.prototype.__iterator=function(t,e){return this._map.map((function(t,e){return e})).__iterator(t,e)},en.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},en.isSet=nn;var rn,on="@@__IMMUTABLE_SET__@@",sn=en.prototype;function an(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function cn(t,e){var n=Object.create(sn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function un(){return rn||(rn=cn($t()))}function ln(t){return null==t?vn():fn(t)?t:vn().withMutations((function(e){var n=o(t);It(n.size),n.forEach((function(t){return e.add(t)}))}))}function fn(t){return nn(t)&&l(t)}sn[on]=!0,sn.delete=sn.remove,sn.mergeDeep=sn.merge,sn.mergeDeepWith=sn.mergeWith,sn.withMutations=Dt.withMutations,sn.asMutable=Dt.asMutable,sn.asImmutable=Dt.asImmutable,sn.__empty=un,sn.__make=cn,e(ln,en),ln.of=function(){return this(arguments)},ln.fromKeys=function(t){return this(r(t).keySeq())},ln.prototype.toString=function(){return this.__toString("OrderedSet {","}")},ln.isOrderedSet=fn;var dn,hn=ln.prototype;function pn(t,e){var n=Object.create(hn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function vn(){return dn||(dn=pn(Ee()))}function mn(t){return null==t?kn():yn(t)?t:kn().unshiftAll(t)}function yn(t){return!(!t||!t[bn])}hn[p]=!0,hn.__empty=vn,hn.__make=pn,e(mn,ht),mn.of=function(){return this(arguments)},mn.prototype.toString=function(){return this.__toString("Stack [","]")},mn.prototype.get=function(t,e){var n=this._head;for(t=x(this,t);n&&t--;)n=n.next;return n?n.value:e},mn.prototype.peek=function(){return this._head&&this._head.value},mn.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):wn(t,e)},mn.prototype.pushAll=function(t){if(0===(t=i(t)).size)return this;It(t.size);var e=this.size,n=this._head;return t.reverse().forEach((function(t){e++,n={value:t,next:n}})),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):wn(e,n)},mn.prototype.pop=function(){return this.slice(1)},mn.prototype.unshift=function(){return this.push.apply(this,arguments)},mn.prototype.unshiftAll=function(t){return this.pushAll(t)},mn.prototype.shift=function(){return this.pop.apply(this,arguments)},mn.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):kn()},mn.prototype.slice=function(t,e){if(S(t,e,this.size))return this;var n=T(t,this.size);if(C(e,this.size)!==this.size)return ht.prototype.slice.call(this,t,e);for(var r=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=r,this._head=i,this.__hash=void 0,this.__altered=!0,this):wn(r,i)},mn.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?wn(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},mn.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,r=this._head;r&&!1!==t(r.value,n++,this);)r=r.next;return n},mn.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,r=this._head;return new D((function(){if(r){var e=r.value;return r=r.next,M(t,n++,e)}return{value:void 0,done:!0}}))},mn.isStack=yn;var gn,bn="@@__IMMUTABLE_STACK__@@",_n=mn.prototype;function wn(t,e,n,r){var i=Object.create(_n);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function kn(){return gn||(gn=wn(0))}function xn(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}_n[bn]=!0,_n.withMutations=Dt.withMutations,_n.asMutable=Dt.asMutable,_n.asImmutable=Dt.asImmutable,_n.wasAltered=Dt.wasAltered,n.Iterator=D,xn(n,{toArray:function(){It(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate((function(e,n){t[n]=e})),t},toIndexedSeq:function(){return new Ce(this)},toJS:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJS?t.toJS():t})).__toJS()},toJSON:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t})).__toJS()},toKeyedSeq:function(){return new Te(this,!0)},toMap:function(){return Ot(this.toKeyedSeq())},toObject:function(){It(this.size);var t={};return this.__iterate((function(e,n){t[n]=e})),t},toOrderedMap:function(){return we(this.toKeyedSeq())},toOrderedSet:function(){return ln(a(this)?this.valueSeq():this)},toSet:function(){return en(a(this)?this.valueSeq():this)},toSetSeq:function(){return new Ae(this)},toSeq:function(){return c(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return mn(a(this)?this.valueSeq():this)},toList:function(){return ie(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var e=t.call(arguments,0);return ze(this,Ne(this,e))},includes:function(t){return this.some((function(e){return st(e,t)}))},entries:function(){return this.__iterator(2)},every:function(t,e){It(this.size);var n=!0;return this.__iterate((function(r,i,o){if(!t.call(e,r,i,o))return n=!1,!1})),n},filter:function(t,e){return ze(this,je(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return It(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){It(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate((function(r){n?n=!1:e+=t,e+=null!=r?r.toString():""})),e},keys:function(){return this.__iterator(0)},map:function(t,e){return ze(this,Be(this,t,e))},reduce:function(t,e,n){var r,i;return It(this.size),arguments.length<2?i=!0:r=e,this.__iterate((function(e,o,s){i?(i=!1,r=e):r=t.call(n,r,e,o,s)})),r},reduceRight:function(t,e,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return ze(this,Le(this,!0))},slice:function(t,e){return ze(this,De(this,t,e,!0))},some:function(t,e){return!this.every(An(t),e)},sort:function(t){return ze(this,Ue(this,t))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return k(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,n){var r=Ot().asMutable();return t.__iterate((function(i,o){r.update(e.call(n,i,o,t),0,(function(t){return t+1}))})),r.asImmutable()}(this,t,e)},equals:function(t){return at(this,t)},entrySeq:function(){var t=this;if(t._cache)return new W(t._cache);var e=t.toSeq().map(Cn).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(An(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate((function(n,i,o){if(t.call(e,n,i,o))return r=[i,n],!1})),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(E)},flatMap:function(t,e){return ze(this,function(t,e,n){var r=Ke(t);return t.toSeq().map((function(i,o){return r(e.call(n,i,o,t))})).flatten(!0)}(this,t,e))},flatten:function(t){return ze(this,Pe(this,t,!0))},fromEntrySeq:function(){return new Ie(this)},get:function(t,e){return this.find((function(e,n){return st(n,t)}),void 0,e)},getIn:function(t,e){for(var n,r=this,i=Je(t);!(n=i.next()).done;){var o=n.value;if((r=r&&r.get?r.get(o,v):v)===v)return e}return r},groupBy:function(t,e){return function(t,e,n){var r=a(t),i=(l(t)?we():Ot()).asMutable();t.__iterate((function(o,s){i.update(e.call(n,o,s,t),(function(t){return(t=t||[]).push(r?[s,o]:o),t}))}));var o=Ke(t);return i.map((function(e){return ze(t,o(e))}))}(this,t,e)},has:function(t){return this.get(t,v)!==v},hasIn:function(t){return this.getIn(t,v)!==v},isSubset:function(t){return t="function"==typeof t.includes?t:n(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:n(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return st(e,t)}))},keySeq:function(){return this.toSeq().map(Tn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Re(this,t)},maxBy:function(t,e){return Re(this,e,t)},min:function(t){return Re(this,t?In(t):Ln)},minBy:function(t,e){return Re(this,e?In(e):Ln,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return ze(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return ze(this,Me(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(An(t),e)},sortBy:function(t,e){return ze(this,Ue(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return ze(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return ze(this,function(t,e,n){var r=We(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var s=0;return t.__iterate((function(t,i,a){return e.call(n,t,i,a)&&++s&&r(t,i,o)})),s},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var s=t.__iterator(2,i),a=!0;return new D((function(){if(!a)return{value:void 0,done:!0};var t=s.next();if(t.done)return t;var i=t.value,c=i[0],u=i[1];return e.call(n,u,c,o)?2===r?t:M(r,c,u,t):(a=!1,{value:void 0,done:!0})}))},r}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(An(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=l(t),n=a(t),r=e?1:0;return function(t,e){return e=vt(e,3432918353),e=vt(e<<15|e>>>-15,461845907),e=vt(e<<13|e>>>-13,5),e=vt((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=mt((e=vt(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(n?e?function(t,e){r=31*r+jn(yt(t),yt(e))|0}:function(t,e){r=r+jn(yt(t),yt(e))|0}:e?function(t){r=31*r+yt(t)|0}:function(t){r=r+yt(t)|0}),r)}(this))}});var En=n.prototype;En[f]=!0,En[j]=En.values,En.__toJS=En.toArray,En.__toStringMapper=On,En.inspect=En.toSource=function(){return this.toString()},En.chain=En.flatMap,En.contains=En.includes,xn(r,{flip:function(){return ze(this,Oe(this))},mapEntries:function(t,e){var n=this,r=0;return ze(this,this.toSeq().map((function(i,o){return t.call(e,[o,i],r++,n)})).fromEntrySeq())},mapKeys:function(t,e){var n=this;return ze(this,this.toSeq().flip().map((function(r,i){return t.call(e,r,i,n)})).flip())}});var Sn=r.prototype;function Tn(t,e){return e}function Cn(t,e){return[e,t]}function An(t){return function(){return!t.apply(this,arguments)}}function In(t){return function(){return-t.apply(this,arguments)}}function On(t){return"string"==typeof t?JSON.stringify(t):String(t)}function Bn(){return w(arguments)}function Ln(t,e){return t<e?1:t>e?-1:0}function jn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}return Sn[d]=!0,Sn[j]=En.entries,Sn.__toJS=En.toObject,Sn.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+On(t)},xn(i,{toKeyedSeq:function(){return new Te(this,!1)},filter:function(t,e){return ze(this,je(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return ze(this,Le(this,!1))},slice:function(t,e){return ze(this,De(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=T(t,t<0?this.count():this.size);var r=this.slice(0,t);return ze(this,1===n?r:r.concat(w(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(t){return ze(this,Pe(this,t,!1))},get:function(t,e){return(t=x(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,n){return n===t}),void 0,e)},has:function(t){return(t=x(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return ze(this,function(t,e){var n=We(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate((function(t,r){return(!o||!1!==n(e,o++,i))&&!1!==n(t,o++,i)}),r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(1,r),s=0;return new D((function(){return(!i||s%2)&&(i=o.next()).done?i:s%2?M(n,s++,e):M(n,s++,i.value,i)}))},n}(this,t))},interleave:function(){var t=[this].concat(w(arguments)),e=qe(this.toSeq(),$.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),ze(this,n)},keySeq:function(){return lt(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return ze(this,Me(this,t,e,!1))},zip:function(){var t=[this].concat(w(arguments));return ze(this,qe(this,Bn,t))},zipWith:function(t){var e=w(arguments);return e[0]=this,ze(this,qe(this,t,e))}}),i.prototype[h]=!0,i.prototype[p]=!0,xn(o,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),o.prototype.has=En.includes,o.prototype.contains=o.prototype.includes,xn(H,r.prototype),xn($,i.prototype),xn(K,o.prototype),xn(dt,r.prototype),xn(ht,i.prototype),xn(pt,o.prototype),{Iterable:n,Seq:z,Collection:ft,Map:Ot,OrderedMap:we,List:ie,Stack:mn,Set:en,OrderedSet:ln,Record:Xe,Range:lt,Repeat:ct,is:st,fromJS:rt}}()},function(t,e,n){"use strict";t.exports={bound:[],_bindFunctions:function(){this.bound.forEach((function(t){this[t]=this[t].bind(this)}),this)}}},function(t,e,n){var r;void 0===(r=function(){var t=Math.pow(2,53)-1;return function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r=n(153),i=window.getSelection();function o(t,e){t.focus(),i.removeAllRanges(),i.addRange(e)}t.exports=function(t,e){if(1==arguments.length){if(!i.rangeCount)return;var n={},s=(f=i.getRangeAt(0)).cloneRange();return s.selectNodeContents(t),s.setEnd(f.endContainer,f.endOffset),n.end=s.toString().length,s.setStart(f.startContainer,f.startOffset),n.start=n.end-s.toString().length,n.atStart=0===s.startOffset,n}var a,c,u=e.end&&e.end!==e.start,l=0,f=document.createRange(),d=r(t).select(Node.TEXT_NODE).revisit(!1),h=e.start>t.textContent.length?t.textContent.length:e.start,p=e.end>t.textContent.length?t.textContent.length:e.end,v=e.atStart;for(;a=d.next();){var m=l;l+=a.textContent.length;var y=v?l>h:l>=h;if(!c&&y&&(c=!0,f.setStart(a,h-m),!u)){f.collapse(!0),o(t,f);break}if(u&&l>=p){f.setEnd(a,p-m),o(t,f);break}}}},function(t,e,n){"use strict";var r=n(0),i=n(67),o=n(2),s=n(1),a=n(3),c=n(11),u=n(64),l=n(88),f=n(39),d=n(84),h=n(82),p=n(4),v=n(224).Spinner,m=n(16).trimScribeContent,y=n(225),g=function(t,e,n,r,i){l.apply(this,arguments)};(g.prototype=Object.create(l.prototype)).constructor=g,Object.assign(g.prototype,l.fn,n(85),{bound:["_handleContentPaste","_onFocus","_onBlur","onDrop","onDeleteClick","clearInsertedStyles","getSelectionForFormatter","onBlockRender","onDeleteConfirm","onPositionerClick"],className:"st-block",attributes:function(){return Object.assign(l.fn.attributes.call(this))},icon_name:"default",validationFailMsg:function(){return i18n.t("errors:validation_fail",{type:r.isFunction(this.title)?this.title():this.title})},editorHTML:'<div class="st-block__editor"></div>',toolbarEnabled:!0,availableMixins:["droppable","pastable","uploadable","fetchable","ajaxable","controllable","multi_editable","textable"],droppable:!1,pastable:!1,uploadable:!1,fetchable:!1,ajaxable:!1,mergeable:!1,multi_editable:!1,textable:!1,drop_options:{},paste_options:{},upload_options:{},formattable:!0,supressKeyListeners:!1,_previousSelection:"",initialize:function(){},toMarkdown:function(t){return t},toHTML:function(t){return t},withMixin:function(t){if(r.isObject(t)){var e="initialize"+t.mixinName;r.isUndefined(this[e])&&(Object.assign(this,t),this[e]())}},render:function(){if(this.beforeBlockRender(),this._setBlockInner(),this.editor=this.inner.children[0],this.mixinsRequireInputs=!1,this.availableMixins.forEach((function(t){if(this[t]){var e=u[s.classify(t)];!r.isUndefined(e.requireInputs)&&e.requireInputs&&(this.mixinsRequireInputs=!0)}}),this),this.mixinsRequireInputs){var t=document.createElement("div");t.classList.add("st-block__inputs"),this.inner.appendChild(t),this.inputs=t}return this.hasTextBlock()&&this._initTextBlocks(),this.availableMixins.forEach((function(t){this[t]&&this.withMixin(u[s.classify(t)])}),this),this.formattable&&this._initFormatting(),this._blockPrepare(),this},remove:function(){this.ajaxable&&this.resolveAllInQueue(),a.remove(this.el)},loading:function(){r.isUndefined(this.spinner)||this.ready(),this.spinner=new v(o.defaults.spinner),this.spinner.spin(this.el),this.el.classList.add("st--is-loading")},ready:function(){this.el.classList.remove("st--is-loading"),r.isUndefined(this.spinner)||(this.spinner.stop(),delete this.spinner)},_serializeData:function(){s.log("toData for "+this.blockID);var t={};this.hasTextBlock()&&(t.text=this.getTextBlockHTML(),t.format="html");var e=['input:not([class="st-paste-block"])','textarea:not([class="st-paste-block"])','select:not([class="st-paste-block"])','button:not([class="st-paste-block"])'].join(",");return this.$(e).length>0&&Array.prototype.forEach.call(this.$("input, textarea, select, button"),(function(e){var n=e.getAttribute("data-name")||e.getAttribute("name");if(n)if("number"===e.getAttribute("type"))t[n]=parseInt(e.value);else if("checkbox"===e.getAttribute("type")){var r="";e.getAttribute("data-toggle")?(r="off",!0===e.checked&&(r="on")):!0===e.checked&&(r=e.value),t[n]=r}else"radio"===e.getAttribute("type")?!0===e.checked&&(t[n]=e.value):t[n]=e.value})),t},focus:function(){Array.prototype.forEach.call(this.getTextBlock(),(function(t){t.focus()}))},focusAtStart:function(){this.focus()},focusAtEnd:function(){this.focus()},blur:function(){Array.prototype.forEach.call(this.getTextBlock(),(function(t){t.blur()}))},onFocus:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),(function(e){e.addEventListener("focus",t._onFocus)}))},onBlur:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),(function(e){e.addEventListener("blur",t._onBlur)}))},_onFocus:function(){this.trigger("blockFocus",this.el)},_onBlur:function(){},onDrop:function(t){},onDeleteConfirm:function(t){t.preventDefault(),this.mediator.trigger("block:remove",this.blockID,{focusOnPrevious:!0})},addDeleteControls:function(){var t=this;this.ui.insertAdjacentHTML("beforeend",y()),c.delegate(this.el,".js-st-block-confirm-delete","click",this.onDeleteConfirm),c.delegate(this.el,".js-st-block-deny-delete","click",(function(e){e.preventDefault(),t.deleteEl.classList.remove("active")}))},onDeleteClick:function(t){t.preventDefault(),t.stopPropagation(),this.isEmpty()?this.onDeleteConfirm.call(this,new CustomEvent("click")):(this.deleteEl=this.el.querySelector(".st-block__ui-delete-controls"),this.deleteEl.classList.toggle("active"))},onPositionerClick:function(t){t.preventDefault(),this.positioner.toggle()},beforeLoadingData:function(){this.loading(),this.mixinsRequireInputs&&(a.show(this.editor),a.hide(this.inputs)),l.fn.beforeLoadingData.call(this),this.ready()},execTextBlockCommand:function(t){if(r.isUndefined(this._scribe))throw"No Scribe instance found to send a command to";return i.execTextBlockCommand(this._scribe,t)},queryTextBlockCommandState:function(t){if(r.isUndefined(this._scribe))throw"No Scribe instance found to query command";return i.queryTextBlockCommandState(this._scribe,t)},_handleContentPaste:function(t){setTimeout(this.onContentPasted.bind(this,t,t.currentTarget),0)},_getBlockClass:function(){return"st-block--"+this.className},_initUIComponents:function(){this.addDeleteControls(),this.positioner=new h(this.el,this.mediator),this._withUIComponent(this.positioner,".st-block-ui-btn__reorder",this.onPositionerClick),this._withUIComponent(new f(this.el,this.mediator)),this._withUIComponent(new d,".st-block-ui-btn__delete",this.onDeleteClick),this.onFocus(),this.onBlur()},_initFormatting:function(){var t=this;this.options.formatBar&&this.options.formatBar.commands.forEach((function(e){r.isUndefined(e.keyCode)||c.delegate(t.el,".st-text-block","keydown",(function(n){(n.metaKey||n.ctrlKey)&&n.keyCode===e.keyCode&&(n.preventDefault(),t.execTextBlockCommand(e.cmd))}))}))},_initTextBlocks:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),(function(e){e.addEventListener("keyup",t.getSelectionForFormatter),e.addEventListener("mousedown",t.addMouseupListener.bind(t)),e.addEventListener("DOMNodeInserted",t.clearInsertedStyles)}));var e=this.getTextBlock()[0];if(!r.isUndefined(e)&&r.isUndefined(this._scribe)){var n=r.isFunction(this.configureScribe)?this.configureScribe.bind(this):null;this._scribe=i.initScribeInstance(e,this.scribeOptions,n,this.editorOptions)}},addMouseupListener:function(){var t=this;window.addEventListener("mouseup",(function e(){t.getSelectionForFormatter(),window.removeEventListener("mouseup",e)}))},getSelectionForFormatter:function(){var t=this;setTimeout((function(){var e="formatter:"+(""===window.getSelection().toString().trim()?"hide":"position");t.mediator.trigger(e,t),p.trigger(e,t)}),1)},clearInsertedStyles:function(t){var e=t.target;r.isUndefined(e.tagName)&&(e=e.parentNode),e.removeAttribute("style")},hasTextBlock:function(){return this.getTextBlock().length>0},getTextBlock:function(){return r.isUndefined(this.text_block)&&(this.text_block=this.$(".st-text-block")),this.text_block},getTextBlockHTML:function(){return this._scribe.getContent()},setTextBlockHTML:function(t){var e=this._scribe.setContent(t);return m(this._scribe),e},isEmpty:function(){return r.isEmpty(this.getBlockData())},select:function(t){this.el.classList.toggle("st-block--is-selected",t)},split:function(){},asClipboardHTML:function(){}}),g.extend=n(90),t.exports=g},function(t,e,n){"use strict";t.exports=n(143)},function(t,e,n){"use strict";var r=n(3),i=function(t,e){for(var n,r={},i={shared:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),mouseEvent:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),keyEvent:"char charCode key keyCode".split(" ")},o=/^(?:mouse|pointer|contextmenu|drag|drop)|click/.test(t.type)?i.shared.concat(i.mouseEvent):/^key/.test(t.type)?i.shared.concat(i.keyEvent):i.shared,s=0;s<o.length;s++)r[n=o[s]]=t[n];return r.currentTarget=e,r.originalEvent=t,r.preventDefault=function(){this.originalEvent&&this.originalEvent.preventDefault()},r.stopPropagation=function(){this.originalEvent&&this.originalEvent.stopPropagation()},r};t.exports.delegate=function(t,e,n,o){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t.addEventListener(n,(function(n){for(var s=n.target;s&&s!==t;s=s.parentNode)if(r.matches(s,e)){o.call(s,i(n,s));break}s=null}),s)}},function(t,e,n){"use strict";var r=n(0),i=n(3);t.exports={tagName:"div",className:"sir-trevor__view",attributes:{},$:function(t){return this.el.querySelectorAll(t)},render:function(){return this},destroy:function(){r.isUndefined(this.stopListening)||this.stopListening(),i.remove(this.el)},_ensureElement:function(){if(this.el)this._setElement(this.el);else{var t=Object.assign({},r.result(this,"attributes"));this.id&&(t.id=this.id),this.className&&(t.class=this.className);var e=i.createElement(this.tagName,t);this._setElement(e)}},_setElement:function(t){return this.el=t,this}}},function(t,e,n){var r=n(25),i=n(18),o=n(130),s=r(s=Object.keys)&&s,a=s?function(t){return i(t)?s(t):[]}:o;t.exports=a},function(t,e,n){var r;void 0===(r=function(){return function(t){var e=typeof t;return"function"==e||t&&"object"==e||!1}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){return function(t){return t&&"object"==typeof t||!1}}.apply(e,[]))||(t.exports=r)},function(t,e,n){"use strict";n.r(e),n.d(e,"createBlocksFromParagraphs",(function(){return f})),n.d(e,"getTotalLength",(function(){return a})),n.d(e,"isAtStart",(function(){return s})),n.d(e,"isAtEnd",(function(){return c})),n.d(e,"selectToEnd",(function(){return o})),n.d(e,"isSelectedFromStart",(function(){return l})),n.d(e,"isSelectedToEnd",(function(){return u})),n.d(e,"rangeToHTML",(function(){return d})),n.d(e,"trimScribeContent",(function(){return h}));var r=n(8),i=n(1),o=function(t){var e=(new t.api.Selection).range.cloneRange();return e.setEndAfter(t.el.lastChild,0),e},s=function(t){var e=r(t.el);return 0===e.start&&0===e.end&&e.atStart},a=function(t){var e=(new t.api.Selection).range.cloneRange();return e.selectNodeContents(t.el),e.toString().length},c=function(t){var e=r(t.el);return a(t)===e.end&&e.start===e.end},u=function(t){var e=r(t.el);return a(t)===e.end},l=function(t){var e=r(t.el);return e.atStart&&0===e.start},f=function(t,e){var n,r=document.createElement("div");if(r.appendChild(o(e).extractContents()),function(t){if(null!==t.firstChild){var e=t.firstChild.childNodes[0];e&&"#text"!==e.nodeName&&""===e.innerText&&t.firstChild.removeChild(e)}}(r),!e.allowsBlockElements()){var i=document.createElement("div");i.appendChild(r),r=i}r.childNodes.length>=1&&[].slice.call(r.childNodes).reverse().forEach((function(e){""!==e.innerText&&(n={format:"html",text:e.innerHTML.trim()},t.mediator.trigger("block:create",t.type,n,t.el,{autoFocus:!0}))}))},d=function(t){var e=document.createElement("div");return e.appendChild(t.extractContents()),e.innerHTML},h=function(t){var e=t.node.firstDeepestChild(t.el);for("#text"===e.nodeName&&(e.textContent=i.leftTrim(e.textContent));t.el.firstChild&&""===t.el.firstChild.textContent&&-1!=document.createElement(t.el.firstChild.tagName).outerHTML.indexOf("/");)t.el.removeChild(t.el.firstChild);for(;t.el.lastChild&&""===t.el.lastChild.textContent&&-1!=document.createElement(t.el.lastChild.tagName).outerHTML.indexOf("/");)t.el.removeChild(t.el.lastChild);for(;t.el.lastChild&&"BR"===t.el.lastChild.nodeName;)t.el.removeChild(t.el.lastChild)}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(26);t.exports=function(t){return!(!t||!r[typeof t])}},function(t,e,n){var r,i;r=[n(200),n(15)],void 0===(i=function(t,e){var n=/^\[object .+?Constructor\]$/,r=Object.prototype,i=Function.prototype.toString,o=r.toString,s=RegExp("^"+t(o).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return function(t){return null!=t&&("[object Function]"==o.call(t)?s.test(i.call(t)):e(t)&&n.test(t)||!1)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(7),n(19),n(15)],void 0===(i=function(t,e,n){var r=Object.prototype.toString,i=e(i=Array.isArray)&&i;return i||function(e){return n(e)&&t(e.length)&&"[object Array]"==r.call(e)||!1}}.apply(e,r))||(t.exports=i)},function(t,e,n){"use strict";t.exports={Text:n(220),Quote:n(228),Image:n(229),Heading:n(230),List:n(231),Tweet:n(233),Video:n(234)}},function(t,e,n){"use strict";var r=n(0),i=n(1);t.exports=function(t,e){var o,s=n(21),a=t,c="Text"===(e=i.classify(e));return r.isUndefined(c)&&(c=!1),c&&(a="<p>"+a),a=a.replace(/\[([^\]]+)\]\(([^\)]+)\)/gm,(function(t,e,n){return"<a href='"+n+"'>"+e.replace(/\n/g,"")+"</a>"})),a=(a=i.reverse(i.reverse(a).replace(/_(?!\\)((_\\|[^_])*)_(?=$|[^\\])/gm,(function(t,e){return">i/<"+e.replace(/\n/g,"").replace(/[\s]+$/,"")+">i<"})).replace(/\*\*(?!\\)((\*\*\\|[^\*\*])*)\*\*(?=$|[^\\])/gm,(function(t,e){return">b/<"+e.replace(/\n/g,"").replace(/[\s]+$/,"")+">b<"})))).replace(/^\> (.+)$/gm,"$1"),s.hasOwnProperty(e)&&(o=s[e],!r.isUndefined(o.prototype.toHTML)&&r.isFunction(o.prototype.toHTML)&&(a=o.prototype.toHTML(a))),c&&(a=(a=a.replace(/\n\s*\n/gm,"</p><p>")).replace(/\n/gm,"<br>")),a=(a=a.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\n/g,"<br>").replace(/\*\*/,"").replace(/__/,"")).replace(/\\\*/g,"*").replace(/\\\[/g,"[").replace(/\\\]/g,"]").replace(/\\\_/g,"_").replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/\\\-/g,"-"),c&&(a+="</p>"),a}},function(t,e,n){"use strict";var r=n(42),i=n(99),o="function"==typeof Symbol&&"symbol"==typeof Symbol(),s=Object.prototype.toString,a=Object.defineProperty&&function(){var t={};try{for(var e in Object.defineProperty(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),c=function(t,e,n,r){var i;(!(e in t)||"function"==typeof(i=r)&&"[object Function]"===s.call(i)&&r())&&(a?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},u=function(t,e){var n=arguments.length>2?arguments[2]:{},s=r(e);o&&(s=s.concat(Object.getOwnPropertySymbols(e))),i(s,(function(r){c(t,r,e[r],n[r])}))};u.supportsDescriptors=!!a,t.exports=u},function(t,e,n){"use strict";var r=n(100);t.exports=Function.prototype.bind||r},function(t,e){var n=Object.prototype.toString,r=RegExp("^"+String(n).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");t.exports=function(t){return"function"==typeof t&&r.test(t)}},function(t,e){t.exports={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1}},function(t,e){t.exports=function(t,e,n){e||(e=0),void 0===n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,o=Array(i<0?0:i);++r<i;)o[r]=t[e+r];return o}},function(t,e){t.exports=function(t){return"function"==typeof t}},function(t,e,n){var r,i;r=[n(159),n(160),n(5)],void 0===(i=function(t,e,n){"use strict";function r(t){return t.nodeType===Node.TEXT_NODE}function i(t,e){return function(n){return n.nodeType===t.ELEMENT_NODE&&n.className===e}}function o(t,e){return!(e.nodeType!==t.TEXT_NODE||!/^\s*$/.test(e.nodeValue))}function s(t,e){for(;e.childNodes.length>0;)t.insertBefore(e.childNodes[0],e);t.removeChild(e)}return{isInlineElement:function(e){return t.includes(e.nodeName)},isBlockElement:function(t){return e.includes(t.nodeName)},isEmptyInlineElement:function t(e){return!(e.children.length>1)&&((1!==e.children.length||""===e.textContent.trim())&&(0===e.children.length?""===e.textContent.trim():t(e.children[0])))},isText:r,isEmptyTextNode:function(t){var e=!1;try{e=r(t)&&""===t.data}catch(t){e=!0}return e},isWhitespaceOnlyTextNode:o,isTextNodeWithContent:function(t,e){return e.nodeType===t.TEXT_NODE&&!o(t,e)},isFragment:function(t){return t.nodeType===Node.DOCUMENT_FRAGMENT_NODE},isBefore:function(t,e){return t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING},isSelectionMarkerNode:function(t){return i(Node,"scribe-marker")(t)},isCaretPositionNode:function(t){return i(Node,"caret-position")(t)},firstDeepestChild:function t(e){var n=e.firstChild;return n&&"BR"!==n.nodeName?t(n):e},insertAfter:function(t,e){return e.parentNode.insertBefore(t,e.nextSibling)},removeNode:function(t){return t.parentNode.removeChild(t)},getAncestor:function(t,e,n){function r(t){return e===t}if(!r(t))for(var i=t.parentNode;i&&!r(i);){if(n(i))return i;i=i.parentNode}},nextSiblings:function(t){for(var e=n.List();t=t.nextSibling;)e=e.push(t);return e},wrap:function(t,e){return t[0].parentNode.insertBefore(e,t[0]),t.forEach((function(t){e.appendChild(t)})),e},unwrap:s,removeChromeArtifacts:function(e){var r=n.List(e.querySelectorAll(t.map((function(t){return t+'[style*="line-height"]'})).join(",")));r=r.filter(function(t,e){return window.getComputedStyle(e).lineHeight===t.lineHeight}.bind(null,window.getComputedStyle(e)));var i=n.List();r.forEach((function(t){t.style.lineHeight=null,""===t.getAttribute("style")&&t.removeAttribute("style"),"SPAN"===t.nodeName&&0===t.attributes.length&&(i=i.push(t))})),i.forEach((function(t){s(t.parentNode,t)}))},elementHasClass:i,hasContent:function(t){return!!(t&&t.children&&t.children.length>0)||!(!t||"BR"!==t.nodeName)}}}.apply(e,r))||(t.exports=i)},function(t,e,n){"use strict";t.exports={mediatedEvents:{},eventNamespace:null,_bindMediatedEvents:function(){Object.keys(this.mediatedEvents).forEach((function(t){var e=this.mediatedEvents[t];t=this.eventNamespace?this.eventNamespace+":"+t:t,this.mediator.on(t,this[e].bind(this))}),this)}}},function(t,e,n){"use strict";var r=n(24);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,n){"use strict";var r=Function.prototype.toString,i=/^\s*class\b/,o=function(t){try{var e=r.call(t);return i.test(e)}catch(t){return!1}},s=Object.prototype.toString,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(a)return function(t){try{return!o(t)&&(r.call(t),!0)}catch(t){return!1}}(t);if(o(t))return!1;var e=s.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},function(t,e,n){var r=n(25),i=n(56),o={configurable:!1,enumerable:!1,value:null,writable:!1},s=function(){try{var t={},e=r(e=Object.defineProperty)&&e,n=e(t,t,t)&&e}catch(t){}return n}(),a=s?function(t,e){o.value=e,s(t,"__bindData__",o)}:i;t.exports=a},function(t,e,n){"use strict";var r=n(1);t.exports={mixinName:"Ajaxable",ajaxable:!0,initializeAjaxable:function(){this._queued=[]},addQueuedItem:function(t,e){r.log("Adding queued item for "+this.blockID+" called "+t),this._queued.push({name:t,deferred:e})},removeQueuedItem:function(t){r.log("Removing queued item for "+this.blockID+" called "+t),this._queued=this._queued.filter((function(e){return e.name!==t}))},hasItemsInQueue:function(){return this._queued.length>0},resolveAllInQueue:function(){this._queued.forEach((function(t){r.log("Aborting queued request: "+t.name),t.deferred.cancel()}),this)}}},function(t,e,n){"use strict";function r(t){t.preventDefault(),t.stopPropagation()}function i(t){t.dataTransfer.dropEffect="copy",t.currentTarget.classList.add("st-drag-over"),t.preventDefault(),t.stopPropagation()}function o(t){t.currentTarget.classList.remove("st-drag-over"),t.preventDefault(),t.stopPropagation()}t.exports={dropArea:function(t){return t.addEventListener("dragenter",r),t.addEventListener("dragover",i),t.addEventListener("dragleave",o),t},noDropArea:function(t){return t.removeEventListener("dragenter"),t.removeEventListener("dragover"),t.removeEventListener("dragleave"),t}}},function(t,e,n){var r,i;r=[n(7),n(15)],void 0===(i=function(t,e){var n=Object.prototype.toString;return function(r){var i=e(r)?r.length:void 0;return t(i)&&"[object Arguments]"==n.call(r)||!1}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){var t=Math.pow(2,53)-1;return function(e,n){return n=null==n?t:n,(e=+e)>-1&&e%1==0&&e<n}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(36),n(20),n(37),n(7),n(14),n(76)],void 0===(i=function(t,e,n,r,i,o){var s=Object.prototype.hasOwnProperty;return function(a){if(null==a)return[];i(a)||(a=Object(a));var c=a.length;c=c&&r(c)&&(e(a)||o.nonEnumArgs&&t(a))&&c||0;for(var u=a.constructor,l=-1,f="function"==typeof u&&u.prototype===a,d=Array(c),h=c>0;++l<c;)d[l]=l+"";for(var p in a)h&&n(p,c)||"constructor"==p&&(f||!s.call(a,p))||d.push(p);return d}}.apply(e,r))||(t.exports=i)},function(t,e,n){"use strict";var r=n(35),i=n(4),o=n(3),s=n(2),a=function(t,e){this.block=t,this.blockID=this.block.getAttribute("id"),this.mediator=e,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(a.prototype,n(6),n(12),{bound:["onMouseDown","onDragStart","onDragEnd","onDrop"],className:"st-block-ui-btn__reorder",tagName:"a",attributes:function(){return{html:'<svg role="img" class="st-icon">\n                 <use xlink:href="'.concat(s.defaults.iconUrl,'#move"/>\n               </svg>'),draggable:"true","data-icon":"move"}},initialize:function(){this.el.addEventListener("mousedown",this.onMouseDown),this.el.addEventListener("dragstart",this.onDragStart),this.el.addEventListener("dragend",this.onDragEnd),r.dropArea(this.block),this.block.addEventListener("drop",this.onDrop)},blockId:function(){return this.block.getAttribute("id")},onMouseDown:function(){i.trigger("block:reorder:down")},onDrop:function(t){t.preventDefault();var e=this.block,n=t.dataTransfer.getData("text/plain"),r=document.querySelector("#"+n);e.id!==n&&o.insertAfter(r,e),this.mediator.trigger("block:rerender",n),i.trigger("block:reorder:dropped",n)},onDragStart:function(t){var e=this.block;this.dragEl=e.cloneNode(!0),this.dragEl.classList.add("st-drag-element"),this.dragEl.style.top="".concat(e.offsetTop,"px"),this.dragEl.style.left="".concat(e.offsetLeft,"px"),e.parentNode.appendChild(this.dragEl),t.dataTransfer.setDragImage(this.dragEl,0,0),t.dataTransfer.setData("text/plain",this.blockId()),this.mediator.trigger("block-controls:hide"),i.trigger("block:reorder:dragstart"),e.classList.add("st-block--dragging")},onDragEnd:function(t){i.trigger("block:reorder:dragend"),this.block.classList.remove("st-block--dragging"),this.dragEl.parentNode.removeChild(this.dragEl)},render:function(){return this}}),t.exports=a},function(t,e,n){"use strict";t.exports=function(t){return function(e){var n=t.editorOptions,r=n.defaultHeadingLevel,i=n.headingLevels,o=(i=i.sort())[0],s=(i[i.length-1],new e.api.Command("heading"));s.queryEnabled=function(){return t.inline_editable},s.queryState=function(){return"heading"===t.type&&(t.getBlockData().level||r||o)},s.execute=function(e){var n=i.indexOf(t.getBlockData().level)+1,r=i[n],o=r?"Heading":"Text",s={format:"html",level:r,text:t.getScribeInnerContent()};t.mediator.trigger("block:replace",t.el,o,s)},e.commands.heading=s}}},function(t,e,n){"use strict";t.exports=function(t){return function(e){var n=new e.api.Command("quote");n.queryEnabled=function(){return t.inline_editable},n.queryState=function(){return"quote"===t.type};n.execute=function(e){var r={format:"html",text:t.getScribeInnerContent()};t.mediator.trigger("block:replace",t.el,n.queryState()?"Text":"Quote",r)},e.commands.quote=n}}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Array.prototype.slice,s=n(98),a=Object.prototype.propertyIsEnumerable,c=!a.call({toString:null},"toString"),u=a.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(t){var e=t.constructor;return e&&e.prototype===t},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!d["$"+t]&&r.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{f(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),p=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===i.call(t),o=s(t),a=e&&"[object String]"===i.call(t),d=[];if(!e&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var p=u&&n;if(a&&t.length>0&&!r.call(t,0))for(var v=0;v<t.length;++v)d.push(String(v));if(o&&t.length>0)for(var m=0;m<t.length;++m)d.push(String(m));else for(var y in t)p&&"prototype"===y||!r.call(t,y)||d.push(String(y));if(c)for(var g=function(t){if("undefined"==typeof window||!h)return f(t);try{return f(t)}catch(t){return!1}}(t),b=0;b<l.length;++b)g&&"constructor"===l[b]||!r.call(t,l[b])||d.push(l[b]);return d};p.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var t=Object.keys;Object.keys=function(e){return s(e)?t(o.call(e)):t(e)}}}else Object.keys=p;return Object.keys||p},t.exports=p},function(t,e,n){"use strict";var r=n(42),i=n(24),o=function(t){return null!=t},s=n(44)(),a=Object,c=i.call(Function.call,Array.prototype.push),u=i.call(Function.call,Object.prototype.propertyIsEnumerable),l=s?Object.getOwnPropertySymbols:null;t.exports=function(t,e){if(!o(t))throw new TypeError("target must be an object");var n,i,f,d,h,p,v,m=a(t);for(n=1;n<arguments.length;++n){i=a(arguments[n]),d=r(i);var y=s&&(Object.getOwnPropertySymbols||l);if(y)for(h=y(i),f=0;f<h.length;++f)v=h[f],u(i,v)&&c(d,v);for(f=0;f<d.length;++f)p=i[v=d[f]],u(i,v)&&(m[v]=p)}return m}},function(t,e,n){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},function(t,e,n){"use strict";var r=n(43);t.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),n={},r=0;r<e.length;++r)n[e[r]]=e[r];var i=Object.assign({},n),o="";for(var s in i)o+=s;return t!==o}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1}()?r:Object.assign:r}},function(t,e,n){"use strict";t.exports=n(103)},function(t,e){t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,n){"use strict";var r=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,o=Object.getPrototypeOf||function(t){return t.__proto__},s=void 0,a="undefined"==typeof Uint8Array?void 0:o(Uint8Array),c={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":i?o([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":void 0,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":void 0,"$ %AsyncIteratorPrototype%":s&&i&&Symbol.asyncIterator?s[Symbol.asyncIterator]():void 0,"$ %Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?void 0:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":void 0,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":void 0,"$ %Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":i?o(o([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&i?o((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof Promise?void 0:Promise,"$ %PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"$ %PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"$ %Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"$ %Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"$ %Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"$ %Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&i?o((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":i?o(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":i?Symbol:void 0,"$ %SymbolPrototype%":i?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":r,"$ %TypedArray%":a,"$ %TypedArrayPrototype%":a?a.prototype:void 0,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype};t.exports=function(t,e){if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');var n="$ "+t;if(!(n in c))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===c[n]&&!e)throw new TypeError("intrinsic "+t+" exists, but is not available. Please file an issue!");return c[n]}},function(t,e){t.exports=Number.isNaN||function(t){return t!=t}},function(t,e){var n=Number.isNaN||function(t){return t!=t};t.exports=Number.isFinite||function(t){return"number"==typeof t&&!n(t)&&t!==1/0&&t!==-1/0}},function(t,e){t.exports=function(t){return t>=0?1:-1}},function(t,e){t.exports=function(t,e){var n=t%e;return Math.floor(n>=0?n:n+e)}},function(t,e,n){"use strict";var r=n(46);t.exports=function(t){var e=r.ToObject(this),n=r.ToInteger(r.ToLength(e.length));if(!r.IsCallable(t))throw new TypeError("Array#find: predicate must be a function");if(0!==n)for(var i,o=arguments[1],s=0;s<n;s++)if(i=e[s],r.Call(t,o,[i,s,e]))return i}},function(t,e,n){"use strict";t.exports=function(){return Array.prototype.find&&1!==[,1].find((function(){return!0}))?Array.prototype.find:n(53)}},function(t,e,n){(function(e){var r=n(25),i=n(18),o=(n(56),r(o=Object.create)&&o);function s(t,e){return i(t)?o(t):{}}o||(s=function(){function t(){}return function(n){if(i(n)){t.prototype=n;var r=new t;t.prototype=null}return r||e.Object()}}()),t.exports=s}).call(this,n(17))},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(136),i=(n(13),n(137));t.exports=function(t){return null==t?"":String(t).replace(i,r)}},function(t,e){t.exports={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}},function(t,e){t.exports=/<%=([\s\S]+?)%>/g},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t,e){this.mediator=e,this.initialize(t?t.trim():"")};Object.assign(o.prototype,{initialize:function(t){this.store=this._parseData(t)||{data:[]}},retrieve:function(){return this.store},toString:function(t){return JSON.stringify(this.store,void 0,t)},reset:function(){i.log("Resetting the EditorStore"),this.store={data:[]}},addData:function(t){return this.store.data.push(t),this.store},_parseData:function(t){var e;if(0===t.length)return e;try{var n=JSON.parse(t);r.isUndefined(n.data)||(e=n)}catch(t){this.mediator.trigger("errors:add",{text:i18n.t("errors:load_fail")}),this.mediator.trigger("errors:render"),console.log("Sorry there has been a problem with parsing the JSON"),console.log(t)}return e}}),t.exports=o},function(t,e,n){"use strict";var r=n(1),i=n(4),o=function(t){this.form=t,this.initialize()};Object.assign(o.prototype,{initialize:function(){this.submitBtns=this.form.querySelectorAll("input[type='submit']");var t=[];Array.prototype.forEach.call(this.submitBtns,(function(e,n){t.push(e.getAttribute("value"))})),this.submitBtnTitles=t,this.canSubmit=!0,this.globalUploadCount=0,this._bindEvents()},setSubmitButton:function(t,e){Array.prototype.forEach.call(this.submitBtns,(function(t,n){t.setAttribute("value",e)}))},resetSubmitButton:function(){var t=this.submitBtnTitles;Array.prototype.forEach.call(this.submitBtns,(function(e,n){e.setAttribute("value",t[n])}))},onUploadStart:function(t){this.globalUploadCount++,r.log("onUploadStart called "+this.globalUploadCount),1===this.globalUploadCount&&this._disableSubmitButton()},onUploadStop:function(t){this.globalUploadCount=this.globalUploadCount<=0?0:this.globalUploadCount-1,r.log("onUploadStop called "+this.globalUploadCount),0===this.globalUploadCount&&this._enableSubmitButton()},onError:function(t){r.log("onError called"),this.canSubmit=!1},_disableSubmitButton:function(t){this.setSubmitButton(null,t||i18n.t("general:wait")),Array.prototype.forEach.call(this.submitBtns,(function(t,e){t.setAttribute("disabled","disabled"),t.classList.add("disabled")}))},_enableSubmitButton:function(){this.resetSubmitButton(),Array.prototype.forEach.call(this.submitBtns,(function(t,e){t.removeAttribute("disabled"),t.classList.remove("disabled")}))},_events:{disableSubmitButton:"_disableSubmitButton",enableSubmitButton:"_enableSubmitButton",setSubmitButton:"setSubmitButton",resetSubmitButton:"resetSubmitButton",onError:"onError",onUploadStart:"onUploadStart",onUploadStop:"onUploadStop"},_bindEvents:function(){Object.keys(this._events).forEach((function(t){i.on(t,this[this._events[t]],this)}),this)}}),t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(63),a=n(4);t.exports=function(t,e,n,c){var u=[t.blockID,(new Date).getTime(),"raw"].join("-"),l=new FormData,f=t.attachmentName||i.defaults.attachmentName,d=t.attachmentFile||i.defaults.attachmentFile,h=t.attachmentUid||i.defaults.attachmentUid;l.append(f,e.name),l.append(d,e),l.append(h,u),a.trigger("onUploadStart",l),t.resetMessages();var p=t.uploadUrl||i.defaults.uploadUrl,v=s.fetch(p,{body:l,method:"POST",dataType:"json"});return t.addQueuedItem(u,v),v.then((function(e){o.log("Upload callback called"),a.trigger("onUploadStop",e),!r.isUndefined(n)&&r.isFunction(n)&&n.apply(t,arguments,e),t.removeQueuedItem(u)})).catch((function(e,n,i){o.log("Upload callback error called"),a.trigger("onUploadStop",void 0,i,n,e),!r.isUndefined(c)&&r.isFunction(c)&&c.call(t,n),t.removeQueuedItem(u)})),v}},function(t,e,n){"use strict";n(144);var r=n(145),i=n(146),o=n(2),s=Object.create(null);s.fetch=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=(n=Object.assign({},o.defaults.ajaxOptions,n)).jsonp?r(t).promise:fetch(t,n).then((function(t){return"json"===n.dataType?t.json():t.text()})),i(e)},t.exports=s},function(t,e,n){"use strict";t.exports={Ajaxable:n(34),Controllable:n(147),Droppable:n(148),Fetchable:n(149),Pastable:n(150),Uploadable:n(151),MultiEditable:n(152),Textable:n(219)}},function(t,e){t.exports=function(t,e){return!t!=!e}},function(t,e){var n=/\b(Array|Date|Object|Math|JSON)\b/g;t.exports=function(t,e){var r=function(t){for(var e=[],n=0;n<t.length;n++)~e.indexOf(t[n])||e.push(t[n]);return e}(function(t){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(n,"").match(/[a-zA-Z_]\w*/g)||[]}(t));return e&&"string"==typeof e&&(e=function(t){return function(e){return t+e}}(e)),e?function(t,e,n){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g,(function(t){return"("==t[t.length-1]||~e.indexOf(t)?n(t):t}))}(t,r,e):r}},function(t,e,n){"use strict";var r=n(0),i=n(154),o=n(2),s=n(193),a=n(70),c=n(195),u={p:!0,a:{href:!0,target:"_blank",rel:!0},i:!0,b:!0,strong:!0,em:!0,sup:!0};t.exports={initScribeInstance:function(t,e,n,l){e=e||{};var f={debug:o.scribeDebug},d=u;r.isObject(e)&&(f=Object.assign(f,e));var h=new i(t,f);return e.hasOwnProperty("tags")&&(d=Object.assign(u,e.tags)),h.use(s()),h.use(a({editorOptions:l})),h.use(c({tags:d})),r.isFunction(n)&&n.call(this,h),h},execTextBlockCommand:function(t,e){if(r.isUndefined(t))throw"No Scribe instance found to query command";var n=t.getCommand(e);return t.el.focus(),n.execute()},queryTextBlockCommandState:function(t,e){if(r.isUndefined(t))throw"No Scribe instance found to query command";var n=t.getCommand(e);return(new t.api.Selection).range&&n.queryState()}}},function(t,e,n){var r;void 0===(r=function(){"use strict";return{isUndoKeyCombination:function(t){return!t.shiftKey&&(t.metaKey||t.ctrlKey&&!t.altKey)&&90===t.keyCode},isRedoKeyCombination:function(t){return t.shiftKey&&(t.metaKey||t.ctrlKey&&!t.altKey)&&90===t.keyCode}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return{contentChanged:"scribe:content-changed",legacyContentChanged:"content-changed",destroy:"scribe:destroy"}}.apply(e,[]))||(t.exports=r)},function(t,e,n){"use strict";n(8);var r=n(71);t.exports=function(t){t=t||{};var e=new r;t.transforms||(t.transforms={}),["pre","post"].forEach((function(e){t.transforms[e]||(t.transforms[e]=[])}));var n=[{regexp:/@/,message:i18n.t("formatters:link:message",{type:i18n.t("formatters:link:types:email"),prefix:"mailto:"}),action:function(t){return"mailto:"+t}},{regexp:/\+?\d+/,message:i18n.t("formatters:link:message",{type:i18n.t("formatters:link:types:telephone"),prefix:"tel:"}),action:function(t){return"tel:"+t}},{regexp:/.+/,message:i18n.t("formatters:link:message",{type:i18n.t("formatters:link:types:url"),prefix:"http://"}),action:function(t){return"http://"+t}}];var i=[/^https?\:\/\//,/^mailto\:/,/^tel\:/];function o(t,e){return t.reduce((function(t,e){return e(t)}),e)}return function(r){var s=new r.api.Command("linkPrompt");s.nodeName="A",s.queryEnabled=function(){return t.inline_editable},s.queryState=function(){return!!(new r.api.Selection).getContaining((function(t){return t.nodeName===s.nodeName}))},s.execute=function(a){var c=new r.api.Selection,u=c.range,l=c.getContaining((function(t){return t.nodeName===s.nodeName}));l&&(u.selectNode(l),c.selection.removeAllRanges(),c.selection.addRange(u));var f=l?l.href:"",d=l&&"_blank"==l.target,h=function(t){var e=t.enableExternalLinks,n=t.modal,r=t.new_tab,i=t.url,o=e?'\n    <p>\n      <label>\n        <input id="'.concat(n.id,'-target" type="checkbox" ').concat(r?'checked="checked"':""," />\n        ").concat(i18n.t("formatters:link:new_tab"),"\n      </label>\n    </p>"):"";return'\n    <p>\n      <input id="'.concat(n.id,'-url" type="text" value="').concat(i,'" />\n    </p>\n    ').concat(o,"\n  ")}({modal:e,url:a||f,new_tab:d,enableExternalLinks:t.editorOptions.enableExternalLinks});e.show({title:i18n.t("formatters:link:prompt"),content:h},(function(e){var r,s=e.el.querySelector("#".concat(e.id,"-url")).value,a=e.el.querySelector("#".concat(e.id,"-target")),c=a&&a.checked?' target="_blank"':"";if(s=o(t.transforms.pre,s),!/\w/.test(s))return window.alert(i18n.t("errors:link_empty")),!1;if(t&&t.validation){var l=t.validation(s);if(!l.valid)return window.alert(l.message||i18n.t("errors:link_invalid")),!1}if(s){r=s,i.some((function(t){return t.test(r)}))||(s=function(t,e){for(var r=0;r<n.length;r++){var i=n[r];if(i.regexp.test(e))if(t.confirm(i.message))return i.action(e)}return e}(window,s)),s=o(t.transforms.post,s);var f=window.getSelection();f.removeAllRanges(),f.addRange(u);var d='<a href="'.concat(s,'"').concat(c,">").concat(f,"</a>");document.execCommand("insertHTML",!1,d)}return!0}))},r.commands.linkPrompt=s}}},function(t,e,n){"use strict";var r=n(194).default,i=n(3),o=n(0),s=['<div class="st-modal st-micromodal-slide" id="<%= id %>" aria-hidden="true">','<div class="st-modal__overlay" tabindex="-1" data-micromodal-close>','<form class="st-modal__container" role="dialog" aria-modal="true" aria-labelledby="<%= id %>-title" novalidate>','<header class="st-modal__header">','<h2 class="st-modal__title" id="<%= id %>-title"></h2>','<a class="st-modal__close" aria-label="Close modal" data-micromodal-close></a>',"</header>",'<main class="st-modal__content" id="<%= id %>-content"></main>','<footer class="st-modal__footer">','<button id="<%= id %>-submit" class="st-modal__btn">',i18n.t("general:submit"),"</button>",'<span class="st-modal__buttons"></span>',"</footer>","</form>","</div>","</div>"].join("\n"),a=function(){this.initialize()};Object.assign(a.prototype,{id:"sirtrevor-modal",initialize:function(){var t=this;if(this.el=document.getElementById(this.id),!this.el){var e=o.template(s,{id:this.id});e=i.createElementFromString(e),document.body.appendChild(e),this.el=e}this.elTitle=document.getElementById("".concat(this.id,"-title")),this.elContent=document.getElementById("".concat(this.id,"-content")),this.elButtons=this.el.querySelector(".st-modal__buttons"),this.form=this.el.querySelector("form"),this.form.addEventListener("submit",(function(e){return t.onSubmit(e)})),r.init()},onSubmit:function(t){return this.callback&&this.submit(),t.preventDefault(),!1},submit:function(){this.callback(this)&&this.hide()},show:function(t,e){this.callback=e,this.elTitle.innerText=t.title,this.elContent.innerHTML=t.content,this.elButtons.innerHTML="",this.elButtons.appendChild(t.buttons||i.createElementFromString("<div />")),r.show(this.id)},hide:function(){this.callback=null,this.el.querySelector("form").reset(),r.close(this.id)},remove:function(){this.callback=null,r.close(this.id),i.remove(this.el)}}),t.exports=a},function(t,e,n){var r;void 0===(r=function(){return function(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(74),n(75)],void 0===(i=function(t,e){return function(n,r){return t(n,r,e)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(199)],void 0===(i=function(t){return function(e,n,r){for(var i=-1,o=t(e),s=r(e),a=s.length;++i<a;){var c=s[i];if(!1===n(o[c],c,o))break}return e}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(7),n(19),n(14),n(202)],void 0===(i=function(t,e,n,r){var i=e(i=Object.keys)&&i;return i?function(e){if(e)var o=e.constructor,s=e.length;return"function"==typeof o&&o.prototype===e||"function"!=typeof e&&s&&t(s)?r(e):n(e)?i(e):[]}:r}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(19),n(77)],void 0===(i=function(t,e){var n=/\bthis\b/,r=Object.prototype,i=(i=e.window)&&i.document,o=r.propertyIsEnumerable,s={};return function(r){s.funcDecomp=!t(e.WinRTError)&&n.test((function(){return this})),s.funcNames="string"==typeof Function.name;try{s.dom=11===i.createDocumentFragment().nodeType}catch(t){s.dom=!1}try{s.nonEnumArgs=!o.call(arguments,1)}catch(t){s.nonEnumArgs=!0}}(0,0),s}.apply(e,r))||(t.exports=i)},function(t,e,n){(function(t,n){var r;void 0===(r=function(){var r={function:!0,object:!0},i=r[typeof e]&&e&&!e.nodeType&&e,o=r[typeof t]&&t&&!t.nodeType&&t,s=r[typeof window]&&window;return i&&o&&"object"==typeof n&&n||s!==(this&&this.window)&&s||this}.apply(e,[]))||(t.exports=r)}).call(this,n(203)(t),n(17))},function(t,e,n){var r;void 0===(r=function(){return function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(7),n(15)],void 0===(i=function(t,e){var n={};n["[object Float32Array]"]=n["[object Float64Array]"]=n["[object Int8Array]"]=n["[object Int16Array]"]=n["[object Int32Array]"]=n["[object Uint8Array]"]=n["[object Uint8ClampedArray]"]=n["[object Uint16Array]"]=n["[object Uint32Array]"]=!0,n["[object Arguments]"]=n["[object Array]"]=n["[object ArrayBuffer]"]=n["[object Boolean]"]=n["[object Date]"]=n["[object Error]"]=n["[object Function]"]=n["[object Map]"]=n["[object Number]"]=n["[object Object]"]=n["[object RegExp]"]=n["[object Set]"]=n["[object String]"]=n["[object WeakMap]"]=!1;var r=Object.prototype.toString;return function(i){return e(i)&&t(i.length)&&n[r.call(i)]||!1}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){return function(t,e,n){n||(n=e,e={});for(var r=-1,i=n.length;++r<i;){var o=n[r];e[o]=t[o]}return e}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(210)],void 0===(i=function(t){return function(e,n,r){if("function"!=typeof e)return t;if(void 0===n)return e;switch(r){case 1:return function(t){return e.call(n,t)};case 3:return function(t,r,i){return e.call(n,t,r,i)};case 4:return function(t,r,i,o){return e.call(n,t,r,i,o)};case 5:return function(t,r,i,o,s){return e.call(n,t,r,i,o,s)}}return function(){return e.apply(n,arguments)}}}.apply(e,r))||(t.exports=i)},function(t,e,n){"use strict";var r=function(t,e){this.mediator=e,this.block=t,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(r.prototype,n(6),n(12),{bound:["toggle","show","hide"],className:"st-block-positioner",visibleClass:"active",initialize:function(){},toggle:function(){this.mediator.trigger("block-positioner-select:render",this),this.el.classList.toggle(this.visibleClass)},show:function(){this.el.classList.add(this.visibleClass)},hide:function(){this.el.classList.remove(this.visibleClass)}}),t.exports=r},function(t,e,n){"use strict";var r=n(3),i=["<span class='st-block-positioner__selected-value'></span>","<select class='st-block-positioner__select'></select>"].join("\n"),o=function(t){this.mediator=t,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(o.prototype,n(6),n(12),{total_blocks:0,bound:["onBlockCountChange","onSelectChange"],className:"st-block-positioner__inner",initialize:function(){this.el.insertAdjacentHTML("beforeend",i),this.select=this.el.querySelector(".st-block-positioner__select"),this.positioner=null,this.select.addEventListener("change",this.onSelectChange)},onBlockCountChange:function(t){t!==this.total_blocks&&(this.total_blocks=t,this.renderPositionList())},onSelectChange:function(){var t=this.select.value;0!==t&&(this.mediator.trigger("block:changePosition",this.positioner.block,t,1===t?"before":"after"),this.positioner.toggle())},renderPositionList:function(){for(var t="<option value='0'>"+i18n.t("general:position")+"</option>",e=1;e<=this.total_blocks;e++)t+="<option value="+e+">"+e+"</option>";this.select.innerHTML=t},renderInBlock:function(t){this.positioner&&this.positioner!==t&&this.positioner.hide(),this.positioner=t,this.select.value=0,r.remove(this.el),t.el.appendChild(this.el)}}),t.exports=o},function(t,e,n){"use strict";var r=n(2),i=function(){this._ensureElement(),this._bindFunctions()};Object.assign(i.prototype,n(6),n(12),{tagName:"a",className:"st-block-ui-btn__delete",attributes:{html:function(){return'<svg role="img" class="st-icon">\n                   <use xlink:href="'.concat(r.defaults.iconUrl,'#cross"/>\n                 </svg>')},"data-icon":"close"}}),t.exports=i},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){var e=t.getAttribute("data-st-name")||t.getAttribute("name");return e||(e="Field"),i.capitalize(e)};t.exports={errors:[],valid:function(){return this.performValidations(),0===this.errors.length},performValidations:function(){this.resetErrors();var t=this.$(".st-required");Array.prototype.forEach.call(t,function(t,e){this.validateField(t)}.bind(this)),this.validations.forEach(this.runValidator,this),this.el.classList.toggle("st-block--with-errors",this.errors.length>0)},validations:[],validateField:function(t){0===(t.getAttribute("contenteditable")?t.textContent:t.value).length&&this.setError(t,i18n.t("errors:block_empty",{name:o(t)}))},runValidator:function(t){r.isUndefined(this[t])||this[t].call(this)},setError:function(t,e){var n=this.addMessage(e,"st-msg--error");t.classList.add("st-error"),this.errors.push({field:t,reason:e,msg:n})},resetErrors:function(){this.errors.forEach((function(t){t.field.classList.remove("st-error"),t.msg.remove()})),this.messages.classList.remove("st-block__messages--is-visible"),this.errors=[]}}},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(4);t.exports={blockStorage:{},createStore:function(t){this.blockStorage={type:i.underscored(this.type),data:t||{}}},save:function(){var t=this._serializeData();r.isEmpty(t)||this.setData(t)},getData:function(){return this.save(),this.blockStorage},getBlockData:function(){return this.save(),this.blockStorage.data},_getData:function(){return this.blockStorage.data},setData:function(t){i.log("Setting data for block "+this.blockID),Object.assign(this.blockStorage.data,t||{})},setAndLoadData:function(t){this.setData(t),this.beforeLoadingData()},_serializeData:function(){},loadData:function(){},beforeLoadingData:function(){i.log("loadData for "+this.blockID),o.trigger("editor/block/loadData"),this.loadData(this._getData())},_loadData:function(){i.log("_loadData is deprecated and will be removed in the future. Please use beforeLoadingData instead."),this.beforeLoadingData()},checkAndLoadData:function(){r.isEmpty(this._getData())||this.beforeLoadingData()}}},function(t,e,n){"use strict";var r=n(8),i=n(0),o=n(1),s=n(2),a=n(4),c=n(21),u=n(3),l=["convertToMarkdown","convertFromMarkdown","formatBar"],f=function(t){this.options=t.options,this.blockOptions=l.reduce((function(e,n){return e[n]=t.options[n],e}),{}),this.instance_scope=t.ID,this.mediator=t.mediator,this.editor=t,this.wrapper=t.wrapper,this.blocks=[],this.blockCounts={},this.blockTypes=[],this._setBlocksTypes(),this._setRequired(),this._bindMediatedEvents(),this.initialize()};Object.assign(f.prototype,n(6),n(30),n(10),{eventNamespace:"block",mediatedEvents:{create:"createBlock",createBefore:"createBlockBefore",remove:"removeBlock",rerender:"rerenderBlock",replace:"replaceBlock",focusPrevious:"focusPreviousBlock",focusNext:"focusNextBlock",paste:"paste"},initialize:function(){},createBlock:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(r=Object.assign({autoFocus:!1,focusAtEnd:!1},r),t=o.classify(t),this.canCreateBlock(t)){var i=new c[t](e,this.instance_scope,this.mediator,this.blockOptions,this.options);this.blocks.push(i),this._incrementBlockTypeCount(t),this.renderBlock(i,n),r.autoFocus?i.focus():r.focusAtEnd&&i.focusAtEnd(),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),this.mediator.trigger("block:created",i),a.trigger(e?"block:create:existing":"block:create:new",i),o.log("Block created of type "+t)}},createBlockBefore:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(r=Object.assign({autoFocus:!1,focusAtEnd:!1},r),t=o.classify(t),this.canCreateBlock(t)){var i=new c[t](e,this.instance_scope,this.mediator,this.blockOptions,this.options);this.blocks.push(i),this._incrementBlockTypeCount(t);var s=this.getPreviousBlock(n);s?this.renderBlock(i,s.el):this.renderBlock(i,this.wrapper.querySelector(".st-top-controls")),r.autoFocus?i.focus():r.focusAtEnd&&i.focusAtEnd(),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),this.mediator.trigger("block:created",i),a.trigger(e?"block:create:existing":"block:create:new",i),o.log("Block created of type "+t)}},removeBlock:function(t,e){e=Object.assign({transposeContent:!1,focusOnPrevious:!1,focusOnNext:!1,createNextBlock:!1},e);var n=this.findBlockById(t),i=o.classify(n.type),s=this.getPreviousBlock(n),c=this.getNextBlock(n);if(e.transposeContent&&n.mergeable){if(!s&&1===this.blocks.length)return;if(s&&"list"===s.type)s.focusAtEnd(),s.appendToCurrentItem(n.getScribeInnerContent());else if(s&&s.mergeable)s.appendContent(n.getScribeInnerContent(),{keepCaretPosition:!0});else{if(""!==n.getScribeInnerContent())return;s?s.focusAtEnd():c&&c.focus()}}if(this.mediator.trigger("block-controls:reset"),this.blocks=this.blocks.filter((function(t){return t.blockID!==n.blockID})),n.remove(),s&&c&&this.options.joinListBlocksOnBlockRemove&&"list"===s.type&&"list"===c.type){var u=c._serializeData().listItems;c.remove();var l=s.getCurrentTextEditor(),f=r(l.scribe.el);u.forEach((function(t){s.addListItem(t.content)})),s.focusOn(l,{caretPosition:f.start})}e.focusOnPrevious&&s&&s.focusAtEnd(),e.focusOnNext&&(c?c.focus():e.createNextBlock&&this.createBlock("text",null,null,{autoFocus:!0})),this._decrementBlockTypeCount(i),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),a.trigger("block:remove",t)},replaceBlock:function(t,e,n){var r=this.findBlockById(t.id);this.createBlock(e,n||null,t),this.removeBlock(t.id),r.remove()},renderBlock:function(t,e){var n=this,r=t.render().el;e?u.insertAfter(r,e):this.wrapper.appendChild(r),t.trigger("onRender"),this.options.selectionMouse&&(r.addEventListener("mouseenter",(function(){if(n.editor.mouseDown){var e=n.getBlockPosition(t.el);n.mediator.trigger("selection:update",e)}})),r.addEventListener("mousedown",(function(e){var r=n.getBlockPosition(t.el),i={mouseEnabled:!0,expand:e.shiftKey||e.metaKey};n.mediator.trigger("selection:start",r,i)})))},rerenderBlock:function(t){var e=this.findBlockById(t);i.isUndefined(e)||e.isEmpty()||!e.drop_options.re_render_on_reorder||e.beforeLoadingData()},getPreviousBlock:function(t){var e=this.getBlockPosition(t.el);if(!(e<1)){var n=this.wrapper.querySelectorAll(".st-block")[e-1];return this.findBlockById(n.getAttribute("id"))}},getNextBlock:function(t){var e=this.getBlockPosition(t.el);if(!(e<0||e>=this.blocks.length-1))return this.findBlockById(this.wrapper.querySelectorAll(".st-block")[e+1].getAttribute("id"))},getBlockPosition:function(t){return Array.prototype.indexOf.call(this.wrapper.querySelectorAll(".st-block"),t)},focusPreviousBlock:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object.assign({force:!1},e);var n=this.findBlockById(t);if(n&&(n.mergeable||e.force)){var r=this.getPreviousBlock(n);r&&r.mergeable?r.focusAtEnd():e.force&&n.focus()}},focusNextBlock:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object.assign({force:!1},e);var n=this.findBlockById(t);if(n&&(n.mergeable||e.force)){var r=this.getNextBlock(n);r&&r.mergeable?r.focusAtStart():e.force&&n.focusAtEnd()}},paste:function(t){var e=this,n=o.getBlockBySelection();if(n){n.split();var r=this.getNextBlock(n);if(n.isEmpty()&&this.removeBlock(n.blockID),r)return void t.forEach((function(t){e.createBlockBefore(t.type,t.data,r,{focusAtEnd:!0})}))}t.forEach((function(t){e.createBlock(t.type,t.data,void 0,{focusAtEnd:!0})}))},triggerBlockCountUpdate:function(){this.mediator.trigger("block:countUpdate",this.blocks.length)},canCreateBlock:function(t){return this.blockLimitReached()?(o.log("Cannot add any more blocks. Limit reached."),!1):this.isBlockTypeAvailable(t)?!!this.canAddBlockType(t)||(o.log("Block Limit reached for type "+t),!1):(o.log("Block type not available "+t),!1)},validateBlockTypesExist:function(t){if(s.skipValidation||!t)return!1;(this.required||[]).forEach((function(t,e){if(this.isBlockTypeAvailable(t))if(0===this._getBlockTypeCount(t))o.log("Failed validation on required block type "+t),this.mediator.trigger("errors:add",{text:i18n.t("errors:type_missing",{type:t})});else{if(this.getBlocksByType(t).filter((function(t){return!t.isEmpty()})).length>0)return!1;this.mediator.trigger("errors:add",{text:i18n.t("errors:required_type_empty",{type:t})}),o.log("A required block type "+t+" is empty")}}),this)},findBlockById:function(t){return this.blocks.find((function(e){return e.blockID===t}))},getBlocksByType:function(t){return this.blocks.filter((function(e){return o.classify(e.type)===t}))},getBlocksByIDs:function(t){return this.blocks.filter((function(e){return t.includes(e.blockID)}))},blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},isBlockTypeAvailable:function(t){return this.blockTypes.includes(t)},canAddBlockType:function(t){var e=this._getBlockTypeLimit(t);return!(0!==e&&this._getBlockTypeCount(t)>=e)},_setBlocksTypes:function(){this.blockTypes=this.options.blockTypes||Object.keys(c)},_setRequired:function(){this.required=!1,Array.isArray(this.options.required)&&!i.isEmpty(this.options.required)&&(this.required=this.options.required)},_incrementBlockTypeCount:function(t){this.blockCounts[t]=i.isUndefined(this.blockCounts[t])?1:this.blockCounts[t]+1},_decrementBlockTypeCount:function(t){this.blockCounts[t]=i.isUndefined(this.blockCounts[t])?1:this.blockCounts[t]-1},_getBlockTypeCount:function(t){return i.isUndefined(this.blockCounts[t])?0:this.blockCounts[t]},_blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},_getBlockTypeLimit:function(t){return this.isBlockTypeAvailable(t)?parseInt(i.isUndefined(this.options.blockTypeLimits[t])?0:this.options.blockTypeLimits[t],10):0}}),t.exports=f},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(3),s=n(11),a=n(39),c=n(221),u=function(t,e,n,i,o){this.createStore(t),this.blockID=r.uniqueId("st-block-"),this.instanceID=e,this.mediator=n,this.options=i||{},this.editorOptions=o||{},this._ensureElement(),this._bindFunctions(),this.initialize.apply(this,arguments)};Object.assign(u.prototype,n(6),n(10),n(12),n(86),{focus:function(){},valid:function(){return!0},className:"st-block",block_template:c,attributes:function(){return{id:this.blockID,"data-type":this.type,"data-instance":this.instanceID}},title:function(){return i18n.t("blocks:".concat(this.type,":title"))||i.titleize(this.type.replace(/[\W_]/g," "))},blockCSSClass:function(){return this.blockCSSClass=i.toSlug(this.type),this.blockCSSClass},type:"",class:function(){return i.classify(this.type)},editorHTML:"",initialize:function(){},onBlockRender:function(){},beforeBlockRender:function(){},_setBlockInner:function(){var t=r.result(this,"editorHTML");this.el.insertAdjacentHTML("beforeend",this.block_template(t)),this.inner=this.el.querySelector(".st-block__inner")},render:function(){return this.beforeBlockRender(),this._setBlockInner(),this._blockPrepare(),this},_blockPrepare:function(){this._initUI(),this._initMessages(),this.checkAndLoadData(),this.el.classList.add("st-item-ready"),this.on("onRender",this.onBlockRender),this.save()},_withUIComponent:function(t,e,n){this.ui.appendChild(t.render().el),e&&n&&s.delegate(this.ui,e,"click",n)},_initUI:function(){var t=o.createElement("div",{class:"st-block__ui"});this.el.appendChild(t),this.ui=t,this._initUIComponents()},_initMessages:function(){var t=o.createElement("div",{class:"st-block__messages"});this.inner.insertBefore(t,this.inner.firstChild),this.messages=t},addMessage:function(t,e){return t=o.createElement("span",{html:t,class:"st-msg "+e}),this.messages.appendChild(t),this.messages.classList.add("st-block__messages--is-visible"),t},resetMessages:function(){this.messages.innerHTML="",this.messages.classList.remove("st-block__messages--is-visible")},_initUIComponents:function(){this._withUIComponent(new a(this.el))}}),u.fn=u.prototype,u.extend=n(90),t.exports=u},function(t,e,n){"use strict";var r=n(2);t.exports=function(){return'\n    <button class="st-block-addition" type="button">\n      <span class="st-block-addition__button">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'.concat(r.defaults.iconUrl,'#plus"/>\n        </svg>\n      </span>\n    </button>\n  ')}},function(t,e,n){"use strict";t.exports=function(t,e){var n,r=this;n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return r.apply(this,arguments)},Object.assign(n,r,e);var i=function(){this.constructor=n};return i.prototype=r.prototype,n.prototype=new i,t&&Object.assign(n.prototype,t),n.__super__=r.prototype,n}},function(t,e,n){"use strict";var r=n(16),i=r.createBlocksFromParagraphs,o=r.isAtStart,s=r.isAtEnd,a=r.isSelectedFromStart,c=r.isSelectedToEnd,u=r.selectToEnd;t.exports=function(t){return function(e){var n=!1;e.el.addEventListener("keydown",(function(r){t.supressKeyListeners||("Enter"!==r.key||r.shiftKey?["Left","ArrowLeft","Up","ArrowUp"].indexOf(r.key)>-1?r.shiftKey&&a(e)?(r.preventDefault(),r.stopPropagation(),document.activeElement&&document.activeElement.blur(),t.mediator.trigger("selection:block",t)):o(e)&&(r.preventDefault(),r.stopPropagation(),t.mediator.trigger("block:focusPrevious",t.blockID)):8===r.keyCode&&o(e)?(r.preventDefault(),n=!0):["Right","ArrowRight","Down","ArrowDown"].indexOf(r.key)>-1&&(r.shiftKey&&c(e)?(r.preventDefault(),r.stopPropagation(),document.activeElement&&document.activeElement.blur(),t.mediator.trigger("selection:block",t)):s(e)&&(r.preventDefault(),t.mediator.trigger("block:focusNext",t.blockID))):(r.preventDefault(),s(e)?(u(e).extractContents(),t.mediator.trigger("block:create","Text",null,t.el,{autoFocus:!0})):i(t,e),e.allowsBlockElements()&&""===e.getTextContent()&&e.setContent("<p><br></p>")))})),e.el.addEventListener("keyup",(function(e){t.supressKeyListeners||"Backspace"===e.key&&n&&(e.preventDefault(),t.mediator.trigger("block:remove",t.blockID,{transposeContent:!0}),n=!1)}))}}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(3),s=n(11),a=n(235),c=function(t,e,n){this.editor=n,this.options=Object.assign({},i.defaults.formatBar,t||{}),this.commands=this.options.commands,this.mediator=e,this.isShown=!1,this._ensureElement(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize.apply(this,arguments)};Object.assign(c.prototype,n(6),n(30),n(10),n(12),{className:"st-format-bar",bound:["onFormatButtonClick","renderBySelection","hide"],eventNamespace:"formatter",mediatedEvents:{position:"renderBySelection",show:"show",hide:"hide"},initialize:function(){var t=this.commands.reduce((function(t,e){return t+a(e)}),"");this.el.insertAdjacentHTML("beforeend",t),s.delegate(this.el,".st-format-btn","mousedown",this.onFormatButtonClick)},hide:function(){this.block=void 0,this.isShown=!1,this.el.classList.remove("st-format-bar--is-ready"),o.remove(this.el)},show:function(){this.isShown||(this.isShown=!0,this.editor.outer.appendChild(this.el),this.el.classList.add("st-format-bar--is-ready"))},remove:function(){o.remove(this.el)},renderBySelection:function(t){this.block=t,this.highlightSelectedButtons(),this.show(),this.calculatePosition()},calculatePosition:function(){var t=window.getSelection().getRangeAt(0).getBoundingClientRect(),e={},n=this.editor.outer.getBoundingClientRect();e.top=t.top-n.top+"px",e.left=(t.left+t.right)/2-this.el.offsetWidth/2-n.left+"px",this.el.style.top=e.top,this.el.style.left=e.left},highlightSelectedButtons:function(){var t=this;[].forEach.call(this.el.querySelectorAll(".st-format-btn"),(function(e){var n=e.getAttribute("data-cmd"),r=t.block.queryTextBlockCommandState(n);e.classList.toggle("st-format-btn--is-active",Boolean(r)),e.dataset.state=r,e=null}))},onFormatButtonClick:function(t){if(t.preventDefault(),t.stopPropagation(),r.isUndefined(this.block))throw"Associated block not found";var e=t.currentTarget.getAttribute("data-cmd");return r.isUndefined(e)||(this.block.execTextBlockCommand(e),this.highlightSelectedButtons(),document.activeElement.focus()),!1}}),t.exports=c},function(t,e,n){"use strict";var r=n(2),i=n(1),o=n(4),s=n(61),a=!1,c={bindFormSubmit:function(t){a||(new s(t),t.addEventListener("submit",this.onFormSubmit),a=!0)},onBeforeSubmit:function(t){var e=0;return r.instances.forEach((function(n,r){e+=n.onFormSubmit(t)})),i.log("Total errors: "+e),e},onFormSubmit:function(t){c.onBeforeSubmit()>0&&(o.trigger("onError"),t.preventDefault())}};t.exports=c},function(t,e,n){t.exports=n(95),n(245)},function(t,e,n){"use strict";n(96),n(97).shim(),n(102).shim(),n(115),n(116).polyfill(),n(118),n(119),n(120);var r=n(1),i={config:n(2),log:r.log,Locales:n(142),Events:n(10),EventBus:n(4),EditorStore:n(60),Submittable:n(61),FileUploader:n(62),BlockMixins:n(64),BlockPositioner:n(82),BlockPositionerSelect:n(83),BlockReorder:n(39),BlockDeletion:n(84),BlockValidations:n(85),BlockStore:n(86),BlockManager:n(87),SimpleBlock:n(88),Block:n(9),Blocks:n(21),FormatBar:n(92),Editor:n(236),toMarkdown:n(244),toHTML:n(22),setDefaults:function(t){Object.assign(i.config.defaults,t||{})},getInstance:r.getInstance,setBlockOptions:function(t,e){var n=i.Blocks[t];void 0!==n&&Object.assign(n.prototype,e||{})},runOnAllInstances:function(t){if(i.Editor.prototype.hasOwnProperty(t)){var e=Array.prototype.slice.call(arguments,1);Array.prototype.forEach.call(i.config.instances,(function(n){n[t].apply(null,e)}))}else i.log("method doesn't exist")}};Object.assign(i,n(93)),t.exports=i},function(t,e,n){t.exports=n.p+"e00d9b62b203893a0d3b803f90c52f84.svg"},function(t,e,n){"use strict";var r=n(23),i=n(43),o=n(45),s=n(101),a=o();r(a,{getPolyfill:o,implementation:i,shim:s}),t.exports=a},function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e=r.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===r.call(t.callee)),n}},function(t,e){var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString;t.exports=function(t,e,i){if("[object Function]"!==r.call(e))throw new TypeError("iterator must be a function");var o=t.length;if(o===+o)for(var s=0;s<o;s++)e.call(i,t[s],s,t);else for(var a in t)n.call(t,a)&&e.call(i,t[a],a,t)}},function(t,e,n){"use strict";var r="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,o=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==o.call(e))throw new TypeError(r+e);for(var n,s=i.call(arguments,1),a=function(){if(this instanceof n){var r=e.apply(this,s.concat(i.call(arguments)));return Object(r)===r?r:this}return e.apply(t,s.concat(i.call(arguments)))},c=Math.max(0,e.length-s.length),u=[],l=0;l<c;l++)u.push("$"+l);if(n=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(a),e.prototype){var f=function(){};f.prototype=e.prototype,n.prototype=new f,f.prototype=null}return n}},function(t,e,n){"use strict";var r=n(23),i=n(45);t.exports=function(){var t=i();return r(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t}},function(t,e,n){"use strict";var r=n(23),i=n(46),o=n(53),s=n(54),a=n(114),c=Array.prototype.slice,u=s(),l=function(t,e){i.RequireObjectCoercible(t);var n=c.call(arguments,1);return u.apply(t,n)};r(l,{getPolyfill:s,implementation:o,shim:a}),t.exports=l},function(t,e,n){"use strict";var r=n(31),i=n(104),o=n(48),s=o("%TypeError%"),a=o("%SyntaxError%"),c=o("%Array%"),u=o("%String%"),l=o("%Object%"),f=o("%Number%"),d=o("%Symbol%",!0),h=o("%RegExp%"),p=!!d,v=n(49),m=n(50),y=f.MAX_SAFE_INTEGER||Math.pow(2,53)-1,g=n(109),b=n(51),_=n(52),w=n(110),k=parseInt,x=n(24),E=x.call(Function.call,c.prototype.slice),S=x.call(Function.call,u.prototype.slice),T=x.call(Function.call,h.prototype.test,/^0b[01]+$/i),C=x.call(Function.call,h.prototype.test,/^0o[0-7]+$/i),A=x.call(Function.call,h.prototype.exec),I=new h("["+["","​","￾"].join("")+"]","g"),O=x.call(Function.call,h.prototype.test,I),B=x.call(Function.call,h.prototype.test,/^[-+]0x[0-9a-f]+$/i),L=x.call(Function.call,u.prototype.charCodeAt),j=x.call(Function.call,Object.prototype.toString),D=Math.floor,M=Math.abs,N=Object.create,P=l.getOwnPropertyDescriptor,U=l.isExtensible,R=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),F=new RegExp("(^["+R+"]+)|(["+R+"]+$)","g"),q=x.call(Function.call,u.prototype.replace),z=n(111),H=n(113),$=g(g({},z),{Call:function(t,e){var n=arguments.length>2?arguments[2]:[];if(!this.IsCallable(t))throw new s(t+" is not a function");return t.apply(e,n)},ToPrimitive:i,ToNumber:function(t){var e=w(t)?t:i(t,f);if("symbol"==typeof e)throw new s("Cannot convert a Symbol value to a number");if("string"==typeof e){if(T(e))return this.ToNumber(k(S(e,2),2));if(C(e))return this.ToNumber(k(S(e,2),8));if(O(e)||B(e))return NaN;var n=function(t){return q(t,F,"")}(e);if(n!==e)return this.ToNumber(n)}return f(e)},ToInt16:function(t){var e=this.ToUint16(t);return e>=32768?e-65536:e},ToInt8:function(t){var e=this.ToUint8(t);return e>=128?e-256:e},ToUint8:function(t){var e=this.ToNumber(t);if(v(e)||0===e||!m(e))return 0;var n=b(e)*D(M(e));return _(n,256)},ToUint8Clamp:function(t){var e=this.ToNumber(t);if(v(e)||e<=0)return 0;if(e>=255)return 255;var n=D(t);return n+.5<e?n+1:e<n+.5?n:n%2!=0?n+1:n},ToString:function(t){if("symbol"==typeof t)throw new s("Cannot convert a Symbol value to a string");return u(t)},ToObject:function(t){return this.RequireObjectCoercible(t),l(t)},ToPropertyKey:function(t){var e=this.ToPrimitive(t,u);return"symbol"==typeof e?e:this.ToString(e)},ToLength:function(t){var e=this.ToInteger(t);return e<=0?0:e>y?y:e},CanonicalNumericIndexString:function(t){if("[object String]"!==j(t))throw new s("must be a string");if("-0"===t)return-0;var e=this.ToNumber(t);return this.SameValue(this.ToString(e),t)?e:void 0},RequireObjectCoercible:z.CheckObjectCoercible,IsArray:c.isArray||function(t){return"[object Array]"===j(t)},IsConstructor:function(t){return"function"==typeof t&&!!t.prototype},IsExtensible:Object.preventExtensions?function(t){return!w(t)&&U(t)}:function(t){return!0},IsInteger:function(t){if("number"!=typeof t||v(t)||!m(t))return!1;var e=M(t);return D(e)===e},IsPropertyKey:function(t){return"string"==typeof t||"symbol"==typeof t},IsRegExp:function(t){if(!t||"object"!=typeof t)return!1;if(p){var e=t[d.match];if(void 0!==e)return z.ToBoolean(e)}return H(t)},SameValueZero:function(t,e){return t===e||v(t)&&v(e)},GetV:function(t,e){if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");return this.ToObject(t)[e]},GetMethod:function(t,e){if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");var n=this.GetV(t,e);if(null!=n){if(!this.IsCallable(n))throw new s(e+"is not a function");return n}},Get:function(t,e){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");return t[e]},Type:function(t){return"symbol"==typeof t?"Symbol":z.Type(t)},SpeciesConstructor:function(t,e){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");var n=t.constructor;if(void 0===n)return e;if("Object"!==this.Type(n))throw new s("O.constructor is not an Object");var r=p&&d.species?n[d.species]:void 0;if(null==r)return e;if(this.IsConstructor(r))return r;throw new s("no constructor found")},CompletePropertyDescriptor:function(t){if(!this.IsPropertyDescriptor(t))throw new s("Desc must be a Property Descriptor");return this.IsGenericDescriptor(t)||this.IsDataDescriptor(t)?(r(t,"[[Value]]")||(t["[[Value]]"]=void 0),r(t,"[[Writable]]")||(t["[[Writable]]"]=!1)):(r(t,"[[Get]]")||(t["[[Get]]"]=void 0),r(t,"[[Set]]")||(t["[[Set]]"]=void 0)),r(t,"[[Enumerable]]")||(t["[[Enumerable]]"]=!1),r(t,"[[Configurable]]")||(t["[[Configurable]]"]=!1),t},Set:function(t,e,n,r){if("Object"!==this.Type(t))throw new s("O must be an Object");if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");if("Boolean"!==this.Type(r))throw new s("Throw must be a Boolean");if(r)return t[e]=n,!0;try{t[e]=n}catch(t){return!1}},HasOwnProperty:function(t,e){if("Object"!==this.Type(t))throw new s("O must be an Object");if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");return r(t,e)},HasProperty:function(t,e){if("Object"!==this.Type(t))throw new s("O must be an Object");if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");return e in t},IsConcatSpreadable:function(t){if("Object"!==this.Type(t))return!1;if(p&&"symbol"==typeof d.isConcatSpreadable){var e=this.Get(t,Symbol.isConcatSpreadable);if(void 0!==e)return this.ToBoolean(e)}return this.IsArray(t)},Invoke:function(t,e){if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");var n=E(arguments,2),r=this.GetV(t,e);return this.Call(r,t,n)},GetIterator:function(t,e){if(!p)throw new SyntaxError("ES.GetIterator depends on native iterator support.");var n=e;arguments.length<2&&(n=this.GetMethod(t,d.iterator));var r=this.Call(n,t);if("Object"!==this.Type(r))throw new s("iterator must return an object");return r},IteratorNext:function(t,e){var n=this.Invoke(t,"next",arguments.length<2?[]:[e]);if("Object"!==this.Type(n))throw new s("iterator next must return an object");return n},IteratorComplete:function(t){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(iterResult) is not Object");return this.ToBoolean(this.Get(t,"done"))},IteratorValue:function(t){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(iterResult) is not Object");return this.Get(t,"value")},IteratorStep:function(t){var e=this.IteratorNext(t);return!0!==this.IteratorComplete(e)&&e},IteratorClose:function(t,e){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(iterator) is not Object");if(!this.IsCallable(e))throw new s("Assertion failed: completion is not a thunk for a Completion Record");var n,r=e,i=this.GetMethod(t,"return");if(void 0===i)return r();try{var o=this.Call(i,t,[])}catch(t){throw n=r(),r=null,t}if(n=r(),r=null,"Object"!==this.Type(o))throw new s("iterator .return must return an object");return n},CreateIterResultObject:function(t,e){if("Boolean"!==this.Type(e))throw new s("Assertion failed: Type(done) is not Boolean");return{value:t,done:e}},RegExpExec:function(t,e){if("Object"!==this.Type(t))throw new s("R must be an Object");if("String"!==this.Type(e))throw new s("S must be a String");var n=this.Get(t,"exec");if(this.IsCallable(n)){var r=this.Call(n,t,[e]);if(null===r||"Object"===this.Type(r))return r;throw new s('"exec" method must return `null` or an Object')}return A(t,e)},ArraySpeciesCreate:function(t,e){if(!this.IsInteger(e)||e<0)throw new s("Assertion failed: length must be an integer >= 0");var n,r=0===e?0:e;if(this.IsArray(t)&&(n=this.Get(t,"constructor"),"Object"===this.Type(n)&&p&&d.species&&null===(n=this.Get(n,d.species))&&(n=void 0)),void 0===n)return c(r);if(!this.IsConstructor(n))throw new s("C must be a constructor");return new n(r)},CreateDataProperty:function(t,e,n){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");var r=P(t,e),i=r||"function"!=typeof U||U(t);if(r&&(!r.writable||!r.configurable)||!i)return!1;var o={configurable:!0,enumerable:!0,value:n,writable:!0};return Object.defineProperty(t,e,o),!0},CreateDataPropertyOrThrow:function(t,e,n){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");var r=this.CreateDataProperty(t,e,n);if(!r)throw new s("unable to create data property");return r},ObjectCreate:function(t,e){if(null!==t&&"Object"!==this.Type(t))throw new s("Assertion failed: proto must be null or an object");var n=arguments.length<2?[]:e;if(n.length>0)throw new a("es-abstract does not yet support internal slots");if(null===t&&!N)throw new a("native Object.create support is required to create null objects");return N(t)},AdvanceStringIndex:function(t,e,n){if("String"!==this.Type(t))throw new s("S must be a String");if(!this.IsInteger(e)||e<0||e>y)throw new s("Assertion failed: length must be an integer >= 0 and <= 2**53");if("Boolean"!==this.Type(n))throw new s("Assertion failed: unicode must be a Boolean");if(!n)return e+1;if(e+1>=t.length)return e+1;var r=L(t,e);if(r<55296||r>56319)return e+1;var i=L(t,e+1);return i<56320||i>57343?e+1:e+2}});delete $.CheckObjectCoercible,t.exports=$},function(t,e,n){"use strict";t.exports=n(105)},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,i=n(47),o=n(32),s=n(106),a=n(107),c=function(t,e){if(null==t)throw new TypeError("Cannot call method on "+t);if("string"!=typeof e||"number"!==e&&"string"!==e)throw new TypeError('hint must be "string" or "number"');var n,r,s,a="string"===e?["toString","valueOf"]:["valueOf","toString"];for(s=0;s<a.length;++s)if(n=t[a[s]],o(n)&&(r=n.call(t),i(r)))return r;throw new TypeError("No default value")},u=function(t,e){var n=t[e];if(null!=n){if(!o(n))throw new TypeError(n+" returned for property "+e+" of object "+t+" is not a function");return n}};t.exports=function(t){if(i(t))return t;var e,n="default";if(arguments.length>1&&(arguments[1]===String?n="string":arguments[1]===Number&&(n="number")),r&&(Symbol.toPrimitive?e=u(t,Symbol.toPrimitive):a(t)&&(e=Symbol.prototype.valueOf)),void 0!==e){var o=e.call(t,n);if(i(o))return o;throw new TypeError("unable to convert exotic object to primitive")}return"default"===n&&(s(t)||a(t))&&(n="string"),c(t,"default"===n?"number":n)}},function(t,e,n){"use strict";var r=Date.prototype.getDay,i=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(o?function(t){try{return r.call(t),!0}catch(t){return!1}}(t):"[object Date]"===i.call(t))}},function(t,e,n){"use strict";var r=Object.prototype.toString;if(n(108)()){var i=Symbol.prototype.toString,o=/^Symbol\(.*\)$/;t.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==r.call(t))return!1;try{return function(t){return"symbol"==typeof t.valueOf()&&o.test(i.call(t))}(t)}catch(t){return!1}}}else t.exports=function(t){return!1}},function(t,e,n){"use strict";(function(e){var r=e.Symbol,i=n(44);t.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&i())))}}).call(this,n(17))},function(t,e,n){var r=n(24).call(Function.call,Object.prototype.hasOwnProperty),i=Object.assign;t.exports=function(t,e){if(i)return i(t,e);for(var n in e)r(e,n)&&(t[n]=e[n]);return t}},function(t,e){t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,n){"use strict";var r=n(48),i=r("%Object%"),o=r("%TypeError%"),s=r("%String%"),a=n(49),c=n(50),u=n(51),l=n(52),f=n(32),d=n(112),h=n(31),p={ToPrimitive:d,ToBoolean:function(t){return!!t},ToNumber:function(t){return+t},ToInteger:function(t){var e=this.ToNumber(t);return a(e)?0:0!==e&&c(e)?u(e)*Math.floor(Math.abs(e)):e},ToInt32:function(t){return this.ToNumber(t)>>0},ToUint32:function(t){return this.ToNumber(t)>>>0},ToUint16:function(t){var e=this.ToNumber(t);if(a(e)||0===e||!c(e))return 0;var n=u(e)*Math.floor(Math.abs(e));return l(n,65536)},ToString:function(t){return s(t)},ToObject:function(t){return this.CheckObjectCoercible(t),i(t)},CheckObjectCoercible:function(t,e){if(null==t)throw new o(e||"Cannot call method on "+t);return t},IsCallable:f,SameValue:function(t,e){return t===e?0!==t||1/t==1/e:a(t)&&a(e)},Type:function(t){return null===t?"Null":void 0===t?"Undefined":"function"==typeof t||"object"==typeof t?"Object":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"string"==typeof t?"String":void 0},IsPropertyDescriptor:function(t){if("Object"!==this.Type(t))return!1;var e={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in t)if(h(t,n)&&!e[n])return!1;var r=h(t,"[[Value]]"),i=h(t,"[[Get]]")||h(t,"[[Set]]");if(r&&i)throw new o("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");return!(!h(t,"[[Get]]")&&!h(t,"[[Set]]"))},IsDataDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");return!(!h(t,"[[Value]]")&&!h(t,"[[Writable]]"))},IsGenericDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");return!this.IsAccessorDescriptor(t)&&!this.IsDataDescriptor(t)},FromPropertyDescriptor:function(t){if(void 0===t)return t;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");if(this.IsDataDescriptor(t))return{value:t["[[Value]]"],writable:!!t["[[Writable]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};if(this.IsAccessorDescriptor(t))return{get:t["[[Get]]"],set:t["[[Set]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};throw new o("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(t){if("Object"!==this.Type(t))throw new o("ToPropertyDescriptor requires an object");var e={};if(h(t,"enumerable")&&(e["[[Enumerable]]"]=this.ToBoolean(t.enumerable)),h(t,"configurable")&&(e["[[Configurable]]"]=this.ToBoolean(t.configurable)),h(t,"value")&&(e["[[Value]]"]=t.value),h(t,"writable")&&(e["[[Writable]]"]=this.ToBoolean(t.writable)),h(t,"get")){var n=t.get;if(void 0!==n&&!this.IsCallable(n))throw new TypeError("getter must be a function");e["[[Get]]"]=n}if(h(t,"set")){var r=t.set;if(void 0!==r&&!this.IsCallable(r))throw new o("setter must be a function");e["[[Set]]"]=r}if((h(e,"[[Get]]")||h(e,"[[Set]]"))&&(h(e,"[[Value]]")||h(e,"[[Writable]]")))throw new o("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return e}};t.exports=p},function(t,e,n){"use strict";var r=Object.prototype.toString,i=n(47),o=n(32),s=function(t){var e;if((e=arguments.length>1?arguments[1]:"[object Date]"===r.call(t)?String:Number)===String||e===Number){var n,s,a=e===String?["toString","valueOf"]:["valueOf","toString"];for(s=0;s<a.length;++s)if(o(t[a[s]])&&(n=t[a[s]](),i(n)))return n;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};t.exports=function(t){return i(t)?t:arguments.length>1?s(t,arguments[1]):s(t)}},function(t,e,n){"use strict";var r=n(31),i=RegExp.prototype.exec,o=Object.getOwnPropertyDescriptor,s=Object.prototype.toString,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!a)return"[object RegExp]"===s.call(t);var e=o(t,"lastIndex");return!(!e||!r(e,"value"))&&function(t){try{var e=t.lastIndex;return t.lastIndex=0,i.call(t),!0}catch(t){return!1}finally{t.lastIndex=e}}(t)}},function(t,e,n){"use strict";var r=n(23),i=n(54);t.exports=function(){var t=i();return r(Array.prototype,{find:t},{find:function(){return Array.prototype.find!==t}}),t}},function(t,e,n){"use strict";Array.prototype.includes||(Array.prototype.includes=function(t){var e=Object(this),n=parseInt(e.length)||0;if(0===n)return!1;var r,i,o=parseInt(arguments[1])||0;for(o>=0?r=o:(r=n+o)<0&&(r=0);r<n;){if(t===(i=e[r])||t!=t&&i!=i)return!0;r++}return!1})},function(t,e,n){(function(e,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */var r;r=function(){"use strict";function t(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,o=void 0,s=void 0,a=function(t,e){p[i]=t,p[i+1]=e,2===(i+=2)&&(s?s(v):_())},c="undefined"!=typeof window?window:void 0,u=c||{},l=u.MutationObserver||u.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(v,1)}}var p=new Array(1e3);function v(){for(var t=0;t<i;t+=2)(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0;i=0}var m,y,g,b,_=void 0;function w(t,e){var n=this,r=new this.constructor(E);void 0===r[x]&&N(r);var i=n._state;if(i){var o=arguments[i-1];a((function(){return D(i,r,o,n._result)}))}else L(n,r,t,e);return r}function k(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(E);return A(e,t),e}f?_=function(){return e.nextTick(v)}:l?(y=0,g=new l(v),b=document.createTextNode(""),g.observe(b,{characterData:!0}),_=function(){b.data=y=++y%2}):d?((m=new MessageChannel).port1.onmessage=v,_=function(){return m.port2.postMessage(0)}):_=void 0===c?function(){try{var t=Function("return this")().require("vertx");return void 0!==(o=t.runOnLoop||t.runOnContext)?function(){o(v)}:h()}catch(t){return h()}}():h();var x=Math.random().toString(36).substring(2);function E(){}var S={error:null};function T(t){try{return t.then}catch(t){return S.error=t,S}}function C(e,n,r){n.constructor===e.constructor&&r===w&&n.constructor.resolve===k?function(t,e){1===e._state?O(t,e._result):2===e._state?B(t,e._result):L(e,void 0,(function(e){return A(t,e)}),(function(e){return B(t,e)}))}(e,n):r===S?(B(e,S.error),S.error=null):void 0===r?O(e,n):t(r)?function(t,e,n){a((function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,(function(n){r||(r=!0,e!==n?A(t,n):O(t,n))}),(function(e){r||(r=!0,B(t,e))}),t._label);!r&&i&&(r=!0,B(t,i))}),t)}(e,n,r):O(e,n)}function A(t,e){var n,r;t===e?B(t,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=e),null===n||"object"!==r&&"function"!==r?O(t,e):C(t,e,T(e)))}function I(t){t._onerror&&t._onerror(t._result),j(t)}function O(t,e){void 0===t._state&&(t._result=e,t._state=1,0!==t._subscribers.length&&a(j,t))}function B(t,e){void 0===t._state&&(t._state=2,t._result=e,a(I,t))}function L(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+1]=n,i[o+2]=r,0===o&&t._state&&a(j,t)}function j(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?D(n,r,i,o):i(o);t._subscribers.length=0}}function D(e,n,r,i){var o=t(r),s=void 0,a=void 0,c=void 0,u=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return S.error=t,S}}(r,i))===S?(u=!0,a=s.error,s.error=null):c=!0,n===s)return void B(n,new TypeError("A promises callback cannot return that same promise."))}else s=i,c=!0;void 0!==n._state||(o&&c?A(n,s):u?B(n,a):1===e?O(n,s):2===e&&B(n,s))}var M=0;function N(t){t[x]=M++,t._state=void 0,t._result=void 0,t._subscribers=[]}var P=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(E),this.promise[x]||N(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&O(this.promise,this._result))):B(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;void 0===this._state&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===k){var i=T(t);if(i===w&&void 0!==t._state)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===U){var o=new n(E);C(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n((function(e){return e(t)})),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;void 0===r._state&&(this._remaining--,2===t?B(r,n):this._result[e]=n),0===this._remaining&&O(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;L(t,void 0,(function(t){return n._settledAt(1,e,t)}),(function(t){return n._settledAt(2,e,t)}))},t}(),U=function(){function e(t){this[x]=M++,this._result=this._state=void 0,this._subscribers=[],E!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e((function(e){A(t,e)}),(function(e){B(t,e)}))}catch(e){B(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):this.then(e,e)},e}();return U.prototype.then=w,U.all=function(t){return new P(this,t).promise},U.race=function(t){var e=this;return r(t)?new e((function(n,r){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(n,r)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))},U.resolve=k,U.reject=function(t){var e=new this(E);return B(e,t),e},U._setScheduler=function(t){s=t},U._setAsap=function(t){a=t},U._asap=a,U.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=U},U.Promise=U,U},t.exports=r()}).call(this,n(117),n(17))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,u=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&h())}function h(){if(!l){var t=a(d);l=!0;for(var e=u.length;e;){for(c=u,u=[];++f<e;)c&&c[f].run();f=-1,e=u.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||l||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){!function(){"use strict";if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}()},function(t,e){!function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,r=arguments.length;for(n=0;n<r;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}()},function(t,e){!function(){"use strict";/Trident/.test(navigator.userAgent)&&Object.defineProperty(HTMLElement.prototype,"contains",{writable:!0,enumerable:!1,configurable:!0,value:function(t){return!!t&&(this===t||!!(this.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY))}}),"function"!=typeof Document.prototype.contains&&Object.defineProperty(Document.prototype,"contains",{writable:!0,enumerable:!1,configurable:!0,value:function(t){return!!t&&this.documentElement.contains(t)}}),"function"!=typeof Range.prototype.intersectsNode&&Object.defineProperty(Range.prototype,"intersectsNode",{writable:!0,enumerable:!1,configurable:!0,value:function(t){if(!t)throw new TypeError("Failed to execute 'intersectsNode' on 'Range': 1 argument required, but only 0 present.");if(this.startContainer.ownerDocument!==t.ownerDocument)return!1;if(!t.parentNode)return!0;var e=document.createRange();e.selectNode(t);var n=this.compareBoundaryPoints(Range.START_TO_END,e),r=this.compareBoundaryPoints(Range.END_TO_START,e);return 1===n&&-1===r}})}()},function(t,e,n){var r=n(122),i=n(28),o=Object.prototype.toString;t.exports=function(t){var e=!0;if(!t)return e;var n=o.call(t),s=t.length;return"[object Array]"==n||"[object String]"==n||"[object Arguments]"==n||"[object Object]"==n&&"number"==typeof s&&i(t.splice)?!s:(r(t,(function(){return e=!1})),e)}},function(t,e,n){var r=n(123),i=n(13),o=n(26);t.exports=function(t,e,n){var s,a=t,c=a;if(!a)return c;if(!o[typeof a])return c;e=e&&void 0===n?e:r(e,n,3);for(var u=-1,l=o[typeof a]&&i(a),f=l?l.length:0;++u<f;)if(!1===e(a[s=l[u]],s,t))return c;return c}},function(t,e,n){var r=n(124),i=n(128),o=n(33),s=n(129),a=/^\s*function[ \n\r\t]+\w/,c=/\bthis\b/,u=Function.prototype.toString;t.exports=function(t,e,n){if("function"!=typeof t)return i;if(void 0===e||!("prototype"in t))return t;var l=t.__bindData__;if(void 0===l&&(s.funcNames&&(l=!t.name),!(l=l||!s.funcDecomp))){var f=u.call(t);s.funcNames||(l=!a.test(f)),l||(l=c.test(f),o(t,l))}if(!1===l||!0!==l&&1&l[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return r(t,e)}},function(t,e,n){var r=n(125),i=n(27);t.exports=function(t,e){return arguments.length>2?r(t,17,i(arguments,2),null,e):r(t,1,null,null,e)}},function(t,e,n){var r=n(126),i=n(127),o=n(28),s=n(27),a=[],c=a.push,u=a.unshift;t.exports=function t(e,n,a,l,f,d){var h=1&n,p=4&n,v=16&n,m=32&n;if(!(2&n)&&!o(e))throw new TypeError;v&&!a.length&&(n&=-17,v=a=!1),m&&!l.length&&(n&=-33,m=l=!1);var y=e&&e.__bindData__;return y&&!0!==y?((y=s(y))[2]&&(y[2]=s(y[2])),y[3]&&(y[3]=s(y[3])),!h||1&y[1]||(y[4]=f),!h&&1&y[1]&&(n|=8),!p||4&y[1]||(y[5]=d),v&&c.apply(y[2]||(y[2]=[]),a),m&&u.apply(y[3]||(y[3]=[]),l),y[1]|=n,t.apply(null,y)):(1==n||17===n?r:i)([e,n,a,l,f,d])}},function(t,e,n){var r=n(55),i=n(18),o=n(33),s=n(27),a=[].push;t.exports=function(t){var e=t[0],n=t[2],c=t[4];function u(){if(n){var t=s(n);a.apply(t,arguments)}if(this instanceof u){var o=r(e.prototype),l=e.apply(o,t||arguments);return i(l)?l:o}return e.apply(c,t||arguments)}return o(u,t),u}},function(t,e,n){var r=n(55),i=n(18),o=n(33),s=n(27),a=[].push;t.exports=function t(e){var n=e[0],c=e[1],u=e[2],l=e[3],f=e[4],d=e[5],h=1&c,p=2&c,v=4&c,m=8&c,y=n;function g(){var e=h?f:this;if(u){var o=s(u);a.apply(o,arguments)}if((l||v)&&(o||(o=s(arguments)),l&&a.apply(o,l),v&&o.length<d))return c|=16,t([n,m?c:-4&c,o,null,f,d]);if(o||(o=arguments),p&&(n=e[y]),this instanceof g){e=r(n.prototype);var b=n.apply(e,o);return i(b)?b:e}return n.apply(e,o)}return o(g,e),g}},function(t,e){t.exports=function(t){return t}},function(t,e,n){(function(e){var r=n(25),i={};i.funcDecomp=!r(e.WinRTError)&&/\bthis\b/.test((function(){return this})),i.funcNames="string"==typeof Function.name,t.exports=i}).call(this,n(17))},function(t,e,n){var r=n(26),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e,n=t,o=[];if(!n)return o;if(!r[typeof t])return o;for(e in n)i.call(n,e)&&o.push(e);return o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return"string"==typeof t||t&&"object"==typeof t&&"[object String]"==n.call(t)||!1}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,n){var r=n(28);t.exports=function(t,e){if(t){var n=t[e];return r(n)?t[e]():n}}},function(t,e,n){var r=n(135),i=(n(57),n(138)),o=n(13),s=n(59),a=n(139),c=n(140),u=/\b__p \+= '';/g,l=/\b(__p \+=) '' \+/g,f=/(__e\(.*?\)|\b__t\)) \+\n'';/g,d=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,h=/($^)/,p=/['\n\r\t\u2028\u2029\\]/g;t.exports=function(t,e,n){var v=a.imports._.templateSettings||a;t=String(t||""),n=r({},n,v);var m,y=r({},n.imports,v.imports),g=o(y),b=c(y),_=0,w=n.interpolate||h,k="__p += '",x=RegExp((n.escape||h).source+"|"+w.source+"|"+(w===s?d:h).source+"|"+(n.evaluate||h).source+"|$","g");t.replace(x,(function(e,n,r,o,s,a){return r||(r=o),k+=t.slice(_,a).replace(p,i),n&&(k+="' +\n__e("+n+") +\n'"),s&&(m=!0,k+="';\n"+s+";\n__p += '"),r&&(k+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),_=a+e.length,e})),k+="';\n";var E=n.variable,S=E;S||(k="with ("+(E="obj")+") {\n"+k+"\n}\n"),k=(m?k.replace(u,""):k).replace(l,"$1").replace(f,"$1;"),k="function("+E+") {\n"+(S?"":E+" || ("+E+" = {});\n")+"var __t, __p = '', __e = _.escape"+(m?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+k+"return __p\n}";try{var T=Function(g,"return "+k).apply(void 0,b)}catch(t){throw t.source=k,t}return e?T(e):(T.source=k,T)}},function(t,e,n){var r=n(13),i=n(26);t.exports=function(t,e,n){var o,s=t,a=s;if(!s)return a;for(var c=arguments,u=0,l="number"==typeof n?2:c.length;++u<l;)if((s=c[u])&&i[typeof s])for(var f=-1,d=i[typeof s]&&r(s),h=d?d.length:0;++f<h;)void 0===a[o=d[f]]&&(a[o]=s[o]);return a}},function(t,e,n){var r=n(58);t.exports=function(t){return r[t]}},function(t,e,n){var r=n(58),i=n(13),o=RegExp("["+i(r).join("")+"]","g");t.exports=o},function(t,e){var n={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"};t.exports=function(t){return"\\"+n[t]}},function(t,e,n){var r=n(57),i={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:n(59),variable:"",imports:{_:{escape:r}}};t.exports=i},function(t,e,n){var r=n(13);t.exports=function(t){for(var e=-1,n=r(t),i=n.length,o=Array(i);++e<i;)o[e]=t[n[e]];return o}},function(t,e){var n=0;t.exports=function(t){var e=++n;return String(null==t?"":t)+e}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s={en:{general:{delete:"Delete?",drop:"Drag __block__ here",paste:"Or paste URL here",upload:"...or choose a file",close:"close",position:"Position",wait:"Please wait...",yes:"Yes",no:"No",submit:"Submit"},errors:{title:"You have the following errors:",validation_fail:"__type__ block is invalid",block_empty:"__name__ must not be empty",type_missing:"You must have a block of type __type__",required_type_empty:"A required block type __type__ is empty",load_fail:"There was a problem loading the contents of the document",link_empty:"This link appears to be empty",link_invalid:"The link is not valid"},formatters:{link:{prompt:"Enter a link",new_tab:"Opens in a new tab",message:"The URL you entered appears to be __type__. Do you want to add the required “__prefix__” prefix?",types:{email:"an email address",telephone:"a telephone number",url:"a link"}},superscript:{prompt:"Title attribute (optional)"}},blocks:{text:{title:"Text"},list:{title:"List"},quote:{title:"Quote",credit_field:"Credit"},image:{title:"Image",upload_error:"There was a problem with your upload"},video:{title:"Video",drop_title:"Video URL"},tweet:{title:"Tweet",drop_title:"Tweet URL",fetch_error:"There was a problem fetching your tweet"},embedly:{title:"Embedly",fetch_error:"There was a problem fetching your embed",key_missing:"An Embedly API key must be present"},heading:{title:"Heading"}}}};void 0===window.i18n?(o.log("Using i18n stub"),window.i18n={t:function(t,e){var n,o,a,c,u=t.split(":");for(o=s[i.language],c=0;c<u.length;c++)a=u[c],r.isUndefined(o[a])||(o=o[a]);return n=o,r.isString(n)?(n.indexOf("__")>=0&&Object.keys(e).forEach((function(t){n=n.replace("__"+t+"__",e[t])})),n):""}}):(o.log("Using i18next"),i18n.init({resStore:s,fallbackLng:i.language,ns:{namespaces:["general","blocks"],defaultNs:"general"}})),t.exports=s},function(t,e,n){var r,i;i=this,void 0===(r=function(){return i.Eventable=function(){var t=[].slice,e={on:function(t,e,n){return r(this,"on",t,[e,n])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this}),this):this},once:function(t,e,n){if(!r(this,"once",t,[e,n])||!e)return this;var i=this,o=function(t){var e,n=2;return function(){return--n>0?e=t.apply(this,arguments):t=null,e}}((function(){i.off(t,o),e.apply(this,arguments)}));return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var i,o,s,a,c,u,l,f;if(!this._events||!r(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(c=0,u=(a=t?[t]:Object.keys(this._events)).length;c<u;c++)if(t=a[c],s=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,f=s.length;l<f;l++)o=s[l],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(e){if(!this._events)return this;var n=t.call(arguments,1);if(!r(this,"trigger",e,n))return this;var o=this._events[e],s=this._events.all;return o&&i(o,n),s&&i(s,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;for(var o in"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t),r)r[o].off(e,n,this),i&&delete this._listeners[o];return this}},n=/\s+/,r=function(t,e,r,i){if(!r)return!0;if("object"==typeof r){for(var o in r)t[e].apply(t,[o,r[o]].concat(i));return!1}if(n.test(r)){for(var s=r.split(n),a=0,c=s.length;a<c;a++)t[e].apply(t,[s[a]].concat(i));return!1}return!0},i=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}};function o(t,n){e[t]=function(t,e,r){return(this._listeners||(this._listeners={}))[t._listenerId||(t._listenerId=(new Date).getTime())]=t,"object"==typeof e&&(r=this),t[n](e,r,this),this}}return o("listenTo","on"),o("listenToOnce","once"),e.bind=e.on,e.unbind=e.off,e}()}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){"use strict";n.r(e),n.d(e,"Headers",(function(){return h})),n.d(e,"Request",(function(){return _})),n.d(e,"Response",(function(){return k})),n.d(e,"DOMException",(function(){return E})),n.d(e,"fetch",(function(){return S}));var r="URLSearchParams"in self,i="Symbol"in self&&"iterator"in Symbol,o="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in self,a="ArrayBuffer"in self;if(a)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(t){return t&&c.indexOf(Object.prototype.toString.call(t))>-1};function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return"string"!=typeof t&&(t=String(t)),t}function d(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return i&&(e[Symbol.iterator]=function(){return e}),e}function h(t){this.map={},t instanceof h?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function v(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function m(t){var e=new FileReader,n=v(e);return e.readAsArrayBuffer(t),n}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:o&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&o&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||u(t))?this._bodyArrayBuffer=y(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var t,e,n,r=p(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=v(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(t,e){t=l(t),e=f(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},h.prototype.delete=function(t){delete this.map[l(t)]},h.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},h.prototype.set=function(t,e){this.map[l(t)]=f(e)},h.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},h.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),d(t)},h.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),d(t)},h.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),d(t)},i&&(h.prototype[Symbol.iterator]=h.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(t,e){var n,r,i=(e=e||{}).body;if(t instanceof _){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),b.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function k(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},g.call(_.prototype),g.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},k.error=function(){var t=new k(null,{status:0,statusText:""});return t.type="error",t};var x=[301,302,303,307,308];k.redirect=function(t,e){if(-1===x.indexOf(e))throw new RangeError("Invalid status code");return new k(null,{status:e,headers:{location:t}})};var E=self.DOMException;try{new E}catch(t){(E=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),E.prototype.constructor=E}function S(t,e){return new Promise((function(n,r){var i=new _(t,e);if(i.signal&&i.signal.aborted)return r(new E("Aborted","AbortError"));var s=new XMLHttpRequest;function a(){s.abort()}s.onload=function(){var t,e,r={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new h,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}})),e)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;n(new k(i,r))},s.onerror=function(){r(new TypeError("Network request failed"))},s.ontimeout=function(){r(new TypeError("Network request failed"))},s.onabort=function(){r(new E("Aborted","AbortError"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&o&&(s.responseType="blob"),i.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),i.signal&&(i.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&i.signal.removeEventListener("abort",a)}),s.send(void 0===i._bodyInit?null:i._bodyInit)}))}S.polyfill=!0,self.fetch||(self.fetch=S,self.Headers=h,self.Request=_,self.Response=k)},function(t,e){var n=0;t.exports=function(t,e){var r,i,o,s,a=(e=e||{}).prefix||"__jp",c=e.param||"callback",u=e.timeout?e.timeout:15e3,l=document.getElementsByTagName("script")[0]||document.head,f=function(){},d=a+n++;return o=function(){r&&r.parentNode&&r.parentNode.removeChild(r),window[d]=f,i&&clearTimeout(i)},{promise:new Promise((function(e,n){u&&(i=setTimeout((function(){o(),n(new Error("Timeout"))}),u)),window[d]=function(t){o(),e(t)},t=(t+=(~t.indexOf("?")?"&":"?")+c+"="+encodeURIComponent(d)).replace("?&","?"),(r=document.createElement("script")).src=t,l.parentNode.insertBefore(r,l),s=function(){window[d]&&(o(),n(new Error("Canceled")))}})),cancel:s}}},function(t,e,n){"use strict";t.exports=function(t){var e,n,r=new Promise((function(t,r){e=t,n=r}));return t.then((function(t){r.cancelled||e(t)}),(function(t){r.cancelled||n(t)})),r.cancel=function(){this.cancelled=!0},r}},function(t,e,n){"use strict";var r=n(1),i=n(2),o=n(3),s=n(11);t.exports={mixinName:"Controllable",initializeControllable:function(){r.log("Adding controllable to block "+this.blockID),this.inner.classList.add("st-block__inner--controllable"),this.control_ui=o.createElement("div",{class:"st-block__control-ui"}),Object.keys(this.controls).forEach((function(t){this.addUiControl(t,this.controls[t].bind(this))}),this),this.inner.appendChild(this.control_ui)},getControlTemplate:function(t){return o.createElement("a",{"data-icon":t,class:"st-icon st-block-control-ui-btn st-block-control-ui-btn--"+t,html:'<svg role="img" class="st-icon">\n                  <use xlink:href="'.concat(i.defaults.iconUrl,"#").concat(t,'"/>\n                </svg>')})},addUiControl:function(t,e){var n=this;this.control_ui.appendChild(this.getControlTemplate(t)),s.delegate(this.control_ui,".st-block-control-ui-btn--"+t,"click",(function(r){n.selectUiControl(t),e(r)}))},selectUiControl:function(t){var e=this;Object.keys(this.controls).forEach((function(t){e.getControlUiBtn(t).classList.remove("st-block-control-ui-btn--selected")})),this.getControlUiBtn(t).classList.add("st-block-control-ui-btn--selected")},getControlUiBtn:function(t){return this.control_ui.querySelector(".st-block-control-ui-btn--"+t)}}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(3),a=n(35),c=n(4);t.exports={mixinName:"Droppable",valid_drop_file_types:["File","Files","text/plain","text/uri-list"],requireInputs:!0,initializeDroppable:function(){o.log("Adding droppable to block "+this.blockID),this.drop_options=Object.assign({},i.defaults.Block.drop_options,this.drop_options),s.hide(this.editor),this.inputs.insertAdjacentHTML("beforeend",r.template(this.drop_options.html,{block:this,_:r,config:i})),a.dropArea(this.inputs.lastElementChild).addEventListener("drop",this._handleDrop.bind(this)),this.el.classList.add("st-block--droppable"),this.inner.classList.add("st-block__inner--droppable"),this._setupKeyEvents()},_handleDrop:function(t){t.preventDefault(),t.stopPropagation();var e=t.target,n=[].slice.call(t.dataTransfer.types);e.classList.remove("st-dropzone--dragover"),n&&n.some((function(t){return this.valid_drop_file_types.includes(t)}),this)&&this.onDrop(t.dataTransfer),c.trigger("block:content:dropped",this.blockID)},focus:function(){this.inner.focus()},_setupKeyEvents:function(){var t=this;this.inner.setAttribute("tabindex",0),this.inner.addEventListener("keyup",(function(e){if(e.target===t.inner)switch(e.keyCode){case 13:t.mediator.trigger("block:create","Text",null,t.el,{autoFocus:!0});break;case 8:return void t.onDeleteClick.call(t,new CustomEvent("click"))}}))}}},function(t,e,n){"use strict";var r=n(0),i=n(63);t.exports={mixinName:"Fetchable",initializeFetchable:function(){this.withMixin(n(34))},fetch:function(t,e,n,o){var s=r.uniqueId(this.blockID+"_fetch"),a=i.fetch(t,e);function c(t,e){t.call(this,e),this.removeQueuedItem(s)}return this.resetMessages(),this.addQueuedItem(s,a),r.isUndefined(n)||a.then(c.bind(this,n)),r.isUndefined(o)||a.catch(c.bind(this,o)),a}}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1);t.exports={mixinName:"Pastable",requireInputs:!0,initializePastable:function(){var t=this;o.log("Adding pastable to block "+this.blockID),this.paste_options=Object.assign({},i.defaults.Block.paste_options,this.paste_options),this.inputs.insertAdjacentHTML("beforeend",r.template(this.paste_options.html,this)),Array.prototype.forEach.call(this.$(".st-paste-block"),(function(e){e.addEventListener("click",(function(){var t=document.createEvent("HTMLEvents");t.initEvent("select",!0,!1),this.dispatchEvent(t)})),e.addEventListener("paste",t._handleContentPaste),e.addEventListener("submit",t._handleContentPaste)}))}}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(62);t.exports={mixinName:"Uploadable",uploadsCount:0,requireInputs:!0,initializeUploadable:function(){o.log("Adding uploadable to block "+this.blockID),this.withMixin(n(34)),this.upload_options=Object.assign({},i.defaults.Block.upload_options,this.upload_options),this.inputs.insertAdjacentHTML("beforeend",r.template(this.upload_options.html,this)),Array.prototype.forEach.call(this.inputs.querySelectorAll("button"),(function(t){t.addEventListener("click",(function(t){t.preventDefault()}))})),Array.prototype.forEach.call(this.inputs.querySelectorAll("input"),function(t){t.addEventListener("change",function(t){this.onDrop(t.currentTarget)}.bind(this))}.bind(this))},uploader:function(t,e,n){return s(this,t,e,n)}}},function(t,e,n){"use strict";var r=n(8),i=n(0),o=n(67),s=n(16).trimScribeContent;t.exports={mixinName:"MultiEditable",initializeMultiEditable:function(){this.editors={}},newTextEditor:function(t,e){var n,r,s;(r=void 0===t.tagName)?((s=document.createElement("div")).innerHTML=t,n=s.querySelector(".st-block__editor")):n=t;var a=i.uniqueId("editor-");n.setAttribute("data-editorId",a),n.addEventListener("keyup",this.getSelectionForFormatter),n.addEventListener("mouseup",this.getSelectionForFormatter);var c=i.isFunction(this.configureScribe)?this.configureScribe.bind(this):null,u=o.initScribeInstance(n,this.scribeOptions,c,this.editorOptions);u.setContent(e);var l={node:r?s.removeChild(s.firstChild):n,el:n,scribe:u,id:a};return this.editors[a]=l,l},getCurrentTextEditor:function(){var t=document.activeElement.getAttribute("data-editorId"),e=this.getTextEditor(t);return e&&(this.currentEditor=e),this.currentEditor},appendToTextEditor:function(t,e){var n=this.getTextEditor(t).scribe;s(n);var i=document.createRange();i.selectNodeContents(n.el),i.collapse(!1);var o=new n.api.Selection;o.selection.removeAllRanges(),o.selection.addRange(i);var a=r(n.el);e&&n.insertHTML(e),r(n.el,{start:a.start,end:a.end})},getCurrentScribeInstance:function(){return this.getCurrentTextEditor().scribe},getTextEditor:function(t){return this.editors[t]},removeTextEditor:function(t){delete this.editors[t]},execTextBlockCommand:function(t){return o.execTextBlockCommand(this.getCurrentScribeInstance(),t)},queryTextBlockCommandState:function(t){return o.queryTextBlockCommandState(this.getCurrentScribeInstance(),t)}}},function(t,e,n){var r,i;try{r=n(65)}catch(t){r=n(65)}try{i=n(66)}catch(t){i=n(66)}function o(t,e){if(!(this instanceof o))return new o(t,e);if(this.node=this.start=this.peeked=t,this.root=e,this.closingTag=!1,this._revisit=!0,this._selects=[],this._rejects=[],t&&this.higher(t))throw new Error("root must be a parent or ancestor to node")}function s(t,e){var n="nextSibling"==t;return function(i,o,s){i=this.compile(i),o=o&&o>0?o:1;for(var a=this.node,c=this.closingTag,u=this._revisit;a;){if(r(n,c)&&a[e])a=a[e],c=!n;else if(1==a.nodeType&&!a[e]&&r(n,c)){if(c=n,!u)continue}else if(a[t])a=a[t],c=!n;else if(a=a.parentNode,c=n,!u)continue;if(!a||this.higher(a,this.root))break;if(i(a)&&this.selects(a,s)&&this.rejects(a,s)){if(--o)continue;return s||(this.node=a),this.closingTag=c,a}}return null}}t.exports=o,o.prototype.reset=function(t){return this.node=t||this.start,this},o.prototype.revisit=function(t){return this._revisit=null==t||t,this},o.prototype.opening=function(){return 1==this.node.nodeType&&(this.closingTag=!1),this},o.prototype.atOpening=function(){return!this.closingTag},o.prototype.closing=function(){return 1==this.node.nodeType&&(this.closingTag=!0),this},o.prototype.atClosing=function(){return this.closingTag},o.prototype.next=s("nextSibling","firstChild"),o.prototype.previous=o.prototype.prev=s("previousSibling","lastChild"),o.prototype.select=function(t){return t=this.compile(t),this._selects.push(t),this},o.prototype.selects=function(t,e){var n=this._selects,r=n.length;if(!r)return!0;for(var i=0;i<r;i++)if(n[i].call(this,t,e))return!0;return!1},o.prototype.reject=function(t){return t=this.compile(t),this._rejects.push(t),this},o.prototype.rejects=function(t,e){var n=this._rejects,r=n.length;if(!r)return!0;for(var i=0;i<r;i++)if(n[i].call(this,t,e))return!1;return!0},o.prototype.higher=function(t){var e=this.root;if(!e)return!1;for(t=t.parentNode;t&&t!=e;)t=t.parentNode;return t!=e},o.prototype.compile=function(t){switch(typeof t){case"number":return function(e){return t==e.nodeType};case"string":return new Function("node","return "+i(t,"node."));case"function":return t;default:return function(){return!0}}},o.prototype.peak=o.prototype.peek=function(t,e){return 1==arguments.length&&(e=t,t=!0),(e=null==e?1:e)?e>0?this.next(t,e,!0):this.prev(t,Math.abs(e),!0):this.node},o.prototype.use=function(t){return t(this),this}},function(t,e,n){var r,i;r=[n(155),n(162),n(170),n(173),n(176),n(184),n(189),n(190),n(191),n(29),n(5),n(192),n(69)],void 0===(i=function(t,e,n,r,i,o,s,a,c,u,l,f,d){"use strict";function h(){var t=!1,e=this,n={handleEvent:function(n){t||("compositionstart"!==n.type?"compositionend"===n.type?(t=!1,e.transactionManager.run()):e.transactionManager.run():t=!0)}};["compositionstart","compositionend","keydown","cut","paste"].forEach(function(t){this.el.addEventListener(t,n,!1)}.bind(this))}function p(u,d){c.call(this),this.el=u,this.commands={},this.options=f.checkOptions(d),this.commandPatches={},this._plainTextFormatterFactory=new v,this._htmlFormatterFactory=new m,this.api=new o(this),this.Immutable=l;var p=s(this);this.transactionManager=new p,this.undoManager=!1,this.options.undo.enabled&&(this.options.undo.manager?this.undoManager=this.options.undo.manager:this.undoManager=new a(this.options.undo.limit,this.el),this._merge=!1,this._forceMerge=!1,this._mergeTimer=0,this._lastItem={content:""}),this.setHTML(this.getHTML()),this.el.setAttribute("contenteditable",!0),h.call(this);var y=l.OrderedSet(this.options.defaultPlugins).sort(f.sortByPlugin("setRootPElement")).filter(f.filterByBlockLevelMode(this.allowsBlockElements())).map((function(e){return t[e]})),g=l.List(this.options.defaultFormatters).filter((function(t){return!!n[t]})).map((function(t){return n[t]})),b=l.List.of(i.events),_=l.List(this.options.defaultCommandPatches).map((function(t){return i.commands[t]})),w=l.List.of("indent","insertList","outdent","redo","subscript","superscript","undo").map((function(t){return e[t]}));l.List().concat(y,g,b,_,w).forEach(function(t){this.use(t())}.bind(this)),this.use(r())}function v(){this.formatters=l.List()}function m(){this.formatters={sanitize:l.List(),normalize:l.List(),export:l.List()}}return p.prototype=Object.create(c.prototype),p.prototype.node=u,p.prototype.element=p.prototype.node,p.prototype.use=function(t){return t(this),this},p.prototype.setHTML=function(t,e){this.options.undo.enabled&&(this._lastItem.content=t),e&&(this._skipFormatters=!0),this.el.innerHTML!==t&&(this.el.innerHTML=t)},p.prototype.getHTML=function(){return this.el.innerHTML},p.prototype.getContent=function(){return this._htmlFormatterFactory.formatForExport(this.getHTML().replace(/<br>$/,""))},p.prototype.getTextContent=function(){return this.el.textContent},p.prototype.pushHistory=function(){var t=this;if(t.options.undo.enabled){var e=t._lastItem.content.replace(/<em [^>]*class="scribe-marker"[^>]*>[^<]*?<\/em>/g,"");if(t.getHTML()!==e){var n=new t.api.Selection;n.placeMarkers();var r=t.getHTML();n.removeMarkers();var i=t.undoManager.item(t.undoManager.position);return(t._merge||t._forceMerge)&&i&&t._lastItem==i[0]?t._lastItem.content=r:(t._lastItem={previousItem:t._lastItem,content:r,scribe:t,execute:function(){},undo:function(){this.scribe.restoreFromHistory(this.previousItem)},redo:function(){this.scribe.restoreFromHistory(this)}},t.undoManager.transact(t._lastItem,!1)),clearTimeout(t._mergeTimer),t._merge=!0,t._mergeTimer=setTimeout((function(){t._merge=!1}),t.options.undo.interval),!0}}return!1},p.prototype.getCommand=function(t){return this.commands[t]||this.commandPatches[t]||new this.api.Command(t)},p.prototype.restoreFromHistory=function(t){this._lastItem=t,this.setHTML(t.content,!0),(new this.api.Selection).selectMarkers(),this.trigger(d.legacyContentChanged),this.trigger(d.contentChanged)},p.prototype.allowsBlockElements=function(){return this.options.allowBlockElements},p.prototype.setContent=function(t){this.allowsBlockElements()||(t+="<br>"),this.setHTML(t),this.trigger(d.legacyContentChanged),this.trigger(d.contentChanged)},p.prototype.insertPlainText=function(t){this.insertHTML("<p>"+this._plainTextFormatterFactory.format(t)+"</p>")},p.prototype.insertHTML=function(t){if(t=this._htmlFormatterFactory.format(t),Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject){var e=document.createElement("span");if(e.innerHTML=t,1===e.children.length&&"P"===e.children[0].tagName&&(t=e.children[0].innerHTML),""===this.getTextContent().trim())this.setContent(t);else{var n=document.getSelection().getRangeAt(0),r=document.createElement("span");n.surroundContents(r),r.innerHTML=t,n.collapse(!1),u.removeChromeArtifacts(this.el)}}else this.getCommand("insertHTML").execute(t)},p.prototype.isDebugModeEnabled=function(){return this.options.debug},p.prototype.registerHTMLFormatter=function(t,e){this._htmlFormatterFactory.formatters[t]=this._htmlFormatterFactory.formatters[t].push(e)},p.prototype.registerPlainTextFormatter=function(t){this._plainTextFormatterFactory.formatters=this._plainTextFormatterFactory.formatters.push(t)},p.prototype.destroy=function(t){this.trigger(d.destroy)},v.prototype.format=function(t){return this.formatters.reduce((function(t,e){return e(t)}),t)},m.prototype=Object.create(v.prototype),m.prototype.constructor=m,m.prototype.format=function(t){return this.formatters.sanitize.concat(this.formatters.normalize).reduce((function(t,e){return e(t)}),t)},m.prototype.formatForExport=function(t){return this.formatters.export.reduce((function(t,e){return e(t)}),t)},p}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(156),n(157),n(158),n(161)],void 0===(i=function(t,e,n,r){"use strict";return{setRootPElement:t,enforcePElements:e,ensureSelectableContainers:n,inlineElementsMode:r}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){if(""===t.getHTML().trim()){var e=!!(n=window.navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./))&&parseInt(n[2],10);window.navigator.userAgent.match(/MSIE 10/)?t.setContent("<p></p>"):e&&e>=95||t.setContent("<p><br></p>")}var n}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){"use strict";return function(){return function(e){var n=e.node;function r(e){var r=0;t.List(e.childNodes).filterNot((function(t){return n.isWhitespaceOnlyTextNode(Node,t)})).filter((function(t){return t.nodeType===Node.TEXT_NODE||!n.isBlockElement(t)})).groupBy((function(t,e,n){return 0===e||t.previousSibling===n.get(e-1)?r:r+=1})).forEach((function(t){n.wrap(t.toArray(),document.createElement("p"))}))}e.registerHTMLFormatter("normalize",(function(t){var e=document.createElement("div");return e.innerHTML=t,r(e),function(t){for(var e,n=0;e=t.children[n++];)"BLOCKQUOTE"===e.tagName&&r(e)}(e),e.innerHTML}))}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(29),n(5)],void 0===(i=function(t,e){"use strict";var n=e.Set.of("AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR");function r(e){var i=e.firstElementChild;function o(e){return!!(0===e.children.length&&t.isBlockElement(e)||1===e.children.length&&t.isSelectionMarkerNode(e.children[0]))||!t.isBlockElement(e)&&0===e.children.length&&function(e){return!!t.isCaretPositionNode(e)||""===e.parentNode.textContent.trim()}(e)}for(;i;)t.isSelectionMarkerNode(i)||(o(i)&&""===i.textContent.trim()&&!n.includes(i.nodeName)&&-1===i.nodeName.indexOf("-")?i.appendChild(document.createElement("br")):i.children.length>0&&r(i)),i=i.nextElementSibling}return function(){return function(t){t.registerHTMLFormatter("normalize",(function(t){var e=document.createElement("div");return e.innerHTML=t,r(e),e.innerHTML}))}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){return t.Set.of("B","BIG","I","SMALL","TT","ABBR","ACRONYM","CITE","CODE","DFN","EM","KBD","STRONG","SAMP","VAR","A","BDO","BR","IMG","MAP","OBJECT","Q","SCRIPT","SPAN","SUB","SUP","BUTTON","INPUT","LABEL","SELECT","TEXTAREA")}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){return t.Set.of("ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","CANVAS","DD","DIV","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TD","TH","TFOOT","UL","VIDEO")}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(29)],void 0===(i=function(t){"use strict";return function(){return function(e){e.el.addEventListener("keydown",function(n){if(13===n.keyCode){var r=new e.api.Selection,i=r.range;r.getContaining((function(t){return"LI"===t.nodeName||/^(H[1-6])$/.test(t.nodeName)}))||(n.preventDefault(),e.transactionManager.run((function(){i.collapsed||i.deleteContents(),e.el.lastChild&&"BR"===e.el.lastChild.nodeName&&e.el.removeChild(e.el.lastChild);var n=document.createElement("br");i.insertNode(n),i.setEndAfter(n),i.collapse(!1);var o=i.cloneRange();if(e.el.lastChild&&o.setEndAfter(e.el.lastChild),!function(e){for(var n=document.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1);n.nextNode();)if(n.currentNode&&(t.hasContent(n.currentNode)||t.isTextNodeWithContent(Node,n.currentNode)))return!0;return!1}(o.cloneContents())){var s=document.createElement("br");i.insertNode(s)}var a=i.cloneRange();a.setStartAfter(n),a.setEndAfter(n),r.selection.removeAllRanges(),r.selection.addRange(a)})))}}.bind(this)),""===e.getHTML().trim()&&e.setContent("")}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(163),n(164),n(165),n(166),n(167),n(168),n(169)],void 0===(i=function(t,e,n,r,i,o,s){"use strict";return{indent:t,insertList:e,outdent:n,redo:r,subscript:i,superscript:o,undo:s}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("indent");e.queryEnabled=function(){var e=(new t.api.Selection).getContaining((function(t){return"UL"===t.nodeName||"OL"===t.nodeName}));return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()&&!e},t.commands.indent=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){"use strict";return function(){return function(e){var n=e.node,r=function(t){e.api.Command.call(this,t)};(r.prototype=Object.create(e.api.Command.prototype)).constructor=r,r.prototype.execute=function(r){function i(t){if(t.size){for(var e=document.createElement(a.nodeName);t.size;)e.appendChild(t.first()),t=t.shift();a.parentNode.insertBefore(e,a.nextElementSibling)}}if(this.queryState()){var o=new e.api.Selection,s=o.range,a=o.getContaining((function(t){return"OL"===t.nodeName||"UL"===t.nodeName})),c=o.getContaining((function(t){return"LI"===t.nodeName}));e.transactionManager.run(function(){if(c){i(n.nextSiblings(c)),o.placeMarkers();var e=document.createElement("p");e.innerHTML=c.innerHTML,a.parentNode.insertBefore(e,a.nextElementSibling),c.parentNode.removeChild(c)}else{var r=t.List(a.querySelectorAll("li")).filter((function(t){return s.intersectsNode(t)})),u=r.last();i(n.nextSiblings(u)),o.placeMarkers();var l=document.createDocumentFragment();r.forEach((function(t){var e=document.createElement("p");e.innerHTML=t.innerHTML,l.appendChild(e)})),a.parentNode.insertBefore(l,a.nextElementSibling),r.forEach((function(t){t.parentNode.removeChild(t)}))}0===a.childNodes.length&&a.parentNode.removeChild(a),o.selectMarkers()}.bind(this))}else e.api.Command.prototype.execute.call(this,r)},r.prototype.queryEnabled=function(){return e.api.Command.prototype.queryEnabled.call(this)&&e.allowsBlockElements()},e.commands.insertOrderedList=new r("insertOrderedList"),e.commands.insertUnorderedList=new r("insertUnorderedList")}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("outdent");e.queryEnabled=function(){var e=(new t.api.Selection).getContaining((function(t){return"UL"===t.nodeName||"OL"===t.nodeName}));return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()&&!e},t.commands.outdent=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(68)],void 0===(i=function(t){"use strict";return function(){return function(e){var n=new e.api.Command("redo");n.execute=function(){e.undoManager.redo()},n.queryEnabled=function(){return e.undoManager.position>0},e.commands.redo=n,e.options.undo.enabled&&e.el.addEventListener("keydown",(function(e){t.isRedoKeyCombination(e)&&(e.preventDefault(),n.execute())}))}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("subscript");t.commands.subscript=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("superscript");t.commands.superscript=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(68)],void 0===(i=function(t){"use strict";return function(){return function(e){var n=new e.api.Command("undo");n.execute=function(){e.undoManager.undo()},n.queryEnabled=function(){return e.undoManager.position<e.undoManager.length},e.commands.undo=n,e.options.undo.enabled&&e.el.addEventListener("keydown",(function(e){t.isUndoKeyCombination(e)&&(e.preventDefault(),n.execute())}))}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(171),n(172)],void 0===(i=function(t,e){"use strict";return{replaceNbspCharsFormatter:t,escapeHtmlCharactersFormatter:e}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=/(\s|&nbsp;)+/g;t.registerHTMLFormatter("export",(function(t){return t.replace(e," ")}))}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i,o,s;r=function(){return function(t){return"string"==typeof t?t:null==t?"":t+""}}.apply(e,[]),i=function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};return function(e){return t[e]}}.apply(e,[]),o=function(t,e){var n=/[&<>"'`]/g,r=RegExp(n.source);return function(i){return(i=t(i))&&r.test(i)?i.replace(n,e):i}}.apply(e,[r,i]),void 0===(s=function(t){"use strict";return function(){return function(e){e.registerPlainTextFormatter(t)}}}.apply(e,[o]))||(t.exports=s)},function(t,e,n){var r,i;r=[n(174),n(5)],void 0===(i=function(t,e){"use strict";return function(){return function(n){var r=n.node;n.el.addEventListener("focus",function(){var t=new n.api.Selection;if(t.range&&(n.allowsBlockElements()&&t.range.startContainer===n.el)){var e=r.firstDeepestChild(n.el),i=t.range;i.setStart(e,0),i.setEnd(e,0),t.selection.removeAllRanges(),t.selection.addRange(i)}}.bind(n));var i=function(){if(!n._skipFormatters){var t=new n.api.Selection,e=t.range,r=function(){e&&t.placeMarkers(),n.setHTML(n._htmlFormatterFactory.format(n.getHTML())),t.selectMarkers()}.bind(n);n.transactionManager.run(r)}delete n._skipFormatters}.bind(n);t(n.el,i),n.allowsBlockElements()&&n.el.addEventListener("keydown",(function(t){if(13===t.keyCode){var e=new n.api.Selection,r=e.range,i=e.getContaining((function(t){return/^(H[1-6])$/.test(t.nodeName)}));if(i&&r.collapsed){var o=r.cloneRange();o.setEndAfter(i),""===o.cloneContents().firstChild.textContent&&(t.preventDefault(),n.transactionManager.run((function(){var t=document.createElement("p"),n=document.createElement("br");t.appendChild(n),i.parentNode.insertBefore(t,i.nextElementSibling),r.setStart(t,0),r.setEnd(t,0),e.selection.removeAllRanges(),e.selection.addRange(r)})))}}})),n.allowsBlockElements()&&n.el.addEventListener("keydown",(function(t){if(13===t.keyCode||8===t.keyCode){var e=new n.api.Selection;if(e.range.collapsed){var r=e.getContaining((function(t){return"LI"===t.nodeName}));if(r&&""===r.textContent.trim()){t.preventDefault();var i=e.getContaining((function(t){return"UL"===t.nodeName||"OL"===t.nodeName})),o=n.getCommand("OL"===i.nodeName?"insertOrderedList":"insertUnorderedList");o.event=t,o.execute()}}}})),n.el.addEventListener("paste",(function(t){if(t.clipboardData&&t.clipboardData.types.length>0)t.preventDefault(),e.List(t.clipboardData.types).includes("text/html")?n.insertHTML(t.clipboardData.getData("text/html")):n.insertPlainText(t.clipboardData.getData("text/plain"));else{var r=new n.api.Selection;r.placeMarkers();var i=document.createElement("div");i.style.height=0,i.style.opacity=0,i.style.overflow="hidden",document.body.appendChild(i),i.setAttribute("contenteditable",!0),i.focus(),setTimeout((function(){var t=i.innerHTML;i.parentNode.removeChild(i),r.selectMarkers(),n.el.focus(),n.insertHTML(t)}),1)}}))}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(29),n(175)],void 0===(i=function(t,e){var n="object"==typeof window?window:void 0,r=e.determineMutationObserver(n);function i(e){return!t.isEmptyTextNode(e)&&!t.isSelectionMarkerNode(e)}return function(t,e){var n=!1,o=new r((function(t){if(!n&&function(t){return t.some((function(t){return Array.prototype.some.call(t.addedNodes,i)||Array.prototype.some.call(t.removedNodes,i)}))}(t)){n=!0;try{e()}catch(t){throw t}finally{setTimeout((function(){n=!1}),0)}}}));return o.observe(t,{childList:!0,subtree:!0}),o}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){return{determineMutationObserver:function(t){return void 0===t?function(){return{observe:function(){}}}:t.MutationObserver||t.WebKitMutationObserver||t.MozMutationObserver}}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(177),n(178),n(179),n(180),n(181),n(182),n(183)],void 0===(i=function(t,e,n,r,i,o,s){"use strict";return{commands:{bold:t,indent:e,insertHTML:n,insertList:r,outdent:i,createLink:o},events:s}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("bold");e.queryEnabled=function(){var e=new t.api.Selection,n=e.getContaining((function(t){return/^(H[1-6])$/.test(t.nodeName)}));return t.api.CommandPatch.prototype.queryEnabled.apply(this,arguments)&&!n},t.commandPatches.bold=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("indent");e.execute=function(e){t.transactionManager.run(function(){var n=new t.api.Selection,r=n.range;if("P"===r.commonAncestorContainer.nodeName&&"<br>"===r.commonAncestorContainer.innerHTML){var i=document.createTextNode("\ufeff");r.insertNode(i),r.setStart(i,0),r.setEnd(i,0),n.selection.removeAllRanges(),n.selection.addRange(r)}t.api.CommandPatch.prototype.execute.call(this,e);var o=(n=new t.api.Selection).getContaining((function(t){return"BLOCKQUOTE"===t.nodeName}));o&&o.removeAttribute("style")}.bind(this))},t.commandPatches.indent=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("insertHTML"),n=t.node;e.execute=function(e){t.transactionManager.run(function(){t.api.CommandPatch.prototype.execute.call(this,e),n.removeChromeArtifacts(t.el)}.bind(this))},t.commandPatches.insertHTML=e}}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=t.node,n=function(e){t.api.CommandPatch.call(this,e)};(n.prototype=Object.create(t.api.CommandPatch.prototype)).constructor=n,n.prototype.execute=function(n){t.transactionManager.run(function(){if(t.api.CommandPatch.prototype.execute.call(this,n),this.queryState()){var r=new t.api.Selection,i=r.getContaining((function(t){return"OL"===t.nodeName||"UL"===t.nodeName}));if(i){i.nextElementSibling&&0===i.nextElementSibling.childNodes.length&&e.removeNode(i.nextElementSibling);var o=i.parentNode;o&&/^(H[1-6]|P)$/.test(o.nodeName)&&(r.placeMarkers(),e.insertAfter(i,o),r.selectMarkers(),2===o.childNodes.length&&e.isEmptyTextNode(o.firstChild)&&e.removeNode(o),0===o.childNodes.length&&e.removeNode(o)),e.removeChromeArtifacts(i)}}}.bind(this))},n.prototype.queryState=function(){try{return t.api.CommandPatch.prototype.queryState.apply(this,arguments)}catch(t){if("NS_ERROR_UNEXPECTED"==t.name)return!1;throw t}},t.commandPatches.insertOrderedList=new n("insertOrderedList"),t.commandPatches.insertUnorderedList=new n("insertUnorderedList")}}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=t.node,n=new t.api.CommandPatch("outdent");n.execute=function(){t.transactionManager.run(function(){var n=new t.api.Selection,r=n.range,i=n.getContaining((function(t){return"BLOCKQUOTE"===t.nodeName}));if("BLOCKQUOTE"===r.commonAncestorContainer.nodeName){n.placeMarkers(),n.selectMarkers(!0);var o=r.cloneContents();i.parentNode.insertBefore(o,i),r.deleteContents(),n.selectMarkers(),""===i.textContent&&i.parentNode.removeChild(i)}else{var s=n.getContaining((function(t){return"P"===t.nodeName}));if(s){var a=e.nextSiblings(s);if(a.size){for(var c=document.createElement(i.nodeName);a.size;)c.appendChild(a.first()),a=a.shift();i.parentNode.insertBefore(c,i.nextElementSibling)}n.placeMarkers(),i.parentNode.insertBefore(s,i.nextElementSibling),n.selectMarkers(),""===i.innerHTML&&i.parentNode.removeChild(i)}else t.api.CommandPatch.prototype.execute.call(this)}}.bind(this))},t.commandPatches.outdent=n}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("createLink");t.commandPatches.createLink=e,e.execute=function(e){var n=new t.api.Selection;if(n.isInScribe())if(n.range.collapsed){var r=document.createElement("a");r.setAttribute("href",e),r.textContent=e,n.range.insertNode(r);var i=document.createRange();i.setStartBefore(r),i.setEndAfter(r),n.selection.removeAllRanges(),n.selection.addRange(i)}else t.api.CommandPatch.prototype.execute.call(this,e)}}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=t.node;t.allowsBlockElements()&&t.el.addEventListener("keyup",(function(n){if(8===n.keyCode||46===n.keyCode){var r=new t.api.Selection,i=r.getContaining((function(t){return"P"===t.nodeName}));i&&t.transactionManager.run((function(){r.placeMarkers(),e.removeChromeArtifacts(i),r.selectMarkers()}),!0)}}))}}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(185),n(186),n(187),n(188)],void 0===(i=function(t,e,n,r){"use strict";return function(i){this.CommandPatch=t(i),this.Command=e(i),this.Selection=n(i),this.SimpleCommand=r(this,i)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(t){function e(t){this.commandName=t}return e.prototype.execute=function(e){t.transactionManager.run(function(){document.execCommand(this.commandName,!1,e||null)}.bind(this))},e.prototype.queryState=function(){return document.queryCommandState(this.commandName)},e.prototype.queryEnabled=function(){return document.queryCommandEnabled(this.commandName)},e}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(t){function e(e){this.commandName=e,this.patch=t.commandPatches[this.commandName]}return e.prototype.execute=function(e){this.patch?this.patch.execute(e):t.transactionManager.run(function(){document.execCommand(this.commandName,!1,e||null)}.bind(this))},e.prototype.queryState=function(){return this.patch?this.patch.queryState():document.queryCommandState(this.commandName)},e.prototype.queryEnabled=function(){return this.patch?this.patch.queryEnabled():document.queryCommandEnabled(this.commandName)},e}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(t){var e=t.el.ownerDocument,n=t.node;if(e.compareDocumentPosition(t.el)&Node.DOCUMENT_POSITION_DISCONNECTED){for(var r=t.el.parentNode;r&&n.isFragment(r);)r=r.parentNode;r&&r.getSelection&&(e=r)}function i(){var t=document.createElement("em");return t.style.display="none",t.classList.add("scribe-marker"),t}function o(t,e){t.insertNode(e),e.nextSibling&&n.isEmptyTextNode(e.nextSibling)&&n.removeNode(e.nextSibling),e.previousSibling&&n.isEmptyTextNode(e.previousSibling)&&n.removeNode(e.previousSibling)}function s(){if(this.selection=e.getSelection(),this.selection.rangeCount&&this.selection.anchorNode){var t=this.selection.anchorNode,r=this.selection.anchorOffset,i=this.selection.focusNode,o=this.selection.focusOffset;if(t===i&&o<r){var s=r;r=o,o=s}else if(n.isBefore(i,t)){var a=t,c=r;t=i,r=o,i=a,o=c}this.range=document.createRange(),this.range.setStart(t,r),this.range.setEnd(i,o)}}return s.prototype.getContaining=function(e){if(this.range){var r=this.range.commonAncestorContainer;return r&&t.el===r||!e(r)?n.getAncestor(r,t.el,e):r}},s.prototype.isInScribe=function(){var e=this.range;return e&&document.contains(t.el)&&t.el.contains(e.startContainer)&&t.el.contains(e.endContainer)},s.prototype.placeMarkers=function(){var t=this.range;if(this.isInScribe()){if(o(t.cloneRange(),i()),!t.collapsed){var e=t.cloneRange();e.collapse(!1),o(e,i())}this.selection.removeAllRanges(),this.selection.addRange(t)}},s.prototype.getMarkers=function(){return t.el.querySelectorAll("em.scribe-marker")},s.prototype.removeMarkers=function(){Array.prototype.forEach.call(this.getMarkers(),(function(t){var e=t.parentNode;n.removeNode(t),window.navigator.userAgent.indexOf("MSIE ")||e.normalize()}))},s.prototype.selectMarkers=function(t){var e=this.getMarkers();if(e.length){var n,r,i,o,s=document.createRange();n=s,r=e[0],i=r.previousSibling,o=r.nextSibling,i&&i.nodeType===Node.TEXT_NODE?n.setStart(i,i.data.length):o&&o.nodeType===Node.TEXT_NODE?n.setStart(o,0):n.setStartBefore(r),function(t,e){var n=e.previousSibling,r=e.nextSibling;n&&n.nodeType===Node.TEXT_NODE?t.setEnd(n,n.data.length):r&&r.nodeType===Node.TEXT_NODE?t.setEnd(r,0):t.setEndAfter(e)}(s,e.length>=2?e[1]:e[0]),t||this.removeMarkers(),this.selection.removeAllRanges(),this.selection.addRange(s)}},s.prototype.isCaretOnNewLine=function(){var t=this.getContaining((function(t){return"P"===t.nodeName}));return!!t&&n.isEmptyInlineElement(t)},s}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(t,e){function n(t,n){e.api.Command.call(this,t),this._nodeName=n}return n.prototype=Object.create(t.Command.prototype),n.prototype.constructor=n,n.prototype.queryState=function(){var t=new e.api.Selection;return e.api.Command.prototype.queryState.call(this)&&!!t.getContaining(function(t){return t.nodeName===this._nodeName}.bind(this))},n}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(69)],void 0===(i=function(t){"use strict";return function(e){function n(){this.history=[]}return Object.assign(n.prototype,{start:function(){this.history.push(1)},end:function(){this.history.pop(),0===this.history.length&&(e.pushHistory(),e.trigger(t.legacyContentChanged),e.trigger(t.contentChanged))},run:function(t,n){this.start();try{t&&t()}finally{e._forceMerge=!0===n,this.end(),e._forceMerge=!1}}}),n}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){"use strict";function e(e,n){this._stack=t.List(),this._limit=e,this._fireEvent=n&&n.dispatchEvent,this._ush=n,this.position=0,this.length=0}return e.prototype.transact=function(e,n){if(arguments.length<2)throw new TypeError("Not enough arguments to UndoManager.transact.");var r;e.execute(),this.position>0&&this.clearRedo(),n&&this.length?(r=this._stack.first().push(e),this._stack=this._stack.shift().unshift(r)):(r=t.List.of(e),this._stack=this._stack.unshift(r),this.length++,this._limit&&this.length>this._limit&&this.clearUndo(this._limit)),this._dispatch("DOMTransaction",r)},e.prototype.undo=function(){if(!(this.position>=this.length)){for(var t=this._stack.get(this.position),e=t.size;e--;)t.get(e).undo();this.position++,this._dispatch("undo",t)}},e.prototype.redo=function(){if(0!==this.position){this.position--;for(var t=this._stack.get(this.position),e=0;e<t.size;e++)t.get(e).redo();this._dispatch("redo",t)}},e.prototype.item=function(t){return t>=0&&t<this.length?this._stack.get(t).toArray():null},e.prototype.clearUndo=function(t){this._stack=this._stack.take(void 0!==t?t:this.position),this.length=this._stack.size},e.prototype.clearRedo=function(){this._stack=this._stack.skip(this.position),this.length=this._stack.size,this.position=0},e.prototype._dispatch=function(t,e){this._fireEvent&&this._ush.dispatchEvent(new CustomEvent(t,{detail:{transactions:e.toArray()},bubbles:!0,cancelable:!1}))},e}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){"use strict";function e(){this._listeners={}}return e.prototype.on=function(e,n){var r=this._listeners[e]||t.Set();this._listeners[e]=r.add(n)},e.prototype.off=function(e,n){var r=this._listeners[e]||t.Set();this._listeners[e]=n?r.delete(n):r.clear()},e.prototype.trigger=function(e,n){for(var r=e.split(":");r.length;){var i=r.join(":");(this._listeners[i]||t.Set()).forEach((function(t){t.apply(null,n)})),r.splice(r.length-1,1)}},e}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){var e=["setRootPElement","enforcePElements","ensureSelectableContainers"],n=["inlineElementsMode"],r={allowBlockElements:!0,debug:!1,undo:{manager:!1,enabled:!0,limit:100,interval:250},defaultCommandPatches:["bold","indent","insertHTML","insertList","outdent","createLink"],defaultPlugins:e.concat(n),defaultFormatters:["escapeHtmlCharactersFormatter","replaceNbspCharsFormatter"]};function i(t){return function(e){return-1!==t.indexOf(e)}}return{defaultOptions:r,checkOptions:function(e){var n=e||{};return n.defaultPlugins&&(n.defaultPlugins=n.defaultPlugins.filter(i(r.defaultPlugins))),n.defaultFormatters&&(n.defaultFormatters=n.defaultFormatters.filter(i(r.defaultFormatters))),Object.freeze(function(e,n){var r=t.fromJS(e);return t.fromJS(n).merge(r).toJS()}(n,r))},sortByPlugin:function(t){return function(e,n){return e===t?-1:n===t?1:0}},filterByBlockLevelMode:function(t){return function(r){return-1!==(t?e:n).indexOf(r)}},filterByPluginExists:i}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){t.registerPlainTextFormatter((function(t){return t.replace(/\n([ \t]*\n)+/g,"</p><p>").replace(/\n/g,"<br>")}))}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e);var i,o,s,a,c,u=(i=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],o=function(){function t(e){var n=e.targetModal,r=e.triggers,i=void 0===r?[]:r,o=e.onShow,s=void 0===o?function(){}:o,a=e.onClose,c=void 0===a?function(){}:a,u=e.openTrigger,l=void 0===u?"data-micromodal-trigger":u,f=e.closeTrigger,d=void 0===f?"data-micromodal-close":f,h=e.openClass,p=void 0===h?"is-open":h,v=e.disableScroll,m=void 0!==v&&v,y=e.disableFocus,g=void 0!==y&&y,b=e.awaitCloseAnimation,_=void 0!==b&&b,w=e.awaitOpenAnimation,k=void 0!==w&&w,x=e.debugMode,E=void 0!==x&&x;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.modal=document.getElementById(n),this.config={debugMode:E,disableScroll:m,openTrigger:l,closeTrigger:d,openClass:p,onShow:s,onClose:c,awaitCloseAnimation:_,awaitOpenAnimation:k,disableFocus:g},i.length>0&&this.registerTriggers(i),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var e,n,o;return e=t,(n=[{key:"registerTriggers",value:function(t){var e=this;t.filter(Boolean).forEach((function(t){t.addEventListener("click",(function(t){return e.showModal(t)}))}))}},{key:"showModal",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){var n=function e(){t.modal.removeEventListener("animationend",e,!1),t.setFocusToFirstNode()};this.modal.addEventListener("animationend",n,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,e)}},{key:"closeModal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,t),this.config.awaitCloseAnimation){var n=this.config.openClass;this.modal.addEventListener("animationend",(function t(){e.classList.remove(n),e.removeEventListener("animationend",t,!1)}),!1)}else e.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(t){this.modal=document.getElementById(t),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(t){if(this.config.disableScroll){var e=document.querySelector("body");switch(t){case"enable":Object.assign(e.style,{overflow:""});break;case"disable":Object.assign(e.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(t){t.target.hasAttribute(this.config.closeTrigger)&&this.closeModal(t)}},{key:"onKeydown",value:function(t){27===t.keyCode&&this.closeModal(t),9===t.keyCode&&this.retainFocus(t)}},{key:"getFocusableNodes",value:function(){var t=this.modal.querySelectorAll(i);return Array.prototype.slice.call(t)}},{key:"setFocusToFirstNode",value:function(){var t=this;if(!this.config.disableFocus){var e=this.getFocusableNodes();if(0!==e.length){var n=e.filter((function(e){return!e.hasAttribute(t.config.closeTrigger)}));n.length>0&&n[0].focus(),0===n.length&&e[0].focus()}}}},{key:"retainFocus",value:function(t){var e=this.getFocusableNodes();if(0!==e.length)if(e=e.filter((function(t){return null!==t.offsetParent})),this.modal.contains(document.activeElement)){var n=e.indexOf(document.activeElement);t.shiftKey&&0===n&&(e[e.length-1].focus(),t.preventDefault()),!t.shiftKey&&e.length>0&&n===e.length-1&&(e[0].focus(),t.preventDefault())}else e[0].focus()}}])&&r(e.prototype,n),o&&r(e,o),t}(),s=null,a=function(t){if(!document.getElementById(t))return console.warn("MicroModal: ❗Seems like you have missed %c'".concat(t,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(t,'"></div>')),!1},c=function(t,e){if(function(t){t.length<=0&&(console.warn("MicroModal: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(t),!e)return!0;for(var n in e)a(n);return!0},{init:function(t){var e=Object.assign({},{openTrigger:"data-micromodal-trigger"},t),n=Array.prototype.slice.call(document.querySelectorAll("[".concat(e.openTrigger,"]"))),r=function(t,e){var n={};return t.forEach((function(t){var r=t.attributes[e].value;void 0===n[r]&&(n[r]=[]),n[r].push(t)})),n}(n,e.openTrigger);if(!0!==e.debugMode||!1!==c(n,r))for(var i in r){var a=r[i];e.targetModal=i,e.triggers=a,s=new o(e)}},show:function(t,e){var n=e||{};n.targetModal=t,!0===n.debugMode&&!1===a(t)||(s&&s.removeEventListeners(),(s=new o(n)).showModal())},close:function(t){t?s.closeModalById(t):s.closeModal()}});e.default=u,window.MicroModal=u},function(t,e,n){var r,i;r=[n(196),n(197),n(212)],void 0===(i=function(t,e,n){"use strict";return function(r){var i=e(n(r),{tags:{em:{class:"scribe-marker",style:!0},br:{}}});return function(e){var n=new t(i);e.registerHTMLFormatter("sanitize",n.clean.bind(n))}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;void 0===(i="function"==typeof(r=function(){function t(t){var e=t.tags;if(!Object.keys(e).map((function(t){return typeof e[t]})).every((function(t){return"object"===t||"boolean"===t||"function"===t})))throw new Error("The configuration was invalid");this.config=t}var e=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function n(t){return-1!==e.indexOf(t.nodeName)}var r=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function i(t){return-1!==r.indexOf(t.nodeName)}function o(t,e,n){return"function"==typeof t.tags[e]?t.tags[e](n):t.tags[e]}function s(t,e){return void 0===e||"boolean"==typeof e&&!e}function a(t,e,n){var r=t.name.toLowerCase();return!0!==e&&("function"==typeof e[r]?!e[r](t.value,n):void 0===e[r]||!1===e[r]||"string"==typeof e[r]&&e[r]!==t.value)}return t.prototype.clean=function(t){const e=document.implementation.createHTMLDocument(),n=e.createElement("div");return n.innerHTML=t,this._sanitize(e,n),n.innerHTML},t.prototype._sanitize=function(t,e){var r=function(t,e){return t.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}(t,e),c=r.firstChild();if(c)do{if(c.nodeType!==Node.TEXT_NODE){if(c.nodeType===Node.COMMENT_NODE){e.removeChild(c),this._sanitize(t,e);break}var u,l=i(c);l&&(u=Array.prototype.some.call(c.childNodes,n));var f=!!e.parentNode,d=n(e)&&n(c)&&f,h=c.nodeName.toLowerCase(),p=o(this.config,h,c);if(l&&u||s(0,p)||!this.config.keepNestedBlockElements&&d){if("SCRIPT"!==c.nodeName&&"STYLE"!==c.nodeName)for(;c.childNodes.length>0;)e.insertBefore(c.childNodes[0],c);e.removeChild(c),this._sanitize(t,e);break}for(var v=0;v<c.attributes.length;v+=1){var m=c.attributes[v];a(m,p,c)&&(c.removeAttribute(m.name),v-=1)}this._sanitize(t,c)}else if(""===c.data.trim()&&(c.previousElementSibling&&n(c.previousElementSibling)||c.nextElementSibling&&n(c.nextElementSibling))){e.removeChild(c),this._sanitize(t,e);break}}while(c=r.nextSibling())},t})?r.call(e,n,e,t):r)||(t.exports=i)},function(t,e,n){var r,i;r=[n(198),n(209)],void 0===(i=function(t,e){return e(t)}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(72),n(73),n(204),n(20),n(7),n(14),n(15),n(79)],void 0===(i=function(t,e,n,r,i,o,s,a){return function c(u,l,f,d,h){if(!o(u))return u;var p=i(l.length)&&(r(l)||a(l));return(p?t:e)(l,(function(t,e,r){if(s(t))return d||(d=[]),h||(h=[]),n(u,r,e,c,f,d,h);var i=u[e],o=f?f(i,t,e,u,r):void 0,a=void 0===o;a&&(o=t),!p&&void 0===o||!a&&(o==o?o===i:i!=i)||(u[e]=o)})),u}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(14)],void 0===(i=function(t){return function(e){return t(e)?e:Object(e)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(201)],void 0===(i=function(t){var e=/[.*+?^${}()|[\]\/\\]/g,n=RegExp(e.source);return function(r){return(r=t(r))&&n.test(r)?r.replace(e,"\\$&"):r}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){return function(t){return"string"==typeof t?t:null==t?"":t+""}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(36),n(20),n(37),n(7),n(38),n(76)],void 0===(i=function(t,e,n,r,i,o){var s=Object.prototype.hasOwnProperty;return function(a){for(var c=i(a),u=c.length,l=u&&a.length,f=l&&r(l)&&(e(a)||o.nonEnumArgs&&t(a)),d=-1,h=[];++d<u;){var p=c[d];(f&&n(p,l)||s.call(a,p))&&h.push(p)}return h}}.apply(e,r))||(t.exports=i)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r,i;r=[n(78),n(36),n(20),n(7),n(205),n(79),n(208)],void 0===(i=function(t,e,n,r,i,o,s){return function(a,c,u,l,f,d,h){for(var p=d.length,v=c[u];p--;)if(d[p]==v)return void(a[u]=h[p]);var m=a[u],y=f?f(m,v,u,a,c):void 0,g=void 0===y;g&&(y=v,r(v.length)&&(n(v)||o(v))?y=n(m)?m:m?t(m):[]:i(v)||e(v)?y=e(m)?s(m):i(m)?m:{}:g=!1),d.push(v),h.push(y),g?a[u]=l(y,v,f,d,h):(y==y?y!==m:m==m)&&(a[u]=y)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(19),n(206)],void 0===(i=function(t,e){var n=Object.prototype.toString,r=t(r=Object.getPrototypeOf)&&r;return r?function(i){if(!i||"[object Object]"!=n.call(i))return!1;var o=i.valueOf,s=t(o)&&(s=r(o))&&r(s);return s?i==s||r(i)==s:e(i)}:e}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(207),n(15)],void 0===(i=function(t,e){var n=Object.prototype,r=n.hasOwnProperty,i=n.toString;return function(n){var o,s;return!(!e(n)||"[object Object]"!=i.call(n)||!(r.call(n,"constructor")||"function"!=typeof(o=n.constructor)||o instanceof o))&&(t(n,(function(t,e){s=e})),void 0===s||r.call(n,s))}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(74),n(38)],void 0===(i=function(t,e){return function(n,r){return t(n,r,e)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(80),n(38)],void 0===(i=function(t,e){return function(n){return t(n,e(n))}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(81),n(211)],void 0===(i=function(t,e){return function(n){return function(){var r=arguments,i=r.length,o=r[0];if(i<2||null==o)return o;var s=r[i-2],a=r[i-1],c=r[3];i>3&&"function"==typeof s?(s=t(s,a,5),i-=2):i-=(s=i>2&&"function"==typeof a?a:null)?1:0,c&&e(r[1],r[2],c)&&(s=3==i?null:s,i=2);for(var u=0;++u<i;){var l=r[u];l&&n(o,l,s)}return o}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){return function(t){return t}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(37),n(7),n(14)],void 0===(i=function(t,e,n){return function(r,i,o){if(!n(o))return!1;var s=typeof i;if("number"==s)var a=o.length,c=e(a)&&t(i,a);else c="string"==s&&i in o;if(c){var u=o[i];return r==r?r===u:u!=u}return!1}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(213),n(81)],void 0===(i=function(t,e){return function(n,r,i){return r="function"==typeof r&&e(r,i,1),t(n,!0,r)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(78),n(72),n(80),n(73),n(214),n(215),n(218),n(20),n(14),n(75)],void 0===(i=function(t,e,n,r,i,o,s,a,c,u){var l={};l["[object Arguments]"]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object Date]"]=l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Number]"]=l["[object Object]"]=l["[object RegExp]"]=l["[object String]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l["[object Error]"]=l["[object Function]"]=l["[object Map]"]=l["[object Set]"]=l["[object WeakMap]"]=!1;var f=Object.prototype.toString;return function d(h,p,v,m,y,g,b){var _;if(v&&(_=y?v(h,m,y):v(h)),void 0!==_)return _;if(!c(h))return h;var w=a(h);if(w){if(_=i(h),!p)return t(h,_)}else{var k=f.call(h),x="[object Function]"==k;if("[object Object]"!=k&&"[object Arguments]"!=k&&(!x||y))return l[k]?o(h,k,p):y?h:{};if(_=s(x?{}:h),!p)return n(h,_,u(h))}g||(g=[]),b||(b=[]);for(var E=g.length;E--;)if(g[E]==h)return b[E];return g.push(h),b.push(_),(w?e:r)(h,(function(t,e){_[e]=d(t,p,v,e,h,g,b)})),_}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){var t=Object.prototype.hasOwnProperty;return function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(216)],void 0===(i=function(t){var e=/\w*$/;return function(n,r,i){var o=n.constructor;switch(r){case"[object ArrayBuffer]":return t(n);case"[object Boolean]":case"[object Date]":return new o(+n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":var s=n.buffer;return new o(i?t(s):s,n.byteOffset,n.length);case"[object Number]":case"[object String]":return new o(n);case"[object RegExp]":var a=new o(n.source,e.exec(n));a.lastIndex=n.lastIndex}return a}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(217),n(19),n(77)],void 0===(i=function(t,e,n){var r=e(r=n.ArrayBuffer)&&r,i=e(i=r&&new r(0).slice)&&i,o=Math.floor,s=e(s=n.Uint8Array)&&s,a=function(){try{var t=e(t=n.Float64Array)&&t,i=new t(new r(10),0,1)&&t}catch(t){}return i}(),c=a?a.BYTES_PER_ELEMENT:0;function u(t){return i.call(t,0)}return i||(u=r&&s?function(t){var e=t.byteLength,n=a?o(e/c):0,i=n*c,u=new r(e);if(n){var l=new a(u,0,n);l.set(new a(t,0,n))}return e!=i&&(l=new s(u,i)).set(new s(t,i)),u}:t(null)),u}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){return function(t){return function(){return t}}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){return function(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}}.apply(e,[]))||(t.exports=r)},function(t,e,n){"use strict";var r=n(8),i=n(16),o=i.createBlocksFromParagraphs,s=i.getTotalLength;t.exports={mixinName:"Textable",initializeTextable:function(){this.el.classList.add("st-block--textable")},focusAtEnd:function(){this.focus();var t=s(this._scribe);t>0&&r(this._scribe.el,{start:t})},selectText:function(){var t=document.createRange();this._scribe.allowsBlockElements()?t.setStartAfter(this._scribe.el.firstChild,0):t.selectNodeContents(this._scribe.el),t.collapse(!1);var e=new this._scribe.api.Selection;e.selection.removeAllRanges(),e.selection.addRange(t)},getScribeInnerContent:function(t){var e="";if(""!==this._scribe.getTextContent()){var n=document.createElement("div");return n.innerHTML=this.getTextBlockHTML(),(e=n.children&&Array.prototype.slice.call(n.children).reduce((function(t,e){return t+e.innerHTML}),"")||n.innerHTML).replace(/^[\s\uFEFF\xA0]+|$/g,"")}return e},getCaretPositionAtEnd:function(){return this.selectText(),r(this._scribe.el)},appendContent:function(t,e){e=e||{},this.focusAtEnd();var n=this.getCaretPositionAtEnd(),i=this.getScribeInnerContent();""!==i&&(t=i+t),""===t&&(window.navigator.userAgent.match(/MSIE 10/)||(t="<br>")),this.setTextBlockHTML(t),this.focus(),e.keepCaretPosition&&0!==n.start&&0!==n.end&&r(this._scribe.el,{start:n.start,end:n.end})},split:function(){o(this,this._scribe)}}},function(t,e,n){"use strict";var r=n(9),i=n(22),o=n(91),s=n(226),a=n(40),c=n(70),u=n(41),l=n(227);t.exports=r.extend({type:"text",editorHTML:'<div class="st-text-block" contenteditable="true"></div>',icon_name:"text",mergeable:!0,textable:!0,toolbarEnabled:!1,configureScribe:function(t){t.use(new o(this)),t.use(new s(this)),t.use(new a(this)),t.use(new c(this)),t.use(new u(this)),t.use(new l(this)),t.on("content-changed",this.toggleEmptyClass.bind(this))},scribeOptions:{allowBlockElements:!0,tags:{p:!0}},loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(i(t.text,this.type)):this.setTextBlockHTML(t.text)},onBlockRender:function(){this.toggleEmptyClass()},toggleEmptyClass:function(){this.el.classList.toggle("st-block--empty",this.isEmpty())},isEmpty:function(){return""===this._scribe.getTextContent()},asClipboardHTML:function(){var t=this.getBlockData();return"".concat(t.text)}})},function(t,e,n){"use strict";var r=n(222),i=n(89),o=n(223);t.exports=function(t){return"\n    <div class='st-block__inner'>\n      ".concat(t,"\n    </div>\n    ").concat(o(),"\n    ").concat(r(),"\n    ").concat(i(),"\n  ")}},function(t,e,n){"use strict";var r=n(2);t.exports=function(){return'\n    <div class="st-block-addition-top">\n      <div class="st-block-addition-top__button" type="button"></div>\n      <div class="st-block-addition-top__icon">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'.concat(r.defaults.iconUrl,'#add-block"/>\n        </svg>\n      </div>\n    </div>\n  ')}},function(t,e,n){"use strict";var r=n(2);t.exports=function(){return'\n    <button class="st-block-replacer" type="button">\n      <span class="st-block-replacer__button">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'.concat(r.defaults.iconUrl,'#add-block"/>\n        </svg>\n      </span>\n    </button>\n  ')}},function(t,e,n){"use strict";n.r(e),n.d(e,"Spinner",(function(){return o}));var r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},o=function(){function t(t){void 0===t&&(t={}),this.opts=r({},i,t)}return t.prototype.spin=function(t){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),s(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),t&&t.insertBefore(this.el,t.firstChild||null),function(t,e){var n=Math.round(e.corners*e.width*500)/1e3+"px",r="none";!0===e.shadow?r="0 2px 4px #000":"string"==typeof e.shadow&&(r=e.shadow);for(var i=function(t){for(var e=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,n=[],r=0,i=t.split(",");r<i.length;r++){var o=i[r].match(e);if(null!==o){var s=+o[2],a=+o[5],c=o[4],u=o[7];0!==s||c||(c=u),0!==a||u||(u=c),c===u&&n.push({prefix:o[1]||"",x:s,y:a,xUnits:c,yUnits:u,end:o[8]})}}return n}(r),o=0;o<e.lines;o++){var u=~~(360/e.lines*o+e.rotate),l=s(document.createElement("div"),{position:"absolute",top:-e.width/2+"px",width:e.length+e.width+"px",height:e.width+"px",background:a(e.fadeColor,o),borderRadius:n,transformOrigin:"left",transform:"rotate("+u+"deg) translateX("+e.radius+"px)"}),f=o*e.direction/e.lines/e.speed;f-=1/e.speed;var d=s(document.createElement("div"),{width:"100%",height:"100%",background:a(e.color,o),borderRadius:n,boxShadow:c(i,u),animation:1/e.speed+"s linear "+f+"s infinite "+e.animation});l.appendChild(d),t.appendChild(l)}}(this.el,this.opts),this},t.prototype.stop=function(){return this.el&&("undefined"!=typeof requestAnimationFrame?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},t}();function s(t,e){for(var n in e)t.style[n]=e[n];return t}function a(t,e){return"string"==typeof t?t:t[e%t.length]}function c(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r],s=u(o.x,o.y,e);n.push(o.prefix+s[0]+o.xUnits+" "+s[1]+o.yUnits+o.end)}return n.join(", ")}function u(t,e,n){var r=n*Math.PI/180,i=Math.sin(r),o=Math.cos(r);return[Math.round(1e3*(t*o+e*i))/1e3,Math.round(1e3*(-t*i+e*o))/1e3]}},function(t,e,n){"use strict";t.exports=function(){return'\n    <div class="st-block__ui-delete-controls">\n      <label class="st-block__delete-label">\n        '.concat(i18n.t("general:delete"),"\n      </label>\n      <button class='st-block-ui__confirm js-st-block-confirm-delete' type=\"button\">\n        ").concat(i18n.t("general:yes"),"\n      </button>\n      <button class='st-block-ui__confirm js-st-block-deny-delete' type=\"button\">\n        ").concat(i18n.t("general:no"),"\n      </button>\n    </div>\n  ")}},function(t,e,n){"use strict";function r(t,e){var n={format:"html",listItems:e.map((function(t){return{content:t.innerHTML.substr(2)}})).reverse()};t.mediator.trigger("block:create","List",n,t.el,{autoFocus:!0})}function i(t,e){return e.length>0&&r(t,e),[]}t.exports=function(t){function e(e){return-1!==t.editorOptions.blockTypes.indexOf("List")&&e.className.split(" ").filter((function(t){return t.startsWith("MsoListParagraph")})).length>0}return function(n){var o=new n.api.CommandPatch("insertHTML");o.execute=function(o){var s=this;n.transactionManager.run((function(){o=function(t){var e=document.createElement("div");if(e.innerHTML=t,1===e.childNodes.length){var n=[].slice.call(e.childNodes)[0];n&&"P"===n.nodeName&&(t=n.innerHTML)}return t}(o=function(t){var e=document.createElement("div");return e.innerHTML=t,e.querySelectorAll("*").forEach((function(t){return t.removeAttribute("style")})),e.innerHTML}(o)),n.api.CommandPatch.prototype.execute.call(s,o);var a=document.createElement("div");if(a.innerHTML=n.getContent(),a.childNodes.length>1){var c,u=[].slice.call(a.childNodes),l=[],f=!1;e(u[0])?(f=!0,n.setContent("")):n.setContent(u.shift().innerHTML),t.mediator.on("block:created",(function e(n){c=n,t.mediator.off("block:created",e)})),u.reverse().forEach((function(n){if(e(n))l.push(n);else{l=i(t,l);var r={format:"html",text:n.innerHTML};t.mediator.trigger("block:create","Text",r,t.el,{autoFocus:!0})}})),l=i(t,l),f&&t.mediator.trigger("block:remove",t.blockID),c.focusAtEnd()}else{var d=a.firstChild;e(d)&&(n.setContent(""),r(t,[d]),t.mediator.trigger("block:remove",t.blockID))}}))},n.commandPatches.insertHTML=o}}},function(t,e,n){"use strict";n(8);var r=n(71),i=n(3);t.exports=function(t){t=t||{};var e=new r;function n(t,e){return t.reduce((function(t,e){return e(t)}),e)}return t.transforms||(t.transforms={}),["pre","post"].forEach((function(e){t.transforms[e]||(t.transforms[e]=[])})),function(r){var o=new r.api.Command("superscriptPrompt");o.nodeName="SUP",o.queryEnabled=function(){return t.inline_editable},o.queryState=function(){return!!(new r.api.Selection).getContaining((function(t){return t.nodeName===o.nodeName}))},o.execute=function(s){var a=new r.api.Selection,c=a.range,u=a.getContaining((function(t){return t.nodeName===o.nodeName}));u&&(c.selectNode(u),a.selection.removeAllRanges(),a.selection.addRange(c));var l=u?u.title:"",f=function(t){var e=t.modal,n=t.title;return'\n    <p>\n      <input id="'.concat(e.id,'-sup-title" type="text" value="').concat(n,'" />\n    </p>\n  ')}({modal:e,title:s||l}),d="";u&&(d=i.createElementFromString('<button type="button" style="background: grey;">Remove</button>')).addEventListener("mousedown",(function(t){t.preventDefault(),t.stopPropagation();var n=window.getSelection();return n.removeAllRanges(),n.addRange(c),document.execCommand("insertHTML",!1,"<span>".concat(u.innerHTML,"</span>")),e.hide(),!0}));e.show({title:i18n.t("formatters:superscript:prompt"),content:f,buttons:d},(function(e){var r=e.el.querySelector("#".concat(e.id,"-sup-title")).value,i="";(r=n(t.transforms.pre,r))&&(r=n(t.transforms.post,r),i=' title="'.concat(r,'"'));var o=window.getSelection();o.removeAllRanges(),o.addRange(c);var s="<sup".concat(i,">").concat(o,"</sup>");return document.execCommand("insertHTML",!1,s),!0}))},r.commands.superscriptPrompt=o}}},function(t,e,n){"use strict";var r=n(0),i=n(9),o=n(22),s=n(40),a=n(41),c=r.template(['<blockquote class="st-required st-text-block st-text-block--quote" contenteditable="true"></blockquote>','<label class="st-input-label"> <%= i18n.t("blocks:quote:credit_field") %></label>','<input maxlength="140" name="cite" placeholder="<%= i18n.t("blocks:quote:credit_field") %>"',' class="st-input-string js-cite-input" type="text" />'].join("\n"));t.exports=i.extend({type:"quote",icon_name:"quote",mergeable:!0,textable:!0,toolbarEnabled:!1,editorHTML:function(){return c(this)},configureScribe:function(t){t.use(new s(this)),t.use(new a(this))},loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(o(t.text,this.type)):this.setTextBlockHTML(t.text),t.cite&&(this.$(".js-cite-input")[0].value=t.cite)},asClipboardHTML:function(){var t=this.getBlockData();return"<blockquote>".concat(t.text,"<cite>- ").concat(t.cite,"</cite></blockquote>")}})},function(t,e,n){"use strict";var r=n(3),i=n(9);t.exports=i.extend({type:"image",droppable:!0,uploadable:!0,icon_name:"image",loadData:function(t){this.editor.innerHTML="",this.editor.appendChild(r.createElement("img",{src:t.file.url}))},onDrop:function(t){var e=t.files[0],n="undefined"!=typeof URL?URL:"undefined"!=typeof webkitURL?webkitURL:null;/image/.test(e.type)&&(this.loading(),r.hide(this.inputs),this.editor.innerHTML="",this.editor.appendChild(r.createElement("img",{src:n.createObjectURL(e)})),r.show(this.editor),this.uploader(e,(function(t){this.setData(t),this.ready()}),(function(t){this.addMessage(i18n.t("blocks:image:upload_error")),this.ready()})))},asClipboardHTML:function(){var t=this.getBlockData(),e=t.file&&t.file.url;if(e)return'<img src="'.concat(e,'" alt="').concat(e,'" />')}})},function(t,e,n){"use strict";var r=n(9),i=n(22),o=n(91),s=n(41),a=n(40);t.exports=r.extend({type:"heading",editorHTML:'<h2 class="st-required st-text-block st-text-block--heading" contenteditable="true"></h2>',configureScribe:function(t){t.use(new a(this)),t.use(new o(this)),t.use(new s(this)),t.on("content-changed",this.toggleEmptyClass.bind(this))},mergeable:!0,textable:!0,toolbarEnabled:!1,scribeOptions:{allowBlockElements:!1,tags:{p:!1}},icon_name:"heading",loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(i(t.text,this.type)):this.setTextBlockHTML(t.text);var e=t.level||this.editorOptions.defaultHeadingLevel;this.setData({level:e}),this.el.dataset.level=e},onBlockRender:function(){this.toggleEmptyClass()},toggleEmptyClass:function(){this.el.classList.toggle("st-block--empty",0===this._scribe.getTextContent().length)},asClipboardHTML:function(){var t=this.getBlockData();return"<h".concat(t.level,">").concat(t.text,"</h").concat(t.level,">")}})},function(t,e,n){"use strict";var r=n(8),i=n(9),o=n(22),s=n(232),a=n(16),c=a.getTotalLength,u=a.rangeToHTML,l=a.selectToEnd;t.exports=i.extend({type:"list",icon_name:"list",multi_editable:!0,mergeable:!0,scribeOptions:{allowBlockElements:!1,tags:{p:!1}},configureScribe:function(t){t.use(new s(this)),t.on("content-changed",(function(){setTimeout((function(){""===t.getHTML()&&t.setHTML("<br>")}),0)}))},editorHTML:'<ul class="st-list-block__list"></ul>',listItemEditorHTML:'<li class="st-list-block__item"><div class="st-list-block__editor st-block__editor"></div></li>',initialize:function(){this.editorIds=[]},beforeLoadingData:function(){this.setupListVariables(),this.loadData(this._getData())},onBlockRender:function(){this.ul||this.setupListVariables(),this.editorIds.length<1&&this.addListItem()},setupListVariables:function(){this.ul=this.inner.querySelector("ul")},loadData:function(t){var e=this;this.options.convertFromMarkdown&&"html"!==t.format&&(t=this.parseFromMarkdown(t.text)),t.listItems.length?t.listItems.forEach((function(t){e.addListItem(t.content)})):e.addListItem()},parseFromMarkdown:function(t){var e=t.replace(/^ - (.+)$/gm,"$1").split("\n");return{listItems:e=e.filter((function(t){return t.length})).map(function(t){return{content:o(t,this.type)}}.bind(this)),format:"html"}},_serializeData:function(){var t={format:"html",listItems:[]};return this.editorIds.forEach(function(e){var n={content:this.getTextEditor(e).scribe.getContent()};t.listItems.push(n)}.bind(this)),t},addListItemAfterCurrent:function(t){this.addListItem(t,this.getCurrentTextEditor())},addListItem:function(t,e){"<br>"===(t=(t=t||"").trim())&&(t="");var n=this.newTextEditor(this.listItemEditorHTML,t);if(e&&this.ul.lastchild!==e.node){var r=e.node.nextSibling;this.ul.insertBefore(n.node,r);var i=this.editorIds.indexOf(e.id)+1;this.editorIds.splice(i,0,n.id)}else this.ul.appendChild(n.node),this.editorIds.push(n.id);this.focusOn(n)},focus:function(){var t=this.getCurrentTextEditor();t||(t=this.getTextEditor(this.editorIds[0])),this.focusOn(t)},focusOnNeighbor:function(t){var e=this.previousListItem()||this.nextListItem();e&&this.focusOn(e)},focusOn:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.scribe,o=new i.api.Selection,s=i.el.lastChild;if(o.range&&(e=o.range.cloneRange()),t.el.focus(),e&&(e.setStartAfter(s,1),e.collapse(!1)),n&&n.focusAtEnd){var a=c(i);a>0&&r(i.el,{start:a})}n&&n.caretPosition&&r(i.el,{start:n.caretPosition})},focusAtStart:function(){var t=this.getTextEditor(this.editorIds[0]);this.focusOn(t)},focusAtEnd:function(){var t=this.editorIds[this.editorIds.length-1];this.appendToTextEditor(t)},removeCurrentListItem:function(){if(1!==this.editorIds.length){var t=this.getCurrentTextEditor(),e=this.editorIds.indexOf(t.id);this.focusOnNeighbor(t),this.editorIds.splice(e,1),this.ul.removeChild(t.node),this.removeTextEditor(t.id)}},appendToCurrentItem:function(t){this.appendToTextEditor(this.getCurrentTextEditor().id,t)},isLastListItem:function(){return 1===this.editorIds.length},nextListItem:function(){var t=this.editorIds.indexOf(this.getCurrentTextEditor().id),e=this.editorIds[t+1];return void 0!==e?this.getTextEditor(e):null},previousListItem:function(){var t=this.editorIds.indexOf(this.getCurrentTextEditor().id),e=this.editorIds[t-1];return void 0!==e?this.getTextEditor(e):null},asClipboardHTML:function(){var t=this.getBlockData().listItems.map((function(t){return"<li>".concat(t.content,"</li>")})).join("\n");return"<ul>".concat(t,"</ul>")},splitCurrentEditor:function(t){if(0===t.getTextContent().length)return!1;var e=u(l(t));return this.addListItemAfterCurrent(e),!0},split:function(){var t=this.getCurrentTextEditor();if(t){var e=t.scribe;this.splitCurrentEditor(e)&&(this.focusOnNeighbor(),this.addListItemAfterCurrent("")),this.splitListItem(this.getCurrentTextEditor().scribe)}},splitListItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=Object.assign({createTextBlock:!1},e),!this.splitCurrentEditor(t)){var n=this.nextListItem();if(n){var r={format:"html",listItems:[]};for(this.removeCurrentListItem(),this.focusOn(n);n;)r.listItems.push({content:n.scribe.getContent()}),this.focusOn(n),this.removeCurrentListItem(),n=this.nextListItem();this.mediator.trigger("block:create","List",r,this.el,{autoFocus:!0})}else this.removeCurrentListItem();e.createTextBlock&&this.mediator.trigger("block:create","Text",null,this.el,{autoFocus:!0})}}})},function(t,e,n){"use strict";n(8);var r=n(16),i=(r.getTotalLength,r.isAtStart),o=r.isAtEnd,s=r.isSelectedFromStart,a=r.isSelectedToEnd;r.rangeToHTML,r.selectToEnd;t.exports=function(t){return function(e){e.el.addEventListener("keydown",(function(n){var r;if(!t.supressKeyListeners)if("Enter"!==n.key||n.shiftKey){if(["Left","ArrowLeft","Up","ArrowUp"].indexOf(n.key)>-1){if(n.shiftKey&&s(e))n.preventDefault(),n.stopPropagation(),document.activeElement&&document.activeElement.blur(),t.mediator.trigger("selection:block",t);else if(i(e)){n.preventDefault();var c=t.previousListItem();c?t.focusOn(c,{focusAtEnd:!0}):t.mediator.trigger("block:focusPrevious",t.blockID)}}else if(["Right","ArrowRight","Down","ArrowDown"].indexOf(n.key)>-1){if(n.shiftKey&&a(e))n.preventDefault(),n.stopPropagation(),document.activeElement&&document.activeElement.blur(),t.mediator.trigger("selection:block",t);else if(o(e)){n.preventDefault();var u=t.nextListItem();u?t.focusOn(u):t.mediator.trigger("block:focusNext",t.blockID)}}else if("Backspace"===n.key&&i(e))if(n.preventDefault(),t.previousListItem())r=e.getContent(),t.removeCurrentListItem(),t.appendToCurrentItem(r);else{var l={format:"html",text:e.getContent()};t.removeCurrentListItem(),t.mediator.trigger("block:createBefore","Text",l,t,{autoFocus:!0}),t.isLastListItem()&&t.mediator.trigger("block:remove",t.blockID)}}else n.preventDefault(),t.splitListItem(e,{createTextBlock:!0})}))}}},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(3),s=n(9),a=r.template(["<blockquote class='twitter-tweet' align='center'>","<p><%= text %></p>","&mdash; <%= user.name %> (@<%= user.screen_name %>)","<a href='<%= status_url %>' data-datetime='<%= created_at %>'><%= created_at %></a>","</blockquote>"].join("\n"));t.exports=s.extend({type:"tweet",icon_name:"tweet",droppable:!0,pastable:!0,fetchable:!0,drop_options:{re_render_on_reorder:!0},fetchUrl:function(t){return"/tweets/?tweet_id="+t},loadData:function(t){r.isUndefined(t.status_url)&&(t.status_url="");var e=this.inner.querySelector("twitterwidget");o.remove(e),this.inner.insertAdjacentHTML("afterbegin",a(t));var n=o.createElement("script",{src:"//platform.twitter.com/widgets.js"});this.inner.appendChild(n)},onContentPasted:function(t){var e=t.target.value;this.handleTwitterDropPaste(e)},handleTwitterDropPaste:function(t){if(this.validTweetUrl(t)){var e=t.match(/[^\/]+$/);r.isEmpty(e)||(this.loading(),e=e[0],this.fetch(this.fetchUrl(e),{dataType:"json"},this.onTweetSuccess,this.onTweetFail))}else i.log("Invalid Tweet URL")},validTweetUrl:function(t){return i.isURI(t)&&-1!==t.indexOf("twitter")&&-1!==t.indexOf("status")},onTweetSuccess:function(t){var e={user:{profile_image_url:t.user.profile_image_url,profile_image_url_https:t.user.profile_image_url_https,screen_name:t.user.screen_name,name:t.user.name},id:t.id_str,text:t.text,created_at:t.created_at,entities:t.entities,status_url:"https://twitter.com/"+t.user.screen_name+"/status/"+t.id_str};this.setAndLoadData(e),this.ready()},onTweetFail:function(){this.addMessage(i18n.t("blocks:tweet:fetch_error")),this.ready()},onDrop:function(t){var e=t.getData("text/plain");this.handleTwitterDropPaste(e)},asClipboardHTML:function(){var t=this.getBlockData();if(t.status_url)return"<p>".concat(t.status_url,"</p>")}})},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(9);t.exports=o.extend({providers:{vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo\.co(?:.+(?:\/)([^\/].*)+$)/,html:'<iframe src="<%= protocol %>//player.vimeo.com/video/<%= remote_id %>?title=0&byline=0" width="580" height="320" frameborder="0"></iframe>',url:function(t){return"https://player.vimeo.com/video/".concat(t)}},youtube:{regex:/^.*(?:(?:youtu\.be\/)|(?:youtube\.com)\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)/,html:'<iframe src="<%= protocol %>//www.youtube.com/embed/<%= remote_id %>" width="580" height="320" frameborder="0" allowfullscreen></iframe>',url:function(t){return"https://www.youtube.com/embed/".concat(t)}}},type:"video",droppable:!0,pastable:!0,icon_name:"video",loadData:function(t){if(this.providers.hasOwnProperty(t.source)){var e=this.providers[t.source],n="file:"===window.location.protocol?"http:":window.location.protocol,i=e.square?"with-square-media":"with-sixteen-by-nine-media";this.editor.classList.add("st-block__editor--"+i),this.editor.innerHTML=r.template(e.html,{protocol:n,remote_id:t.remote_id,width:this.editor.style.width})}},onContentPasted:function(t){this.handleDropPaste(t.target.value)},matchVideoProvider:function(t,e,n){var i=t.regex.exec(n);return null==i||r.isUndefined(i[1])?{}:{source:e,remote_id:i[1]}},handleDropPaste:function(t){if(i.isURI(t))for(var e in this.providers)this.providers.hasOwnProperty(e)&&this.setAndLoadData(this.matchVideoProvider(this.providers[e],e,t))},onDrop:function(t){var e=t.getData("text/plain");this.handleDropPaste(e)},asClipboardHTML:function(){var t=this.getBlockData(),e=this.providers[t.source].url(t.remote_id);return"<p>".concat(e,"</p>")}})},function(t,e,n){"use strict";var r=n(2);t.exports=function(t){var e=t.name,n=(t.text,t.cmd),i=t.iconName;return'\n    <button type="button" class="st-format-btn st-format-btn--'.concat(e,'" data-cmd="').concat(n,'">\n      <svg role="img" class="st-icon">\n        <use xlink:href="').concat(r.defaults.iconUrl,"#").concat(i,'"/>\n      </svg>\n    </button>\n  ')}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(3),a=n(10),c=n(4),u=n(93),l=n(237),f=n(239),d=n(241),h=n(87),p=n(92),v=n(60),m=n(242),y=n(83),g=n(243),b=function(t){this.initialize(t)};Object.assign(b.prototype,n(6),n(10),{bound:["onFormSubmit","hideAllTheThings","changeBlockPosition","removeBlockDragOver","blockLimitReached","blockOrderUpdated","onBlockCountChange","renderBlockPositionerSelect"],events:{"block:reorder:dragend":"removeBlockDragOver","block:reorder:dropped":"removeBlockDragOver","block:content:dropped":"removeBlockDragOver"},initialize:function(t){if(o.log("Init SirTrevor.Editor"),this.options=Object.assign({},i.defaults,t||{}),this.ID=r.uniqueId("st-editor-"),!this._ensureAndSetElements())return!1;!r.isUndefined(this.options.onEditorRender)&&r.isFunction(this.options.onEditorRender)&&(this.onEditorRender=this.options.onEditorRender),this.mediator=Object.assign({},a),this._bindFunctions(),i.instances.push(this),this.build(),u.bindFormSubmit(this.form)},build:function(){s.hide(this.el),this.errorHandler=new m(this.outer,this.mediator,this.options.errorsContainer),this.store=new v(this.el.value,this.mediator),this.blockManager=new h(this),this.blockAddition=f.create(this),this.BlockAdditionTop=d.create(this),this.blockControls=l.create(this),this.blockPositionerSelect=new y(this.mediator),this.selectionHandler=new g(this.outer,this.mediator,this),this.formatBar=new p(this.options.formatBar,this.mediator,this),this.mediator.on("block:changePosition",this.changeBlockPosition),this.mediator.on("block:limitReached",this.blockLimitReached),this.mediator.on("block:rerender",this.blockOrderUpdated),this.mediator.on("block:create",this.blockOrderUpdated),this.mediator.on("block:remove",this.blockOrderUpdated),this.mediator.on("block:replace",this.blockOrderUpdated),this.mediator.on("block:countUpdate",this.onBlockCountChange),this.mediator.on("block-positioner-select:render",this.renderBlockPositionerSelect),this.dataStore="Please use store.retrieve();",this._setEvents(),window.addEventListener("click",this.hideAllTheThings),document.body.addEventListener("keydown",this.disableBackButton),this.createBlocks(),this.wrapper.classList.add("st-ready"),r.isUndefined(this.onEditorRender)||this.onEditorRender()},createBlocks:function(){var t=this.store.retrieve();if(t.data.length>0?t.data.forEach((function(t){this.mediator.trigger("block:create",t.type,t.data)}),this):!1!==this.options.defaultType&&this.mediator.trigger("block:create",this.options.defaultType,{}),this.options.focusOnInit){var e=this.wrapper.querySelectorAll(".st-block")[0];if(e)this.blockManager.findBlockById(e.getAttribute("id")).focus()}},destroy:function(){this.formatBar.destroy(),this.blockAddition.destroy(),this.blockControls.destroy(),this.blockManager.blocks.forEach((function(t){this.mediator.trigger("block:remove",t.blockID)}),this),this.mediator.stopListening(),this.stopListening(),i.instances=i.instances.filter((function(t){return t.ID!==this.ID}),this),window.removeEventListener("click",this.hideAllTheThings),document.body.removeEventListener("keydown",this.disableBackButton),this.store.reset(),s.replaceWith(this.outer,this.el)},getData:function(){return this.onFormSubmit(),this.store.retrieve()},reinitialize:function(t){this.destroy(),this.initialize(t||this.options)},restore:function(t){this.el.value=t,this.reinitialize()},blockLimitReached:function(t){this.wrapper.classList.toggle("st--block-limit-reached",t)},blockOrderUpdated:function(){var t=this.wrapper.querySelectorAll(".st-block")[0],e=!1;if(t){var n=this.blockManager.findBlockById(t.getAttribute("id"));e=n&&n.textable}this._toggleHideTopControls(e)},_toggleHideTopControls:function(t){this.wrapper.classList.toggle("st--hide-top-controls",t)},onBlockCountChange:function(t){this.blockPositionerSelect.onBlockCountChange(t)},renderBlockPositionerSelect:function(t){this.blockPositionerSelect.renderInBlock(t)},_setEvents:function(){Object.keys(this.events).forEach((function(t){c.on(t,this[this.events[t]],this)}),this)},hideAllTheThings:function(t){this.blockControls.hide(),this.blockAddition.hide(),null===document.activeElement.getAttribute("contenteditable")&&this.formatBar.hide();Array.prototype.forEach.call(this.wrapper.querySelectorAll(".st-block__ui-delete-controls"),(function(t){t.classList.remove("active")}))},store:function(t,e){return o.log("The store method has been removed, please call store[methodName]"),this.store[t].call(this,e||{})},removeBlockDragOver:function(){var t=this.outer.querySelector(".st-drag-over");t&&t.classList.remove("st-drag-over")},changeBlockPosition:function(t,e){e-=1;var n=this.blockManager.getBlockPosition(t),r=this.wrapper.querySelectorAll(".st-block")[e];r&&r.getAttribute("id")!==t.getAttribute("id")&&(this.hideAllTheThings(),n>e?r.parentNode.insertBefore(t,r):s.insertAfter(t,r))},onFormSubmit:function(t){return t=!1!==t,o.log("Handling form submission for Editor "+this.ID),this.mediator.trigger("errors:reset"),this.store.reset(),this.validateBlocks(t),this.blockManager.validateBlockTypesExist(t),this.mediator.trigger("errors:render"),this.el.value=this.store.toString(),this.errorHandler.errors.length},validateBlocks:function(t){var e=this;Array.prototype.forEach.call(this.wrapper.querySelectorAll(".st-block"),(function(n,i){var o=e.blockManager.findBlockById(n.getAttribute("id"));r.isUndefined(o)||e.validateAndSaveBlock(o,t)}))},validateAndSaveBlock:function(t,e){if(!i.skipValidation&&e&&!t.valid())return this.mediator.trigger("errors:add",{text:r.result(t,"validationFailMsg")}),void o.log("Block "+t.blockID+" failed validation");if("text"!==t.type||!t.isEmpty()){var n=t.getData();o.log("Adding data for block "+t.blockID+" to block store:",n),this.store.addData(n)}},disableBackButton:function(t){var e=t.target||t.srcElement;if(8===t.keyCode){if(e.getAttribute("contenteditable")||"INPUT"===e.tagName||"TEXTAREA"===e.tagName)return;t.preventDefault()}},findBlockById:function(t){return this.blockManager.findBlockById(t)},getBlocksByType:function(t){return this.blockManager.getBlocksByType(t)},getBlocksByIDs:function(t){return this.blockManager.getBlocksByIDs(t)},getBlockPosition:function(t){return o.log("This method has been moved to blockManager.getBlockPosition()"),this.blockManager.getBlockPosition(t)},getBlocks:function(){var t=this;return[].map.call(this.wrapper.querySelectorAll(".st-block"),(function(e){return t.findBlockById(e.getAttribute("id"))}))},_ensureAndSetElements:function(){if(r.isUndefined(this.options.el))return o.log("You must provide an el"),!1;this.el=this.options.el,this.form=s.getClosest(this.el,"form");var t=s.createElement("div",{id:this.ID,class:"st-outer notranslate",dropzone:"copy link move"}),e=s.createElement("div",{class:"st-blocks"});return s.wrap(s.wrap(this.el,t),e),this.outer=this.form.querySelector("#"+this.ID),this.wrapper=this.outer.querySelector(".st-blocks"),!0}}),t.exports=b},function(t,e,n){"use strict";var r=n(21),i=n(11),o=n(238);function s(t,e){return e.reduce((function(e,n){return t.hasOwnProperty(n)&&t[n].prototype.toolbarEnabled?e+o(t[n].prototype):e}),"")}t.exports.create=function(t){var e=function(t,e){var n=document.createElement("div");n.className="st-block-controls__buttons",n.innerHTML=s.apply(null,arguments);var r=document.createElement("div");return r.className="st-block-controls",r.appendChild(n),r}(r,t.blockManager.blockTypes);function n(){var t=e.parentNode;if(t)return t.removeChild(e),t.classList.remove("st-block--controls-active"),t}return i.delegate(t.wrapper,".st-block-replacer","click",(function(t){t.stopPropagation();var r=this.parentNode;r&&n()!==r&&(r.appendChild(e),r.classList.toggle("st-block--controls-active"))})),i.delegate(t.wrapper,".st-block-controls__button","click",(function(n){t.mediator.trigger("block:replace",e.parentNode,this.getAttribute("data-type"))})),{el:e,hide:n,destroy:function(){t=null,e=null}}}},function(t,e,n){"use strict";var r=n(2);t.exports=function(t){return'\n    <button class="st-block-controls__button" data-type="'.concat(t.type,'" type="button">\n      <svg role="img" class="st-icon">\n        <use xlink:href="').concat(r.defaults.iconUrl,"#").concat(t.icon_name,'"/>\n      </svg>\n      ').concat(t.title(),"\n    </button>\n  ")}},function(t,e,n){"use strict";var r=n(35),i=n(4),o=n(3),s=n(11),a=n(240);t.exports.create=function(t){t.wrapper.insertAdjacentHTML("beforeend",a());var e=t.wrapper.querySelector(".st-top-controls");return r.dropArea(e),e.addEventListener("drop",(function(n){n.preventDefault();var r=e,s=n.dataTransfer.getData("text/plain"),a=document.querySelector("#"+s);r.id!==s&&o.insertAfter(a,r),t.mediator.trigger("block:rerender",s),i.trigger("block:reorder:dropped",s)})),s.delegate(t.wrapper,".st-block-addition","click",(function(e){t.mediator.trigger("block:create",t.options.defaultType||"Text",null,this.parentNode.parentNode.id?this.parentNode.parentNode:this.parentNode)})),{destroy:function(){t=null},hide:function(){}}}},function(t,e,n){"use strict";var r=n(89);t.exports=function(){return'\n    <div id="st_top" class="st-top-controls">\n      '.concat(r(),"\n    </div>\n  ")}},function(t,e,n){"use strict";var r=n(11);t.exports.create=function(t){function e(e){t.mediator.trigger("block:create",t.options.defaultType||"Text",null,this.parentNode.parentNode.previousSibling,{autoFocus:!0})}return r.delegate(t.wrapper,".st-block-addition-top__button","click",e),r.delegate(t.wrapper,".st-block-addition-top__icon","click",e),{destroy:function(){t=null},hide:function(){}}}},function(t,e,n){"use strict";var r=n(0),i=n(3),o=function(t,e,n){this.wrapper=t,this.mediator=e,this.el=n,r.isUndefined(this.el)&&(this._ensureElement(),this.wrapper.insertBefore(this.el,this.wrapper.firstChild)),i.hide(this.el),this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};Object.assign(o.prototype,n(6),n(30),n(12),{errors:[],className:"st-errors",eventNamespace:"errors",mediatedEvents:{reset:"reset",add:"addMessage",render:"render"},initialize:function(){var t=document.createElement("ul"),e=document.createElement("p");e.innerHTML=i18n.t("errors:title"),this.el.appendChild(e).appendChild(t),this.list=t},render:function(){if(0===this.errors.length)return!1;this.errors.forEach(this.createErrorItem,this),i.show(this.el)},createErrorItem:function(t){var e=document.createElement("li");e.classList.add("st-errors__msg"),e.innerHTML=t.text,this.list.appendChild(e)},addMessage:function(t){this.errors.push(t)},reset:function(){if(0===this.errors.length)return!1;this.errors=[],this.list.innerHTML="",i.hide(this.el)}}),t.exports=o},function(t,e,n){"use strict";n(0);var r=n(3),i="application/vnd.sirtrevor+json",o=function(t,e,n){this.wrapper=t,this.mediator=e,this.editor=n,this.options=n.options,this.startIndex=this.endIndex=0,this.selecting=!1,this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};Object.assign(o.prototype,n(6),n(30),{eventNamespace:"selection",bound:["onCopy","onCut","onKeyDown","onMouseUp","onMouseDown","onPaste"],mediatedEvents:{start:"start",render:"render",complete:"complete",all:"all",copy:"copy",update:"update",delete:"delete",cancel:"cancel",block:"block"},canSelect:function(){if(r.getClosest(document.activeElement,"input")!==document.body)return!1;var t=r.getClosest(document.activeElement,".st-outer");return!this.options.selectionLimitToEditor||t===this.wrapper},initialize:function(){if(!this.enabled())return!1;window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("mouseup",this.onMouseUp,!1),document.addEventListener("copy",this.onCopy,!1),this.options.selectionCut&&document.addEventListener("cut",this.onCut,!1),this.options.selectionPaste&&document.addEventListener("paste",this.onPaste,!0)},enabled:function(){return!!this.options.selectionCopy},start:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.enabled())return!1;e=Object.assign({mouseEnabled:!1,expand:!1},e),this.endIndex=t,e.expand||(this.startIndex=this.endIndex),this.selecting=!0,e.mouseEnabled&&(this.editor.mouseDown=!0,this.selecting=this.startIndex!==this.endIndex,this.selecting&&this.removeNativeSelection(),window.addEventListener("mousemove",this.onMouseMove)),this.mediator.trigger("selection:render")},startAtEnd:function(){this.start(this.editor.getBlocks().length-1)},move:function(t){this.start(this.endIndex+t)},onMouseMove:function(){},update:function(t){t<0||t>=this.editor.getBlocks().length||(this.endIndex=t,this.startIndex!==this.endIndex&&(this.selecting=!0),this.removeNativeSelection(),this.mediator.trigger("selection:render"))},expand:function(t){this.update(this.endIndex+t)},expandToStart:function(){this.update(0)},expandToEnd:function(){this.update(this.editor.getBlocks().length-1)},focusAtEnd:function(){this.editor.getBlocks()[this.endIndex].el.scrollIntoView({behavior:"smooth"})},complete:function(){window.removeEventListener("mousemove",this.onMouseMove)},all:function(){if(!this.enabled())return!1;this.removeNativeSelection();var t=this.editor.getBlocks();this.selecting=!0,this.startIndex=0,this.endIndex=t.length-1,this.mediator.trigger("selection:render")},cancel:function(){this.editor.mouseDown=!1,this.selecting=!1,this.render()},removeNativeSelection:function(){var t=window.getSelection?window.getSelection():document.selection;t&&(t.removeAllRanges?t.removeAllRanges():t.empty&&t.empty()),document.activeElement&&document.activeElement.blur()},render:function(){var t=this,e=this.selecting;this.editor.getBlocks().forEach((function(n,r){n.select(e&&t.indexSelected(r))}))},getClipboardData:function(){var t=this;this.editor.getData();var e=[],n=[],r=[];return this.editor.getBlocks().forEach((function(i,o){if(t.indexSelected(o)){var s=i.asClipboardHTML(),a=s;e.push(s),n.push(a),r.push(i.getData())}})),{html:e.join(""),text:n.join("\n\n"),data:r}},copy:function(){var t=this.createFakeCopyArea();t.innerHTML=this.getClipboardData().html;var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n);try{document.execCommand("copy"),t.blur()}catch(t){console.log("Copy could not be performed")}},createFakeCopyArea:function(){var t=document.body.querySelector(".st-copy-area");return t||(t=r.createElement("div",{contenteditable:!0,class:"st-copy-area st-utils__hidden"}),document.body.appendChild(t)),t},delete:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({createNextBlock:!0},e),this.editor.getBlocks().forEach((function(n,r){t.indexSelected(r)&&t.mediator.trigger("block:remove",n.blockID,{focusOnNext:!0,createNextBlock:e.createNextBlock})})),this.cancel()},indexSelected:function(t){return t>=this.getStartIndex()&&t<=this.getEndIndex()},block:function(t){var e=this.editor.blockManager.getBlockPosition(t.el);this.mediator.trigger("formatter:hide"),this.removeNativeSelection(),this.start(e)},getStartIndex:function(){return Math.min(this.startIndex,this.endIndex)},getEndIndex:function(){return Math.max(this.startIndex,this.endIndex)},getStartBlock:function(){return this.editor.getBlocks()[this.getStartIndex()]},getEndBlock:function(){return this.editor.getBlocks()[this.getEndIndex()]},onKeyDown:function(t){var e=(t=t||window.event).ctrlKey||t.metaKey,n=t.key;if(this.selecting&&"Backspace"===n)t.preventDefault(),this.delete();else if(e&&"a"===n){if(!this.selecting&&!this.canSelect())return;t.preventDefault(),this.mediator.trigger("selection:all")}else if(this.selecting)if(["Down","ArrowDown"].indexOf(n)>-1){if(t.preventDefault(),t.shiftKey&&e)this.expandToEnd();else if(t.shiftKey)this.expand(1);else{if(!e)return this.cancel(),void this.mediator.trigger("block:focusNext",this.getEndBlock().blockID,{force:!0});this.startAtEnd()}this.focusAtEnd()}else if(["Up","ArrowUp"].indexOf(n)>-1){if(t.preventDefault(),t.shiftKey&&e)this.expandToStart();else if(t.shiftKey)this.expand(-1);else{if(!e)return this.cancel(),void this.mediator.trigger("block:focusPrevious",this.getStartBlock().blockID,{force:!0});this.start(0)}this.focusAtEnd()}},onMouseUp:function(){if(!this.editor.mouseDown)return window.addEventListener("mousedown",this.onMouseDown),this.mediator.trigger("selection:complete"),void this.mediator.trigger("selection:cancel");this.editor.mouseDown=!1,this.mediator.trigger("selection:complete"),this.mediator.trigger("selection:render")},onMouseDown:function(t){if(!this.editor.mouseDown)return window.removeEventListener("mousedown",this.onMouseDown),this.mediator.trigger("selection:complete"),void this.mediator.trigger("selection:cancel")},copySelection:function(t){var e=this.getClipboardData();t.clipboardData.setData(i,JSON.stringify(e.data)),t.clipboardData.setData("text/html",e.html),t.clipboardData.setData("text/plain",e.text),t.preventDefault()},onCopy:function(t){this.selecting&&this.copySelection(t)},onCut:function(t){this.selecting&&(this.copySelection(t),this.delete())},onPaste:function(t){if([].slice.call(t.clipboardData.types).includes(i)){if(!this.selecting&&!this.canSelect())return;t.preventDefault(),t.stopPropagation();var e=JSON.parse(t.clipboardData.getData(i));if(this.selecting){var n=this.editor.getBlocks()[this.getEndIndex()+1];this.delete({createNextBlock:!1}),n&&!n.isEmpty()?this.mediator.trigger("block:createBefore","text","",n,{autoFocus:!0}):this.mediator.trigger("block:create","text","",null,{autoFocus:!0})}this.mediator.trigger("block:paste",e)}}}),t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1);t.exports=function(t,e){var o=n(21);e=i.classify(e);var s=t;s=(s=s.replace(/&nbsp;/g," ")).replace(/( class=(")?Mso[a-zA-Z]+(")?)/g,"").replace(/<!--(.*?)-->/g,"").replace(/\/\*(.*?)\*\//g,"").replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var a,c,u=["style","script","applet","embed","noframes","noscript"];for(c=0;c<u.length;c++)a=new RegExp("<"+u[c]+".*?"+u[c]+"(.*?)>","gi"),s=s.replace(a,"");s=s.replace(/\*/g,"\\*").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\_/g,"\\_").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\-/g,"\\-");var l,f=["em","i","strong","b"];for(c=0;c<f.length;c++)a=new RegExp("<"+f[c]+"><br></"+f[c]+">","gi"),s=s.replace(a,"<br>");function d(t,e,n){return r.isUndefined(n)&&(n=""),"**"+e.replace(/<(.)?br(.)?>/g,"")+"**"+n}function h(t,e,n){return r.isUndefined(n)&&(n=""),"_"+e.replace(/<(.)?br(.)?>/g,"")+"_"+n}return s=(s=s.replace(/<(\w+)(?:\s+\w+="[^"]+(?:"\$[^"]+"[^"]+)?")*>\s*<\/\1>/gim,"").replace(/\n/gm,"").replace(/<a.*?href=[""'](.*?)[""'].*?>(.*?)<\/a>/gim,(function(t,e,n){return"["+n.trim().replace(/<(.)?br(.)?>/g,"")+"]("+e+")"})).replace(/<strong>(?:\s*)(.*?)(\s)*?<\/strong>/gim,d).replace(/<b>(?:\s*)(.*?)(\s*)?<\/b>/gim,d).replace(/<em>(?:\s*)(.*?)(\s*)?<\/em>/gim,h).replace(/<i>(?:\s*)(.*?)(\s*)?<\/i>/gim,h)).replace(/([^<>]+)(<div>)/g,"$1\n$2").replace(/<div><div>/g,"\n<div>").replace(/(?:<div>)([^<>]+)(?:<div>)/g,"$1\n").replace(/(?:<div>)(?:<br>)?([^<>]+)(?:<br>)?(?:<\/div>)/g,"$1\n").replace(/<\/p>/g,"\n\n").replace(/<(.)?br(.)?>/g,"\n").replace(/&lt;/g,"<").replace(/&gt;/g,">"),o.hasOwnProperty(e)&&(l=o[e],!r.isUndefined(l.prototype.toMarkdown)&&r.isFunction(l.prototype.toMarkdown)&&(s=l.prototype.toMarkdown(s))),s=s.replace(/<\/?[^>]+(>|$)/g,"")}},function(t,e,n){}])}));