/*!
 * Sir Trevor JS v0.8.0-beta2
 *
 * Released under the MIT license
 * www.opensource.org/licenses/MIT
 *
 * 2019-03-04
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SirTrevor=e():t.SirTrevor=e()}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=93)}([function(t,e,r){"use strict";e.isEmpty=r(119),e.isFunction=r(27),e.isObject=r(17),e.isString=r(129),e.isUndefined=r(130),e.result=r(131),e.template=r(132),e.uniqueId=r(139)},function(t,e,r){"use strict";var n={html:['<div class="st-block__dropzone">','<svg role="img" class="st-icon"><use xlink:href="<%= config.defaults.iconUrl %>#<%= _.result(block, "icon_name") %>"/></svg>','<p><%= i18n.t("general:drop", { block: "<span>" + _.result(block, "title") + "</span>" }) %>',"</p></div>"].join("\n"),re_render_on_reorder:!1},i={html:['<input type="text" placeholder="<%= i18n.t("general:paste") %>"',' class="st-block__paste-input st-paste-block">'].join("")},o={html:['<div class="st-block__upload-container">','<input type="file" type="st-file-upload">','<button class="st-upload-btn"><%= i18n.t("general:upload") %></button>',"</div>"].join("\n")};t.exports={debug:!1,scribeDebug:!1,skipValidation:!1,version:"0.4.0",language:"en",instances:[],defaults:{defaultType:!1,spinner:{className:"st-spinner",lines:9,length:8,width:3,radius:6,color:"#000",speed:1.4,trail:57,shadow:!1,left:"50%",top:"50%"},Block:{drop_options:n,paste_options:i,upload_options:o},blockLimit:0,blockTypeLimits:{},required:[],uploadUrl:"/attachments",attachmentName:"attachment[name]",attachmentFile:"attachment[file]",attachmentUid:"attachment[uid]",baseImageUrl:"/sir-trevor-uploads/",iconUrl:"../src/icons/sir-trevor-icons.svg",errorsContainer:void 0,convertFromMarkdown:!0,joinListBlocksOnBlockRemove:!1,formatBar:{commands:[{name:"Bold",title:"bold",iconName:"fmt-bold",cmd:"bold",keyCode:66,text:"B"},{name:"Italic",title:"italic",iconName:"fmt-italic",cmd:"italic",keyCode:73,text:"i"},{name:"Link",title:"link",iconName:"fmt-link",cmd:"linkPrompt",text:"link"},{name:"Unlink",title:"unlink",iconName:"fmt-unlink",cmd:"unlink",text:"link"},{name:"Heading",title:"heading",iconName:"fmt-heading",cmd:"heading",text:"heading"},{name:"Quote",title:"quote",iconName:"fmt-quote",cmd:"quote",text:"quote"}]},ajaxOptions:{headers:{}},focusOnInit:!0,selectionMouse:!1,selectionCopy:!0,selectionDelete:!1,selectionLimitToEditor:!1}}},function(t,e,r){"use strict";var n=r(0),i=r(1),o=r(3),s=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,a={getInstance:function(t){return n.isUndefined(t)?i.instances[0]:n.isString(t)?i.instances.find(function(e){return e.ID===t}):i.instances[t]},getInstanceBySelection:function(){return a.getInstance(o.getClosest(window.getSelection().anchorNode.parentNode,".st-block").getAttribute("data-instance"))},getBlockBySelection:function(){return a.getInstanceBySelection().findBlockById(o.getClosest(window.getSelection().anchorNode.parentNode,".st-block").id)},log:function(){!n.isUndefined(console)&&i.debug&&console.log.apply(console,arguments)},isURI:function(t){return s.test(t)},titleize:function(t){return null===t?"":(t=String(t).toLowerCase()).replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()})},classify:function(t){return a.titleize(String(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()},flatten:function(t){var e={};return(Array.isArray(t)?t:Object.keys(t)).forEach(function(t){e[t]=!0}),e},underscored:function(t){return t.trim().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},reverse:function(t){return t.split("").reverse().join("")},toSlug:function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},leftTrim:function(t){return t.replace(/^\s+/,"")}};t.exports=a},function(t,e,r){"use strict";var n,i,o=r(0),s=Object.create(null);s.setAttributes=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.html&&(t.innerHTML=o.result(e,"html"),delete e.html),e.text&&(t.textContent=e.text,delete e.text),Object.keys(e).forEach(function(r){t.setAttribute(r,e[r])}),t},s.createElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement(t);return s.setAttributes(r,e),r},s.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},s.remove=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},s.replaceWith=function(t,e){s.remove(e),t.parentNode.replaceChild(e,t)},s.hide=function(t){t.style.display="none"},s.show=function(t){t.style.display=""},s.matches=(n=Element.prototype,i=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),r=0;e[r]&&e[r]!==this;)r++;return!!e[r]},function(t,e){return i.call(t,e)}),s.getClosest=function(t,e){for(;t&&t!==document.body&&!s.matches(t,e);t=t.parentNode);return t},s.wrap=function(t,e){return e=e||document.createElement("div"),t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),e.appendChild(t)},s.createDocumentFragmentFromString=function(t){var e=document.createDocumentFragment(),r=document.createElement("div");for(r.innerHTML=t;r.childNodes[0];)e.appendChild(r.childNodes[0]);return e},t.exports=s},function(t,e,r){"use strict";t.exports=Object.assign({},r(9))},function(t,e,r){t.exports=function(){"use strict";var t=Array.prototype.slice;function e(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function r(t){return s(t)?t:W(t)}function n(t){return a(t)?t:V(t)}function i(t){return u(t)?t:G(t)}function o(t){return s(t)&&!c(t)?t:X(t)}function s(t){return!(!t||!t[f])}function a(t){return!(!t||!t[h])}function u(t){return!(!t||!t[p])}function c(t){return a(t)||u(t)}function l(t){return!(!t||!t[d])}e(n,r),e(i,r),e(o,r),r.isIterable=s,r.isKeyed=a,r.isIndexed=u,r.isAssociative=c,r.isOrdered=l,r.Keyed=n,r.Indexed=i,r.Set=o;var f="@@__IMMUTABLE_ITERABLE__@@",h="@@__IMMUTABLE_KEYED__@@",p="@@__IMMUTABLE_INDEXED__@@",d="@@__IMMUTABLE_ORDERED__@@",y=5,v=1<<y,g=v-1,m={},b={value:!1},_={value:!1};function w(t){return t.value=!1,t}function x(t){t&&(t.value=!0)}function S(){}function E(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),i=0;i<r;i++)n[i]=t[i+e];return n}function k(t){return void 0===t.size&&(t.size=t.__iterate(C)),t.size}function T(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?k(t)+e:e}function C(){return!0}function O(t,e,r){return(0===t||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&e>=r)}function A(t,e){return B(t,e,0)}function j(t,e){return B(t,e,e)}function B(t,e,r){return void 0===t?r:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}var D=0,M=1,P=2,I="function"==typeof Symbol&&Symbol.iterator,L="@@iterator",U=I||L;function N(t){this.next=t}function z(t,e,r,n){var i=0===t?e:1===t?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function F(){return{value:void 0,done:!0}}function q(t){return!!H(t)}function R(t){return t&&"function"==typeof t.next}function $(t){var e=H(t);return e&&e.call(t)}function H(t){var e=t&&(I&&t[I]||t[L]);if("function"==typeof e)return e}function K(t){return t&&"number"==typeof t.length}function W(t){return null==t?ot():s(t)?t.toSeq():function(t){var e=ut(t)||"object"==typeof t&&new et(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}(t)}function V(t){return null==t?ot().toKeyedSeq():s(t)?a(t)?t.toSeq():t.fromEntrySeq():st(t)}function G(t){return null==t?ot():s(t)?a(t)?t.entrySeq():t.toIndexedSeq():at(t)}function X(t){return(null==t?ot():s(t)?a(t)?t.entrySeq():t:at(t)).toSetSeq()}N.prototype.toString=function(){return"[Iterator]"},N.KEYS=D,N.VALUES=M,N.ENTRIES=P,N.prototype.inspect=N.prototype.toSource=function(){return this.toString()},N.prototype[U]=function(){return this},e(W,r),W.of=function(){return W(arguments)},W.prototype.toSeq=function(){return this},W.prototype.toString=function(){return this.__toString("Seq {","}")},W.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},W.prototype.__iterate=function(t,e){return ct(this,t,e,!0)},W.prototype.__iterator=function(t,e){return lt(this,t,e,!0)},e(V,W),V.prototype.toKeyedSeq=function(){return this},e(G,W),G.of=function(){return G(arguments)},G.prototype.toIndexedSeq=function(){return this},G.prototype.toString=function(){return this.__toString("Seq [","]")},G.prototype.__iterate=function(t,e){return ct(this,t,e,!1)},G.prototype.__iterator=function(t,e){return lt(this,t,e,!1)},e(X,W),X.of=function(){return X(arguments)},X.prototype.toSetSeq=function(){return this},W.isSeq=it,W.Keyed=V,W.Set=X,W.Indexed=G;var J,Q,Y,Z="@@__IMMUTABLE_SEQ__@@";function tt(t){this._array=t,this.size=t.length}function et(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function rt(t){this._iterable=t,this.size=t.length||t.size}function nt(t){this._iterator=t,this._iteratorCache=[]}function it(t){return!(!t||!t[Z])}function ot(){return J||(J=new tt([]))}function st(t){var e=Array.isArray(t)?new tt(t).fromEntrySeq():R(t)?new nt(t).fromEntrySeq():q(t)?new rt(t).fromEntrySeq():"object"==typeof t?new et(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function at(t){var e=ut(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function ut(t){return K(t)?new tt(t):R(t)?new nt(t):q(t)?new rt(t):void 0}function ct(t,e,r,n){var i=t._cache;if(i){for(var o=i.length-1,s=0;s<=o;s++){var a=i[r?o-s:s];if(!1===e(a[1],n?a[0]:s,t))return s+1}return s}return t.__iterateUncached(e,r)}function lt(t,e,r,n){var i=t._cache;if(i){var o=i.length-1,s=0;return new N(function(){var t=i[r?o-s:s];return s++>o?{value:void 0,done:!0}:z(e,n?t[0]:s-1,t[1])})}return t.__iteratorUncached(e,r)}function ft(t,e){return e?function t(e,r,n,i){return Array.isArray(r)?e.call(i,n,G(r).map(function(n,i){return t(e,n,i,r)})):pt(r)?e.call(i,n,V(r).map(function(n,i){return t(e,n,i,r)})):r}(e,t,"",{"":t}):ht(t)}function ht(t){return Array.isArray(t)?G(t).map(ht).toList():pt(t)?V(t).map(ht).toMap():t}function pt(t){return t&&(t.constructor===Object||void 0===t.constructor)}function dt(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function yt(t,e){if(t===e)return!0;if(!s(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||a(t)!==a(e)||u(t)!==u(e)||l(t)!==l(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!c(t);if(l(t)){var n=t.entries();return e.every(function(t,e){var i=n.next().value;return i&&dt(i[1],t)&&(r||dt(i[0],e))})&&n.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var f=!0,h=e.__iterate(function(e,n){if(r?!t.has(e):i?!dt(e,t.get(n,m)):!dt(t.get(n,m),e))return f=!1,!1});return f&&t.size===h}function vt(t,e){if(!(this instanceof vt))return new vt(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(Q)return Q;Q=this}}function gt(t,e){if(!t)throw new Error(e)}function mt(t,e,r){if(!(this instanceof mt))return new mt(t,e,r);if(gt(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),r=void 0===r?1:Math.abs(r),e<t&&(r=-r),this._start=t,this._end=e,this._step=r,this.size=Math.max(0,Math.ceil((e-t)/r-1)+1),0===this.size){if(Y)return Y;Y=this}}function bt(){throw TypeError("Abstract")}function _t(){}function wt(){}function xt(){}W.prototype[Z]=!0,e(tt,G),tt.prototype.get=function(t,e){return this.has(t)?this._array[T(this,t)]:e},tt.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length-1,i=0;i<=n;i++)if(!1===t(r[e?n-i:i],i,this))return i+1;return i},tt.prototype.__iterator=function(t,e){var r=this._array,n=r.length-1,i=0;return new N(function(){return i>n?{value:void 0,done:!0}:z(t,i,r[e?n-i++:i++])})},e(et,V),et.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},et.prototype.has=function(t){return this._object.hasOwnProperty(t)},et.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,i=n.length-1,o=0;o<=i;o++){var s=n[e?i-o:o];if(!1===t(r[s],s,this))return o+1}return o},et.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,i=n.length-1,o=0;return new N(function(){var s=n[e?i-o:o];return o++>i?{value:void 0,done:!0}:z(t,s,r[s])})},et.prototype[d]=!0,e(rt,G),rt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=this._iterable,n=$(r),i=0;if(R(n))for(var o;!(o=n.next()).done&&!1!==t(o.value,i++,this););return i},rt.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterable,n=$(r);if(!R(n))return new N(F);var i=0;return new N(function(){var e=n.next();return e.done?e:z(t,i++,e.value)})},e(nt,G),nt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r,n=this._iterator,i=this._iteratorCache,o=0;o<i.length;)if(!1===t(i[o],o++,this))return o;for(;!(r=n.next()).done;){var s=r.value;if(i[o]=s,!1===t(s,o++,this))break}return o},nt.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterator,n=this._iteratorCache,i=0;return new N(function(){if(i>=n.length){var e=r.next();if(e.done)return e;n[i]=e.value}return z(t,i,n[i++])})},e(vt,G),vt.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},vt.prototype.get=function(t,e){return this.has(t)?this._value:e},vt.prototype.includes=function(t){return dt(this._value,t)},vt.prototype.slice=function(t,e){var r=this.size;return O(t,e,r)?this:new vt(this._value,j(e,r)-A(t,r))},vt.prototype.reverse=function(){return this},vt.prototype.indexOf=function(t){return dt(this._value,t)?0:-1},vt.prototype.lastIndexOf=function(t){return dt(this._value,t)?this.size:-1},vt.prototype.__iterate=function(t,e){for(var r=0;r<this.size;r++)if(!1===t(this._value,r,this))return r+1;return r},vt.prototype.__iterator=function(t,e){var r=this,n=0;return new N(function(){return n<r.size?z(t,n++,r._value):{value:void 0,done:!0}})},vt.prototype.equals=function(t){return t instanceof vt?dt(this._value,t._value):yt(t)},e(mt,G),mt.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},mt.prototype.get=function(t,e){return this.has(t)?this._start+T(this,t)*this._step:e},mt.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},mt.prototype.slice=function(t,e){return O(t,e,this.size)?this:(t=A(t,this.size),(e=j(e,this.size))<=t?new mt(0,0):new mt(this.get(t,this._end),this.get(e,this._end),this._step))},mt.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var r=e/this._step;if(r>=0&&r<this.size)return r}return-1},mt.prototype.lastIndexOf=function(t){return this.indexOf(t)},mt.prototype.__iterate=function(t,e){for(var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,o=0;o<=r;o++){if(!1===t(i,o,this))return o+1;i+=e?-n:n}return o},mt.prototype.__iterator=function(t,e){var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,o=0;return new N(function(){var s=i;return i+=e?-n:n,o>r?{value:void 0,done:!0}:z(t,o++,s)})},mt.prototype.equals=function(t){return t instanceof mt?this._start===t._start&&this._end===t._end&&this._step===t._step:yt(this,t)},e(bt,r),e(_t,bt),e(wt,bt),e(xt,bt),bt.Keyed=_t,bt.Indexed=wt,bt.Set=xt;var St="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var r=65535&(t|=0),n=65535&(e|=0);return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0};function Et(t){return t>>>1&1073741824|3221225471&t}function kt(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e,r,n=typeof t;if("number"===n){if(t!=t||t===1/0)return 0;var i=0|t;for(i!==t&&(i^=4294967295*t);t>4294967295;)i^=t/=4294967295;return Et(i)}if("string"===n)return t.length>Mt?(void 0===(r=Lt[e=t])&&(r=Tt(e),It===Pt&&(It=0,Lt={}),It++,Lt[e]=r),r):Tt(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===n)return function(t){var e;if(jt&&void 0!==(e=Ct.get(t)))return e;if(void 0!==(e=t[Dt]))return e;if(!At){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Dt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=++Bt,1073741824&Bt&&(Bt=0),jt)Ct.set(t,e);else{if(void 0!==Ot&&!1===Ot(t))throw new Error("Non-extensible objects are not allowed as keys.");if(At)Object.defineProperty(t,Dt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Dt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Dt]=e}}return e}(t);if("function"==typeof t.toString)return Tt(t.toString());throw new Error("Value type "+n+" cannot be hashed.")}function Tt(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return Et(e)}var Ct,Ot=Object.isExtensible,At=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),jt="function"==typeof WeakMap;jt&&(Ct=new WeakMap);var Bt=0,Dt="__immutablehash__";"function"==typeof Symbol&&(Dt=Symbol(Dt));var Mt=16,Pt=255,It=0,Lt={};function Ut(t){gt(t!==1/0,"Cannot perform this action with an infinite size.")}function Nt(t){return null==t?Yt():zt(t)&&!l(t)?t:Yt().withMutations(function(e){var r=n(t);Ut(r.size),r.forEach(function(t,r){return e.set(r,t)})})}function zt(t){return!(!t||!t[qt])}e(Nt,_t),Nt.of=function(){var e=t.call(arguments,0);return Yt().withMutations(function(t){for(var r=0;r<e.length;r+=2){if(r+1>=e.length)throw new Error("Missing value for key: "+e[r]);t.set(e[r],e[r+1])}})},Nt.prototype.toString=function(){return this.__toString("Map {","}")},Nt.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},Nt.prototype.set=function(t,e){return Zt(this,t,e)},Nt.prototype.setIn=function(t,e){return this.updateIn(t,m,function(){return e})},Nt.prototype.remove=function(t){return Zt(this,t,m)},Nt.prototype.deleteIn=function(t){return this.updateIn(t,function(){return m})},Nt.prototype.update=function(t,e,r){return 1===arguments.length?t(this):this.updateIn([t],e,r)},Nt.prototype.updateIn=function(t,e,r){r||(r=e,e=void 0);var n=function t(e,r,n,i){var o=e===m,s=r.next();if(s.done){var a=o?n:e,u=i(a);return u===a?e:u}gt(o||e&&e.set,"invalid keyPath");var c=s.value,l=o?m:e.get(c,m),f=t(l,r,n,i);return f===l?e:f===m?e.remove(c):(o?Yt():e).set(c,f)}(this,rr(t),e,r);return n===m?void 0:n},Nt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Yt()},Nt.prototype.merge=function(){return ne(this,void 0,arguments)},Nt.prototype.mergeWith=function(e){var r=t.call(arguments,1);return ne(this,e,r)},Nt.prototype.mergeIn=function(e){var r=t.call(arguments,1);return this.updateIn(e,Yt(),function(t){return"function"==typeof t.merge?t.merge.apply(t,r):r[r.length-1]})},Nt.prototype.mergeDeep=function(){return ne(this,ie,arguments)},Nt.prototype.mergeDeepWith=function(e){var r=t.call(arguments,1);return ne(this,oe(e),r)},Nt.prototype.mergeDeepIn=function(e){var r=t.call(arguments,1);return this.updateIn(e,Yt(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,r):r[r.length-1]})},Nt.prototype.sort=function(t){return Ae(Ke(this,t))},Nt.prototype.sortBy=function(t,e){return Ae(Ke(this,e,t))},Nt.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},Nt.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new S)},Nt.prototype.asImmutable=function(){return this.__ensureOwner()},Nt.prototype.wasAltered=function(){return this.__altered},Nt.prototype.__iterator=function(t,e){return new Gt(this,t,e)},Nt.prototype.__iterate=function(t,e){var r=this,n=0;return this._root&&this._root.iterate(function(e){return n++,t(e[1],e[0],r)},e),n},Nt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Qt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Nt.isMap=zt;var Ft,qt="@@__IMMUTABLE_MAP__@@",Rt=Nt.prototype;function $t(t,e){this.ownerID=t,this.entries=e}function Ht(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r}function Kt(t,e,r){this.ownerID=t,this.count=e,this.nodes=r}function Wt(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r}function Vt(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r}function Gt(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&Jt(t._root)}function Xt(t,e){return z(t,e[0],e[1])}function Jt(t,e){return{node:t,index:0,__prev:e}}function Qt(t,e,r,n){var i=Object.create(Rt);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Yt(){return Ft||(Ft=Qt(0))}function Zt(t,e,r){var n,i;if(t._root){var o=w(b),s=w(_);if(n=te(t._root,t.__ownerID,0,void 0,e,r,o,s),!s.value)return t;i=t.size+(o.value?r===m?-1:1:0)}else{if(r===m)return t;i=1,n=new $t(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?Qt(i,n):Yt()}function te(t,e,r,n,i,o,s,a){return t?t.update(e,r,n,i,o,s,a):o===m?t:(x(a),x(s),new Vt(e,n,[i,o]))}function ee(t){return t.constructor===Vt||t.constructor===Wt}function re(t,e,r,n,i){if(t.keyHash===n)return new Wt(e,n,[t.entry,i]);var o,s=(0===r?t.keyHash:t.keyHash>>>r)&g,a=(0===r?n:n>>>r)&g,u=s===a?[re(t,e,r+y,n,i)]:(o=new Vt(e,n,i),s<a?[t,o]:[o,t]);return new Ht(e,1<<s|1<<a,u)}function ne(t,e,r){for(var i=[],o=0;o<r.length;o++){var a=r[o],u=n(a);s(a)||(u=u.map(function(t){return ft(t)})),i.push(u)}return se(t,e,i)}function ie(t,e,r){return t&&t.mergeDeep&&s(e)?t.mergeDeep(e):dt(t,e)?t:e}function oe(t){return function(e,r,n){if(e&&e.mergeDeepWith&&s(r))return e.mergeDeepWith(t,r);var i=t(e,r,n);return dt(e,i)?e:i}}function se(t,e,r){return 0===(r=r.filter(function(t){return 0!==t.size})).length?t:0!==t.size||t.__ownerID||1!==r.length?t.withMutations(function(t){for(var n=e?function(r,n){t.update(n,m,function(t){return t===m?r:e(t,r,n)})}:function(e,r){t.set(r,e)},i=0;i<r.length;i++)r[i].forEach(n)}):t.constructor(r[0])}function ae(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function ue(t,e,r,n){var i=n?t:E(t);return i[e]=r,i}Rt[qt]=!0,Rt.delete=Rt.remove,Rt.removeIn=Rt.deleteIn,$t.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(dt(r,i[o][0]))return i[o][1];return n},$t.prototype.update=function(t,e,r,n,i,o,s){for(var a=i===m,u=this.entries,c=0,l=u.length;c<l&&!dt(n,u[c][0]);c++);var f=c<l;if(f?u[c][1]===i:a)return this;if(x(s),(a||!f)&&x(o),!a||1!==u.length){if(!f&&!a&&u.length>=ce)return function(t,e,r,n){t||(t=new S);for(var i=new Vt(t,kt(r),[r,n]),o=0;o<e.length;o++){var s=e[o];i=i.update(t,0,void 0,s[0],s[1])}return i}(t,u,n,i);var h=t&&t===this.ownerID,p=h?u:E(u);return f?a?c===l-1?p.pop():p[c]=p.pop():p[c]=[n,i]:p.push([n,i]),h?(this.entries=p,this):new $t(t,p)}},Ht.prototype.get=function(t,e,r,n){void 0===e&&(e=kt(r));var i=1<<((0===t?e:e>>>t)&g),o=this.bitmap;return 0==(o&i)?n:this.nodes[ae(o&i-1)].get(t+y,e,r,n)},Ht.prototype.update=function(t,e,r,n,i,o,s){void 0===r&&(r=kt(n));var a=(0===e?r:r>>>e)&g,u=1<<a,c=this.bitmap,l=0!=(c&u);if(!l&&i===m)return this;var f=ae(c&u-1),h=this.nodes,p=l?h[f]:void 0,d=te(p,t,e+y,r,n,i,o,s);if(d===p)return this;if(!l&&d&&h.length>=le)return function(t,e,r,n,i){for(var o=0,s=new Array(v),a=0;0!==r;a++,r>>>=1)s[a]=1&r?e[o++]:void 0;return s[n]=i,new Kt(t,o+1,s)}(t,h,c,a,d);if(l&&!d&&2===h.length&&ee(h[1^f]))return h[1^f];if(l&&d&&1===h.length&&ee(d))return d;var b=t&&t===this.ownerID,_=l?d?c:c^u:c|u,w=l?d?ue(h,f,d,b):function(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=new Array(n),o=0,s=0;s<n;s++)s===e&&(o=1),i[s]=t[s+o];return i}(h,f,b):function(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var o=new Array(i),s=0,a=0;a<i;a++)a===e?(o[a]=r,s=-1):o[a]=t[a+s];return o}(h,f,d,b);return b?(this.bitmap=_,this.nodes=w,this):new Ht(t,_,w)},Kt.prototype.get=function(t,e,r,n){void 0===e&&(e=kt(r));var i=(0===t?e:e>>>t)&g,o=this.nodes[i];return o?o.get(t+y,e,r,n):n},Kt.prototype.update=function(t,e,r,n,i,o,s){void 0===r&&(r=kt(n));var a=(0===e?r:r>>>e)&g,u=i===m,c=this.nodes,l=c[a];if(u&&!l)return this;var f=te(l,t,e+y,r,n,i,o,s);if(f===l)return this;var h=this.count;if(l){if(!f&&--h<fe)return function(t,e,r,n){for(var i=0,o=0,s=new Array(r),a=0,u=1,c=e.length;a<c;a++,u<<=1){var l=e[a];void 0!==l&&a!==n&&(i|=u,s[o++]=l)}return new Ht(t,i,s)}(t,c,h,a)}else h++;var p=t&&t===this.ownerID,d=ue(c,a,f,p);return p?(this.count=h,this.nodes=d,this):new Kt(t,h,d)},Wt.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(dt(r,i[o][0]))return i[o][1];return n},Wt.prototype.update=function(t,e,r,n,i,o,s){void 0===r&&(r=kt(n));var a=i===m;if(r!==this.keyHash)return a?this:(x(s),x(o),re(this,t,e,r,[n,i]));for(var u=this.entries,c=0,l=u.length;c<l&&!dt(n,u[c][0]);c++);var f=c<l;if(f?u[c][1]===i:a)return this;if(x(s),(a||!f)&&x(o),a&&2===l)return new Vt(t,this.keyHash,u[1^c]);var h=t&&t===this.ownerID,p=h?u:E(u);return f?a?c===l-1?p.pop():p[c]=p.pop():p[c]=[n,i]:p.push([n,i]),h?(this.entries=p,this):new Wt(t,this.keyHash,p)},Vt.prototype.get=function(t,e,r,n){return dt(r,this.entry[0])?this.entry[1]:n},Vt.prototype.update=function(t,e,r,n,i,o,s){var a=i===m,u=dt(n,this.entry[0]);return(u?i===this.entry[1]:a)?this:(x(s),a?void x(o):u?t&&t===this.ownerID?(this.entry[1]=i,this):new Vt(t,this.keyHash,[n,i]):(x(o),re(this,t,e,kt(n),[n,i])))},$t.prototype.iterate=Wt.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===t(r[e?i-n:n]))return!1},Ht.prototype.iterate=Kt.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var o=r[e?i-n:n];if(o&&!1===o.iterate(t,e))return!1}},Vt.prototype.iterate=function(t,e){return t(this.entry)},e(Gt,N),Gt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r,n=e.node,i=e.index++;if(n.entry){if(0===i)return Xt(t,n.entry)}else if(n.entries){if(r=n.entries.length-1,i<=r)return Xt(t,n.entries[this._reverse?r-i:i])}else if(r=n.nodes.length-1,i<=r){var o=n.nodes[this._reverse?r-i:i];if(o){if(o.entry)return Xt(t,o.entry);e=this._stack=Jt(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var ce=v/4,le=v/2,fe=v/4;function he(t){var e=xe();if(null==t)return e;if(pe(t))return t;var r=i(t),n=r.size;return 0===n?e:(Ut(n),n>0&&n<v?we(0,n,y,null,new ve(r.toArray())):e.withMutations(function(t){t.setSize(n),r.forEach(function(e,r){return t.set(r,e)})}))}function pe(t){return!(!t||!t[de])}e(he,wt),he.of=function(){return this(arguments)},he.prototype.toString=function(){return this.__toString("List [","]")},he.prototype.get=function(t,e){if((t=T(this,t))>=0&&t<this.size){var r=ke(this,t+=this._origin);return r&&r.array[t&g]}return e},he.prototype.set=function(t,e){return function(t,e,r){if((e=T(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Te(t,e).set(0,r):Te(t,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,i=t._root,o=w(_);return e>=Oe(t._capacity)?n=Se(n,t.__ownerID,0,e,r,o):i=Se(i,t.__ownerID,t._level,e,r,o),o.value?t.__ownerID?(t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t):we(t._origin,t._capacity,t._level,i,n):t}(this,t,e)},he.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},he.prototype.insert=function(t,e){return this.splice(t,0,e)},he.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=y,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):xe()},he.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(r){Te(r,0,e+t.length);for(var n=0;n<t.length;n++)r.set(e+n,t[n])})},he.prototype.pop=function(){return Te(this,0,-1)},he.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Te(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])})},he.prototype.shift=function(){return Te(this,1)},he.prototype.merge=function(){return Ce(this,void 0,arguments)},he.prototype.mergeWith=function(e){var r=t.call(arguments,1);return Ce(this,e,r)},he.prototype.mergeDeep=function(){return Ce(this,ie,arguments)},he.prototype.mergeDeepWith=function(e){var r=t.call(arguments,1);return Ce(this,oe(e),r)},he.prototype.setSize=function(t){return Te(this,0,t)},he.prototype.slice=function(t,e){var r=this.size;return O(t,e,r)?this:Te(this,A(t,r),j(e,r))},he.prototype.__iterator=function(t,e){var r=0,n=_e(this,e);return new N(function(){var e=n();return e===be?{value:void 0,done:!0}:z(t,r++,e)})},he.prototype.__iterate=function(t,e){for(var r,n=0,i=_e(this,e);(r=i())!==be&&!1!==t(r,n++,this););return n},he.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?we(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},he.isList=pe;var de="@@__IMMUTABLE_LIST__@@",ye=he.prototype;function ve(t,e){this.array=t,this.ownerID=e}ye[de]=!0,ye.delete=ye.remove,ye.setIn=Rt.setIn,ye.deleteIn=ye.removeIn=Rt.removeIn,ye.update=Rt.update,ye.updateIn=Rt.updateIn,ye.mergeIn=Rt.mergeIn,ye.mergeDeepIn=Rt.mergeDeepIn,ye.withMutations=Rt.withMutations,ye.asMutable=Rt.asMutable,ye.asImmutable=Rt.asImmutable,ye.wasAltered=Rt.wasAltered,ve.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var n=r>>>e&g;if(n>=this.array.length)return new ve([],t);var i,o=0===n;if(e>0){var s=this.array[n];if((i=s&&s.removeBefore(t,e-y,r))===s&&o)return this}if(o&&!i)return this;var a=Ee(this,t);if(!o)for(var u=0;u<n;u++)a.array[u]=void 0;return i&&(a.array[n]=i),a},ve.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var n,i=r-1>>>e&g;if(i>=this.array.length)return this;if(e>0){var o=this.array[i];if((n=o&&o.removeAfter(t,e-y,r))===o&&i===this.array.length-1)return this}var s=Ee(this,t);return s.array.splice(i+1),n&&(s.array[i]=n),s};var ge,me,be={};function _e(t,e){var r=t._origin,n=t._capacity,i=Oe(n),o=t._tail;return s(t._root,t._level,0);function s(t,a,u){return 0===a?function(t,s){var a=s===i?o&&o.array:t&&t.array,u=s>r?0:r-s,c=n-s;return c>v&&(c=v),function(){if(u===c)return be;var t=e?--c:u++;return a&&a[t]}}(t,u):function(t,i,o){var a,u=t&&t.array,c=o>r?0:r-o>>i,l=1+(n-o>>i);return l>v&&(l=v),function(){for(;;){if(a){var t=a();if(t!==be)return t;a=null}if(c===l)return be;var r=e?--l:c++;a=s(u&&u[r],i-y,o+(r<<i))}}}(t,a,u)}}function we(t,e,r,n,i,o,s){var a=Object.create(ye);return a.size=e-t,a._origin=t,a._capacity=e,a._level=r,a._root=n,a._tail=i,a.__ownerID=o,a.__hash=s,a.__altered=!1,a}function xe(){return ge||(ge=we(0,0,y))}function Se(t,e,r,n,i,o){var s,a=n>>>r&g,u=t&&a<t.array.length;if(!u&&void 0===i)return t;if(r>0){var c=t&&t.array[a],l=Se(c,e,r-y,n,i,o);return l===c?t:((s=Ee(t,e)).array[a]=l,s)}return u&&t.array[a]===i?t:(x(o),s=Ee(t,e),void 0===i&&a===s.array.length-1?s.array.pop():s.array[a]=i,s)}function Ee(t,e){return e&&t&&e===t.ownerID?t:new ve(t?t.array.slice():[],e)}function ke(t,e){if(e>=Oe(t._capacity))return t._tail;if(e<1<<t._level+y){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&g],n-=y;return r}}function Te(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var n=t.__ownerID||new S,i=t._origin,o=t._capacity,s=i+e,a=void 0===r?o:r<0?o+r:i+r;if(s===i&&a===o)return t;if(s>=a)return t.clear();for(var u=t._level,c=t._root,l=0;s+l<0;)c=new ve(c&&c.array.length?[void 0,c]:[],n),l+=1<<(u+=y);l&&(s+=l,i+=l,a+=l,o+=l);for(var f=Oe(o),h=Oe(a);h>=1<<u+y;)c=new ve(c&&c.array.length?[c]:[],n),u+=y;var p=t._tail,d=h<f?ke(t,a-1):h>f?new ve([],n):p;if(p&&h>f&&s<o&&p.array.length){for(var v=c=Ee(c,n),m=u;m>y;m-=y){var b=f>>>m&g;v=v.array[b]=Ee(v.array[b],n)}v.array[f>>>y&g]=p}if(a<o&&(d=d&&d.removeAfter(n,0,a)),s>=h)s-=h,a-=h,u=y,c=null,d=d&&d.removeBefore(n,0,s);else if(s>i||h<f){for(l=0;c;){var _=s>>>u&g;if(_!==h>>>u&g)break;_&&(l+=(1<<u)*_),u-=y,c=c.array[_]}c&&s>i&&(c=c.removeBefore(n,u,s-l)),c&&h<f&&(c=c.removeAfter(n,u,h-l)),l&&(s-=l,a-=l)}return t.__ownerID?(t.size=a-s,t._origin=s,t._capacity=a,t._level=u,t._root=c,t._tail=d,t.__hash=void 0,t.__altered=!0,t):we(s,a,u,c,d)}function Ce(t,e,r){for(var n=[],o=0,a=0;a<r.length;a++){var u=r[a],c=i(u);c.size>o&&(o=c.size),s(u)||(c=c.map(function(t){return ft(t)})),n.push(c)}return o>t.size&&(t=t.setSize(o)),se(t,e,n)}function Oe(t){return t<v?0:t-1>>>y<<y}function Ae(t){return null==t?De():je(t)?t:De().withMutations(function(e){var r=n(t);Ut(r.size),r.forEach(function(t,r){return e.set(r,t)})})}function je(t){return zt(t)&&l(t)}function Be(t,e,r,n){var i=Object.create(Ae.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i}function De(){return me||(me=Be(Yt(),xe()))}function Me(t,e,r){var n,i,o=t._map,s=t._list,a=o.get(e),u=void 0!==a;if(r===m){if(!u)return t;s.size>=v&&s.size>=2*o.size?(i=s.filter(function(t,e){return void 0!==t&&a!==e}),n=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(n.__ownerID=i.__ownerID=t.__ownerID)):(n=o.remove(e),i=a===s.size-1?s.pop():s.set(a,void 0))}else if(u){if(r===s.get(a)[1])return t;n=o,i=s.set(a,[e,r])}else n=o.set(e,s.size),i=s.set(s.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=i,t.__hash=void 0,t):Be(n,i)}function Pe(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function Ie(t){this._iter=t,this.size=t.size}function Le(t){this._iter=t,this.size=t.size}function Ue(t){this._iter=t,this.size=t.size}function Ne(t){var e=Ze(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=tr,e.__iterateUncached=function(e,r){var n=this;return t.__iterate(function(t,r){return!1!==e(r,t,n)},r)},e.__iteratorUncached=function(e,r){if(e===P){var n=t.__iterator(e,r);return new N(function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===M?D:M,r)},e}function ze(t,e,r){var n=Ze(t);return n.size=t.size,n.has=function(e){return t.has(e)},n.get=function(n,i){var o=t.get(n,m);return o===m?i:e.call(r,o,n,t)},n.__iterateUncached=function(n,i){var o=this;return t.__iterate(function(t,i,s){return!1!==n(e.call(r,t,i,s),i,o)},i)},n.__iteratorUncached=function(n,i){var o=t.__iterator(P,i);return new N(function(){var i=o.next();if(i.done)return i;var s=i.value,a=s[0];return z(n,a,e.call(r,s[1],a,t),i)})},n}function Fe(t,e){var r=Ze(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=Ne(t);return e.reverse=function(){return t.flip()},e}),r.get=function(r,n){return t.get(e?r:-1-r,n)},r.has=function(r){return t.has(e?r:-1-r)},r.includes=function(e){return t.includes(e)},r.cacheResult=tr,r.__iterate=function(e,r){var n=this;return t.__iterate(function(t,r){return e(t,r,n)},!r)},r.__iterator=function(e,r){return t.__iterator(e,!r)},r}function qe(t,e,r,n){var i=Ze(t);return n&&(i.has=function(n){var i=t.get(n,m);return i!==m&&!!e.call(r,i,n,t)},i.get=function(n,i){var o=t.get(n,m);return o!==m&&e.call(r,o,n,t)?o:i}),i.__iterateUncached=function(i,o){var s=this,a=0;return t.__iterate(function(t,o,u){if(e.call(r,t,o,u))return a++,i(t,n?o:a-1,s)},o),a},i.__iteratorUncached=function(i,o){var s=t.__iterator(P,o),a=0;return new N(function(){for(;;){var o=s.next();if(o.done)return o;var u=o.value,c=u[0],l=u[1];if(e.call(r,l,c,t))return z(i,n?c:a++,l,o)}})},i}function Re(t,e,r,n){var i=t.size;if(void 0!==e&&(e|=0),void 0!==r&&(r===1/0?r=i:r|=0),O(e,r,i))return t;var o=A(e,i),s=j(r,i);if(o!=o||s!=s)return Re(t.toSeq().cacheResult(),e,r,n);var a,u=s-o;u==u&&(a=u<0?0:u);var c=Ze(t);return c.size=0===a?a:t.size&&a||void 0,!n&&it(t)&&a>=0&&(c.get=function(e,r){return(e=T(this,e))>=0&&e<a?t.get(e+o,r):r}),c.__iterateUncached=function(e,r){var i=this;if(0===a)return 0;if(r)return this.cacheResult().__iterate(e,r);var s=0,u=!0,c=0;return t.__iterate(function(t,r){if(!u||!(u=s++<o))return c++,!1!==e(t,n?r:c-1,i)&&c!==a}),c},c.__iteratorUncached=function(e,r){if(0!==a&&r)return this.cacheResult().__iterator(e,r);var i=0!==a&&t.__iterator(e,r),s=0,u=0;return new N(function(){for(;s++<o;)i.next();if(++u>a)return{value:void 0,done:!0};var t=i.next();return n||e===M?t:z(e,u-1,e===D?void 0:t.value[1],t)})},c}function $e(t,e,r,n){var i=Ze(t);return i.__iterateUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterate(i,o);var a=!0,u=0;return t.__iterate(function(t,o,c){if(!a||!(a=e.call(r,t,o,c)))return u++,i(t,n?o:u-1,s)}),u},i.__iteratorUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterator(i,o);var a=t.__iterator(P,o),u=!0,c=0;return new N(function(){var t,o,l;do{if((t=a.next()).done)return n||i===M?t:z(i,c++,i===D?void 0:t.value[1],t);var f=t.value;o=f[0],l=f[1],u&&(u=e.call(r,l,o,s))}while(u);return i===P?t:z(i,o,l,t)})},i}function He(t,e,r){var n=Ze(t);return n.__iterateUncached=function(n,i){var o=0,a=!1;return function t(u,c){var l=this;u.__iterate(function(i,u){return(!e||c<e)&&s(i)?t(i,c+1):!1===n(i,r?u:o++,l)&&(a=!0),!a},i)}(t,0),o},n.__iteratorUncached=function(n,i){var o=t.__iterator(n,i),a=[],u=0;return new N(function(){for(;o;){var t=o.next();if(!1===t.done){var c=t.value;if(n===P&&(c=c[1]),e&&!(a.length<e)||!s(c))return r?t:z(n,u++,c,t);a.push(o),o=c.__iterator(n,i)}else o=a.pop()}return{value:void 0,done:!0}})},n}function Ke(t,e,r){e||(e=er);var n=a(t),i=0,o=t.toSeq().map(function(e,n){return[n,e,i++,r?r(e,n,t):e]}).toArray();return o.sort(function(t,r){return e(t[3],r[3])||t[2]-r[2]}).forEach(n?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),n?V(o):u(t)?G(o):X(o)}function We(t,e,r){if(e||(e=er),r){var n=t.toSeq().map(function(e,n){return[e,r(e,n,t)]}).reduce(function(t,r){return Ve(e,t[1],r[1])?r:t});return n&&n[0]}return t.reduce(function(t,r){return Ve(e,t,r)?r:t})}function Ve(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(null==r||r!=r)||n>0}function Ge(t,e,n){var i=Ze(t);return i.size=new tt(n).map(function(t){return t.size}).min(),i.__iterate=function(t,e){for(var r,n=this.__iterator(M,e),i=0;!(r=n.next()).done&&!1!==t(r.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=n.map(function(t){return t=r(t),$(i?t.reverse():t)}),s=0,a=!1;return new N(function(){var r;return a||(r=o.map(function(t){return t.next()}),a=r.some(function(t){return t.done})),a?{value:void 0,done:!0}:z(t,s++,e.apply(null,r.map(function(t){return t.value})))})},i}function Xe(t,e){return it(t)?e:t.constructor(e)}function Je(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Qe(t){return Ut(t.size),k(t)}function Ye(t){return a(t)?n:u(t)?i:o}function Ze(t){return Object.create((a(t)?V:u(t)?G:X).prototype)}function tr(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):W.prototype.cacheResult.call(this)}function er(t,e){return t>e?1:t<e?-1:0}function rr(t){var e=$(t);if(!e){if(!K(t))throw new TypeError("Expected iterable or array-like: "+t);e=$(r(t))}return e}function nr(t,e){var r,n=function(o){if(o instanceof n)return o;if(!(this instanceof n))return new n(o);if(!r){r=!0;var s=Object.keys(t);!function(t,e){try{e.forEach(function(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){gt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}.bind(void 0,t))}catch(t){}}(i,s),i.size=s.length,i._name=e,i._keys=s,i._defaultValues=t}this._map=Nt(o)},i=n.prototype=Object.create(ir);return i.constructor=n,n}e(Ae,Nt),Ae.of=function(){return this(arguments)},Ae.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Ae.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},Ae.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):De()},Ae.prototype.set=function(t,e){return Me(this,t,e)},Ae.prototype.remove=function(t){return Me(this,t,m)},Ae.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Ae.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],r)},e)},Ae.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Ae.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?Be(e,r,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=r,this)},Ae.isOrderedMap=je,Ae.prototype[d]=!0,Ae.prototype.delete=Ae.prototype.remove,e(Pe,V),Pe.prototype.get=function(t,e){return this._iter.get(t,e)},Pe.prototype.has=function(t){return this._iter.has(t)},Pe.prototype.valueSeq=function(){return this._iter.valueSeq()},Pe.prototype.reverse=function(){var t=this,e=Fe(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},Pe.prototype.map=function(t,e){var r=this,n=ze(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},Pe.prototype.__iterate=function(t,e){var r,n=this;return this._iter.__iterate(this._useKeys?function(e,r){return t(e,r,n)}:(r=e?Qe(this):0,function(i){return t(i,e?--r:r++,n)}),e)},Pe.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var r=this._iter.__iterator(M,e),n=e?Qe(this):0;return new N(function(){var i=r.next();return i.done?i:z(t,e?--n:n++,i.value,i)})},Pe.prototype[d]=!0,e(Ie,G),Ie.prototype.includes=function(t){return this._iter.includes(t)},Ie.prototype.__iterate=function(t,e){var r=this,n=0;return this._iter.__iterate(function(e){return t(e,n++,r)},e)},Ie.prototype.__iterator=function(t,e){var r=this._iter.__iterator(M,e),n=0;return new N(function(){var e=r.next();return e.done?e:z(t,n++,e.value,e)})},e(Le,X),Le.prototype.has=function(t){return this._iter.includes(t)},Le.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(e){return t(e,e,r)},e)},Le.prototype.__iterator=function(t,e){var r=this._iter.__iterator(M,e);return new N(function(){var e=r.next();return e.done?e:z(t,e.value,e.value,e)})},e(Ue,V),Ue.prototype.entrySeq=function(){return this._iter.toSeq()},Ue.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(e){if(e){Je(e);var n=s(e);return t(n?e.get(1):e[1],n?e.get(0):e[0],r)}},e)},Ue.prototype.__iterator=function(t,e){var r=this._iter.__iterator(M,e);return new N(function(){for(;;){var e=r.next();if(e.done)return e;var n=e.value;if(n){Je(n);var i=s(n);return z(t,i?n.get(0):n[0],i?n.get(1):n[1],e)}}})},Ie.prototype.cacheResult=Pe.prototype.cacheResult=Le.prototype.cacheResult=Ue.prototype.cacheResult=tr,e(nr,_t),nr.prototype.toString=function(){return this.__toString(sr(this)+" {","}")},nr.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},nr.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._defaultValues[t];return this._map?this._map.get(t,r):r},nr.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=or(this,Yt()))},nr.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+sr(this));if(this._map&&!this._map.has(t)){var r=this._defaultValues[t];if(e===r)return this}var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:or(this,n)},nr.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:or(this,e)},nr.prototype.wasAltered=function(){return this._map.wasAltered()},nr.prototype.__iterator=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterator(t,e)},nr.prototype.__iterate=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterate(t,e)},nr.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?or(this,e,t):(this.__ownerID=t,this._map=e,this)};var ir=nr.prototype;function or(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._map=e,n.__ownerID=r,n}function sr(t){return t._name||t.constructor.name||"Record"}function ar(t){return null==t?dr():ur(t)&&!l(t)?t:dr().withMutations(function(e){var r=o(t);Ut(r.size),r.forEach(function(t){return e.add(t)})})}function ur(t){return!(!t||!t[lr])}ir.delete=ir.remove,ir.deleteIn=ir.removeIn=Rt.removeIn,ir.merge=Rt.merge,ir.mergeWith=Rt.mergeWith,ir.mergeIn=Rt.mergeIn,ir.mergeDeep=Rt.mergeDeep,ir.mergeDeepWith=Rt.mergeDeepWith,ir.mergeDeepIn=Rt.mergeDeepIn,ir.setIn=Rt.setIn,ir.update=Rt.update,ir.updateIn=Rt.updateIn,ir.withMutations=Rt.withMutations,ir.asMutable=Rt.asMutable,ir.asImmutable=Rt.asImmutable,e(ar,xt),ar.of=function(){return this(arguments)},ar.fromKeys=function(t){return this(n(t).keySeq())},ar.prototype.toString=function(){return this.__toString("Set {","}")},ar.prototype.has=function(t){return this._map.has(t)},ar.prototype.add=function(t){return hr(this,this._map.set(t,!0))},ar.prototype.remove=function(t){return hr(this,this._map.remove(t))},ar.prototype.clear=function(){return hr(this,this._map.clear())},ar.prototype.union=function(){var e=t.call(arguments,0);return 0===(e=e.filter(function(t){return 0!==t.size})).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var r=0;r<e.length;r++)o(e[r]).forEach(function(e){return t.add(e)})}):this.constructor(e[0])},ar.prototype.intersect=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map(function(t){return o(t)});var r=this;return this.withMutations(function(t){r.forEach(function(r){e.every(function(t){return t.includes(r)})||t.remove(r)})})},ar.prototype.subtract=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map(function(t){return o(t)});var r=this;return this.withMutations(function(t){r.forEach(function(r){e.some(function(t){return t.includes(r)})&&t.remove(r)})})},ar.prototype.merge=function(){return this.union.apply(this,arguments)},ar.prototype.mergeWith=function(e){var r=t.call(arguments,1);return this.union.apply(this,r)},ar.prototype.sort=function(t){return yr(Ke(this,t))},ar.prototype.sortBy=function(t,e){return yr(Ke(this,e,t))},ar.prototype.wasAltered=function(){return this._map.wasAltered()},ar.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate(function(e,n){return t(n,n,r)},e)},ar.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},ar.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},ar.isSet=ur;var cr,lr="@@__IMMUTABLE_SET__@@",fr=ar.prototype;function hr(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function pr(t,e){var r=Object.create(fr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function dr(){return cr||(cr=pr(Yt()))}function yr(t){return null==t?_r():vr(t)?t:_r().withMutations(function(e){var r=o(t);Ut(r.size),r.forEach(function(t){return e.add(t)})})}function vr(t){return ur(t)&&l(t)}fr[lr]=!0,fr.delete=fr.remove,fr.mergeDeep=fr.merge,fr.mergeDeepWith=fr.mergeWith,fr.withMutations=Rt.withMutations,fr.asMutable=Rt.asMutable,fr.asImmutable=Rt.asImmutable,fr.__empty=dr,fr.__make=pr,e(yr,ar),yr.of=function(){return this(arguments)},yr.fromKeys=function(t){return this(n(t).keySeq())},yr.prototype.toString=function(){return this.__toString("OrderedSet {","}")},yr.isOrderedSet=vr;var gr,mr=yr.prototype;function br(t,e){var r=Object.create(mr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function _r(){return gr||(gr=br(De()))}function wr(t){return null==t?Cr():xr(t)?t:Cr().unshiftAll(t)}function xr(t){return!(!t||!t[Er])}mr[d]=!0,mr.__empty=_r,mr.__make=br,e(wr,wt),wr.of=function(){return this(arguments)},wr.prototype.toString=function(){return this.__toString("Stack [","]")},wr.prototype.get=function(t,e){var r=this._head;for(t=T(this,t);r&&t--;)r=r.next;return r?r.value:e},wr.prototype.peek=function(){return this._head&&this._head.value},wr.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,r=arguments.length-1;r>=0;r--)e={value:arguments[r],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Tr(t,e)},wr.prototype.pushAll=function(t){if(0===(t=i(t)).size)return this;Ut(t.size);var e=this.size,r=this._head;return t.reverse().forEach(function(t){e++,r={value:t,next:r}}),this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Tr(e,r)},wr.prototype.pop=function(){return this.slice(1)},wr.prototype.unshift=function(){return this.push.apply(this,arguments)},wr.prototype.unshiftAll=function(t){return this.pushAll(t)},wr.prototype.shift=function(){return this.pop.apply(this,arguments)},wr.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Cr()},wr.prototype.slice=function(t,e){if(O(t,e,this.size))return this;var r=A(t,this.size),n=j(e,this.size);if(n!==this.size)return wt.prototype.slice.call(this,t,e);for(var i=this.size-r,o=this._head;r--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):Tr(i,o)},wr.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Tr(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},wr.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var r=0,n=this._head;n&&!1!==t(n.value,r++,this);)n=n.next;return r},wr.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var r=0,n=this._head;return new N(function(){if(n){var e=n.value;return n=n.next,z(t,r++,e)}return{value:void 0,done:!0}})},wr.isStack=xr;var Sr,Er="@@__IMMUTABLE_STACK__@@",kr=wr.prototype;function Tr(t,e,r,n){var i=Object.create(kr);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Cr(){return Sr||(Sr=Tr(0))}function Or(t,e){var r=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}kr[Er]=!0,kr.withMutations=Rt.withMutations,kr.asMutable=Rt.asMutable,kr.asImmutable=Rt.asImmutable,kr.wasAltered=Rt.wasAltered,r.Iterator=N,Or(r,{toArray:function(){Ut(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,r){t[r]=e}),t},toIndexedSeq:function(){return new Ie(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new Pe(this,!0)},toMap:function(){return Nt(this.toKeyedSeq())},toObject:function(){Ut(this.size);var t={};return this.__iterate(function(e,r){t[r]=e}),t},toOrderedMap:function(){return Ae(this.toKeyedSeq())},toOrderedSet:function(){return yr(a(this)?this.valueSeq():this)},toSet:function(){return ar(a(this)?this.valueSeq():this)},toSetSeq:function(){return new Le(this)},toSeq:function(){return u(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return wr(a(this)?this.valueSeq():this)},toList:function(){return he(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var e=t.call(arguments,0);return Xe(this,function(t,e){var r=a(t),i=[t].concat(e).map(function(t){return s(t)?r&&(t=n(t)):t=r?st(t):at(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===i.length)return t;if(1===i.length){var o=i[0];if(o===t||r&&a(o)||u(t)&&u(o))return o}var c=new tt(i);return r?c=c.toKeyedSeq():u(t)||(c=c.toSetSeq()),(c=c.flatten(!0)).size=i.reduce(function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}},0),c}(this,e))},includes:function(t){return this.some(function(e){return dt(e,t)})},entries:function(){return this.__iterator(P)},every:function(t,e){Ut(this.size);var r=!0;return this.__iterate(function(n,i,o){if(!t.call(e,n,i,o))return r=!1,!1}),r},filter:function(t,e){return Xe(this,qe(this,t,e,!0))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return Ut(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Ut(this.size),t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate(function(n){r?r=!1:e+=t,e+=null!=n?n.toString():""}),e},keys:function(){return this.__iterator(D)},map:function(t,e){return Xe(this,ze(this,t,e))},reduce:function(t,e,r){var n,i;return Ut(this.size),arguments.length<2?i=!0:n=e,this.__iterate(function(e,o,s){i?(i=!1,n=e):n=t.call(r,n,e,o,s)}),n},reduceRight:function(t,e,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return Xe(this,Fe(this,!0))},slice:function(t,e){return Xe(this,Re(this,t,e,!0))},some:function(t,e){return!this.every(Mr(t),e)},sort:function(t){return Xe(this,Ke(this,t))},values:function(){return this.__iterator(M)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return k(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,r){var n=Nt().asMutable();return t.__iterate(function(i,o){n.update(e.call(r,i,o,t),0,function(t){return t+1})}),n.asImmutable()}(this,t,e)},equals:function(t){return yt(this,t)},entrySeq:function(){var t=this;if(t._cache)return new tt(t._cache);var e=t.toSeq().map(Dr).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Mr(t),e)},findEntry:function(t,e,r){var n=r;return this.__iterate(function(r,i,o){if(t.call(e,r,i,o))return n=[i,r],!1}),n},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(C)},flatMap:function(t,e){return Xe(this,function(t,e,r){var n=Ye(t);return t.toSeq().map(function(i,o){return n(e.call(r,i,o,t))}).flatten(!0)}(this,t,e))},flatten:function(t){return Xe(this,He(this,t,!0))},fromEntrySeq:function(){return new Ue(this)},get:function(t,e){return this.find(function(e,r){return dt(r,t)},void 0,e)},getIn:function(t,e){for(var r,n=this,i=rr(t);!(r=i.next()).done;){var o=r.value;if((n=n&&n.get?n.get(o,m):m)===m)return e}return n},groupBy:function(t,e){return function(t,e,r){var n=a(t),i=(l(t)?Ae():Nt()).asMutable();t.__iterate(function(o,s){i.update(e.call(r,o,s,t),function(t){return(t=t||[]).push(n?[s,o]:o),t})});var o=Ye(t);return i.map(function(e){return Xe(t,o(e))})}(this,t,e)},has:function(t){return this.get(t,m)!==m},hasIn:function(t){return this.getIn(t,m)!==m},isSubset:function(t){return t="function"==typeof t.includes?t:r(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:r(t)).isSubset(this)},keyOf:function(t){return this.findKey(function(e){return dt(e,t)})},keySeq:function(){return this.toSeq().map(Br).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return We(this,t)},maxBy:function(t,e){return We(this,e,t)},min:function(t){return We(this,t?Pr(t):Ur)},minBy:function(t,e){return We(this,e?Pr(e):Ur,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Xe(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return Xe(this,$e(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Mr(t),e)},sortBy:function(t,e){return Xe(this,Ke(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Xe(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return Xe(this,function(t,e,r){var n=Ze(t);return n.__iterateUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterate(n,i);var s=0;return t.__iterate(function(t,i,a){return e.call(r,t,i,a)&&++s&&n(t,i,o)}),s},n.__iteratorUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterator(n,i);var s=t.__iterator(P,i),a=!0;return new N(function(){if(!a)return{value:void 0,done:!0};var t=s.next();if(t.done)return t;var i=t.value,u=i[0],c=i[1];return e.call(r,c,u,o)?n===P?t:z(n,u,c,t):(a=!1,{value:void 0,done:!0})})},n}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Mr(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=l(t),r=a(t),n=e?1:0;return function(t,e){return e=St(e,3432918353),e=St(e<<15|e>>>-15,461845907),e=St(e<<13|e>>>-13,5),e=St((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=Et((e=St(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(r?e?function(t,e){n=31*n+Nr(kt(t),kt(e))|0}:function(t,e){n=n+Nr(kt(t),kt(e))|0}:e?function(t){n=31*n+kt(t)|0}:function(t){n=n+kt(t)|0}),n)}(this))}});var Ar=r.prototype;Ar[f]=!0,Ar[U]=Ar.values,Ar.__toJS=Ar.toArray,Ar.__toStringMapper=Ir,Ar.inspect=Ar.toSource=function(){return this.toString()},Ar.chain=Ar.flatMap,Ar.contains=Ar.includes,Or(n,{flip:function(){return Xe(this,Ne(this))},mapEntries:function(t,e){var r=this,n=0;return Xe(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],n++,r)}).fromEntrySeq())},mapKeys:function(t,e){var r=this;return Xe(this,this.toSeq().flip().map(function(n,i){return t.call(e,n,i,r)}).flip())}});var jr=n.prototype;function Br(t,e){return e}function Dr(t,e){return[e,t]}function Mr(t){return function(){return!t.apply(this,arguments)}}function Pr(t){return function(){return-t.apply(this,arguments)}}function Ir(t){return"string"==typeof t?JSON.stringify(t):String(t)}function Lr(){return E(arguments)}function Ur(t,e){return t<e?1:t>e?-1:0}function Nr(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}return jr[h]=!0,jr[U]=Ar.entries,jr.__toJS=Ar.toObject,jr.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+Ir(t)},Or(i,{toKeyedSeq:function(){return new Pe(this,!1)},filter:function(t,e){return Xe(this,qe(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Xe(this,Fe(this,!1))},slice:function(t,e){return Xe(this,Re(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(0|e,0),0===r||2===r&&!e)return this;t=A(t,t<0?this.count():this.size);var n=this.slice(0,t);return Xe(this,1===r?n:n.concat(E(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Xe(this,He(this,t,!1))},get:function(t,e){return(t=T(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,r){return r===t},void 0,e)},has:function(t){return(t=T(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Xe(this,function(t,e){var r=Ze(t);return r.size=t.size&&2*t.size-1,r.__iterateUncached=function(r,n){var i=this,o=0;return t.__iterate(function(t,n){return(!o||!1!==r(e,o++,i))&&!1!==r(t,o++,i)},n),o},r.__iteratorUncached=function(r,n){var i,o=t.__iterator(M,n),s=0;return new N(function(){return(!i||s%2)&&(i=o.next()).done?i:s%2?z(r,s++,e):z(r,s++,i.value,i)})},r}(this,t))},interleave:function(){var t=[this].concat(E(arguments)),e=Ge(this.toSeq(),G.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),Xe(this,r)},keySeq:function(){return mt(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Xe(this,$e(this,t,e,!1))},zip:function(){return Xe(this,Ge(this,Lr,[this].concat(E(arguments))))},zipWith:function(t){var e=E(arguments);return e[0]=this,Xe(this,Ge(this,t,e))}}),i.prototype[p]=!0,i.prototype[d]=!0,Or(o,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),o.prototype.has=Ar.includes,o.prototype.contains=o.prototype.includes,Or(V,n.prototype),Or(G,i.prototype),Or(X,o.prototype),Or(_t,n.prototype),Or(wt,i.prototype),Or(xt,o.prototype),{Iterable:r,Seq:W,Collection:bt,Map:Nt,OrderedMap:Ae,List:he,Stack:wr,Set:ar,OrderedSet:yr,Record:nr,Range:mt,Repeat:vt,is:dt,fromJS:ft}}()},function(t,e,r){"use strict";t.exports={bound:[],_bindFunctions:function(){this.bound.forEach(function(t){this[t]=this[t].bind(this)},this)}}},function(t,e,r){var n;void 0===(n=function(){var t=Math.pow(2,53)-1;return function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}}.apply(e,[]))||(t.exports=n)},function(t,e,r){"use strict";var n=r(0),i=r(68),o=r(1),s=r(2),a=r(3),u=r(10),c=r(65),l=r(87),f=r(38),h=r(83),p=r(81),d=r(4),y=r(226).Spinner,v=r(227),g=function(t,e,r,n,i){l.apply(this,arguments)};(g.prototype=Object.create(l.prototype)).constructor=g,Object.assign(g.prototype,l.fn,r(84),{bound:["_handleContentPaste","_onFocus","_onBlur","onDrop","onDeleteClick","clearInsertedStyles","getSelectionForFormatter","onBlockRender","onDeleteConfirm","onPositionerClick"],className:"st-block",attributes:function(){return Object.assign(l.fn.attributes.call(this))},icon_name:"default",validationFailMsg:function(){return i18n.t("errors:validation_fail",{type:n.isFunction(this.title)?this.title():this.title})},editorHTML:'<div class="st-block__editor"></div>',toolbarEnabled:!0,availableMixins:["droppable","pastable","uploadable","fetchable","ajaxable","controllable","multi_editable","textable"],droppable:!1,pastable:!1,uploadable:!1,fetchable:!1,ajaxable:!1,mergeable:!1,multi_editable:!1,textable:!1,drop_options:{},paste_options:{},upload_options:{},formattable:!0,supressKeyListeners:!1,_previousSelection:"",initialize:function(){},toMarkdown:function(t){return t},toHTML:function(t){return t},withMixin:function(t){if(n.isObject(t)){var e="initialize"+t.mixinName;n.isUndefined(this[e])&&(Object.assign(this,t),this[e]())}},render:function(){if(this.beforeBlockRender(),this._setBlockInner(),this.editor=this.inner.children[0],this.mixinsRequireInputs=!1,this.availableMixins.forEach(function(t){if(this[t]){var e=c[s.classify(t)];!n.isUndefined(e.requireInputs)&&e.requireInputs&&(this.mixinsRequireInputs=!0)}},this),this.mixinsRequireInputs){var t=document.createElement("div");t.classList.add("st-block__inputs"),this.inner.appendChild(t),this.inputs=t}return this.hasTextBlock()&&this._initTextBlocks(),this.availableMixins.forEach(function(t){this[t]&&this.withMixin(c[s.classify(t)])},this),this.formattable&&this._initFormatting(),this._blockPrepare(),this},remove:function(){this.ajaxable&&this.resolveAllInQueue(),a.remove(this.el)},loading:function(){n.isUndefined(this.spinner)||this.ready(),this.spinner=new y(o.defaults.spinner),this.spinner.spin(this.el),this.el.classList.add("st--is-loading")},ready:function(){this.el.classList.remove("st--is-loading"),n.isUndefined(this.spinner)||(this.spinner.stop(),delete this.spinner)},_serializeData:function(){s.log("toData for "+this.blockID);var t={};this.hasTextBlock()&&(t.text=this.getTextBlockHTML(),t.format="html");var e=['input:not([class="st-paste-block"])','textarea:not([class="st-paste-block"])','select:not([class="st-paste-block"])','button:not([class="st-paste-block"])'].join(",");return this.$(e).length>0&&Array.prototype.forEach.call(this.$("input, textarea, select, button"),function(e){var r=e.getAttribute("data-name")||e.getAttribute("name");if(r)if("number"===e.getAttribute("type"))t[r]=parseInt(e.value);else if("checkbox"===e.getAttribute("type")){var n="";e.getAttribute("data-toggle")?(n="off",!0===e.checked&&(n="on")):!0===e.checked&&(n=e.value),t[r]=n}else"radio"===e.getAttribute("type")?!0===e.checked&&(t[r]=e.value):t[r]=e.value}),t},focus:function(){Array.prototype.forEach.call(this.getTextBlock(),function(t){t.focus()})},focusAtEnd:function(){this.focus()},blur:function(){Array.prototype.forEach.call(this.getTextBlock(),function(t){t.blur()})},onFocus:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),function(e){e.addEventListener("focus",t._onFocus)})},onBlur:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),function(e){e.addEventListener("blur",t._onBlur)})},_onFocus:function(){this.trigger("blockFocus",this.el)},_onBlur:function(){},onDrop:function(t){},onDeleteConfirm:function(t){t.preventDefault(),this.mediator.trigger("block:remove",this.blockID,{focusOnPrevious:!0})},addDeleteControls:function(){var t=this;this.ui.insertAdjacentHTML("beforeend",v()),u.delegate(this.el,".js-st-block-confirm-delete","click",this.onDeleteConfirm),u.delegate(this.el,".js-st-block-deny-delete","click",function(e){e.preventDefault(),t.deleteEl.classList.remove("active")})},onDeleteClick:function(t){t.preventDefault(),t.stopPropagation(),this.isEmpty()?this.onDeleteConfirm.call(this,new CustomEvent("click")):(this.deleteEl=this.el.querySelector(".st-block__ui-delete-controls"),this.deleteEl.classList.toggle("active"))},onPositionerClick:function(t){t.preventDefault(),this.positioner.toggle()},beforeLoadingData:function(){this.loading(),this.mixinsRequireInputs&&(a.show(this.editor),a.hide(this.inputs)),l.fn.beforeLoadingData.call(this),this.ready()},execTextBlockCommand:function(t){if(n.isUndefined(this._scribe))throw"No Scribe instance found to send a command to";return i.execTextBlockCommand(this._scribe,t)},queryTextBlockCommandState:function(t){if(n.isUndefined(this._scribe))throw"No Scribe instance found to query command";return i.queryTextBlockCommandState(this._scribe,t)},_handleContentPaste:function(t){setTimeout(this.onContentPasted.bind(this,t,t.currentTarget),0)},_getBlockClass:function(){return"st-block--"+this.className},_initUIComponents:function(){this.addDeleteControls(),this.positioner=new p(this.el,this.mediator),this._withUIComponent(this.positioner,".st-block-ui-btn__reorder",this.onPositionerClick),this._withUIComponent(new f(this.el,this.mediator)),this._withUIComponent(new h,".st-block-ui-btn__delete",this.onDeleteClick),this.onFocus(),this.onBlur()},_initFormatting:function(){var t=this;this.options.formatBar&&this.options.formatBar.commands.forEach(function(e){n.isUndefined(e.keyCode)||u.delegate(t.el,".st-text-block","keydown",function(r){(r.metaKey||r.ctrlKey)&&r.keyCode===e.keyCode&&(r.preventDefault(),t.execTextBlockCommand(e.cmd))})})},_initTextBlocks:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),function(e){e.addEventListener("keyup",t.getSelectionForFormatter),e.addEventListener("mousedown",t.addMouseupListener.bind(t)),e.addEventListener("DOMNodeInserted",t.clearInsertedStyles)});var e=this.getTextBlock()[0];if(!n.isUndefined(e)&&n.isUndefined(this._scribe)){var r=n.isFunction(this.configureScribe)?this.configureScribe.bind(this):null;this._scribe=i.initScribeInstance(e,this.scribeOptions,r)}},addMouseupListener:function(){var t=this;window.addEventListener("mouseup",function e(){t.getSelectionForFormatter(),window.removeEventListener("mouseup",e)})},getSelectionForFormatter:function(){var t=this;setTimeout(function(){var e="formatter:"+(""===window.getSelection().toString().trim()?"hide":"position");t.mediator.trigger(e,t),d.trigger(e,t)},1)},clearInsertedStyles:function(t){var e=t.target;n.isUndefined(e.tagName)&&(e=e.parentNode),e.removeAttribute("style")},hasTextBlock:function(){return this.getTextBlock().length>0},getTextBlock:function(){return n.isUndefined(this.text_block)&&(this.text_block=this.$(".st-text-block")),this.text_block},getTextBlockHTML:function(){return this._scribe.getContent()},setTextBlockHTML:function(t){var e=this._scribe.setContent(t),r=this._scribe.node.firstDeepestChild(this._scribe.el);for("#text"===r.nodeName&&(r.textContent=s.leftTrim(r.textContent));this._scribe.el.firstChild&&""===this._scribe.el.firstChild.textContent&&-1!=document.createElement(this._scribe.el.firstChild.tagName).outerHTML.indexOf("/");)this._scribe.el.removeChild(this._scribe.el.firstChild);for(;this._scribe.el.lastChild&&"BR"===this._scribe.el.lastChild.nodeName;)this._scribe.el.removeChild(this._scribe.el.lastChild);return e},isEmpty:function(){return n.isEmpty(this.getBlockData())},select:function(t){this.el.classList.toggle("st-block--is-selected",t)}}),g.extend=r(89),t.exports=g},function(t,e,r){"use strict";t.exports=r(141)},function(t,e,r){"use strict";var n=r(3),i=function(t,e){for(var r,n={},i={shared:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),mouseEvent:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),keyEvent:"char charCode key keyCode".split(" ")},o=/^(?:mouse|pointer|contextmenu|drag|drop)|click/.test(t.type)?i.shared.concat(i.mouseEvent):/^key/.test(t.type)?i.shared.concat(i.keyEvent):i.shared,s=0;s<o.length;s++)n[r=o[s]]=t[r];return n.currentTarget=e,n.originalEvent=t,n.preventDefault=function(){this.originalEvent&&this.originalEvent.preventDefault()},n.stopPropagation=function(){this.originalEvent&&this.originalEvent.stopPropagation()},n};t.exports.delegate=function(t,e,r,o){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t.addEventListener(r,function(r){for(var s=r.target;s&&s!==t;s=s.parentNode)if(n.matches(s,e)){o.call(s,i(r,s));break}s=null},s)}},function(t,e,r){"use strict";var n=r(0),i=r(3);t.exports={tagName:"div",className:"sir-trevor__view",attributes:{},$:function(t){return this.el.querySelectorAll(t)},render:function(){return this},destroy:function(){n.isUndefined(this.stopListening)||this.stopListening(),i.remove(this.el)},_ensureElement:function(){if(this.el)this._setElement(this.el);else{var t=Object.assign({},n.result(this,"attributes"));this.id&&(t.id=this.id),this.className&&(t.class=this.className);var e=i.createElement(this.tagName,t);this._setElement(e)}},_setElement:function(t){return this.el=t,this}}},function(t,e,r){var n=r(24),i=r(17),o=r(128),s=n(s=Object.keys)&&s,a=s?function(t){return i(t)?s(t):[]}:o;t.exports=a},function(t,e,r){var n=r(151),i=window.getSelection();function o(t,e){t.focus(),i.removeAllRanges(),i.addRange(e)}t.exports=function(t,e){if(1==arguments.length){if(!i.rangeCount)return;var r={},s=i.getRangeAt(0),a=s.cloneRange();return a.selectNodeContents(t),a.setEnd(s.endContainer,s.endOffset),r.end=a.toString().length,a.setStart(s.startContainer,s.startOffset),r.start=r.end-a.toString().length,r.atStart=0===a.startOffset,r}var u,c,l=e.end&&e.end!==e.start,f=0,s=document.createRange(),h=n(t).select(Node.TEXT_NODE).revisit(!1),p=e.start>t.textContent.length?t.textContent.length:e.start,d=e.end>t.textContent.length?t.textContent.length:e.end,y=e.atStart;for(;u=h.next();){var v=f;f+=u.textContent.length;var g=y?f>p:f>=p;if(!c&&g&&(c=!0,s.setStart(u,p-v),!l)){s.collapse(!0),o(t,s);break}if(l&&f>=d){s.setEnd(u,d-v),o(t,s);break}}}},function(t,e,r){var n;void 0===(n=function(){return function(t){var e=typeof t;return"function"==e||t&&"object"==e||!1}}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n;void 0===(n=function(){return function(t){return t&&"object"==typeof t||!1}}.apply(e,[]))||(t.exports=n)},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var n=r(25);t.exports=function(t){return!(!t||!n[typeof t])}},function(t,e,r){var n,i;n=[r(202),r(15)],void 0===(i=function(t,e){var r="[object Function]",n=/^\[object .+?Constructor\]$/,i=Object.prototype,o=Function.prototype.toString,s=i.toString,a=RegExp("^"+t(s).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return function(t){return null!=t&&(s.call(t)==r?a.test(o.call(t)):e(t)&&n.test(t)||!1)}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(7),r(18),r(15)],void 0===(i=function(t,e,r){var n=Object.prototype.toString,i=e(i=Array.isArray)&&i;return i||function(e){return r(e)&&t(e.length)&&"[object Array]"==n.call(e)||!1}}.apply(e,n))||(t.exports=i)},function(t,e,r){"use strict";t.exports={Text:r(222),Quote:r(229),Image:r(230),Heading:r(231),List:r(232),Tweet:r(234),Video:r(235)}},function(t,e,r){"use strict";var n=r(0),i=r(2);t.exports=function(t,e){var o,s=r(20),a=t,u="Text"===(e=i.classify(e));return n.isUndefined(u)&&(u=!1),u&&(a="<p>"+a),a=a.replace(/\[([^\]]+)\]\(([^\)]+)\)/gm,function(t,e,r){return"<a href='"+r+"'>"+e.replace(/\n/g,"")+"</a>"}),a=(a=i.reverse(i.reverse(a).replace(/_(?!\\)((_\\|[^_])*)_(?=$|[^\\])/gm,function(t,e){return">i/<"+e.replace(/\n/g,"").replace(/[\s]+$/,"")+">i<"}).replace(/\*\*(?!\\)((\*\*\\|[^\*\*])*)\*\*(?=$|[^\\])/gm,function(t,e){return">b/<"+e.replace(/\n/g,"").replace(/[\s]+$/,"")+">b<"}))).replace(/^\> (.+)$/gm,"$1"),s.hasOwnProperty(e)&&(o=s[e],!n.isUndefined(o.prototype.toHTML)&&n.isFunction(o.prototype.toHTML)&&(a=o.prototype.toHTML(a))),u&&(a=(a=a.replace(/\n\s*\n/gm,"</p><p>")).replace(/\n/gm,"<br>")),a=(a=a.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\n/g,"<br>").replace(/\*\*/,"").replace(/__/,"")).replace(/\\\*/g,"*").replace(/\\\[/g,"[").replace(/\\\]/g,"]").replace(/\\\_/g,"_").replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/\\\-/g,"-"),u&&(a+="</p>"),a}},function(t,e,r){"use strict";var n=r(42),i=r(98),o="function"==typeof Symbol&&"symbol"==typeof Symbol(),s=Object.prototype.toString,a=Object.defineProperty&&function(){var t={};try{for(var e in Object.defineProperty(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),u=function(t,e,r,n){var i;e in t&&("function"!=typeof(i=n)||"[object Function]"!==s.call(i)||!n())||(a?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},c=function(t,e){var r=arguments.length>2?arguments[2]:{},s=n(e);o&&(s=s.concat(Object.getOwnPropertySymbols(e))),i(s,function(n){u(t,n,e[n],r[n])})};c.supportsDescriptors=!!a,t.exports=c},function(t,e,r){"use strict";var n=r(99);t.exports=Function.prototype.bind||n},function(t,e){var r=Object.prototype.toString,n=RegExp("^"+String(r).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");t.exports=function(t){return"function"==typeof t&&n.test(t)}},function(t,e){t.exports={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1}},function(t,e){t.exports=function(t,e,r){e||(e=0),void 0===r&&(r=t?t.length:0);for(var n=-1,i=r-e||0,o=Array(i<0?0:i);++n<i;)o[n]=t[e+n];return o}},function(t,e){t.exports=function(t){return"function"==typeof t}},function(t,e,r){var n,i;n=[r(157),r(158),r(5)],void 0===(i=function(t,e,r){"use strict";function n(t){return t.nodeType===Node.TEXT_NODE}function i(t,e){return function(r){return r.nodeType===t.ELEMENT_NODE&&r.className===e}}function o(t,e){return!(e.nodeType!==t.TEXT_NODE||!/^\s*$/.test(e.nodeValue))}function s(t,e){for(;e.childNodes.length>0;)t.insertBefore(e.childNodes[0],e);t.removeChild(e)}return{isInlineElement:function(e){return t.includes(e.nodeName)},isBlockElement:function(t){return e.includes(t.nodeName)},isEmptyInlineElement:function t(e){return!(e.children.length>1)&&(1!==e.children.length||""===e.textContent.trim())&&(0===e.children.length?""===e.textContent.trim():t(e.children[0]))},isText:n,isEmptyTextNode:function(t){var e=!1;try{e=n(t)&&""===t.data}catch(t){e=!0}return e},isWhitespaceOnlyTextNode:o,isTextNodeWithContent:function(t,e){return e.nodeType===t.TEXT_NODE&&!o(t,e)},isFragment:function(t){return t.nodeType===Node.DOCUMENT_FRAGMENT_NODE},isBefore:function(t,e){return t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING},isSelectionMarkerNode:function(t){return i(Node,"scribe-marker")(t)},isCaretPositionNode:function(t){return i(Node,"caret-position")(t)},firstDeepestChild:function t(e){var r=e.firstChild;return r&&"BR"!==r.nodeName?t(r):e},insertAfter:function(t,e){return e.parentNode.insertBefore(t,e.nextSibling)},removeNode:function(t){return t.parentNode.removeChild(t)},getAncestor:function(t,e,r){function n(t){return e===t}if(!n(t))for(var i=t.parentNode;i&&!n(i);){if(r(i))return i;i=i.parentNode}},nextSiblings:function(t){for(var e=r.List();t=t.nextSibling;)e=e.push(t);return e},wrap:function(t,e){return t[0].parentNode.insertBefore(e,t[0]),t.forEach(function(t){e.appendChild(t)}),e},unwrap:s,removeChromeArtifacts:function(e){var n=r.List(e.querySelectorAll(t.map(function(t){return t+'[style*="line-height"]'}).join(",")));n=n.filter(function(t,e){return window.getComputedStyle(e).lineHeight===t.lineHeight}.bind(null,window.getComputedStyle(e)));var i=r.List();n.forEach(function(t){t.style.lineHeight=null,""===t.getAttribute("style")&&t.removeAttribute("style"),"SPAN"===t.nodeName&&0===t.attributes.length&&(i=i.push(t))}),i.forEach(function(t){s(t.parentNode,t)})},elementHasClass:i,hasContent:function(t){return!!(t&&t.children&&t.children.length>0)||!(!t||"BR"!==t.nodeName)}}}.apply(e,n))||(t.exports=i)},function(t,e,r){"use strict";t.exports={mediatedEvents:{},eventNamespace:null,_bindMediatedEvents:function(){Object.keys(this.mediatedEvents).forEach(function(t){var e=this.mediatedEvents[t];t=this.eventNamespace?this.eventNamespace+":"+t:t,this.mediator.on(t,this[e].bind(this))},this)}}},function(t,e,r){"use strict";var n=r(23);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,r){"use strict";var n=Function.prototype.toString,i=/^\s*class\b/,o=function(t){try{var e=n.call(t);return i.test(e)}catch(t){return!1}},s=Object.prototype.toString,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(a)return function(t){try{return!o(t)&&(n.call(t),!0)}catch(t){return!1}}(t);if(o(t))return!1;var e=s.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},function(t,e,r){var n=r(24),i=r(57),o={configurable:!1,enumerable:!1,value:null,writable:!1},s=function(){try{var t={},e=n(e=Object.defineProperty)&&e,r=e(t,t,t)&&e}catch(t){}return r}(),a=s?function(t,e){o.value=e,s(t,"__bindData__",o)}:i;t.exports=a},function(t,e,r){"use strict";var n=r(2);t.exports={mixinName:"Ajaxable",ajaxable:!0,initializeAjaxable:function(){this._queued=[]},addQueuedItem:function(t,e){n.log("Adding queued item for "+this.blockID+" called "+t),this._queued.push({name:t,deferred:e})},removeQueuedItem:function(t){n.log("Removing queued item for "+this.blockID+" called "+t),this._queued=this._queued.filter(function(e){return e.name!==t})},hasItemsInQueue:function(){return this._queued.length>0},resolveAllInQueue:function(){this._queued.forEach(function(t){n.log("Aborting queued request: "+t.name),t.deferred.cancel()},this)}}},function(t,e,r){"use strict";function n(t){t.preventDefault(),t.stopPropagation()}function i(t){t.dataTransfer.dropEffect="copy",t.currentTarget.classList.add("st-drag-over"),t.preventDefault(),t.stopPropagation()}function o(t){t.currentTarget.classList.remove("st-drag-over"),t.preventDefault(),t.stopPropagation()}t.exports={dropArea:function(t){return t.addEventListener("dragenter",n),t.addEventListener("dragover",i),t.addEventListener("dragleave",o),t},noDropArea:function(t){return t.removeEventListener("dragenter"),t.removeEventListener("dragover"),t.removeEventListener("dragleave"),t}}},function(t,e,r){var n,i;n=[r(7),r(15)],void 0===(i=function(t,e){var r,n="[object Arguments]",i=Object.prototype.toString;return function(o){var s=e(o)?o.length:r;return t(s)&&i.call(o)==n||!1}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n;void 0===(n=function(){var t=Math.pow(2,53)-1;return function(e,r){return r=null==r?t:r,(e=+e)>-1&&e%1==0&&e<r}}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n,i;n=[r(35),r(19),r(36),r(7),r(14),r(75)],void 0===(i=function(t,e,r,n,i,o){var s=Object.prototype.hasOwnProperty;return function(a){if(null==a)return[];i(a)||(a=Object(a));var u=a.length;u=u&&n(u)&&(e(a)||o.nonEnumArgs&&t(a))&&u||0;for(var c=a.constructor,l=-1,f="function"==typeof c&&c.prototype===a,h=Array(u),p=u>0;++l<u;)h[l]=l+"";for(var d in a)p&&r(d,u)||"constructor"==d&&(f||!s.call(a,d))||h.push(d);return h}}.apply(e,n))||(t.exports=i)},function(t,e,r){"use strict";var n=r(34),i=r(4),o=r(3),s=r(1),a=function(t,e){this.block=t,this.blockID=this.block.getAttribute("id"),this.mediator=e,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(a.prototype,r(6),r(11),{bound:["onMouseDown","onDragStart","onDragEnd","onDrop"],className:"st-block-ui-btn__reorder",tagName:"a",attributes:function(){return{html:'<svg role="img" class="st-icon">\n                 <use xlink:href="'.concat(s.defaults.iconUrl,'#move"/>\n               </svg>'),draggable:"true","data-icon":"move"}},initialize:function(){this.el.addEventListener("mousedown",this.onMouseDown),this.el.addEventListener("dragstart",this.onDragStart),this.el.addEventListener("dragend",this.onDragEnd),n.dropArea(this.block),this.block.addEventListener("drop",this.onDrop)},blockId:function(){return this.block.getAttribute("id")},onMouseDown:function(){i.trigger("block:reorder:down")},onDrop:function(t){t.preventDefault();var e=this.block,r=t.dataTransfer.getData("text/plain"),n=document.querySelector("#"+r);e.id!==r&&o.insertAfter(n,e),this.mediator.trigger("block:rerender",r),i.trigger("block:reorder:dropped",r)},onDragStart:function(t){var e=this.block;this.dragEl=e.cloneNode(!0),this.dragEl.classList.add("st-drag-element"),this.dragEl.style.top="".concat(e.offsetTop,"px"),this.dragEl.style.left="".concat(e.offsetLeft,"px"),e.parentNode.appendChild(this.dragEl),t.dataTransfer.setDragImage(this.dragEl,0,0),t.dataTransfer.setData("text/plain",this.blockId()),this.mediator.trigger("block-controls:hide"),i.trigger("block:reorder:dragstart"),e.classList.add("st-block--dragging")},onDragEnd:function(t){i.trigger("block:reorder:dragend"),this.block.classList.remove("st-block--dragging"),this.dragEl.parentNode.removeChild(this.dragEl)},render:function(){return this}}),t.exports=a},function(t,e,r){"use strict";r.r(e),r.d(e,"getTotalLength",function(){return s}),r.d(e,"isAtStart",function(){return o}),r.d(e,"isAtEnd",function(){return a}),r.d(e,"selectToEnd",function(){return i});var n=r(13),i=function(t){var e=(new t.api.Selection).range.cloneRange();return e.setEndAfter(t.el.lastChild,0),e},o=function(t){var e=n(t.el);return 0===e.start&&0===e.end&&e.atStart},s=function(t){var e=(new t.api.Selection).range.cloneRange();return e.selectNodeContents(t.el),e.toString().length},a=function(t){var e=n(t.el);return s(t)===e.end&&e.start===e.end}},function(t,e,r){"use strict";t.exports=function(t){return function(e){var r=new e.api.Command("heading");r.queryEnabled=function(){return t.inline_editable},r.queryState=function(){return"heading"===t.type},r.execute=function(e){var n={format:"html",text:t.getScribeInnerContent()};t.mediator.trigger("block:replace",t.el,r.queryState()?"Text":"Heading",n)},e.commands.heading=r}}},function(t,e,r){"use strict";t.exports=function(t){return function(e){var r=new e.api.Command("quote");r.queryEnabled=function(){return t.inline_editable},r.queryState=function(){return"quote"===t.type},r.execute=function(e){var n={format:"html",text:t.getScribeInnerContent()};t.mediator.trigger("block:replace",t.el,r.queryState()?"Text":"Quote",n)},e.commands.quote=r}}},function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Array.prototype.slice,s=r(97),a=Object.prototype.propertyIsEnumerable,u=!a.call({toString:null},"toString"),c=a.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(t){var e=t.constructor;return e&&e.prototype===t},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!h["$"+t]&&n.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{f(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),d=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===i.call(t),o=s(t),a=e&&"[object String]"===i.call(t),h=[];if(!e&&!r&&!o)throw new TypeError("Object.keys called on a non-object");var d=c&&r;if(a&&t.length>0&&!n.call(t,0))for(var y=0;y<t.length;++y)h.push(String(y));if(o&&t.length>0)for(var v=0;v<t.length;++v)h.push(String(v));else for(var g in t)d&&"prototype"===g||!n.call(t,g)||h.push(String(g));if(u)for(var m=function(t){if("undefined"==typeof window||!p)return f(t);try{return f(t)}catch(t){return!1}}(t),b=0;b<l.length;++b)m&&"constructor"===l[b]||!n.call(t,l[b])||h.push(l[b]);return h};d.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var t=Object.keys;Object.keys=function(e){return s(e)?t(o.call(e)):t(e)}}}else Object.keys=d;return Object.keys||d},t.exports=d},function(t,e,r){"use strict";var n=r(42),i=r(23),o=r(44)(),s=Object,a=i.call(Function.call,Array.prototype.push),u=i.call(Function.call,Object.prototype.propertyIsEnumerable),c=o?Object.getOwnPropertySymbols:null;t.exports=function(t,e){if(null==t)throw new TypeError("target must be an object");var r,i,l,f,h,p,d,y=s(t);for(r=1;r<arguments.length;++r){i=s(arguments[r]),f=n(i);var v=o&&(Object.getOwnPropertySymbols||c);if(v)for(h=v(i),l=0;l<h.length;++l)d=h[l],u(i,d)&&a(f,d);for(l=0;l<f.length;++l)p=i[d=f[l]],u(i,d)&&(y[d]=p)}return y}},function(t,e,r){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},function(t,e,r){"use strict";var n=r(43);t.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),o="";for(var s in i)o+=s;return t!==o}()?n:function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1}()?n:Object.assign:n}},function(t,e,r){"use strict";t.exports=r(102)},function(t,e){t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,r){"use strict";var n=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,o=Object.getPrototypeOf||function(t){return t.__proto__},s=void 0,a="undefined"==typeof Uint8Array?void 0:o(Uint8Array),u={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":i?o([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":void 0,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":void 0,"$ %AsyncIteratorPrototype%":s&&i&&Symbol.asyncIterator?s[Symbol.asyncIterator]():void 0,"$ %Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?void 0:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":void 0,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":void 0,"$ %Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":i?o(o([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&i?o((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof Promise?void 0:Promise,"$ %PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"$ %PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"$ %Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"$ %Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"$ %Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"$ %Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&i?o((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":i?o(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":i?Symbol:void 0,"$ %SymbolPrototype%":i?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":n,"$ %TypedArray%":a,"$ %TypedArrayPrototype%":a?a.prototype:void 0,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype};t.exports=function(t,e){if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');var r="$ "+t;if(!(r in u))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===u[r]&&!e)throw new TypeError("intrinsic "+t+" exists, but is not available. Please file an issue!");return u[r]}},function(t,e){t.exports=Number.isNaN||function(t){return t!=t}},function(t,e){var r=Number.isNaN||function(t){return t!=t};t.exports=Number.isFinite||function(t){return"number"==typeof t&&!r(t)&&t!==1/0&&t!==-1/0}},function(t,e){t.exports=function(t){return t>=0?1:-1}},function(t,e){t.exports=function(t,e){var r=t%e;return Math.floor(r>=0?r:r+e)}},function(t,e,r){"use strict";var n=r(46);t.exports=function(t){var e=n.ToObject(this),r=n.ToInteger(n.ToLength(e.length));if(!n.IsCallable(t))throw new TypeError("Array#find: predicate must be a function");if(0!==r)for(var i,o=arguments[1],s=0;s<r;s++)if(i=e[s],n.Call(t,o,[i,s,e]))return i}},function(t,e,r){"use strict";t.exports=function(){return Array.prototype.find&&1!==[,1].find(function(){return!0})?Array.prototype.find:r(53)}},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var t=a(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){(function(e){var n=r(24),i=r(17),o=(r(57),n(o=Object.create)&&o);function s(t,e){return i(t)?o(t):{}}o||(s=function(){function t(){}return function(r){if(i(r)){t.prototype=r;var n=new t;t.prototype=null}return n||e.Object()}}()),t.exports=s}).call(this,r(16))},function(t,e){t.exports=function(){}},function(t,e,r){var n=r(134),i=(r(12),r(135));t.exports=function(t){return null==t?"":String(t).replace(i,n)}},function(t,e){t.exports={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}},function(t,e){t.exports=/<%=([\s\S]+?)%>/g},function(t,e,r){"use strict";var n=r(0),i=r(2),o=function(t,e){this.mediator=e,this.initialize(t?t.trim():"")};Object.assign(o.prototype,{initialize:function(t){this.store=this._parseData(t)||{data:[]}},retrieve:function(){return this.store},toString:function(t){return JSON.stringify(this.store,void 0,t)},reset:function(){i.log("Resetting the EditorStore"),this.store={data:[]}},addData:function(t){return this.store.data.push(t),this.store},_parseData:function(t){var e;if(0===t.length)return e;try{var r=JSON.parse(t);n.isUndefined(r.data)||(e=r)}catch(t){this.mediator.trigger("errors:add",{text:i18n.t("errors:load_fail")}),this.mediator.trigger("errors:render"),console.log("Sorry there has been a problem with parsing the JSON"),console.log(t)}return e}}),t.exports=o},function(t,e,r){"use strict";var n=r(2),i=r(4),o=function(t){this.form=t,this.initialize()};Object.assign(o.prototype,{initialize:function(){this.submitBtns=this.form.querySelectorAll("input[type='submit']");var t=[];Array.prototype.forEach.call(this.submitBtns,function(e,r){t.push(e.getAttribute("value"))}),this.submitBtnTitles=t,this.canSubmit=!0,this.globalUploadCount=0,this._bindEvents()},setSubmitButton:function(t,e){Array.prototype.forEach.call(this.submitBtns,function(t,r){t.setAttribute("value",e)})},resetSubmitButton:function(){var t=this.submitBtnTitles;Array.prototype.forEach.call(this.submitBtns,function(e,r){e.setAttribute("value",t[r])})},onUploadStart:function(t){this.globalUploadCount++,n.log("onUploadStart called "+this.globalUploadCount),1===this.globalUploadCount&&this._disableSubmitButton()},onUploadStop:function(t){this.globalUploadCount=this.globalUploadCount<=0?0:this.globalUploadCount-1,n.log("onUploadStop called "+this.globalUploadCount),0===this.globalUploadCount&&this._enableSubmitButton()},onError:function(t){n.log("onError called"),this.canSubmit=!1},_disableSubmitButton:function(t){this.setSubmitButton(null,t||i18n.t("general:wait")),Array.prototype.forEach.call(this.submitBtns,function(t,e){t.setAttribute("disabled","disabled"),t.classList.add("disabled")})},_enableSubmitButton:function(){this.resetSubmitButton(),Array.prototype.forEach.call(this.submitBtns,function(t,e){t.removeAttribute("disabled"),t.classList.remove("disabled")})},_events:{disableSubmitButton:"_disableSubmitButton",enableSubmitButton:"_enableSubmitButton",setSubmitButton:"setSubmitButton",resetSubmitButton:"resetSubmitButton",onError:"onError",onUploadStart:"onUploadStart",onUploadStop:"onUploadStop"},_bindEvents:function(){Object.keys(this._events).forEach(function(t){i.on(t,this[this._events[t]],this)},this)}}),t.exports=o},function(t,e,r){"use strict";var n=r(0),i=r(1),o=r(2),s=r(64),a=r(4);t.exports=function(t,e,r,u){var c=[t.blockID,(new Date).getTime(),"raw"].join("-"),l=new FormData,f=t.attachmentName||i.defaults.attachmentName,h=t.attachmentFile||i.defaults.attachmentFile,p=t.attachmentUid||i.defaults.attachmentUid;l.append(f,e.name),l.append(h,e),l.append(p,c),a.trigger("onUploadStart",l),t.resetMessages();var d=t.uploadUrl||i.defaults.uploadUrl,y=s.fetch(d,{body:l,method:"POST",dataType:"json"});return t.addQueuedItem(c,y),y.then(function(e){o.log("Upload callback called"),a.trigger("onUploadStop",e),!n.isUndefined(r)&&n.isFunction(r)&&r.apply(t,arguments,e),t.removeQueuedItem(c)}).catch(function(e,r,i){o.log("Upload callback error called"),a.trigger("onUploadStop",void 0,i,r,e),!n.isUndefined(u)&&n.isFunction(u)&&u.call(t,r),t.removeQueuedItem(c)}),y}},function(t,e,r){"use strict";r(142);var n=r(143),i=r(144),o=r(1),s=Object.create(null);s.fetch=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=(r=Object.assign({},o.defaults.ajaxOptions,r)).jsonp?n(t).promise:fetch(t,r).then(function(t){return"json"===r.dataType?t.json():t.text()}),i(e)},t.exports=s},function(t,e,r){"use strict";t.exports={Ajaxable:r(33),Controllable:r(145),Droppable:r(146),Fetchable:r(147),Pastable:r(148),Uploadable:r(149),MultiEditable:r(150),Textable:r(221)}},function(t,e){t.exports=function(t,e){return!t!=!e}},function(t,e){var r=/\b(Array|Date|Object|Math|JSON)\b/g;t.exports=function(t,e){var n=function(t){for(var e=[],r=0;r<t.length;r++)~e.indexOf(t[r])||e.push(t[r]);return e}(function(t){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\//g,"").replace(r,"").match(/[a-zA-Z_]\w*/g)||[]}(t));return e&&"string"==typeof e&&(e=function(t){return function(e){return t+e}}(e)),e?function(t,e,r){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\/|[a-zA-Z_]\w*/g,function(t){return"("==t[t.length-1]?r(t):~e.indexOf(t)?r(t):t})}(t,n,e):n}},function(t,e,r){"use strict";var n=r(0),i=r(152),o=r(1),s=r(191),a=r(192),u=r(197),c={p:!0,a:{href:!0,target:"_blank",rel:!0},i:!0,b:!0,strong:!0,em:!0};t.exports={initScribeInstance:function(t,e,r){e=e||{};var l={debug:o.scribeDebug},f=c;n.isObject(e)&&(l=Object.assign(l,e));var h=new i(t,l);return e.hasOwnProperty("tags")&&(f=Object.assign(c,e.tags)),h.use(s()),h.use(a()),h.use(u({tags:f})),n.isFunction(r)&&r.call(this,h),h},execTextBlockCommand:function(t,e){if(n.isUndefined(t))throw"No Scribe instance found to query command";var r=t.getCommand(e);return t.el.focus(),r.execute()},queryTextBlockCommandState:function(t,e){if(n.isUndefined(t))throw"No Scribe instance found to query command";var r=t.getCommand(e);return(new t.api.Selection).range&&r.queryState()}}},function(t,e,r){var n;void 0===(n=function(){"use strict";return{isUndoKeyCombination:function(t){return!t.shiftKey&&(t.metaKey||t.ctrlKey&&!t.altKey)&&90===t.keyCode},isRedoKeyCombination:function(t){return t.shiftKey&&(t.metaKey||t.ctrlKey&&!t.altKey)&&90===t.keyCode}}}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){var n;void 0===(n=function(){"use strict";return{contentChanged:"scribe:content-changed",legacyContentChanged:"content-changed",destroy:"scribe:destroy"}}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n;void 0===(n=function(){return function(t,e){for(var r=-1,n=t.length;++r<n&&!1!==e(t[r],r,t););return t}}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n,i;n=[r(73),r(74)],void 0===(i=function(t,e){return function(r,n){return t(r,n,e)}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(201)],void 0===(i=function(t){return function(e,r,n){for(var i=-1,o=t(e),s=n(e),a=s.length;++i<a;){var u=s[i];if(!1===r(o[u],u,o))break}return e}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(7),r(18),r(14),r(204)],void 0===(i=function(t,e,r,n){var i=e(i=Object.keys)&&i;return i?function(e){if(e)var o=e.constructor,s=e.length;return"function"==typeof o&&o.prototype===e||"function"!=typeof e&&s&&t(s)?n(e):r(e)?i(e):[]}:n}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(18),r(76)],void 0===(i=function(t,e){var r=/\bthis\b/,n=Object.prototype,i=(i=e.window)&&i.document,o=n.propertyIsEnumerable,s={};return function(n){s.funcDecomp=!t(e.WinRTError)&&r.test(function(){return this}),s.funcNames="string"==typeof Function.name;try{s.dom=11===i.createDocumentFragment().nodeType}catch(t){s.dom=!1}try{s.nonEnumArgs=!o.call(arguments,1)}catch(t){s.nonEnumArgs=!0}}(0,0),s}.apply(e,n))||(t.exports=i)},function(t,e,r){(function(t,r){var n;void 0===(n=function(){var n={function:!0,object:!0},i=n[typeof e]&&e&&!e.nodeType&&e,o=n[typeof t]&&t&&!t.nodeType&&t,s=n[typeof window]&&window;return i&&o&&"object"==typeof r&&r||s!==(this&&this.window)&&s||this}.apply(e,[]))||(t.exports=n)}).call(this,r(205)(t),r(16))},function(t,e,r){var n;void 0===(n=function(){return function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n,i;n=[r(7),r(15)],void 0===(i=function(t,e){var r={};r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1;var n=Object.prototype.toString;return function(i){return e(i)&&t(i.length)&&r[n.call(i)]||!1}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n;void 0===(n=function(){return function(t,e,r){r||(r=e,e={});for(var n=-1,i=r.length;++n<i;){var o=r[n];e[o]=t[o]}return e}}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n,i;n=[r(212)],void 0===(i=function(t){return function(e,r,n){if("function"!=typeof e)return t;if(void 0===r)return e;switch(n){case 1:return function(t){return e.call(r,t)};case 3:return function(t,n,i){return e.call(r,t,n,i)};case 4:return function(t,n,i,o){return e.call(r,t,n,i,o)};case 5:return function(t,n,i,o,s){return e.call(r,t,n,i,o,s)}}return function(){return e.apply(r,arguments)}}}.apply(e,n))||(t.exports=i)},function(t,e,r){"use strict";var n=function(t,e){this.mediator=e,this.block=t,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(n.prototype,r(6),r(11),{bound:["toggle","show","hide"],className:"st-block-positioner",visibleClass:"active",initialize:function(){},toggle:function(){this.mediator.trigger("block-positioner-select:render",this),this.el.classList.toggle(this.visibleClass)},show:function(){this.el.classList.add(this.visibleClass)},hide:function(){this.el.classList.remove(this.visibleClass)}}),t.exports=n},function(t,e,r){"use strict";var n=r(3),i=["<span class='st-block-positioner__selected-value'></span>","<select class='st-block-positioner__select'></select>"].join("\n"),o=function(t){this.mediator=t,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(o.prototype,r(6),r(11),{total_blocks:0,bound:["onBlockCountChange","onSelectChange"],className:"st-block-positioner__inner",initialize:function(){this.el.insertAdjacentHTML("beforeend",i),this.select=this.el.querySelector(".st-block-positioner__select"),this.positioner=null,this.select.addEventListener("change",this.onSelectChange)},onBlockCountChange:function(t){t!==this.total_blocks&&(this.total_blocks=t,this.renderPositionList())},onSelectChange:function(){var t=this.select.value;0!==t&&(this.mediator.trigger("block:changePosition",this.positioner.block,t,1===t?"before":"after"),this.positioner.toggle())},renderPositionList:function(){for(var t="<option value='0'>"+i18n.t("general:position")+"</option>",e=1;e<=this.total_blocks;e++)t+="<option value="+e+">"+e+"</option>";this.select.innerHTML=t},renderInBlock:function(t){this.positioner&&this.positioner!==t&&this.positioner.hide(),this.positioner=t,this.select.value=0,n.remove(this.el),t.el.appendChild(this.el)}}),t.exports=o},function(t,e,r){"use strict";var n=r(1),i=function(){this._ensureElement(),this._bindFunctions()};Object.assign(i.prototype,r(6),r(11),{tagName:"a",className:"st-block-ui-btn__delete",attributes:{html:function(){return'<svg role="img" class="st-icon">\n                   <use xlink:href="'.concat(n.defaults.iconUrl,'#cross"/>\n                 </svg>')},"data-icon":"close"}}),t.exports=i},function(t,e,r){"use strict";var n=r(0),i=r(2),o=function(t){var e=t.getAttribute("data-st-name")||t.getAttribute("name");return e||(e="Field"),i.capitalize(e)};t.exports={errors:[],valid:function(){return this.performValidations(),0===this.errors.length},performValidations:function(){this.resetErrors();var t=this.$(".st-required");Array.prototype.forEach.call(t,function(t,e){this.validateField(t)}.bind(this)),this.validations.forEach(this.runValidator,this),this.el.classList.toggle("st-block--with-errors",this.errors.length>0)},validations:[],validateField:function(t){0===(t.getAttribute("contenteditable")?t.textContent:t.value).length&&this.setError(t,i18n.t("errors:block_empty",{name:o(t)}))},runValidator:function(t){n.isUndefined(this[t])||this[t].call(this)},setError:function(t,e){var r=this.addMessage(e,"st-msg--error");t.classList.add("st-error"),this.errors.push({field:t,reason:e,msg:r})},resetErrors:function(){this.errors.forEach(function(t){t.field.classList.remove("st-error"),t.msg.remove()}),this.messages.classList.remove("st-block__messages--is-visible"),this.errors=[]}}},function(t,e,r){"use strict";var n=r(0),i=r(2),o=r(4);t.exports={blockStorage:{},createStore:function(t){this.blockStorage={type:i.underscored(this.type),data:t||{}}},save:function(){var t=this._serializeData();n.isEmpty(t)||this.setData(t)},getData:function(){return this.save(),this.blockStorage},getBlockData:function(){return this.save(),this.blockStorage.data},_getData:function(){return this.blockStorage.data},setData:function(t){i.log("Setting data for block "+this.blockID),Object.assign(this.blockStorage.data,t||{})},setAndLoadData:function(t){this.setData(t),this.beforeLoadingData()},_serializeData:function(){},loadData:function(){},beforeLoadingData:function(){i.log("loadData for "+this.blockID),o.trigger("editor/block/loadData"),this.loadData(this._getData())},_loadData:function(){i.log("_loadData is deprecated and will be removed in the future. Please use beforeLoadingData instead."),this.beforeLoadingData()},checkAndLoadData:function(){n.isEmpty(this._getData())||this.beforeLoadingData()}}},function(t,e,r){"use strict";var n=r(13),i=r(0),o=r(2),s=r(1),a=r(4),u=r(20),c=r(3),l=["convertToMarkdown","convertFromMarkdown","formatBar"],f=function(t){this.options=t.options,this.blockOptions=l.reduce(function(e,r){return e[r]=t.options[r],e},{}),this.instance_scope=t.ID,this.mediator=t.mediator,this.wrapper=t.wrapper,this.blocks=[],this.blockCounts={},this.blockTypes=[],this._setBlocksTypes(),this._setRequired(),this._bindMediatedEvents(),this.initialize()};Object.assign(f.prototype,r(6),r(29),r(9),{eventNamespace:"block",mediatedEvents:{create:"createBlock",createBefore:"createBlockBefore",remove:"removeBlock",rerender:"rerenderBlock",replace:"replaceBlock",focusPrevious:"focusPreviousBlock",focusNext:"focusNextBlock"},initialize:function(){},createBlock:function(t,e,r,n){if(t=o.classify(t),this.canCreateBlock(t)){var i=new u[t](e,this.instance_scope,this.mediator,this.blockOptions,this.options);this.blocks.push(i),this._incrementBlockTypeCount(t),this.renderBlock(i,r),n&&n.autoFocus&&i.focus(),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),this.mediator.trigger("block:created",i),a.trigger(e?"block:create:existing":"block:create:new",i),o.log("Block created of type "+t)}},createBlockBefore:function(t,e,r,n){if(t=o.classify(t),this.canCreateBlock(t)){var i=new u[t](e,this.instance_scope,this.mediator,this.blockOptions,this.options);this.blocks.push(i),this._incrementBlockTypeCount(t);var s=this.getPreviousBlock(r);s?this.renderBlock(i,s.el):this.renderBlock(i,this.wrapper.querySelector(".st-top-controls")),n&&n.autoFocus&&i.focus(),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),this.mediator.trigger("block:created",i),a.trigger(e?"block:create:existing":"block:create:new",i),o.log("Block created of type "+t)}},removeBlock:function(t,e){e=Object.assign({transposeContent:!1,focusOnPrevious:!1,focusOnNext:!1},e);var r=this.findBlockById(t),i=o.classify(r.type),s=this.getPreviousBlock(r),u=this.getNextBlock(r);if(e.transposeContent&&r.mergeable){if(!s&&1===this.blocks.length)return;if(s&&"list"===s.type)s.focusAtEnd(),s.appendToCurrentItem(r.getScribeInnerContent());else if(s&&s.mergeable)s.appendContent(r.getScribeInnerContent(),{keepCaretPosition:!0});else{if(""!==r.getScribeInnerContent())return;s?s.focusAtEnd():u&&u.focus()}}if(this.mediator.trigger("block-controls:reset"),this.blocks=this.blocks.filter(function(t){return t.blockID!==r.blockID}),r.remove(),s&&u&&this.options.joinListBlocksOnBlockRemove&&"list"===s.type&&"list"===u.type){var c=u._serializeData().listItems;u.remove();var l=s.getCurrentTextEditor(),f=n(l.scribe.el);c.forEach(function(t){s.addListItem(t.content)}),s.focusOn(l,{caretPosition:f.start})}e.focusOnPrevious&&s&&s.focusAtEnd(),e.focusOnNext&&u&&u.focus(),this._decrementBlockTypeCount(i),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),a.trigger("block:remove",t)},replaceBlock:function(t,e,r){var n=this.findBlockById(t.id);this.createBlock(e,r||null,t),this.removeBlock(t.id),n.remove()},renderBlock:function(t,e){var r=this,n=t.render().el;e?c.insertAfter(n,e):this.wrapper.appendChild(n),t.trigger("onRender"),this.options.selectionMouse&&(n.addEventListener("mouseenter",function(){if(window.mouseDown){var e=r.getBlockPosition(t.el);r.mediator.trigger("selection:update",e)}}),n.addEventListener("mousedown",function(){var e=r.getBlockPosition(t.el);r.mediator.trigger("selection:start",e)}))},rerenderBlock:function(t){var e=this.findBlockById(t);i.isUndefined(e)||e.isEmpty()||!e.drop_options.re_render_on_reorder||e.beforeLoadingData()},getPreviousBlock:function(t){var e=this.getBlockPosition(t.el);if(!(e<1)){var r=this.wrapper.querySelectorAll(".st-block")[e-1];return this.findBlockById(r.getAttribute("id"))}},getNextBlock:function(t){var e=this.getBlockPosition(t.el);if(!(e<0||e>=this.blocks.length-1))return this.findBlockById(this.wrapper.querySelectorAll(".st-block")[e+1].getAttribute("id"))},getBlockPosition:function(t){return Array.prototype.indexOf.call(this.wrapper.querySelectorAll(".st-block"),t)},focusPreviousBlock:function(t){var e=this.findBlockById(t);if(e.mergeable){var r=this.getPreviousBlock(e);r&&r.mergeable&&r.focusAtEnd()}},focusNextBlock:function(t){var e=this.findBlockById(t);if(e&&e.mergeable){var r=this.getNextBlock(e);r&&r.mergeable&&r.focus()}},triggerBlockCountUpdate:function(){this.mediator.trigger("block:countUpdate",this.blocks.length)},canCreateBlock:function(t){return this.blockLimitReached()?(o.log("Cannot add any more blocks. Limit reached."),!1):this.isBlockTypeAvailable(t)?!!this.canAddBlockType(t)||(o.log("Block Limit reached for type "+t),!1):(o.log("Block type not available "+t),!1)},validateBlockTypesExist:function(t){if(s.skipValidation||!t)return!1;(this.required||[]).forEach(function(t,e){if(this.isBlockTypeAvailable(t))if(0===this._getBlockTypeCount(t))o.log("Failed validation on required block type "+t),this.mediator.trigger("errors:add",{text:i18n.t("errors:type_missing",{type:t})});else{if(this.getBlocksByType(t).filter(function(t){return!t.isEmpty()}).length>0)return!1;this.mediator.trigger("errors:add",{text:i18n.t("errors:required_type_empty",{type:t})}),o.log("A required block type "+t+" is empty")}},this)},findBlockById:function(t){return this.blocks.find(function(e){return e.blockID===t})},getBlocksByType:function(t){return this.blocks.filter(function(e){return o.classify(e.type)===t})},getBlocksByIDs:function(t){return this.blocks.filter(function(e){return t.includes(e.blockID)})},blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},isBlockTypeAvailable:function(t){return this.blockTypes.includes(t)},canAddBlockType:function(t){var e=this._getBlockTypeLimit(t);return!(0!==e&&this._getBlockTypeCount(t)>=e)},_setBlocksTypes:function(){this.blockTypes=this.options.blockTypes||Object.keys(u)},_setRequired:function(){this.required=!1,Array.isArray(this.options.required)&&!i.isEmpty(this.options.required)&&(this.required=this.options.required)},_incrementBlockTypeCount:function(t){this.blockCounts[t]=i.isUndefined(this.blockCounts[t])?1:this.blockCounts[t]+1},_decrementBlockTypeCount:function(t){this.blockCounts[t]=i.isUndefined(this.blockCounts[t])?1:this.blockCounts[t]-1},_getBlockTypeCount:function(t){return i.isUndefined(this.blockCounts[t])?0:this.blockCounts[t]},_blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},_getBlockTypeLimit:function(t){return this.isBlockTypeAvailable(t)?parseInt(i.isUndefined(this.options.blockTypeLimits[t])?0:this.options.blockTypeLimits[t],10):0}}),t.exports=f},function(t,e,r){"use strict";var n=r(0),i=r(2),o=r(3),s=r(10),a=r(38),u=r(223),c=function(t,e,r,i,o){this.createStore(t),this.blockID=n.uniqueId("st-block-"),this.instanceID=e,this.mediator=r,this.options=i||{},this.editorOptions=o||{},this._ensureElement(),this._bindFunctions(),this.initialize.apply(this,arguments)};Object.assign(c.prototype,r(6),r(9),r(11),r(85),{focus:function(){},valid:function(){return!0},className:"st-block",block_template:u,attributes:function(){return{id:this.blockID,"data-type":this.type,"data-instance":this.instanceID}},title:function(){return i18n.t("blocks:".concat(this.type,":title"))||i.titleize(this.type.replace(/[\W_]/g," "))},blockCSSClass:function(){return this.blockCSSClass=i.toSlug(this.type),this.blockCSSClass},type:"",class:function(){return i.classify(this.type)},editorHTML:"",initialize:function(){},onBlockRender:function(){},beforeBlockRender:function(){},_setBlockInner:function(){var t=n.result(this,"editorHTML");this.el.insertAdjacentHTML("beforeend",this.block_template(t)),this.inner=this.el.querySelector(".st-block__inner")},render:function(){return this.beforeBlockRender(),this._setBlockInner(),this._blockPrepare(),this},_blockPrepare:function(){this._initUI(),this._initMessages(),this.checkAndLoadData(),this.el.classList.add("st-item-ready"),this.on("onRender",this.onBlockRender),this.save()},_withUIComponent:function(t,e,r){this.ui.appendChild(t.render().el),e&&r&&s.delegate(this.ui,e,"click",r)},_initUI:function(){var t=o.createElement("div",{class:"st-block__ui"});this.el.appendChild(t),this.ui=t,this._initUIComponents()},_initMessages:function(){var t=o.createElement("div",{class:"st-block__messages"});this.inner.insertBefore(t,this.inner.firstChild),this.messages=t},addMessage:function(t,e){return t=o.createElement("span",{html:t,class:"st-msg "+e}),this.messages.appendChild(t),this.messages.classList.add("st-block__messages--is-visible"),t},resetMessages:function(){this.messages.innerHTML="",this.messages.classList.remove("st-block__messages--is-visible")},_initUIComponents:function(){this._withUIComponent(new a(this.el))}}),c.fn=c.prototype,c.extend=r(89),t.exports=c},function(t,e,r){"use strict";var n=r(1);t.exports=function(){return'\n    <button class="st-block-addition" type="button">\n      <span class="st-block-addition__button">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'.concat(n.defaults.iconUrl,'#plus"/>\n        </svg>\n      </span>\n    </button>\n  ')}},function(t,e,r){"use strict";t.exports=function(t,e){var r,n=this;r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return n.apply(this,arguments)},Object.assign(r,n,e);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,t&&Object.assign(r.prototype,t),r.__super__=n.prototype,r}},function(t,e,r){"use strict";var n=r(39),i=n.isAtStart,o=n.isAtEnd,s=n.selectToEnd;t.exports=function(t){return function(e){var r=!1;e.el.addEventListener("keydown",function(n){t.supressKeyListeners||(13!==n.keyCode||n.shiftKey?37!==n.keyCode&&38!==n.keyCode||!i(e)?8===n.keyCode&&i(e)?(n.preventDefault(),r=!0):39!==n.keyCode&&40!==n.keyCode||!o(e)||(n.preventDefault(),t.mediator.trigger("block:focusNext",t.blockID)):(n.preventDefault(),t.mediator.trigger("block:focusPrevious",t.blockID)):(n.preventDefault(),o(e)?(s(e).extractContents(),t.mediator.trigger("block:create","Text",null,t.el,{autoFocus:!0})):function(){var r,n=document.createElement("div");if(n.appendChild(s(e).extractContents()),function(t){if(null!==t.firstChild){var e=t.firstChild.childNodes[0];e&&"#text"!==e.nodeName&&""===e.innerText&&t.firstChild.removeChild(e)}}(n),!e.allowsBlockElements()){var i=document.createElement("div");i.appendChild(n),n=i}n.childNodes.length>=1&&[].slice.call(n.childNodes).reverse().forEach(function(e){""!==e.innerText&&(r={format:"html",text:e.innerHTML.trim()},t.mediator.trigger("block:create","Text",r,t.el,{autoFocus:!0}))})}(),e.allowsBlockElements()&&""===e.getTextContent()&&e.setContent("<p><br></p>")))}),e.el.addEventListener("keyup",function(e){t.supressKeyListeners||8===e.keyCode&&r&&(e.preventDefault(),t.mediator.trigger("block:remove",t.blockID,{transposeContent:!0}),r=!1)})}}},function(t,e,r){"use strict";var n=r(0),i=r(1),o=r(3),s=r(10),a=r(236),u=function(t,e,r){this.editor=r,this.options=Object.assign({},i.defaults.formatBar,t||{}),this.commands=this.options.commands,this.mediator=e,this.isShown=!1,this._ensureElement(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize.apply(this,arguments)};Object.assign(u.prototype,r(6),r(29),r(9),r(11),{className:"st-format-bar",bound:["onFormatButtonClick","renderBySelection","hide"],eventNamespace:"formatter",mediatedEvents:{position:"renderBySelection",show:"show",hide:"hide"},initialize:function(){var t=this.commands.reduce(function(t,e){return t+a(e)},"");this.el.insertAdjacentHTML("beforeend",t),s.delegate(this.el,".st-format-btn","mousedown",this.onFormatButtonClick)},hide:function(){this.block=void 0,this.isShown=!1,this.el.classList.remove("st-format-bar--is-ready"),o.remove(this.el)},show:function(){this.isShown||(this.isShown=!0,this.editor.outer.appendChild(this.el),this.el.classList.add("st-format-bar--is-ready"))},remove:function(){o.remove(this.el)},renderBySelection:function(t){this.block=t,this.highlightSelectedButtons(),this.show(),this.calculatePosition()},calculatePosition:function(){var t=window.getSelection().getRangeAt(0).getBoundingClientRect(),e={},r=this.editor.outer.getBoundingClientRect();e.top=t.top-r.top+"px",e.left=(t.left+t.right)/2-this.el.offsetWidth/2-r.left+"px",this.el.style.top=e.top,this.el.style.left=e.left},highlightSelectedButtons:function(){var t=this;[].forEach.call(this.el.querySelectorAll(".st-format-btn"),function(e){var r=e.getAttribute("data-cmd");e.classList.toggle("st-format-btn--is-active",t.block.queryTextBlockCommandState(r)),e=null})},onFormatButtonClick:function(t){if(t.preventDefault(),t.stopPropagation(),n.isUndefined(this.block))throw"Associated block not found";var e=t.currentTarget.getAttribute("data-cmd");return!n.isUndefined(e)&&(this.block.execTextBlockCommand(e),this.highlightSelectedButtons(),document.activeElement.focus(),!1)}}),t.exports=u},function(t,e,r){"use strict";var n=r(1),i=r(2),o=r(4),s=r(62),a=!1,u={bindFormSubmit:function(t){a||(new s(t),t.addEventListener("submit",this.onFormSubmit),a=!0)},onBeforeSubmit:function(t){var e=0;return n.instances.forEach(function(r,n){e+=r.onFormSubmit(t)}),i.log("Total errors: "+e),e},onFormSubmit:function(t){u.onBeforeSubmit()>0&&(o.trigger("onError"),t.preventDefault())}};t.exports=u},function(t,e,r){t.exports=r(94),r(246)},function(t,e,r){"use strict";r(95),r(96).shim(),r(101).shim(),r(114),r(115).polyfill(),r(116),r(117),r(118);var n=r(2),i={config:r(1),log:n.log,Locales:r(140),Events:r(9),EventBus:r(4),EditorStore:r(61),Submittable:r(62),FileUploader:r(63),BlockMixins:r(65),BlockPositioner:r(81),BlockPositionerSelect:r(82),BlockReorder:r(38),BlockDeletion:r(83),BlockValidations:r(84),BlockStore:r(85),BlockManager:r(86),SimpleBlock:r(87),Block:r(8),Blocks:r(20),FormatBar:r(91),Editor:r(237),toMarkdown:r(245),toHTML:r(21),setDefaults:function(t){Object.assign(i.config.defaults,t||{})},getInstance:n.getInstance,setBlockOptions:function(t,e){var r=i.Blocks[t];void 0!==r&&Object.assign(r.prototype,e||{})},runOnAllInstances:function(t){if(i.Editor.prototype.hasOwnProperty(t)){var e=Array.prototype.slice.call(arguments,1);Array.prototype.forEach.call(i.config.instances,function(r){r[t].apply(null,e)})}else i.log("method doesn't exist")}};Object.assign(i,r(92)),t.exports=i},function(t,e,r){t.exports=r.p+"2fb4dafac0f79d49859b0abebd2eec59.svg"},function(t,e,r){"use strict";var n=r(22),i=r(43),o=r(45),s=r(100),a=o();n(a,{getPolyfill:o,implementation:i,shim:s}),t.exports=a},function(t,e,r){"use strict";var n=Object.prototype.toString;t.exports=function(t){var e=n.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===n.call(t.callee)),r}},function(t,e){var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function(t,e,i){if("[object Function]"!==n.call(e))throw new TypeError("iterator must be a function");var o=t.length;if(o===+o)for(var s=0;s<o;s++)e.call(i,t[s],s,t);else for(var a in t)r.call(t,a)&&e.call(i,t[a],a,t)}},function(t,e,r){"use strict";var n=Array.prototype.slice,i=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==i.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var r,o=n.call(arguments,1),s=Math.max(0,e.length-o.length),a=[],u=0;u<s;u++)a.push("$"+u);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof r){var i=e.apply(this,o.concat(n.call(arguments)));return Object(i)===i?i:this}return e.apply(t,o.concat(n.call(arguments)))}),e.prototype){var c=function(){};c.prototype=e.prototype,r.prototype=new c,c.prototype=null}return r}},function(t,e,r){"use strict";var n=r(22),i=r(45);t.exports=function(){var t=i();return n(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t}},function(t,e,r){"use strict";var n=r(22),i=r(46),o=r(53),s=r(54),a=r(113),u=Array.prototype.slice,c=s(),l=function(t,e){i.RequireObjectCoercible(t);var r=u.call(arguments,1);return c.apply(t,r)};n(l,{getPolyfill:s,implementation:o,shim:a}),t.exports=l},function(t,e,r){"use strict";var n=r(30),i=r(103),o=r(48),s=o("%TypeError%"),a=o("%SyntaxError%"),u=o("%Array%"),c=o("%String%"),l=o("%Object%"),f=o("%Number%"),h=o("%Symbol%",!0),p=o("%RegExp%"),d=!!h,y=r(49),v=r(50),g=f.MAX_SAFE_INTEGER||Math.pow(2,53)-1,m=r(108),b=r(51),_=r(52),w=r(109),x=parseInt,S=r(23),E=S.call(Function.call,u.prototype.slice),k=S.call(Function.call,c.prototype.slice),T=S.call(Function.call,p.prototype.test,/^0b[01]+$/i),C=S.call(Function.call,p.prototype.test,/^0o[0-7]+$/i),O=S.call(Function.call,p.prototype.exec),A=new p("["+["","",""].join("")+"]","g"),j=S.call(Function.call,p.prototype.test,A),B=S.call(Function.call,p.prototype.test,/^[-+]0x[0-9a-f]+$/i),D=S.call(Function.call,c.prototype.charCodeAt),M=S.call(Function.call,Object.prototype.toString),P=Math.floor,I=Math.abs,L=Object.create,U=l.getOwnPropertyDescriptor,N=l.isExtensible,z=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),F=new RegExp("(^["+z+"]+)|(["+z+"]+$)","g"),q=S.call(Function.call,c.prototype.replace),R=r(110),$=r(112),H=m(m({},R),{Call:function(t,e){var r=arguments.length>2?arguments[2]:[];if(!this.IsCallable(t))throw new s(t+" is not a function");return t.apply(e,r)},ToPrimitive:i,ToNumber:function(t){var e=w(t)?t:i(t,f);if("symbol"==typeof e)throw new s("Cannot convert a Symbol value to a number");if("string"==typeof e){if(T(e))return this.ToNumber(x(k(e,2),2));if(C(e))return this.ToNumber(x(k(e,2),8));if(j(e)||B(e))return NaN;var r=function(t){return q(t,F,"")}(e);if(r!==e)return this.ToNumber(r)}return f(e)},ToInt16:function(t){var e=this.ToUint16(t);return e>=32768?e-65536:e},ToInt8:function(t){var e=this.ToUint8(t);return e>=128?e-256:e},ToUint8:function(t){var e=this.ToNumber(t);if(y(e)||0===e||!v(e))return 0;var r=b(e)*P(I(e));return _(r,256)},ToUint8Clamp:function(t){var e=this.ToNumber(t);if(y(e)||e<=0)return 0;if(e>=255)return 255;var r=P(t);return r+.5<e?r+1:e<r+.5?r:r%2!=0?r+1:r},ToString:function(t){if("symbol"==typeof t)throw new s("Cannot convert a Symbol value to a string");return c(t)},ToObject:function(t){return this.RequireObjectCoercible(t),l(t)},ToPropertyKey:function(t){var e=this.ToPrimitive(t,c);return"symbol"==typeof e?e:this.ToString(e)},ToLength:function(t){var e=this.ToInteger(t);return e<=0?0:e>g?g:e},CanonicalNumericIndexString:function(t){if("[object String]"!==M(t))throw new s("must be a string");if("-0"===t)return-0;var e=this.ToNumber(t);return this.SameValue(this.ToString(e),t)?e:void 0},RequireObjectCoercible:R.CheckObjectCoercible,IsArray:u.isArray||function(t){return"[object Array]"===M(t)},IsConstructor:function(t){return"function"==typeof t&&!!t.prototype},IsExtensible:Object.preventExtensions?function(t){return!w(t)&&N(t)}:function(t){return!0},IsInteger:function(t){if("number"!=typeof t||y(t)||!v(t))return!1;var e=I(t);return P(e)===e},IsPropertyKey:function(t){return"string"==typeof t||"symbol"==typeof t},IsRegExp:function(t){if(!t||"object"!=typeof t)return!1;if(d){var e=t[h.match];if(void 0!==e)return R.ToBoolean(e)}return $(t)},SameValueZero:function(t,e){return t===e||y(t)&&y(e)},GetV:function(t,e){if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");return this.ToObject(t)[e]},GetMethod:function(t,e){if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");var r=this.GetV(t,e);if(null!=r){if(!this.IsCallable(r))throw new s(e+"is not a function");return r}},Get:function(t,e){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");return t[e]},Type:function(t){return"symbol"==typeof t?"Symbol":R.Type(t)},SpeciesConstructor:function(t,e){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");var r=t.constructor;if(void 0===r)return e;if("Object"!==this.Type(r))throw new s("O.constructor is not an Object");var n=d&&h.species?r[h.species]:void 0;if(null==n)return e;if(this.IsConstructor(n))return n;throw new s("no constructor found")},CompletePropertyDescriptor:function(t){if(!this.IsPropertyDescriptor(t))throw new s("Desc must be a Property Descriptor");return this.IsGenericDescriptor(t)||this.IsDataDescriptor(t)?(n(t,"[[Value]]")||(t["[[Value]]"]=void 0),n(t,"[[Writable]]")||(t["[[Writable]]"]=!1)):(n(t,"[[Get]]")||(t["[[Get]]"]=void 0),n(t,"[[Set]]")||(t["[[Set]]"]=void 0)),n(t,"[[Enumerable]]")||(t["[[Enumerable]]"]=!1),n(t,"[[Configurable]]")||(t["[[Configurable]]"]=!1),t},Set:function(t,e,r,n){if("Object"!==this.Type(t))throw new s("O must be an Object");if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");if("Boolean"!==this.Type(n))throw new s("Throw must be a Boolean");if(n)return t[e]=r,!0;try{t[e]=r}catch(t){return!1}},HasOwnProperty:function(t,e){if("Object"!==this.Type(t))throw new s("O must be an Object");if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");return n(t,e)},HasProperty:function(t,e){if("Object"!==this.Type(t))throw new s("O must be an Object");if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");return e in t},IsConcatSpreadable:function(t){if("Object"!==this.Type(t))return!1;if(d&&"symbol"==typeof h.isConcatSpreadable){var e=this.Get(t,Symbol.isConcatSpreadable);if(void 0!==e)return this.ToBoolean(e)}return this.IsArray(t)},Invoke:function(t,e){if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");var r=E(arguments,2),n=this.GetV(t,e);return this.Call(n,t,r)},GetIterator:function(t,e){if(!d)throw new SyntaxError("ES.GetIterator depends on native iterator support.");var r=e;arguments.length<2&&(r=this.GetMethod(t,h.iterator));var n=this.Call(r,t);if("Object"!==this.Type(n))throw new s("iterator must return an object");return n},IteratorNext:function(t,e){var r=this.Invoke(t,"next",arguments.length<2?[]:[e]);if("Object"!==this.Type(r))throw new s("iterator next must return an object");return r},IteratorComplete:function(t){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(iterResult) is not Object");return this.ToBoolean(this.Get(t,"done"))},IteratorValue:function(t){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(iterResult) is not Object");return this.Get(t,"value")},IteratorStep:function(t){var e=this.IteratorNext(t);return!0!==this.IteratorComplete(e)&&e},IteratorClose:function(t,e){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(iterator) is not Object");if(!this.IsCallable(e))throw new s("Assertion failed: completion is not a thunk for a Completion Record");var r,n=e,i=this.GetMethod(t,"return");if(void 0===i)return n();try{var o=this.Call(i,t,[])}catch(t){throw r=n(),n=null,t}if(r=n(),n=null,"Object"!==this.Type(o))throw new s("iterator .return must return an object");return r},CreateIterResultObject:function(t,e){if("Boolean"!==this.Type(e))throw new s("Assertion failed: Type(done) is not Boolean");return{value:t,done:e}},RegExpExec:function(t,e){if("Object"!==this.Type(t))throw new s("R must be an Object");if("String"!==this.Type(e))throw new s("S must be a String");var r=this.Get(t,"exec");if(this.IsCallable(r)){var n=this.Call(r,t,[e]);if(null===n||"Object"===this.Type(n))return n;throw new s('"exec" method must return `null` or an Object')}return O(t,e)},ArraySpeciesCreate:function(t,e){if(!this.IsInteger(e)||e<0)throw new s("Assertion failed: length must be an integer >= 0");var r,n=0===e?0:e;if(this.IsArray(t)&&(r=this.Get(t,"constructor"),"Object"===this.Type(r)&&d&&h.species&&null===(r=this.Get(r,h.species))&&(r=void 0)),void 0===r)return u(n);if(!this.IsConstructor(r))throw new s("C must be a constructor");return new r(n)},CreateDataProperty:function(t,e,r){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");var n=U(t,e),i=n||"function"!=typeof N||N(t);if(n&&(!n.writable||!n.configurable)||!i)return!1;var o={configurable:!0,enumerable:!0,value:r,writable:!0};return Object.defineProperty(t,e,o),!0},CreateDataPropertyOrThrow:function(t,e,r){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");var n=this.CreateDataProperty(t,e,r);if(!n)throw new s("unable to create data property");return n},ObjectCreate:function(t,e){if(null!==t&&"Object"!==this.Type(t))throw new s("Assertion failed: proto must be null or an object");if((arguments.length<2?[]:e).length>0)throw new a("es-abstract does not yet support internal slots");if(null===t&&!L)throw new a("native Object.create support is required to create null objects");return L(t)},AdvanceStringIndex:function(t,e,r){if("String"!==this.Type(t))throw new s("S must be a String");if(!this.IsInteger(e)||e<0||e>g)throw new s("Assertion failed: length must be an integer >= 0 and <= 2**53");if("Boolean"!==this.Type(r))throw new s("Assertion failed: unicode must be a Boolean");if(!r)return e+1;if(e+1>=t.length)return e+1;var n=D(t,e);if(n<55296||n>56319)return e+1;var i=D(t,e+1);return i<56320||i>57343?e+1:e+2}});delete H.CheckObjectCoercible,t.exports=H},function(t,e,r){"use strict";t.exports=r(104)},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,i=r(47),o=r(31),s=r(105),a=r(106);t.exports=function(t){if(i(t))return t;var e,r="default";if(arguments.length>1&&(arguments[1]===String?r="string":arguments[1]===Number&&(r="number")),n&&(Symbol.toPrimitive?e=function(t,e){var r=t[e];if(null!=r){if(!o(r))throw new TypeError(r+" returned for property "+e+" of object "+t+" is not a function");return r}}(t,Symbol.toPrimitive):a(t)&&(e=Symbol.prototype.valueOf)),void 0!==e){var u=e.call(t,r);if(i(u))return u;throw new TypeError("unable to convert exotic object to primitive")}return"default"===r&&(s(t)||a(t))&&(r="string"),function(t,e){if(null==t)throw new TypeError("Cannot call method on "+t);if("string"!=typeof e||"number"!==e&&"string"!==e)throw new TypeError('hint must be "string" or "number"');var r,n,s,a="string"===e?["toString","valueOf"]:["valueOf","toString"];for(s=0;s<a.length;++s)if(r=t[a[s]],o(r)&&(n=r.call(t),i(n)))return n;throw new TypeError("No default value")}(t,"default"===r?"number":r)}},function(t,e,r){"use strict";var n=Date.prototype.getDay,i=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(o?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object Date]"===i.call(t))}},function(t,e,r){"use strict";var n=Object.prototype.toString;if(r(107)()){var i=Symbol.prototype.toString,o=/^Symbol\(.*\)$/;t.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==n.call(t))return!1;try{return function(t){return"symbol"==typeof t.valueOf()&&o.test(i.call(t))}(t)}catch(t){return!1}}}else t.exports=function(t){return!1}},function(t,e,r){"use strict";(function(e){var n=e.Symbol,i=r(44);t.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&i())))}}).call(this,r(16))},function(t,e,r){var n=r(23).call(Function.call,Object.prototype.hasOwnProperty),i=Object.assign;t.exports=function(t,e){if(i)return i(t,e);for(var r in e)n(e,r)&&(t[r]=e[r]);return t}},function(t,e){t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,r){"use strict";var n=r(48),i=n("%Object%"),o=n("%TypeError%"),s=n("%String%"),a=r(49),u=r(50),c=r(51),l=r(52),f=r(31),h=r(111),p=r(30),d={ToPrimitive:h,ToBoolean:function(t){return!!t},ToNumber:function(t){return+t},ToInteger:function(t){var e=this.ToNumber(t);return a(e)?0:0!==e&&u(e)?c(e)*Math.floor(Math.abs(e)):e},ToInt32:function(t){return this.ToNumber(t)>>0},ToUint32:function(t){return this.ToNumber(t)>>>0},ToUint16:function(t){var e=this.ToNumber(t);if(a(e)||0===e||!u(e))return 0;var r=c(e)*Math.floor(Math.abs(e));return l(r,65536)},ToString:function(t){return s(t)},ToObject:function(t){return this.CheckObjectCoercible(t),i(t)},CheckObjectCoercible:function(t,e){if(null==t)throw new o(e||"Cannot call method on "+t);return t},IsCallable:f,SameValue:function(t,e){return t===e?0!==t||1/t==1/e:a(t)&&a(e)},Type:function(t){return null===t?"Null":void 0===t?"Undefined":"function"==typeof t||"object"==typeof t?"Object":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"string"==typeof t?"String":void 0},IsPropertyDescriptor:function(t){if("Object"!==this.Type(t))return!1;var e={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in t)if(p(t,r)&&!e[r])return!1;var n=p(t,"[[Value]]"),i=p(t,"[[Get]]")||p(t,"[[Set]]");if(n&&i)throw new o("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");return!(!p(t,"[[Get]]")&&!p(t,"[[Set]]"))},IsDataDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");return!(!p(t,"[[Value]]")&&!p(t,"[[Writable]]"))},IsGenericDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");return!this.IsAccessorDescriptor(t)&&!this.IsDataDescriptor(t)},FromPropertyDescriptor:function(t){if(void 0===t)return t;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");if(this.IsDataDescriptor(t))return{value:t["[[Value]]"],writable:!!t["[[Writable]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};if(this.IsAccessorDescriptor(t))return{get:t["[[Get]]"],set:t["[[Set]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};throw new o("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(t){if("Object"!==this.Type(t))throw new o("ToPropertyDescriptor requires an object");var e={};if(p(t,"enumerable")&&(e["[[Enumerable]]"]=this.ToBoolean(t.enumerable)),p(t,"configurable")&&(e["[[Configurable]]"]=this.ToBoolean(t.configurable)),p(t,"value")&&(e["[[Value]]"]=t.value),p(t,"writable")&&(e["[[Writable]]"]=this.ToBoolean(t.writable)),p(t,"get")){var r=t.get;if(void 0!==r&&!this.IsCallable(r))throw new TypeError("getter must be a function");e["[[Get]]"]=r}if(p(t,"set")){var n=t.set;if(void 0!==n&&!this.IsCallable(n))throw new o("setter must be a function");e["[[Set]]"]=n}if((p(e,"[[Get]]")||p(e,"[[Set]]"))&&(p(e,"[[Value]]")||p(e,"[[Writable]]")))throw new o("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return e}};t.exports=d},function(t,e,r){"use strict";var n=Object.prototype.toString,i=r(47),o=r(31),s=function(t){var e;if((e=arguments.length>1?arguments[1]:"[object Date]"===n.call(t)?String:Number)===String||e===Number){var r,s,a=e===String?["toString","valueOf"]:["valueOf","toString"];for(s=0;s<a.length;++s)if(o(t[a[s]])&&(r=t[a[s]](),i(r)))return r;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};t.exports=function(t){return i(t)?t:arguments.length>1?s(t,arguments[1]):s(t)}},function(t,e,r){"use strict";var n=r(30),i=RegExp.prototype.exec,o=Object.getOwnPropertyDescriptor,s=Object.prototype.toString,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!a)return"[object RegExp]"===s.call(t);var e=o(t,"lastIndex");return!(!e||!n(e,"value"))&&function(t){try{var e=t.lastIndex;return t.lastIndex=0,i.call(t),!0}catch(t){return!1}finally{t.lastIndex=e}}(t)}},function(t,e,r){"use strict";var n=r(22),i=r(54);t.exports=function(){var t=i();return n(Array.prototype,{find:t},{find:function(){return Array.prototype.find!==t}}),t}},function(t,e,r){"use strict";Array.prototype.includes||(Array.prototype.includes=function(t){var e=Object(this),r=parseInt(e.length)||0;if(0===r)return!1;var n,i,o=parseInt(arguments[1])||0;for(o>=0?n=o:(n=r+o)<0&&(n=0);n<r;){if(t===(i=e[n])||t!=t&&i!=i)return!0;n++}return!1})},function(t,e,r){(function(e,r){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */var n;n=function(){"use strict";function t(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,o=void 0,s=void 0,a=function(t,e){d[i]=t,d[i+1]=e,2===(i+=2)&&(s?s(y):_())},u="undefined"!=typeof window?window:void 0,c=u||{},l=c.MutationObserver||c.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var t=setTimeout;return function(){return t(y,1)}}var d=new Array(1e3);function y(){for(var t=0;t<i;t+=2){(0,d[t])(d[t+1]),d[t]=void 0,d[t+1]=void 0}i=0}var v,g,m,b,_=void 0;function w(t,e){var r=this,n=new this.constructor(E);void 0===n[S]&&z(n);var i=r._state;if(i){var o=arguments[i-1];a(function(){return U(i,n,o,r._result)})}else I(r,n,t,e);return n}function x(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(E);return B(e,t),e}f?_=function(){return e.nextTick(y)}:l?(g=0,m=new l(y),b=document.createTextNode(""),m.observe(b,{characterData:!0}),_=function(){b.data=g=++g%2}):h?((v=new MessageChannel).port1.onmessage=y,_=function(){return v.port2.postMessage(0)}):_=void 0===u?function(){try{var t=Function("return this")().require("vertx");return void 0!==(o=t.runOnLoop||t.runOnContext)?function(){o(y)}:p()}catch(t){return p()}}():p();var S=Math.random().toString(36).substring(2);function E(){}var k=void 0,T=1,C=2,O={error:null};function A(t){try{return t.then}catch(t){return O.error=t,O}}function j(e,r,n){r.constructor===e.constructor&&n===w&&r.constructor.resolve===x?function(t,e){e._state===T?M(t,e._result):e._state===C?P(t,e._result):I(e,void 0,function(e){return B(t,e)},function(e){return P(t,e)})}(e,r):n===O?(P(e,O.error),O.error=null):void 0===n?M(e,r):t(n)?function(t,e,r){a(function(t){var n=!1,i=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(r,e,function(r){n||(n=!0,e!==r?B(t,r):M(t,r))},function(e){n||(n=!0,P(t,e))},t._label);!n&&i&&(n=!0,P(t,i))},t)}(e,r,n):M(e,r)}function B(t,e){var r,n;t===e?P(t,new TypeError("You cannot resolve a promise with itself")):(n=typeof(r=e),null===r||"object"!==n&&"function"!==n?M(t,e):j(t,e,A(e)))}function D(t){t._onerror&&t._onerror(t._result),L(t)}function M(t,e){t._state===k&&(t._result=e,t._state=T,0!==t._subscribers.length&&a(L,t))}function P(t,e){t._state===k&&(t._state=C,t._result=e,a(D,t))}function I(t,e,r,n){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+T]=r,i[o+C]=n,0===o&&t._state&&a(L,t)}function L(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,i=void 0,o=t._result,s=0;s<e.length;s+=3)n=e[s],i=e[s+r],n?U(r,n,i,o):i(o);t._subscribers.length=0}}function U(e,r,n,i){var o=t(n),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return O.error=t,O}}(n,i))===O?(c=!0,a=s.error,s.error=null):u=!0,r===s)return void P(r,new TypeError("A promises callback cannot return that same promise."))}else s=i,u=!0;r._state!==k||(o&&u?B(r,s):c?P(r,a):e===T?M(r,s):e===C&&P(r,s))}var N=0;function z(t){t[S]=N++,t._state=void 0,t._result=void 0,t._subscribers=[]}var F=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(E),this.promise[S]||z(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?M(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&M(this.promise,this._result))):P(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===k&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===x){var i=A(t);if(i===w&&t._state!==k)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(r===q){var o=new r(E);j(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===k&&(this._remaining--,t===C?P(n,r):this._result[e]=r),0===this._remaining&&M(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;I(t,void 0,function(t){return r._settledAt(T,e,t)},function(t){return r._settledAt(C,e,t)})},t}(),q=function(){function e(t){this[S]=N++,this._result=this._state=void 0,this._subscribers=[],E!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e(function(e){B(t,e)},function(e){P(t,e)})}catch(e){P(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var r=this.constructor;return t(e)?this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return q.prototype.then=w,q.all=function(t){return new F(this,t).promise},q.race=function(t){var e=this;return n(t)?new e(function(r,n){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(r,n)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},q.resolve=x,q.reject=function(t){var e=new this(E);return P(e,t),e},q._setScheduler=function(t){s=t},q._setAsap=function(t){a=t},q._asap=a,q.polyfill=function(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=q},q.Promise=q,q},t.exports=n()}).call(this,r(55),r(16))},function(t,e){!function(){"use strict";if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r}t.prototype=window.Event.prototype,window.CustomEvent=t}()},function(t,e){!function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var r,n=arguments.length;for(r=0;r<n;r++)t=arguments[r],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var r=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:r.call(this,t)}}t=null}()},function(t,e){!function(){"use strict";/Trident/.test(navigator.userAgent)&&Object.defineProperty(HTMLElement.prototype,"contains",{writable:!0,enumerable:!1,configurable:!0,value:function(t){return!!t&&(this===t||!!(this.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY))}}),"function"!=typeof Document.prototype.contains&&Object.defineProperty(Document.prototype,"contains",{writable:!0,enumerable:!1,configurable:!0,value:function(t){return!!t&&this.documentElement.contains(t)}}),"function"!=typeof Range.prototype.intersectsNode&&Object.defineProperty(Range.prototype,"intersectsNode",{writable:!0,enumerable:!1,configurable:!0,value:function(t){if(!t)throw new TypeError("Failed to execute 'intersectsNode' on 'Range': 1 argument required, but only 0 present.");if(this.startContainer.ownerDocument!==t.ownerDocument)return!1;if(!t.parentNode)return!0;var e=document.createRange();e.selectNode(t);var r=this.compareBoundaryPoints(Range.START_TO_END,e),n=this.compareBoundaryPoints(Range.END_TO_START,e);return 1===r&&-1===n}})}()},function(t,e,r){var n=r(120),i=r(27),o="[object Arguments]",s="[object Array]",a="[object Object]",u="[object String]",c=Object.prototype.toString;t.exports=function(t){var e=!0;if(!t)return e;var r=c.call(t),l=t.length;return r==s||r==u||r==o||r==a&&"number"==typeof l&&i(t.splice)?!l:(n(t,function(){return e=!1}),e)}},function(t,e,r){var n=r(121),i=r(12),o=r(25);t.exports=function(t,e,r){var s,a=t,u=a;if(!a)return u;if(!o[typeof a])return u;e=e&&void 0===r?e:n(e,r,3);for(var c=-1,l=o[typeof a]&&i(a),f=l?l.length:0;++c<f;)if(!1===e(a[s=l[c]],s,t))return u;return u}},function(t,e,r){var n=r(122),i=r(126),o=r(32),s=r(127),a=/^\s*function[ \n\r\t]+\w/,u=/\bthis\b/,c=Function.prototype.toString;t.exports=function(t,e,r){if("function"!=typeof t)return i;if(void 0===e||!("prototype"in t))return t;var l=t.__bindData__;if(void 0===l&&(s.funcNames&&(l=!t.name),!(l=l||!s.funcDecomp))){var f=c.call(t);s.funcNames||(l=!a.test(f)),l||(l=u.test(f),o(t,l))}if(!1===l||!0!==l&&1&l[1])return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)}}return n(t,e)}},function(t,e,r){var n=r(123),i=r(26);t.exports=function(t,e){return arguments.length>2?n(t,17,i(arguments,2),null,e):n(t,1,null,null,e)}},function(t,e,r){var n=r(124),i=r(125),o=r(27),s=r(26),a=[],u=a.push,c=a.unshift;t.exports=function t(e,r,a,l,f,h){var p=1&r,d=4&r,y=16&r,v=32&r;if(!(2&r||o(e)))throw new TypeError;y&&!a.length&&(r&=-17,y=a=!1),v&&!l.length&&(r&=-33,v=l=!1);var g=e&&e.__bindData__;return g&&!0!==g?((g=s(g))[2]&&(g[2]=s(g[2])),g[3]&&(g[3]=s(g[3])),!p||1&g[1]||(g[4]=f),!p&&1&g[1]&&(r|=8),!d||4&g[1]||(g[5]=h),y&&u.apply(g[2]||(g[2]=[]),a),v&&c.apply(g[3]||(g[3]=[]),l),g[1]|=r,t.apply(null,g)):(1==r||17===r?n:i)([e,r,a,l,f,h])}},function(t,e,r){var n=r(56),i=r(17),o=r(32),s=r(26),a=[].push;t.exports=function(t){var e=t[0],r=t[2],u=t[4];function c(){if(r){var t=s(r);a.apply(t,arguments)}if(this instanceof c){var o=n(e.prototype),l=e.apply(o,t||arguments);return i(l)?l:o}return e.apply(u,t||arguments)}return o(c,t),c}},function(t,e,r){var n=r(56),i=r(17),o=r(32),s=r(26),a=[].push;t.exports=function t(e){var r=e[0],u=e[1],c=e[2],l=e[3],f=e[4],h=e[5],p=1&u,d=2&u,y=4&u,v=8&u,g=r;function m(){var e=p?f:this;if(c){var o=s(c);a.apply(o,arguments)}if((l||y)&&(o||(o=s(arguments)),l&&a.apply(o,l),y&&o.length<h))return u|=16,t([r,v?u:-4&u,o,null,f,h]);if(o||(o=arguments),d&&(r=e[g]),this instanceof m){e=n(r.prototype);var b=r.apply(e,o);return i(b)?b:e}return r.apply(e,o)}return o(m,e),m}},function(t,e){t.exports=function(t){return t}},function(t,e,r){(function(e){var n=r(24),i={};i.funcDecomp=!n(e.WinRTError)&&/\bthis\b/.test(function(){return this}),i.funcNames="string"==typeof Function.name,t.exports=i}).call(this,r(16))},function(t,e,r){var n=r(25),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e,r=t,o=[];if(!r)return o;if(!n[typeof t])return o;for(e in r)i.call(r,e)&&o.push(e);return o}},function(t,e){var r="[object String]",n=Object.prototype.toString;t.exports=function(t){return"string"==typeof t||t&&"object"==typeof t&&n.call(t)==r||!1}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,r){var n=r(27);t.exports=function(t,e){if(t){var r=t[e];return n(r)?t[e]():r}}},function(t,e,r){var n=r(133),i=(r(58),r(136)),o=r(12),s=r(60),a=r(137),u=r(138),c=/\b__p \+= '';/g,l=/\b(__p \+=) '' \+/g,f=/(__e\(.*?\)|\b__t\)) \+\n'';/g,h=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,p=/($^)/,d=/['\n\r\t\u2028\u2029\\]/g;t.exports=function(t,e,r){var y=a.imports._.templateSettings||a;t=String(t||""),r=n({},r,y);var v,g=n({},r.imports,y.imports),m=o(g),b=u(g),_=0,w=r.interpolate||p,x="__p += '",S=RegExp((r.escape||p).source+"|"+w.source+"|"+(w===s?h:p).source+"|"+(r.evaluate||p).source+"|$","g");t.replace(S,function(e,r,n,o,s,a){return n||(n=o),x+=t.slice(_,a).replace(d,i),r&&(x+="' +\n__e("+r+") +\n'"),s&&(v=!0,x+="';\n"+s+";\n__p += '"),n&&(x+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),_=a+e.length,e}),x+="';\n";var E=r.variable,k=E;k||(x="with ("+(E="obj")+") {\n"+x+"\n}\n"),x=(v?x.replace(c,""):x).replace(l,"$1").replace(f,"$1;"),x="function("+E+") {\n"+(k?"":E+" || ("+E+" = {});\n")+"var __t, __p = '', __e = _.escape"+(v?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+x+"return __p\n}";try{var T=Function(m,"return "+x).apply(void 0,b)}catch(t){throw t.source=x,t}return e?T(e):(T.source=x,T)}},function(t,e,r){var n=r(12),i=r(25);t.exports=function(t,e,r){var o,s=t,a=s;if(!s)return a;for(var u=arguments,c=0,l="number"==typeof r?2:u.length;++c<l;)if((s=u[c])&&i[typeof s])for(var f=-1,h=i[typeof s]&&n(s),p=h?h.length:0;++f<p;)void 0===a[o=h[f]]&&(a[o]=s[o]);return a}},function(t,e,r){var n=r(59);t.exports=function(t){return n[t]}},function(t,e,r){var n=r(59),i=r(12),o=RegExp("["+i(n).join("")+"]","g");t.exports=o},function(t,e){var r={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"};t.exports=function(t){return"\\"+r[t]}},function(t,e,r){var n=r(58),i={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:r(60),variable:"",imports:{_:{escape:n}}};t.exports=i},function(t,e,r){var n=r(12);t.exports=function(t){for(var e=-1,r=n(t),i=r.length,o=Array(i);++e<i;)o[e]=t[r[e]];return o}},function(t,e){var r=0;t.exports=function(t){var e=++r;return String(null==t?"":t)+e}},function(t,e,r){"use strict";var n=r(0),i=r(1),o=r(2),s={en:{general:{delete:"Delete?",drop:"Drag __block__ here",paste:"Or paste URL here",upload:"...or choose a file",close:"close",position:"Position",wait:"Please wait...",link:"Enter a link",yes:"Yes",no:"No"},errors:{title:"You have the following errors:",validation_fail:"__type__ block is invalid",block_empty:"__name__ must not be empty",type_missing:"You must have a block of type __type__",required_type_empty:"A required block type __type__ is empty",load_fail:"There was a problem loading the contents of the document"},blocks:{text:{title:"Text"},list:{title:"List"},quote:{title:"Quote",credit_field:"Credit"},image:{title:"Image",upload_error:"There was a problem with your upload"},video:{title:"Video"},tweet:{title:"Tweet",fetch_error:"There was a problem fetching your tweet"},embedly:{title:"Embedly",fetch_error:"There was a problem fetching your embed",key_missing:"An Embedly API key must be present"},heading:{title:"Heading"}}}};void 0===window.i18n?(o.log("Using i18n stub"),window.i18n={t:function(t,e){var r,o,a,u,c=t.split(":");for(o=s[i.language],u=0;u<c.length;u++)a=c[u],n.isUndefined(o[a])||(o=o[a]);return r=o,n.isString(r)?(r.indexOf("__")>=0&&Object.keys(e).forEach(function(t){r=r.replace("__"+t+"__",e[t])}),r):""}}):(o.log("Using i18next"),i18n.init({resStore:s,fallbackLng:i.language,ns:{namespaces:["general","blocks"],defaultNs:"general"}})),t.exports=s},function(t,e,r){var n,i;i=this,void 0===(n=function(){return i.Eventable=function(){var t=[].slice,e={on:function(t,e,r){if(!n(this,"on",t,[e,r])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:r,ctx:r||this}),this},once:function(t,e,r){if(!n(this,"once",t,[e,r])||!e)return this;var i=this,o=function(t){var e,r=2;return function(){return--r>0?e=t.apply(this,arguments):t=null,e}}(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,r)},off:function(t,e,r){var i,o,s,a,u,c,l,f;if(!this._events||!n(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events={},this;for(a=t?[t]:Object.keys(this._events),u=0,c=a.length;u<c;u++)if(t=a[u],s=this._events[t]){if(this._events[t]=i=[],e||r)for(l=0,f=s.length;l<f;l++)o=s[l],(e&&e!==o.callback&&e!==o.callback._callback||r&&r!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(e){if(!this._events)return this;var r=t.call(arguments,1);if(!n(this,"trigger",e,r))return this;var o=this._events[e],s=this._events.all;return o&&i(o,r),s&&i(s,arguments),this},stopListening:function(t,e,r){var n=this._listeners;if(!n)return this;var i=!e&&!r;for(var o in"object"==typeof e&&(r=this),t&&((n={})[t._listenerId]=t),n)n[o].off(e,r,this),i&&delete this._listeners[o];return this}},r=/\s+/,n=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(i));return!1}if(r.test(n)){for(var s=n.split(r),a=0,u=s.length;a<u;a++)t[e].apply(t,[s[a]].concat(i));return!1}return!0},i=function(t,e){var r,n=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++n<i;)(r=t[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o);return;case 2:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o,s);return;case 3:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o,s,a);return;default:for(;++n<i;)(r=t[n]).callback.apply(r.ctx,e)}};function o(t,r){e[t]=function(t,e,n){var i=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=(new Date).getTime());return i[o]=t,"object"==typeof e&&(n=this),t[r](e,n,this),this}}return o("listenTo","on"),o("listenToOnce","once"),e.bind=e.on,e.unbind=e.off,e}()}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){"use strict";r.r(e),r.d(e,"Headers",function(){return c}),r.d(e,"Request",function(){return v}),r.d(e,"Response",function(){return m}),r.d(e,"DOMException",function(){return _}),r.d(e,"fetch",function(){return w});var n={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(n.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(t){return t&&i.indexOf(Object.prototype.toString.call(t))>-1};function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function a(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n.iterable&&(e[Symbol.iterator]=function(){return e}),e}function c(t){this.map={},t instanceof c?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function h(t){var e=new FileReader,r=f(e);return e.readAsArrayBuffer(t),r}function p(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:n.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:n.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():n.arrayBuffer&&n.blob&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=p(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||o(t))?this._bodyArrayBuffer=p(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var t,e,r,n=l(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=f(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(t,e){t=s(t),e=a(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},c.prototype.delete=function(t){delete this.map[s(t)]},c.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},c.prototype.set=function(t,e){this.map[s(t)]=a(e)},c.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},c.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),u(t)},c.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),u(t)},c.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),u(t)},n.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,e){var r,n,i=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),y.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function g(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}}),e}function m(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},d.call(v.prototype),d.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var b=[301,302,303,307,308];m.redirect=function(t,e){if(-1===b.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})};var _=self.DOMException;try{new _}catch(t){(_=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack}).prototype=Object.create(Error.prototype),_.prototype.constructor=_}function w(t,e){return new Promise(function(r,i){var o=new v(t,e);if(o.signal&&o.signal.aborted)return i(new _("Aborted","AbortError"));var s=new XMLHttpRequest;function a(){s.abort()}s.onload=function(){var t,e,n={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new c,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}}),e)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;r(new m(i,n))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.onabort=function(){i(new _("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&n.blob&&(s.responseType="blob"),o.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),o.signal&&(o.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",a)}),s.send(void 0===o._bodyInit?null:o._bodyInit)})}w.polyfill=!0,self.fetch||(self.fetch=w,self.Headers=c,self.Request=v,self.Response=m)},function(t,e){var r=0;t.exports=function(t,e){var n,i,o,s,a=(e=e||{}).prefix||"__jp",u=e.param||"callback",c=e.timeout?e.timeout:15e3,l=document.getElementsByTagName("script")[0]||document.head,f=function(){},h=a+r++;return o=function(){n&&n.parentNode&&n.parentNode.removeChild(n),window[h]=f,i&&clearTimeout(i)},{promise:new Promise(function(e,r){c&&(i=setTimeout(function(){o(),r(new Error("Timeout"))},c)),window[h]=function(t){o(),e(t)},t=(t+=(~t.indexOf("?")?"&":"?")+u+"="+encodeURIComponent(h)).replace("?&","?"),(n=document.createElement("script")).src=t,l.parentNode.insertBefore(n,l),s=function(){window[h]&&(o(),r(new Error("Canceled")))}}),cancel:s}}},function(t,e,r){"use strict";t.exports=function(t){var e,r,n=new Promise(function(t,n){e=t,r=n});return t.then(function(t){n.cancelled||e(t)},function(t){n.cancelled||r(t)}),n.cancel=function(){this.cancelled=!0},n}},function(t,e,r){"use strict";var n=r(2),i=r(1),o=r(3),s=r(10);t.exports={mixinName:"Controllable",initializeControllable:function(){n.log("Adding controllable to block "+this.blockID),this.inner.classList.add("st-block__inner--controllable"),this.control_ui=o.createElement("div",{class:"st-block__control-ui"}),Object.keys(this.controls).forEach(function(t){this.addUiControl(t,this.controls[t].bind(this))},this),this.inner.appendChild(this.control_ui)},getControlTemplate:function(t){return o.createElement("a",{"data-icon":t,class:"st-icon st-block-control-ui-btn st-block-control-ui-btn--"+t,html:'<svg role="img" class="st-icon">\n                  <use xlink:href="'.concat(i.defaults.iconUrl,"#").concat(t,'"/>\n                </svg>')})},addUiControl:function(t,e){var r=this;this.control_ui.appendChild(this.getControlTemplate(t)),s.delegate(this.control_ui,".st-block-control-ui-btn--"+t,"click",function(n){r.selectUiControl(t),e(n)})},selectUiControl:function(t){var e=this;Object.keys(this.controls).forEach(function(t){e.getControlUiBtn(t).classList.remove("st-block-control-ui-btn--selected")}),this.getControlUiBtn(t).classList.add("st-block-control-ui-btn--selected")},getControlUiBtn:function(t){return this.control_ui.querySelector(".st-block-control-ui-btn--"+t)}}},function(t,e,r){"use strict";var n=r(0),i=r(1),o=r(2),s=r(3),a=r(34),u=r(4);t.exports={mixinName:"Droppable",valid_drop_file_types:["File","Files","text/plain","text/uri-list"],requireInputs:!0,initializeDroppable:function(){o.log("Adding droppable to block "+this.blockID),this.drop_options=Object.assign({},i.defaults.Block.drop_options,this.drop_options),s.hide(this.editor),this.inputs.insertAdjacentHTML("beforeend",n.template(this.drop_options.html,{block:this,_:n,config:i})),a.dropArea(this.inputs.lastElementChild).addEventListener("drop",this._handleDrop.bind(this)),this.el.classList.add("st-block--droppable"),this.inner.classList.add("st-block__inner--droppable"),this._setupKeyEvents()},_handleDrop:function(t){t.preventDefault(),t.stopPropagation();var e=t.target,r=[].slice.call(t.dataTransfer.types);e.classList.remove("st-dropzone--dragover"),r&&r.some(function(t){return this.valid_drop_file_types.includes(t)},this)&&this.onDrop(t.dataTransfer),u.trigger("block:content:dropped",this.blockID)},focus:function(){this.inner.focus()},_setupKeyEvents:function(){var t=this;this.inner.setAttribute("tabindex",0),this.inner.addEventListener("keyup",function(e){if(e.target===t.inner)switch(e.keyCode){case 13:t.mediator.trigger("block:create","Text",null,t.el,{autoFocus:!0});break;case 8:return void t.onDeleteClick.call(t,new CustomEvent("click"))}})}}},function(t,e,r){"use strict";var n=r(0),i=r(64);t.exports={mixinName:"Fetchable",initializeFetchable:function(){this.withMixin(r(33))},fetch:function(t,e,r,o){var s=n.uniqueId(this.blockID+"_fetch"),a=i.fetch(t,e);function u(t,e){t.call(this,e),this.removeQueuedItem(s)}return this.resetMessages(),this.addQueuedItem(s,a),n.isUndefined(r)||a.then(u.bind(this,r)),n.isUndefined(o)||a.catch(u.bind(this,o)),a}}},function(t,e,r){"use strict";var n=r(0),i=r(1),o=r(2);t.exports={mixinName:"Pastable",requireInputs:!0,initializePastable:function(){var t=this;o.log("Adding pastable to block "+this.blockID),this.paste_options=Object.assign({},i.defaults.Block.paste_options,this.paste_options),this.inputs.insertAdjacentHTML("beforeend",n.template(this.paste_options.html,this)),Array.prototype.forEach.call(this.$(".st-paste-block"),function(e){e.addEventListener("click",function(){var t=document.createEvent("HTMLEvents");t.initEvent("select",!0,!1),this.dispatchEvent(t)}),e.addEventListener("paste",t._handleContentPaste),e.addEventListener("submit",t._handleContentPaste)})}}},function(t,e,r){"use strict";var n=r(0),i=r(1),o=r(2),s=r(63);t.exports={mixinName:"Uploadable",uploadsCount:0,requireInputs:!0,initializeUploadable:function(){o.log("Adding uploadable to block "+this.blockID),this.withMixin(r(33)),this.upload_options=Object.assign({},i.defaults.Block.upload_options,this.upload_options),this.inputs.insertAdjacentHTML("beforeend",n.template(this.upload_options.html,this)),Array.prototype.forEach.call(this.inputs.querySelectorAll("button"),function(t){t.addEventListener("click",function(t){t.preventDefault()})}),Array.prototype.forEach.call(this.inputs.querySelectorAll("input"),function(t){t.addEventListener("change",function(t){this.onDrop(t.currentTarget)}.bind(this))}.bind(this))},uploader:function(t,e,r){return s(this,t,e,r)}}},function(t,e,r){"use strict";var n=r(13),i=r(0),o=r(68);t.exports={mixinName:"MultiEditable",initializeMultiEditable:function(){this.editors={}},newTextEditor:function(t,e){var r,n,s;(n=void 0===t.tagName)?((s=document.createElement("div")).innerHTML=t,r=s.querySelector(".st-block__editor")):r=t;var a=i.uniqueId("editor-");r.setAttribute("data-editorId",a),r.addEventListener("keyup",this.getSelectionForFormatter),r.addEventListener("mouseup",this.getSelectionForFormatter);var u=i.isFunction(this.configureScribe)?this.configureScribe.bind(this):null,c=o.initScribeInstance(r,this.scribeOptions,u);c.setContent(e);var l={node:n?s.removeChild(s.firstChild):r,el:r,scribe:c,id:a};return this.editors[a]=l,l},getCurrentTextEditor:function(){var t=document.activeElement.getAttribute("data-editorId"),e=this.getTextEditor(t);return e&&(this.currentEditor=e),this.currentEditor},appendToTextEditor:function(t,e){var r=this.getTextEditor(t).scribe,i=document.createRange();i.selectNodeContents(r.el),i.collapse(!1);var o=new r.api.Selection;o.selection.removeAllRanges(),o.selection.addRange(i);var s=n(r.el);e&&r.insertHTML(e),n(r.el,{start:s.start,end:s.end})},getCurrentScribeInstance:function(){return this.getCurrentTextEditor().scribe},getTextEditor:function(t){return this.editors[t]},removeTextEditor:function(t){delete this.editors[t]},execTextBlockCommand:function(t){return o.execTextBlockCommand(this.getCurrentScribeInstance(),t)},queryTextBlockCommandState:function(t){return o.queryTextBlockCommandState(this.getCurrentScribeInstance(),t)}}},function(t,e,r){var n,i;try{n=r(66)}catch(t){n=r(66)}try{i=r(67)}catch(t){i=r(67)}function o(t,e){if(!(this instanceof o))return new o(t,e);if(this.node=this.start=this.peeked=t,this.root=e,this.closingTag=!1,this._revisit=!0,this._selects=[],this._rejects=[],t&&this.higher(t))throw new Error("root must be a parent or ancestor to node")}function s(t,e){var r="nextSibling"==t;return function(i,o,s){i=this.compile(i),o=o&&o>0?o:1;for(var a=this.node,u=this.closingTag,c=this._revisit;a;){if(n(r,u)&&a[e])a=a[e],u=!r;else if(1==a.nodeType&&!a[e]&&n(r,u)){if(u=r,!c)continue}else if(a[t])a=a[t],u=!r;else if(a=a.parentNode,u=r,!c)continue;if(!a||this.higher(a,this.root))break;if(i(a)&&this.selects(a,s)&&this.rejects(a,s)){if(--o)continue;return s||(this.node=a),this.closingTag=u,a}}return null}}t.exports=o,o.prototype.reset=function(t){return this.node=t||this.start,this},o.prototype.revisit=function(t){return this._revisit=null==t||t,this},o.prototype.opening=function(){return 1==this.node.nodeType&&(this.closingTag=!1),this},o.prototype.atOpening=function(){return!this.closingTag},o.prototype.closing=function(){return 1==this.node.nodeType&&(this.closingTag=!0),this},o.prototype.atClosing=function(){return this.closingTag},o.prototype.next=s("nextSibling","firstChild"),o.prototype.previous=o.prototype.prev=s("previousSibling","lastChild"),o.prototype.select=function(t){return t=this.compile(t),this._selects.push(t),this},o.prototype.selects=function(t,e){var r=this._selects,n=r.length;if(!n)return!0;for(var i=0;i<n;i++)if(r[i].call(this,t,e))return!0;return!1},o.prototype.reject=function(t){return t=this.compile(t),this._rejects.push(t),this},o.prototype.rejects=function(t,e){var r=this._rejects,n=r.length;if(!n)return!0;for(var i=0;i<n;i++)if(r[i].call(this,t,e))return!1;return!0},o.prototype.higher=function(t){var e=this.root;if(!e)return!1;for(t=t.parentNode;t&&t!=e;)t=t.parentNode;return t!=e},o.prototype.compile=function(t){switch(typeof t){case"number":return function(e){return t==e.nodeType};case"string":return new Function("node","return "+i(t,"node."));case"function":return t;default:return function(){return!0}}},o.prototype.peak=o.prototype.peek=function(t,e){return 1==arguments.length&&(e=t,t=!0),(e=null==e?1:e)?e>0?this.next(t,e,!0):this.prev(t,Math.abs(e),!0):this.node},o.prototype.use=function(t){return t(this),this}},function(t,e,r){var n,i;n=[r(153),r(160),r(168),r(171),r(174),r(182),r(187),r(188),r(189),r(28),r(5),r(190),r(70)],void 0===(i=function(t,e,r,n,i,o,s,a,u,c,l,f,h){"use strict";function p(c,h){u.call(this),this.el=c,this.commands={},this.options=f.checkOptions(h),this.commandPatches={},this._plainTextFormatterFactory=new d,this._htmlFormatterFactory=new y,this.api=new o(this),this.Immutable=l;var p=s(this);this.transactionManager=new p,this.undoManager=!1,this.options.undo.enabled&&(this.options.undo.manager?this.undoManager=this.options.undo.manager:this.undoManager=new a(this.options.undo.limit,this.el),this._merge=!1,this._forceMerge=!1,this._mergeTimer=0,this._lastItem={content:""}),this.setHTML(this.getHTML()),this.el.setAttribute("contenteditable",!0),function(){var t=!1,e=this,r={handleEvent:function(r){t||("compositionstart"!==r.type?"compositionend"===r.type?(t=!1,e.transactionManager.run()):e.transactionManager.run():t=!0)}};["compositionstart","compositionend","keydown","cut","paste"].forEach(function(t){this.el.addEventListener(t,r,!1)}.bind(this))}.call(this);var v=l.OrderedSet(this.options.defaultPlugins).sort(f.sortByPlugin("setRootPElement")).filter(f.filterByBlockLevelMode(this.allowsBlockElements())).map(function(e){return t[e]}),g=l.List(this.options.defaultFormatters).filter(function(t){return!!r[t]}).map(function(t){return r[t]}),m=l.List.of(i.events),b=l.List(this.options.defaultCommandPatches).map(function(t){return i.commands[t]}),_=l.List.of("indent","insertList","outdent","redo","subscript","superscript","undo").map(function(t){return e[t]});l.List().concat(v,g,m,b,_).forEach(function(t){this.use(t())}.bind(this)),this.use(n())}function d(){this.formatters=l.List()}function y(){this.formatters={sanitize:l.List(),normalize:l.List(),export:l.List()}}return p.prototype=Object.create(u.prototype),p.prototype.node=c,p.prototype.element=p.prototype.node,p.prototype.use=function(t){return t(this),this},p.prototype.setHTML=function(t,e){this.options.undo.enabled&&(this._lastItem.content=t),e&&(this._skipFormatters=!0),this.el.innerHTML!==t&&(this.el.innerHTML=t)},p.prototype.getHTML=function(){return this.el.innerHTML},p.prototype.getContent=function(){return this._htmlFormatterFactory.formatForExport(this.getHTML().replace(/<br>$/,""))},p.prototype.getTextContent=function(){return this.el.textContent},p.prototype.pushHistory=function(){var t=this;if(t.options.undo.enabled){var e=t._lastItem.content.replace(/<em [^>]*class="scribe-marker"[^>]*>[^<]*?<\/em>/g,"");if(t.getHTML()!==e){var r=new t.api.Selection;r.placeMarkers();var n=t.getHTML();r.removeMarkers();var i=t.undoManager.item(t.undoManager.position);return(t._merge||t._forceMerge)&&i&&t._lastItem==i[0]?t._lastItem.content=n:(t._lastItem={previousItem:t._lastItem,content:n,scribe:t,execute:function(){},undo:function(){this.scribe.restoreFromHistory(this.previousItem)},redo:function(){this.scribe.restoreFromHistory(this)}},t.undoManager.transact(t._lastItem,!1)),clearTimeout(t._mergeTimer),t._merge=!0,t._mergeTimer=setTimeout(function(){t._merge=!1},t.options.undo.interval),!0}}return!1},p.prototype.getCommand=function(t){return this.commands[t]||this.commandPatches[t]||new this.api.Command(t)},p.prototype.restoreFromHistory=function(t){this._lastItem=t,this.setHTML(t.content,!0),(new this.api.Selection).selectMarkers(),this.trigger(h.legacyContentChanged),this.trigger(h.contentChanged)},p.prototype.allowsBlockElements=function(){return this.options.allowBlockElements},p.prototype.setContent=function(t){this.allowsBlockElements()||(t+="<br>"),this.setHTML(t),this.trigger(h.legacyContentChanged),this.trigger(h.contentChanged)},p.prototype.insertPlainText=function(t){this.insertHTML("<p>"+this._plainTextFormatterFactory.format(t)+"</p>")},p.prototype.insertHTML=function(t){if(t=this._htmlFormatterFactory.format(t),Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject){var e=document.createElement("span");if(e.innerHTML=t,1===e.children.length&&"P"===e.children[0].tagName&&(t=e.children[0].innerHTML),""===this.getTextContent().trim())this.setContent(t);else{var r=document.getSelection().getRangeAt(0),n=document.createElement("span");r.surroundContents(n),n.innerHTML=t,r.collapse(!1),c.removeChromeArtifacts(this.el)}}else this.getCommand("insertHTML").execute(t)},p.prototype.isDebugModeEnabled=function(){return this.options.debug},p.prototype.registerHTMLFormatter=function(t,e){this._htmlFormatterFactory.formatters[t]=this._htmlFormatterFactory.formatters[t].push(e)},p.prototype.registerPlainTextFormatter=function(t){this._plainTextFormatterFactory.formatters=this._plainTextFormatterFactory.formatters.push(t)},p.prototype.destroy=function(t){this.trigger(h.destroy)},d.prototype.format=function(t){return this.formatters.reduce(function(t,e){return e(t)},t)},y.prototype=Object.create(d.prototype),y.prototype.constructor=y,y.prototype.format=function(t){return this.formatters.sanitize.concat(this.formatters.normalize).reduce(function(t,e){return e(t)},t)},y.prototype.formatForExport=function(t){return this.formatters.export.reduce(function(t,e){return e(t)},t)},p}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(154),r(155),r(156),r(159)],void 0===(i=function(t,e,r,n){"use strict";return{setRootPElement:t,enforcePElements:e,ensureSelectableContainers:r,inlineElementsMode:n}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(){return function(t){""===t.getHTML().trim()&&(window.navigator.userAgent.match(/MSIE 10/)?t.setContent("<p></p>"):t.setContent("<p><br></p>"))}}}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){var n,i;n=[r(5)],void 0===(i=function(t){"use strict";return function(){return function(e){var r=e.node;function n(e){var n=0;t.List(e.childNodes).filterNot(function(t){return r.isWhitespaceOnlyTextNode(Node,t)}).filter(function(t){return t.nodeType===Node.TEXT_NODE||!r.isBlockElement(t)}).groupBy(function(t,e,r){return 0===e||t.previousSibling===r.get(e-1)?n:n+=1}).forEach(function(t){r.wrap(t.toArray(),document.createElement("p"))})}e.registerHTMLFormatter("normalize",function(t){var e=document.createElement("div");return e.innerHTML=t,n(e),function(t){for(var e,r=0;e=t.children[r++];)"BLOCKQUOTE"===e.tagName&&n(e)}(e),e.innerHTML})}}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(28),r(5)],void 0===(i=function(t,e){"use strict";var r=e.Set.of("AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR");function n(e){var i=e.firstElementChild;function o(e){return!!(0===e.children.length&&t.isBlockElement(e)||1===e.children.length&&t.isSelectionMarkerNode(e.children[0]))||!t.isBlockElement(e)&&0===e.children.length&&function(e){return!!t.isCaretPositionNode(e)||""===e.parentNode.textContent.trim()}(e)}for(;i;)t.isSelectionMarkerNode(i)||(o(i)&&""===i.textContent.trim()&&!r.includes(i.nodeName)&&-1===i.nodeName.indexOf("-")?i.appendChild(document.createElement("br")):i.children.length>0&&n(i)),i=i.nextElementSibling}return function(){return function(t){t.registerHTMLFormatter("normalize",function(t){var e=document.createElement("div");return e.innerHTML=t,n(e),e.innerHTML})}}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(5)],void 0===(i=function(t){return t.Set.of("B","BIG","I","SMALL","TT","ABBR","ACRONYM","CITE","CODE","DFN","EM","KBD","STRONG","SAMP","VAR","A","BDO","BR","IMG","MAP","OBJECT","Q","SCRIPT","SPAN","SUB","SUP","BUTTON","INPUT","LABEL","SELECT","TEXTAREA")}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(5)],void 0===(i=function(t){return t.Set.of("ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","CANVAS","DD","DIV","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TD","TH","TFOOT","UL","VIDEO")}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(28)],void 0===(i=function(t){"use strict";return function(){return function(e){e.el.addEventListener("keydown",function(r){if(13===r.keyCode){var n=new e.api.Selection,i=n.range;n.getContaining(function(t){return"LI"===t.nodeName||/^(H[1-6])$/.test(t.nodeName)})||(r.preventDefault(),e.transactionManager.run(function(){i.collapsed||i.deleteContents(),e.el.lastChild&&"BR"===e.el.lastChild.nodeName&&e.el.removeChild(e.el.lastChild);var r=document.createElement("br");i.insertNode(r),i.setEndAfter(r),i.collapse(!1);var o=i.cloneRange();if(e.el.lastChild&&o.setEndAfter(e.el.lastChild),!function(e){for(var r=document.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1);r.nextNode();)if(r.currentNode&&(t.hasContent(r.currentNode)||t.isTextNodeWithContent(Node,r.currentNode)))return!0;return!1}(o.cloneContents())){var s=document.createElement("br");i.insertNode(s)}var a=i.cloneRange();a.setStartAfter(r),a.setEndAfter(r),n.selection.removeAllRanges(),n.selection.addRange(a)}))}}.bind(this)),""===e.getHTML().trim()&&e.setContent("")}}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(161),r(162),r(163),r(164),r(165),r(166),r(167)],void 0===(i=function(t,e,r,n,i,o,s){"use strict";return{indent:t,insertList:e,outdent:r,redo:n,subscript:i,superscript:o,undo:s}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(){return function(t){var e=new t.api.Command("indent");e.queryEnabled=function(){var e=(new t.api.Selection).getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName});return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()&&!e},t.commands.indent=e}}}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){var n,i;n=[r(5)],void 0===(i=function(t){"use strict";return function(){return function(e){var r=e.node,n=function(t){e.api.Command.call(this,t)};(n.prototype=Object.create(e.api.Command.prototype)).constructor=n,n.prototype.execute=function(n){function i(t){if(t.size){for(var e=document.createElement(a.nodeName);t.size;)e.appendChild(t.first()),t=t.shift();a.parentNode.insertBefore(e,a.nextElementSibling)}}if(this.queryState()){var o=new e.api.Selection,s=o.range,a=o.getContaining(function(t){return"OL"===t.nodeName||"UL"===t.nodeName}),u=o.getContaining(function(t){return"LI"===t.nodeName});e.transactionManager.run(function(){if(u){i(r.nextSiblings(u)),o.placeMarkers();var e=document.createElement("p");e.innerHTML=u.innerHTML,a.parentNode.insertBefore(e,a.nextElementSibling),u.parentNode.removeChild(u)}else{var n=t.List(a.querySelectorAll("li")).filter(function(t){return s.intersectsNode(t)}),c=n.last();i(r.nextSiblings(c)),o.placeMarkers();var l=document.createDocumentFragment();n.forEach(function(t){var e=document.createElement("p");e.innerHTML=t.innerHTML,l.appendChild(e)}),a.parentNode.insertBefore(l,a.nextElementSibling),n.forEach(function(t){t.parentNode.removeChild(t)})}0===a.childNodes.length&&a.parentNode.removeChild(a),o.selectMarkers()}.bind(this))}else e.api.Command.prototype.execute.call(this,n)},n.prototype.queryEnabled=function(){return e.api.Command.prototype.queryEnabled.call(this)&&e.allowsBlockElements()},e.commands.insertOrderedList=new n("insertOrderedList"),e.commands.insertUnorderedList=new n("insertUnorderedList")}}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(){return function(t){var e=new t.api.Command("outdent");e.queryEnabled=function(){var e=(new t.api.Selection).getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName});return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()&&!e},t.commands.outdent=e}}}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){var n,i;n=[r(69)],void 0===(i=function(t){"use strict";return function(){return function(e){var r=new e.api.Command("redo");r.execute=function(){e.undoManager.redo()},r.queryEnabled=function(){return e.undoManager.position>0},e.commands.redo=r,e.options.undo.enabled&&e.el.addEventListener("keydown",function(e){t.isRedoKeyCombination(e)&&(e.preventDefault(),r.execute())})}}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(){return function(t){var e=new t.api.Command("subscript");t.commands.subscript=e}}}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(){return function(t){var e=new t.api.Command("superscript");t.commands.superscript=e}}}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){var n,i;n=[r(69)],void 0===(i=function(t){"use strict";return function(){return function(e){var r=new e.api.Command("undo");r.execute=function(){e.undoManager.undo()},r.queryEnabled=function(){return e.undoManager.position<e.undoManager.length},e.commands.undo=r,e.options.undo.enabled&&e.el.addEventListener("keydown",function(e){t.isUndoKeyCombination(e)&&(e.preventDefault(),r.execute())})}}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(169),r(170)],void 0===(i=function(t,e){"use strict";return{replaceNbspCharsFormatter:t,escapeHtmlCharactersFormatter:e}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(){return function(t){var e=/(\s|&nbsp;)+/g;t.registerHTMLFormatter("export",function(t){return t.replace(e," ")})}}}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){var n,i,o,s;n=function(){return function(t){return"string"==typeof t?t:null==t?"":t+""}}.apply(e,[]),i=function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};return function(e){return t[e]}}.apply(e,[]),o=function(t,e){var r=/[&<>"'`]/g,n=RegExp(r.source);return function(i){return(i=t(i))&&n.test(i)?i.replace(r,e):i}}.apply(e,[n,i]),void 0===(s=function(t){"use strict";return function(){return function(e){e.registerPlainTextFormatter(t)}}}.apply(e,[o]))||(t.exports=s)},function(t,e,r){var n,i;n=[r(172),r(5)],void 0===(i=function(t,e){"use strict";return function(){return function(r){var n=r.node;r.el.addEventListener("focus",function(){var t=new r.api.Selection;if(t.range&&(r.allowsBlockElements()&&t.range.startContainer===r.el)){var e=n.firstDeepestChild(r.el),i=t.range;i.setStart(e,0),i.setEnd(e,0),t.selection.removeAllRanges(),t.selection.addRange(i)}}.bind(r));var i=function(){if(!r._skipFormatters){var t=new r.api.Selection,e=t.range,n=function(){e&&t.placeMarkers(),r.setHTML(r._htmlFormatterFactory.format(r.getHTML())),t.selectMarkers()}.bind(r);r.transactionManager.run(n)}delete r._skipFormatters}.bind(r);t(r.el,i),r.allowsBlockElements()&&r.el.addEventListener("keydown",function(t){if(13===t.keyCode){var e=new r.api.Selection,n=e.range,i=e.getContaining(function(t){return/^(H[1-6])$/.test(t.nodeName)});if(i&&n.collapsed){var o=n.cloneRange();o.setEndAfter(i),""===o.cloneContents().firstChild.textContent&&(t.preventDefault(),r.transactionManager.run(function(){var t=document.createElement("p"),r=document.createElement("br");t.appendChild(r),i.parentNode.insertBefore(t,i.nextElementSibling),n.setStart(t,0),n.setEnd(t,0),e.selection.removeAllRanges(),e.selection.addRange(n)}))}}}),r.allowsBlockElements()&&r.el.addEventListener("keydown",function(t){if(13===t.keyCode||8===t.keyCode){var e=new r.api.Selection;if(e.range.collapsed){var n=e.getContaining(function(t){return"LI"===t.nodeName});if(n&&""===n.textContent.trim()){t.preventDefault();var i=e.getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName}),o=r.getCommand("OL"===i.nodeName?"insertOrderedList":"insertUnorderedList");o.event=t,o.execute()}}}}),r.el.addEventListener("paste",function(t){if(t.clipboardData&&t.clipboardData.types.length>0)t.preventDefault(),e.List(t.clipboardData.types).includes("text/html")?r.insertHTML(t.clipboardData.getData("text/html")):r.insertPlainText(t.clipboardData.getData("text/plain"));else{var n=new r.api.Selection;n.placeMarkers();var i=document.createElement("div");i.style.height=0,i.style.opacity=0,i.style.overflow="hidden",document.body.appendChild(i),i.setAttribute("contenteditable",!0),i.focus(),setTimeout(function(){var t=i.innerHTML;i.parentNode.removeChild(i),n.selectMarkers(),r.el.focus(),r.insertHTML(t)},1)}})}}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(28),r(173)],void 0===(i=function(t,e){var r="object"==typeof window?window:void 0,n=e.determineMutationObserver(r);function i(e){return!t.isEmptyTextNode(e)&&!t.isSelectionMarkerNode(e)}return function(t,e){var r=!1,o=new n(function(t){if(!r&&function(t){return t.some(function(t){return Array.prototype.some.call(t.addedNodes,i)||Array.prototype.some.call(t.removedNodes,i)})}(t)){r=!0;try{e()}catch(t){throw t}finally{setTimeout(function(){r=!1},0)}}});return o.observe(t,{childList:!0,subtree:!0}),o}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n;void 0===(n=function(){return{determineMutationObserver:function(t){return void 0===t?function(){return{observe:function(){}}}:t.MutationObserver||t.WebKitMutationObserver||t.MozMutationObserver}}}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n,i;n=[r(175),r(176),r(177),r(178),r(179),r(180),r(181)],void 0===(i=function(t,e,r,n,i,o,s){"use strict";return{commands:{bold:t,indent:e,insertHTML:r,insertList:n,outdent:i,createLink:o},events:s}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("bold");e.queryEnabled=function(){var e=(new t.api.Selection).getContaining(function(t){return/^(H[1-6])$/.test(t.nodeName)});return t.api.CommandPatch.prototype.queryEnabled.apply(this,arguments)&&!e},t.commandPatches.bold=e}}}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("indent");e.execute=function(e){t.transactionManager.run(function(){var r=new t.api.Selection,n=r.range;if("P"===n.commonAncestorContainer.nodeName&&"<br>"===n.commonAncestorContainer.innerHTML){var i=document.createTextNode("\ufeff");n.insertNode(i),n.setStart(i,0),n.setEnd(i,0),r.selection.removeAllRanges(),r.selection.addRange(n)}t.api.CommandPatch.prototype.execute.call(this,e);var o=(r=new t.api.Selection).getContaining(function(t){return"BLOCKQUOTE"===t.nodeName});o&&o.removeAttribute("style")}.bind(this))},t.commandPatches.indent=e}}}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("insertHTML"),r=t.node;e.execute=function(e){t.transactionManager.run(function(){t.api.CommandPatch.prototype.execute.call(this,e),r.removeChromeArtifacts(t.el)}.bind(this))},t.commandPatches.insertHTML=e}}}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(){return function(t){var e=t.node,r=function(e){t.api.CommandPatch.call(this,e)};(r.prototype=Object.create(t.api.CommandPatch.prototype)).constructor=r,r.prototype.execute=function(r){t.transactionManager.run(function(){if(t.api.CommandPatch.prototype.execute.call(this,r),this.queryState()){var n=new t.api.Selection,i=n.getContaining(function(t){return"OL"===t.nodeName||"UL"===t.nodeName});if(i){i.nextElementSibling&&0===i.nextElementSibling.childNodes.length&&e.removeNode(i.nextElementSibling);var o=i.parentNode;o&&/^(H[1-6]|P)$/.test(o.nodeName)&&(n.placeMarkers(),e.insertAfter(i,o),n.selectMarkers(),2===o.childNodes.length&&e.isEmptyTextNode(o.firstChild)&&e.removeNode(o),0===o.childNodes.length&&e.removeNode(o)),e.removeChromeArtifacts(i)}}}.bind(this))},r.prototype.queryState=function(){try{return t.api.CommandPatch.prototype.queryState.apply(this,arguments)}catch(t){if("NS_ERROR_UNEXPECTED"==t.name)return!1;throw t}},t.commandPatches.insertOrderedList=new r("insertOrderedList"),t.commandPatches.insertUnorderedList=new r("insertUnorderedList")}}}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(){return function(t){var e=t.node,r=new t.api.CommandPatch("outdent");r.execute=function(){t.transactionManager.run(function(){var r=new t.api.Selection,n=r.range,i=r.getContaining(function(t){return"BLOCKQUOTE"===t.nodeName});if("BLOCKQUOTE"===n.commonAncestorContainer.nodeName){r.placeMarkers(),r.selectMarkers(!0);var o=n.cloneContents();i.parentNode.insertBefore(o,i),n.deleteContents(),r.selectMarkers(),""===i.textContent&&i.parentNode.removeChild(i)}else{var s=r.getContaining(function(t){return"P"===t.nodeName});if(s){var a=e.nextSiblings(s);if(a.size){for(var u=document.createElement(i.nodeName);a.size;)u.appendChild(a.first()),a=a.shift();i.parentNode.insertBefore(u,i.nextElementSibling)}r.placeMarkers(),i.parentNode.insertBefore(s,i.nextElementSibling),r.selectMarkers(),""===i.innerHTML&&i.parentNode.removeChild(i)}else t.api.CommandPatch.prototype.execute.call(this)}}.bind(this))},t.commandPatches.outdent=r}}}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("createLink");t.commandPatches.createLink=e,e.execute=function(e){var r=new t.api.Selection;if(r.isInScribe())if(r.range.collapsed){var n=document.createElement("a");n.setAttribute("href",e),n.textContent=e,r.range.insertNode(n);var i=document.createRange();i.setStartBefore(n),i.setEndAfter(n),r.selection.removeAllRanges(),r.selection.addRange(i)}else t.api.CommandPatch.prototype.execute.call(this,e)}}}}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(){return function(t){var e=t.node;t.allowsBlockElements()&&t.el.addEventListener("keyup",function(r){if(8===r.keyCode||46===r.keyCode){var n=new t.api.Selection,i=n.getContaining(function(t){return"P"===t.nodeName});i&&t.transactionManager.run(function(){n.placeMarkers(),e.removeChromeArtifacts(i),n.selectMarkers()},!0)}})}}}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n,i;n=[r(183),r(184),r(185),r(186)],void 0===(i=function(t,e,r,n){"use strict";return function(i){this.CommandPatch=t(i),this.Command=e(i),this.Selection=r(i),this.SimpleCommand=n(this,i)}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(t){function e(t){this.commandName=t}return e.prototype.execute=function(e){t.transactionManager.run(function(){document.execCommand(this.commandName,!1,e||null)}.bind(this))},e.prototype.queryState=function(){return document.queryCommandState(this.commandName)},e.prototype.queryEnabled=function(){return document.queryCommandEnabled(this.commandName)},e}}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(t){function e(e){this.commandName=e,this.patch=t.commandPatches[this.commandName]}return e.prototype.execute=function(e){this.patch?this.patch.execute(e):t.transactionManager.run(function(){document.execCommand(this.commandName,!1,e||null)}.bind(this))},e.prototype.queryState=function(){return this.patch?this.patch.queryState():document.queryCommandState(this.commandName)},e.prototype.queryEnabled=function(){return this.patch?this.patch.queryEnabled():document.queryCommandEnabled(this.commandName)},e}}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(t){var e=t.el.ownerDocument,r=t.node;if(e.compareDocumentPosition(t.el)&Node.DOCUMENT_POSITION_DISCONNECTED){for(var n=t.el.parentNode;n&&r.isFragment(n);)n=n.parentNode;n&&n.getSelection&&(e=n)}function i(){var t=document.createElement("em");return t.style.display="none",t.classList.add("scribe-marker"),t}function o(t,e){t.insertNode(e),e.nextSibling&&r.isEmptyTextNode(e.nextSibling)&&r.removeNode(e.nextSibling),e.previousSibling&&r.isEmptyTextNode(e.previousSibling)&&r.removeNode(e.previousSibling)}function s(){if(this.selection=e.getSelection(),this.selection.rangeCount&&this.selection.anchorNode){var t=this.selection.anchorNode,n=this.selection.anchorOffset,i=this.selection.focusNode,o=this.selection.focusOffset;if(t===i&&o<n){var s=n;n=o,o=s}else if(r.isBefore(i,t)){var a=t,u=n;t=i,n=o,i=a,o=u}this.range=document.createRange(),this.range.setStart(t,n),this.range.setEnd(i,o)}}return s.prototype.getContaining=function(e){if(this.range){var n=this.range.commonAncestorContainer;return n&&t.el===n||!e(n)?r.getAncestor(n,t.el,e):n}},s.prototype.isInScribe=function(){var e=this.range;return e&&document.contains(t.el)&&t.el.contains(e.startContainer)&&t.el.contains(e.endContainer)},s.prototype.placeMarkers=function(){var t=this.range;if(this.isInScribe()){if(o(t.cloneRange(),i()),!t.collapsed){var e=t.cloneRange();e.collapse(!1),o(e,i())}this.selection.removeAllRanges(),this.selection.addRange(t)}},s.prototype.getMarkers=function(){return t.el.querySelectorAll("em.scribe-marker")},s.prototype.removeMarkers=function(){Array.prototype.forEach.call(this.getMarkers(),function(t){var e=t.parentNode;r.removeNode(t),window.navigator.userAgent.indexOf("MSIE ")||e.normalize()})},s.prototype.selectMarkers=function(t){var e=this.getMarkers();if(e.length){var r,n,i,o,s=document.createRange();r=s,n=e[0],i=n.previousSibling,o=n.nextSibling,i&&i.nodeType===Node.TEXT_NODE?r.setStart(i,i.data.length):o&&o.nodeType===Node.TEXT_NODE?r.setStart(o,0):r.setStartBefore(n),function(t,e){var r=e.previousSibling,n=e.nextSibling;r&&r.nodeType===Node.TEXT_NODE?t.setEnd(r,r.data.length):n&&n.nodeType===Node.TEXT_NODE?t.setEnd(n,0):t.setEndAfter(e)}(s,e.length>=2?e[1]:e[0]),t||this.removeMarkers(),this.selection.removeAllRanges(),this.selection.addRange(s)}},s.prototype.isCaretOnNewLine=function(){var t=this.getContaining(function(t){return"P"===t.nodeName});return!!t&&r.isEmptyInlineElement(t)},s}}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(t,e){function r(t,r){e.api.Command.call(this,t),this._nodeName=r}return r.prototype=Object.create(t.Command.prototype),r.prototype.constructor=r,r.prototype.queryState=function(){var t=new e.api.Selection;return e.api.Command.prototype.queryState.call(this)&&!!t.getContaining(function(t){return t.nodeName===this._nodeName}.bind(this))},r}}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){var n,i;n=[r(70)],void 0===(i=function(t){"use strict";return function(e){function r(){this.history=[]}return Object.assign(r.prototype,{start:function(){this.history.push(1)},end:function(){this.history.pop(),0===this.history.length&&(e.pushHistory(),e.trigger(t.legacyContentChanged),e.trigger(t.contentChanged))},run:function(t,r){this.start();try{t&&t()}finally{e._forceMerge=!0===r,this.end(),e._forceMerge=!1}}}),r}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(5)],void 0===(i=function(t){"use strict";function e(e,r){this._stack=t.List(),this._limit=e,this._fireEvent=r&&r.dispatchEvent,this._ush=r,this.position=0,this.length=0}return e.prototype.transact=function(e,r){if(arguments.length<2)throw new TypeError("Not enough arguments to UndoManager.transact.");var n;e.execute(),this.position>0&&this.clearRedo(),r&&this.length?(n=this._stack.first().push(e),this._stack=this._stack.shift().unshift(n)):(n=t.List.of(e),this._stack=this._stack.unshift(n),this.length++,this._limit&&this.length>this._limit&&this.clearUndo(this._limit)),this._dispatch("DOMTransaction",n)},e.prototype.undo=function(){if(!(this.position>=this.length)){for(var t=this._stack.get(this.position),e=t.size;e--;)t.get(e).undo();this.position++,this._dispatch("undo",t)}},e.prototype.redo=function(){if(0!==this.position){this.position--;for(var t=this._stack.get(this.position),e=0;e<t.size;e++)t.get(e).redo();this._dispatch("redo",t)}},e.prototype.item=function(t){return t>=0&&t<this.length?this._stack.get(t).toArray():null},e.prototype.clearUndo=function(t){this._stack=this._stack.take(void 0!==t?t:this.position),this.length=this._stack.size},e.prototype.clearRedo=function(){this._stack=this._stack.skip(this.position),this.length=this._stack.size,this.position=0},e.prototype._dispatch=function(t,e){this._fireEvent&&this._ush.dispatchEvent(new CustomEvent(t,{detail:{transactions:e.toArray()},bubbles:!0,cancelable:!1}))},e}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(5)],void 0===(i=function(t){"use strict";function e(){this._listeners={}}return e.prototype.on=function(e,r){var n=this._listeners[e]||t.Set();this._listeners[e]=n.add(r)},e.prototype.off=function(e,r){var n=this._listeners[e]||t.Set();this._listeners[e]=r?n.delete(r):n.clear()},e.prototype.trigger=function(e,r){for(var n=e.split(":");n.length;){var i=n.join(":");(this._listeners[i]||t.Set()).forEach(function(t){t.apply(null,r)}),n.splice(n.length-1,1)}},e}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(5)],void 0===(i=function(t){var e=["setRootPElement","enforcePElements","ensureSelectableContainers"],r=["inlineElementsMode"],n={allowBlockElements:!0,debug:!1,undo:{manager:!1,enabled:!0,limit:100,interval:250},defaultCommandPatches:["bold","indent","insertHTML","insertList","outdent","createLink"],defaultPlugins:e.concat(r),defaultFormatters:["escapeHtmlCharactersFormatter","replaceNbspCharsFormatter"]};function i(t){return function(e){return-1!==t.indexOf(e)}}return{defaultOptions:n,checkOptions:function(e){var r=e||{};return r.defaultPlugins&&(r.defaultPlugins=r.defaultPlugins.filter(i(n.defaultPlugins))),r.defaultFormatters&&(r.defaultFormatters=r.defaultFormatters.filter(i(n.defaultFormatters))),Object.freeze(function(e,r){var n=t.fromJS(e);return t.fromJS(r).merge(n).toJS()}(r,n))},sortByPlugin:function(t){return function(e,r){return e===t?-1:r===t?1:0}},filterByBlockLevelMode:function(t){return function(n){return-1!==(t?e:r).indexOf(n)}},filterByPluginExists:i}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n;void 0===(n=function(){"use strict";return function(){return function(t){t.registerPlainTextFormatter(function(t){return t.replace(/\n([ \t]*\n)+/g,"</p><p>").replace(/\n/g,"<br>")})}}}.call(e,r,e,t))||(t.exports=n)},function(t,e,r){var n,i;n=[r(193),r(194),r(195),r(196)],void 0===(i=function(t,e,r,n){"use strict";return function(i){i=e.init(i);return function(e){var o=new e.api.Command("createLink");o.nodeName="A",o.execute=function(o){var s,a=new e.api.Selection,u=a.range,c=a.getContaining(function(t){return t.nodeName===this.nodeName}.bind(this)),l=c?c.href:"";if(s=o||window.prompt("Enter a link.",l),s=n.run(i.transforms.pre,s),t.emptyLink(s)){if(i&&i.validation){var f=i.validation(s);if(!f.valid)return void window.alert(f.message||"The link is not valid")}c&&(u.selectNode(c),a.selection.removeAllRanges(),a.selection.addRange(u)),s&&(t.hasKnownProtocol(s)||(s=r.process(window,s)),s=n.run(i.transforms.post,s),e.api.SimpleCommand.prototype.execute.call(this,s))}else window.alert("This link appears empty")},o.queryState=function(){return!!(new e.api.Selection).getContaining(function(t){return t.nodeName===this.nodeName}.bind(this))},e.commands.linkPrompt=o}}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n;void 0===(n=function(){"use strict";var t=[/^https?\:\/\//,/^mailto\:/,/^tel\:/];return{emptyLink:function(t){return/\w/.test(t)},hasKnownProtocol:function(e){return t.some(function(t){return t.test(e)})}}}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n;void 0===(n=function(){return{init:function(t){return(t=t||{}).transforms||(t.transforms={}),["pre","post"].forEach(function(e){t.transforms[e]||(t.transforms[e]=[])}),t}}}.apply(e,[]))||(t.exports=n)},function(t,e,r){(function(r){var n;void 0===(n=function(){var t=[{regexp:/@/,message:"The URL you entered appears to be an email address. Do you want to add the required mailto: prefix?",action:function(t){return"mailto:"+t}},{regexp:/\+?\d+/,message:"The URL you entered appears to be a telephone number. Do you want to add the required tel: prefix?",action:function(t){return"tel:"+t}},{regexp:/.+/,message:"The URL you entered appears to be a link. Do you want to add the required http:// prefix?",action:function(t){return"http://"+t}}];return{process:function(e,r){for(var n=0;n<t.length;n++){var i=t[n];if(i.regexp.test(r)&&e.confirm(i.message))return i.action(r)}return r}}}.apply(e,[]))||(t.exports=n)}).call(this,r(55))},function(t,e,r){var n;void 0===(n=function(){return{run:function(t,e){return t.reduce(function(t,e){return e(t)},e)}}}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n,i;n=[r(198),r(199),r(214)],void 0===(i=function(t,e,r){"use strict";return function(n){var i=e(r(n),{tags:{em:{class:"scribe-marker"},br:{}}});return function(e){var r=new t(i);e.registerHTMLFormatter("sanitize",r.clean.bind(r))}}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;void 0===(i="function"==typeof(n=function(){function t(t){var e=t.tags,r=Object.keys(e),n=r.map(function(t){return typeof e[t]}).every(function(t){return"object"===t||"boolean"===t||"function"===t});if(!n)throw new Error("The configuration was invalid");this.config=t}var e=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function r(t){return-1!==e.indexOf(t.nodeName)}var n=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function i(t){return-1!==n.indexOf(t.nodeName)}function o(t,e,r){return"function"==typeof t.tags[e]?t.tags[e](r):t.tags[e]}function s(t,e){return void 0===e||"boolean"==typeof e&&!e}function a(t,e,r){var n=t.name.toLowerCase();return!0!==e&&("function"==typeof e[n]?!e[n](t.value,r):void 0===e[n]||!1===e[n]||"string"==typeof e[n]&&e[n]!==t.value)}return t.prototype.clean=function(t){const e=document.implementation.createHTMLDocument(),r=e.createElement("div");return r.innerHTML=t,this._sanitize(e,r),r.innerHTML},t.prototype._sanitize=function(t,e){var n=function(t,e){return t.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}(t,e),u=n.firstChild();if(u)do{if(u.nodeType!==Node.TEXT_NODE){if(u.nodeType===Node.COMMENT_NODE){e.removeChild(u),this._sanitize(t,e);break}var c,l=i(u);l&&(c=Array.prototype.some.call(u.childNodes,r));var f=!!e.parentNode,h=r(e)&&r(u)&&f,p=u.nodeName.toLowerCase(),d=o(this.config,p,u);if(l&&c||s(0,d)||!this.config.keepNestedBlockElements&&h){if("SCRIPT"!==u.nodeName&&"STYLE"!==u.nodeName)for(;u.childNodes.length>0;)e.insertBefore(u.childNodes[0],u);e.removeChild(u),this._sanitize(t,e);break}for(var y=0;y<u.attributes.length;y+=1){var v=u.attributes[y];a(v,d,u)&&(u.removeAttribute(v.name),y-=1)}this._sanitize(t,u)}else if(""===u.data.trim()&&(u.previousElementSibling&&r(u.previousElementSibling)||u.nextElementSibling&&r(u.nextElementSibling))){e.removeChild(u),this._sanitize(t,e);break}}while(u=n.nextSibling())},t})?n.call(e,r,e,t):n)||(t.exports=i)},function(t,e,r){var n,i;n=[r(200),r(211)],void 0===(i=function(t,e){return e(t)}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(71),r(72),r(206),r(19),r(7),r(14),r(15),r(78)],void 0===(i=function(t,e,r,n,i,o,s,a){var u;return function c(l,f,h,p,d){if(!o(l))return l;var y=i(f.length)&&(n(f)||a(f));return(y?t:e)(f,function(t,e,n){if(s(t))return p||(p=[]),d||(d=[]),r(l,n,e,c,h,p,d);var i=l[e],o=h?h(i,t,e,l,n):u,a=void 0===o;a&&(o=t),!y&&void 0===o||!a&&(o==o?o===i:i!=i)||(l[e]=o)}),l}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(14)],void 0===(i=function(t){return function(e){return t(e)?e:Object(e)}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(203)],void 0===(i=function(t){var e=/[.*+?^${}()|[\]\/\\]/g,r=RegExp(e.source);return function(n){return(n=t(n))&&r.test(n)?n.replace(e,"\\$&"):n}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n;void 0===(n=function(){return function(t){return"string"==typeof t?t:null==t?"":t+""}}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n,i;n=[r(35),r(19),r(36),r(7),r(37),r(75)],void 0===(i=function(t,e,r,n,i,o){var s=Object.prototype.hasOwnProperty;return function(a){for(var u=i(a),c=u.length,l=c&&a.length,f=l&&n(l)&&(e(a)||o.nonEnumArgs&&t(a)),h=-1,p=[];++h<c;){var d=u[h];(f&&r(d,l)||s.call(a,d))&&p.push(d)}return p}}.apply(e,n))||(t.exports=i)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){var n,i;n=[r(77),r(35),r(19),r(7),r(207),r(78),r(210)],void 0===(i=function(t,e,r,n,i,o,s){var a;return function(u,c,l,f,h,p,d){for(var y=p.length,v=c[l];y--;)if(p[y]==v)return void(u[l]=d[y]);var g=u[l],m=h?h(g,v,l,u,c):a,b=void 0===m;b&&(m=v,n(v.length)&&(r(v)||o(v))?m=r(g)?g:g?t(g):[]:i(v)||e(v)?m=e(g)?s(g):i(g)?g:{}:b=!1),p.push(v),d.push(m),b?u[l]=f(m,v,h,p,d):(m==m?m!==g:g==g)&&(u[l]=m)}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(18),r(208)],void 0===(i=function(t,e){var r=Object.prototype.toString,n=t(n=Object.getPrototypeOf)&&n;return n?function(i){if(!i||"[object Object]"!=r.call(i))return!1;var o=i.valueOf,s=t(o)&&(s=n(o))&&n(s);return s?i==s||n(i)==s:e(i)}:e}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(209),r(15)],void 0===(i=function(t,e){var r="[object Object]",n=Object.prototype,i=n.hasOwnProperty,o=n.toString;return function(n){var s,a;return!(!e(n)||o.call(n)!=r||!(i.call(n,"constructor")||"function"!=typeof(s=n.constructor)||s instanceof s))&&(t(n,function(t,e){a=e}),void 0===a||i.call(n,a))}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(73),r(37)],void 0===(i=function(t,e){return function(r,n){return t(r,n,e)}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(79),r(37)],void 0===(i=function(t,e){return function(r){return t(r,e(r))}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(80),r(213)],void 0===(i=function(t,e){return function(r){return function(){var n=arguments,i=n.length,o=n[0];if(i<2||null==o)return o;var s=n[i-2],a=n[i-1],u=n[3];i>3&&"function"==typeof s?(s=t(s,a,5),i-=2):i-=(s=i>2&&"function"==typeof a?a:null)?1:0,u&&e(n[1],n[2],u)&&(s=3==i?null:s,i=2);for(var c=0;++c<i;){var l=n[c];l&&r(o,l,s)}return o}}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n;void 0===(n=function(){return function(t){return t}}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n,i;n=[r(36),r(7),r(14)],void 0===(i=function(t,e,r){return function(n,i,o){if(!r(o))return!1;var s=typeof i;if("number"==s)var a=o.length,u=e(a)&&t(i,a);else u="string"==s&&i in o;if(u){var c=o[i];return n==n?n===c:c!=c}return!1}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(215),r(80)],void 0===(i=function(t,e){return function(r,n,i){return n="function"==typeof n&&e(n,i,1),t(r,!0,n)}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(77),r(71),r(79),r(72),r(216),r(217),r(220),r(19),r(14),r(74)],void 0===(i=function(t,e,r,n,i,o,s,a,u,c){var l="[object Arguments]",f="[object Function]",h="[object Object]",p={};p[l]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object Date]"]=p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Number]"]=p[h]=p["[object RegExp]"]=p["[object String]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p["[object Error]"]=p[f]=p["[object Map]"]=p["[object Set]"]=p["[object WeakMap]"]=!1;var d=Object.prototype.toString;return function y(v,g,m,b,_,w,x){var S;if(m&&(S=_?m(v,b,_):m(v)),void 0!==S)return S;if(!u(v))return v;var E=a(v);if(E){if(S=i(v),!g)return t(v,S)}else{var k=d.call(v),T=k==f;if(k!=h&&k!=l&&(!T||_))return p[k]?o(v,k,g):_?v:{};if(S=s(T?{}:v),!g)return r(v,S,c(v))}w||(w=[]),x||(x=[]);for(var C=w.length;C--;)if(w[C]==v)return x[C];return w.push(v),x.push(S),(E?e:n)(v,function(t,e){S[e]=y(t,g,m,e,v,w,x)}),S}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n;void 0===(n=function(){var t=Object.prototype.hasOwnProperty;return function(e){var r=e.length,n=new e.constructor(r);return r&&"string"==typeof e[0]&&t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n,i;n=[r(218)],void 0===(i=function(t){var e="[object Boolean]",r="[object Date]",n="[object Number]",i="[object RegExp]",o="[object String]",s="[object ArrayBuffer]",a="[object Float32Array]",u="[object Float64Array]",c="[object Int8Array]",l="[object Int16Array]",f="[object Int32Array]",h="[object Uint8Array]",p="[object Uint8ClampedArray]",d="[object Uint16Array]",y="[object Uint32Array]",v=/\w*$/;return function(g,m,b){var _=g.constructor;switch(m){case s:return t(g);case e:case r:return new _(+g);case a:case u:case c:case l:case f:case h:case p:case d:case y:var w=g.buffer;return new _(b?t(w):w,g.byteOffset,g.length);case n:case o:return new _(g);case i:var x=new _(g.source,v.exec(g));x.lastIndex=g.lastIndex}return x}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(219),r(18),r(76)],void 0===(i=function(t,e,r){var n=e(n=r.ArrayBuffer)&&n,i=e(i=n&&new n(0).slice)&&i,o=Math.floor,s=e(s=r.Uint8Array)&&s,a=function(){try{var t=e(t=r.Float64Array)&&t,i=new t(new n(10),0,1)&&t}catch(t){}return i}(),u=a?a.BYTES_PER_ELEMENT:0;function c(t){return i.call(t,0)}return i||(c=n&&s?function(t){var e=t.byteLength,r=a?o(e/u):0,i=r*u,c=new n(e);if(r){var l=new a(c,0,r);l.set(new a(t,0,r))}return e!=i&&(l=new s(c,i)).set(new s(t,i)),c}:t(null)),c}.apply(e,n))||(t.exports=i)},function(t,e,r){var n;void 0===(n=function(){return function(t){return function(){return t}}}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n;void 0===(n=function(){return function(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}}.apply(e,[]))||(t.exports=n)},function(t,e,r){"use strict";var n=r(13);t.exports={mixinName:"Textable",initializeTextable:function(){this.el.classList.add("st-block--textable")},focusAtEnd:function(){this.focus(),this.selectText()},selectText:function(){var t=document.createRange();this._scribe.allowsBlockElements()?t.setStartAfter(this._scribe.el.firstChild,0):t.selectNodeContents(this._scribe.el),t.collapse(!1);var e=new this._scribe.api.Selection;e.selection.removeAllRanges(),e.selection.addRange(t)},getScribeInnerContent:function(t){var e="";if(""!==this._scribe.getTextContent()){var r=document.createElement("div");return r.innerHTML=this.getTextBlockHTML(),(e=r.children&&Array.prototype.slice.call(r.children).reduce(function(t,e){return t+e.innerHTML},"")||r.innerHTML).replace(/^[\s\uFEFF\xA0]+|$/g,"")}return e},getCaretPositionAtEnd:function(){return this.selectText(),n(this._scribe.el)},appendContent:function(t,e){e=e||{},this.focusAtEnd();var r=this.getCaretPositionAtEnd(),i=this.getScribeInnerContent();""!==i&&(t=i+t),""===t&&(window.navigator.userAgent.match(/MSIE 10/)||(t="<br>")),this.setTextBlockHTML(t),this.focus(),e.keepCaretPosition&&0!==r.start&&0!==r.end&&n(this._scribe.el,{start:r.start,end:r.end})}}},function(t,e,r){"use strict";var n=r(8),i=r(21),o=r(90),s=r(228),a=r(40),u=r(41);t.exports=n.extend({type:"text",editorHTML:'<div class="st-text-block" contenteditable="true"></div>',icon_name:"text",mergeable:!0,textable:!0,toolbarEnabled:!1,configureScribe:function(t){t.use(new o(this)),t.use(new s(this)),t.use(new a(this)),t.use(new u(this)),t.on("content-changed",this.toggleEmptyClass.bind(this))},scribeOptions:{allowBlockElements:!0,tags:{p:!0}},loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(i(t.text,this.type)):this.setTextBlockHTML(t.text)},onBlockRender:function(){this.toggleEmptyClass()},toggleEmptyClass:function(){this.el.classList.toggle("st-block--empty",this.isEmpty())},isEmpty:function(){return""===this._scribe.getTextContent()},asClipboardHTML:function(){var t=this.getBlockData();return"".concat(t.text)}})},function(t,e,r){"use strict";var n=r(224),i=r(88),o=r(225);t.exports=function(t){return"\n    <div class='st-block__inner'>\n      ".concat(t,"\n    </div>\n    ").concat(o(),"\n    ").concat(n(),"\n    ").concat(i(),"\n  ")}},function(t,e,r){"use strict";var n=r(1);t.exports=function(){return'\n    <div class="st-block-addition-top">\n      <div class="st-block-addition-top__button" type="button"></div>\n      <div class="st-block-addition-top__icon">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'.concat(n.defaults.iconUrl,'#add-block"/>\n        </svg>\n      </div>\n    </div>\n  ')}},function(t,e,r){"use strict";var n=r(1);t.exports=function(){return'\n    <button class="st-block-replacer" type="button">\n      <span class="st-block-replacer__button">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'.concat(n.defaults.iconUrl,'#add-block"/>\n        </svg>\n      </span>\n    </button>\n  ')}},function(t,e,r){"use strict";r.r(e),r.d(e,"Spinner",function(){return o});var n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},o=function(){function t(t){void 0===t&&(t={}),this.opts=n({},i,t)}return t.prototype.spin=function(t){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),s(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),t&&t.insertBefore(this.el,t.firstChild||null),function(t,e){var r=Math.round(e.corners*e.width*500)/1e3+"px",n="none";!0===e.shadow?n="0 2px 4px #000":"string"==typeof e.shadow&&(n=e.shadow);for(var i=function(t){for(var e=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,r=[],n=0,i=t.split(",");n<i.length;n++){var o=i[n],s=o.match(e);if(null!==s){var a=+s[2],u=+s[5],c=s[4],l=s[7];0!==a||c||(c=l),0!==u||l||(l=c),c===l&&r.push({prefix:s[1]||"",x:a,y:u,xUnits:c,yUnits:l,end:s[8]})}}return r}(n),o=0;o<e.lines;o++){var c=~~(360/e.lines*o+e.rotate),l=s(document.createElement("div"),{position:"absolute",top:-e.width/2+"px",width:e.length+e.width+"px",height:e.width+"px",background:a(e.fadeColor,o),borderRadius:r,transformOrigin:"left",transform:"rotate("+c+"deg) translateX("+e.radius+"px)"}),f=o*e.direction/e.lines/e.speed;f-=1/e.speed;var h=s(document.createElement("div"),{width:"100%",height:"100%",background:a(e.color,o),borderRadius:r,boxShadow:u(i,c),animation:1/e.speed+"s linear "+f+"s infinite "+e.animation});l.appendChild(h),t.appendChild(l)}}(this.el,this.opts),this},t.prototype.stop=function(){return this.el&&("undefined"!=typeof requestAnimationFrame?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},t}();function s(t,e){for(var r in e)t.style[r]=e[r];return t}function a(t,e){return"string"==typeof t?t:t[e%t.length]}function u(t,e){for(var r=[],n=0,i=t;n<i.length;n++){var o=i[n],s=c(o.x,o.y,e);r.push(o.prefix+s[0]+o.xUnits+" "+s[1]+o.yUnits+o.end)}return r.join(", ")}function c(t,e,r){var n=r*Math.PI/180,i=Math.sin(n),o=Math.cos(n);return[Math.round(1e3*(t*o+e*i))/1e3,Math.round(1e3*(-t*i+e*o))/1e3]}},function(t,e,r){"use strict";t.exports=function(){return'\n    <div class="st-block__ui-delete-controls">\n      <label class="st-block__delete-label">\n        '.concat(i18n.t("general:delete"),"\n      </label>\n      <button class='st-block-ui__confirm js-st-block-confirm-delete' type=\"button\">\n        ").concat(i18n.t("general:yes"),"\n      </button>\n      <button class='st-block-ui__confirm js-st-block-deny-delete' type=\"button\">\n        ").concat(i18n.t("general:no"),"\n      </button>\n    </div>\n  ")}},function(t,e,r){"use strict";function n(t,e){var r={format:"html",listItems:e.map(function(t){return{content:t.innerHTML.substr(2)}}).reverse()};t.mediator.trigger("block:create","List",r,t.el,{autoFocus:!0})}function i(t,e){return e.length>0&&n(t,e),[]}t.exports=function(t){function e(e){return-1!==t.editorOptions.blockTypes.indexOf("List")&&e.className.split(" ").filter(function(t){return t.startsWith("MsoListParagraph")}).length>0}return function(r){var o=new r.api.CommandPatch("insertHTML");o.execute=function(o){var s=this;r.transactionManager.run(function(){r.api.CommandPatch.prototype.execute.call(s,o);var a=document.createElement("div");if(a.innerHTML=r.getContent(),a.childNodes.length>1){var u,c=[].slice.call(a.childNodes),l=[],f=!1;e(c[0])?(f=!0,r.setContent("")):r.setContent(c.shift().innerHTML),t.mediator.on("block:created",function e(r){u=r,t.mediator.off("block:created",e)}),c.reverse().forEach(function(r){if(e(r))l.push(r);else{l=i(t,l);var n={format:"html",text:r.innerHTML};t.mediator.trigger("block:create","Text",n,t.el,{autoFocus:!0})}}),l=i(t,l),f&&t.mediator.trigger("block:remove",t.blockID),u.focusAtEnd()}else{var h=a.firstChild;e(h)&&(r.setContent(""),n(t,[h]),t.mediator.trigger("block:remove",t.blockID))}})},r.commandPatches.insertHTML=o}}},function(t,e,r){"use strict";var n=r(0),i=r(8),o=r(21),s=r(40),a=r(41),u=n.template(['<blockquote class="st-required st-text-block st-text-block--quote" contenteditable="true"></blockquote>','<label class="st-input-label"> <%= i18n.t("blocks:quote:credit_field") %></label>','<input maxlength="140" name="cite" placeholder="<%= i18n.t("blocks:quote:credit_field") %>"',' class="st-input-string js-cite-input" type="text" />'].join("\n"));t.exports=i.extend({type:"quote",icon_name:"quote",mergeable:!0,textable:!0,toolbarEnabled:!1,editorHTML:function(){return u(this)},configureScribe:function(t){t.use(new s(this)),t.use(new a(this))},loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(o(t.text,this.type)):this.setTextBlockHTML(t.text),t.cite&&(this.$(".js-cite-input")[0].value=t.cite)},asClipboardHTML:function(){var t=this.getBlockData();return"<blockquote>".concat(t.text,"<cite>- ").concat(t.cite,"</cite></blockquote>")}})},function(t,e,r){"use strict";var n=r(3),i=r(8);t.exports=i.extend({type:"image",droppable:!0,uploadable:!0,icon_name:"image",loadData:function(t){this.editor.innerHTML="",this.editor.appendChild(n.createElement("img",{src:t.file.url}))},onDrop:function(t){var e=t.files[0],r="undefined"!=typeof URL?URL:"undefined"!=typeof webkitURL?webkitURL:null;/image/.test(e.type)&&(this.loading(),n.hide(this.inputs),this.editor.innerHTML="",this.editor.appendChild(n.createElement("img",{src:r.createObjectURL(e)})),n.show(this.editor),this.uploader(e,function(t){this.setData(t),this.ready()},function(t){this.addMessage(i18n.t("blocks:image:upload_error")),this.ready()}))},asClipboardHTML:function(){var t=this.getBlockData(),e=t.file&&t.file.url;if(e)return'<img src="'.concat(e,'" alt="').concat(e,'" />')}})},function(t,e,r){"use strict";var n=r(8),i=r(21),o=r(90),s=r(40),a=r(41);t.exports=n.extend({type:"heading",editorHTML:'<h2 class="st-required st-text-block st-text-block--heading" contenteditable="true"></h2>',configureScribe:function(t){t.use(new o(this)),t.use(new s(this)),t.use(new a(this)),t.on("content-changed",this.toggleEmptyClass.bind(this))},mergeable:!0,textable:!0,toolbarEnabled:!1,scribeOptions:{allowBlockElements:!1,tags:{p:!1}},icon_name:"heading",loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(i(t.text,this.type)):this.setTextBlockHTML(t.text)},onBlockRender:function(){this.toggleEmptyClass()},toggleEmptyClass:function(){this.el.classList.toggle("st-block--empty",0===this._scribe.getTextContent().length)},asClipboardHTML:function(){var t=this.getBlockData();return"<h2>".concat(t.text,"</h2>")}})},function(t,e,r){"use strict";var n=r(13),i=r(8),o=r(21),s=r(233),a=r(39).getTotalLength;t.exports=i.extend({type:"list",icon_name:"list",multi_editable:!0,mergeable:!0,scribeOptions:{allowBlockElements:!1,tags:{p:!1}},configureScribe:function(t){t.use(new s(this))},editorHTML:'<ul class="st-list-block__list"></ul>',listItemEditorHTML:'<li class="st-list-block__item"><div class="st-list-block__editor st-block__editor"></div></li>',initialize:function(){this.editorIds=[]},beforeLoadingData:function(){this.setupListVariables(),this.loadData(this._getData())},onBlockRender:function(){this.ul||this.setupListVariables(),this.editorIds.length<1&&this.addListItem()},setupListVariables:function(){this.ul=this.inner.querySelector("ul")},loadData:function(t){var e=this;this.options.convertFromMarkdown&&"html"!==t.format&&(t=this.parseFromMarkdown(t.text)),t.listItems.length?t.listItems.forEach(function(t){e.addListItem(t.content)}):e.addListItem()},parseFromMarkdown:function(t){var e=t.replace(/^ - (.+)$/gm,"$1").split("\n");return{listItems:e=e.filter(function(t){return t.length}).map(function(t){return{content:o(t,this.type)}}.bind(this)),format:"html"}},_serializeData:function(){var t={format:"html",listItems:[]};return this.editorIds.forEach(function(e){var r={content:this.getTextEditor(e).scribe.getContent()};t.listItems.push(r)}.bind(this)),t},addListItemAfterCurrent:function(t){this.addListItem(t,this.getCurrentTextEditor())},addListItem:function(t,e){"<br>"===(t=t||"").trim()&&(t="");var r=this.newTextEditor(this.listItemEditorHTML,t);if(e&&this.ul.lastchild!==e.node){var n=e.node.nextSibling;this.ul.insertBefore(r.node,n);var i=this.editorIds.indexOf(e.id)+1;this.editorIds.splice(i,0,r.id)}else this.ul.appendChild(r.node),this.editorIds.push(r.id);this.focusOn(r)},focus:function(){var t=this.getCurrentTextEditor();t||(t=this.getTextEditor(this.editorIds[0])),this.focusOn(t)},focusOnNeighbor:function(t){var e=this.previousListItem()||this.nextListItem();e&&this.focusOn(e)},focusOn:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.scribe,o=new i.api.Selection,s=i.el.lastChild;if(o.range&&(e=o.range.cloneRange()),t.el.focus(),e&&(e.setStartAfter(s,1),e.collapse(!1)),r&&r.focusAtEnd){var u=a(i);u>0&&n(i.el,{start:u})}r&&r.caretPosition&&n(i.el,{start:r.caretPosition})},focusAtEnd:function(){var t=this.editorIds[this.editorIds.length-1];this.appendToTextEditor(t)},removeCurrentListItem:function(){if(1!==this.editorIds.length){var t=this.getCurrentTextEditor(),e=this.editorIds.indexOf(t.id);this.focusOnNeighbor(t),this.editorIds.splice(e,1),this.ul.removeChild(t.node),this.removeTextEditor(t.id)}},appendToCurrentItem:function(t){this.appendToTextEditor(this.getCurrentTextEditor().id,t)},isLastListItem:function(){return 1===this.editorIds.length},nextListItem:function(){var t=this.editorIds.indexOf(this.getCurrentTextEditor().id),e=this.editorIds[t+1];return void 0!==e?this.getTextEditor(e):null},previousListItem:function(){var t=this.editorIds.indexOf(this.getCurrentTextEditor().id),e=this.editorIds[t-1];return void 0!==e?this.getTextEditor(e):null},asClipboardHTML:function(){var t=this.getBlockData().listItems.map(function(t){return"<li>".concat(t.content,"</li>")}).join("\n");return"<ul>".concat(t,"</ul>")}})},function(t,e,r){"use strict";r(13);var n=r(39),i=(n.getTotalLength,n.isAtStart),o=n.isAtEnd,s=n.selectToEnd;t.exports=function(t){return function(e){e.el.addEventListener("keydown",function(r){var n,a,u;if(!t.supressKeyListeners)if("Enter"!==r.key||r.shiftKey){if(["Left","ArrowLeft","Up","ArrowUp"].indexOf(r.key)>-1&&i(e)){r.preventDefault();var c=t.previousListItem();c?t.focusOn(c,{focusAtEnd:!0}):t.mediator.trigger("block:focusPrevious",t.blockID)}else if(["Right","ArrowRight","Down","ArrowDown"].indexOf(r.key)>-1&&o(e)){r.preventDefault();var l=t.nextListItem();l?t.focusOn(l):t.mediator.trigger("block:focusNext",t.blockID)}else if("Backspace"===r.key&&i(e))if(r.preventDefault(),t.previousListItem())n=e.getContent(),t.removeCurrentListItem(),t.appendToCurrentItem(n);else{var f={format:"html",text:e.getContent()};t.removeCurrentListItem(),t.mediator.trigger("block:createBefore","Text",f,t,{autoFocus:!0}),t.isLastListItem()&&t.mediator.trigger("block:remove",t.blockID)}}else if(r.preventDefault(),0===e.getTextContent().length){var h=t.nextListItem();if(h){var p={format:"html",listItems:[]};for(t.removeCurrentListItem(),t.focusOn(h);h;)p.listItems.push({content:h.scribe.getContent()}),t.focusOn(h),t.removeCurrentListItem(),h=t.nextListItem();t.mediator.trigger("block:create","List",p,t.el,{autoFocus:!0}),t.mediator.trigger("block:create","Text",null,t.el,{autoFocus:!0})}else t.removeCurrentListItem(),t.mediator.trigger("block:create","Text",null,t.el,{autoFocus:!0})}else a=s(e),(u=document.createElement("div")).appendChild(a.extractContents()),n=u.innerHTML,t.addListItemAfterCurrent(n)})}}},function(t,e,r){"use strict";var n=r(0),i=r(2),o=r(3),s=r(8),a=n.template(["<blockquote class='twitter-tweet' align='center'>","<p><%= text %></p>","&mdash; <%= user.name %> (@<%= user.screen_name %>)","<a href='<%= status_url %>' data-datetime='<%= created_at %>'><%= created_at %></a>","</blockquote>"].join("\n"));t.exports=s.extend({type:"tweet",icon_name:"tweet",droppable:!0,pastable:!0,fetchable:!0,drop_options:{re_render_on_reorder:!0},fetchUrl:function(t){return"/tweets/?tweet_id="+t},loadData:function(t){n.isUndefined(t.status_url)&&(t.status_url="");var e=this.inner.querySelector("twitterwidget");o.remove(e),this.inner.insertAdjacentHTML("afterbegin",a(t));var r=o.createElement("script",{src:"//platform.twitter.com/widgets.js"});this.inner.appendChild(r)},onContentPasted:function(t){var e=t.target.value;this.handleTwitterDropPaste(e)},handleTwitterDropPaste:function(t){if(this.validTweetUrl(t)){var e=t.match(/[^\/]+$/);n.isEmpty(e)||(this.loading(),e=e[0],this.fetch(this.fetchUrl(e),{dataType:"json"},this.onTweetSuccess,this.onTweetFail))}else i.log("Invalid Tweet URL")},validTweetUrl:function(t){return i.isURI(t)&&-1!==t.indexOf("twitter")&&-1!==t.indexOf("status")},onTweetSuccess:function(t){var e={user:{profile_image_url:t.user.profile_image_url,profile_image_url_https:t.user.profile_image_url_https,screen_name:t.user.screen_name,name:t.user.name},id:t.id_str,text:t.text,created_at:t.created_at,entities:t.entities,status_url:"https://twitter.com/"+t.user.screen_name+"/status/"+t.id_str};this.setAndLoadData(e),this.ready()},onTweetFail:function(){this.addMessage(i18n.t("blocks:tweet:fetch_error")),this.ready()},onDrop:function(t){var e=t.getData("text/plain");this.handleTwitterDropPaste(e)},asClipboardHTML:function(){var t=this.getBlockData();if(t.status_url)return"<p>".concat(t.status_url,"</p>")}})},function(t,e,r){"use strict";var n=r(0),i=r(2),o=r(8);t.exports=o.extend({providers:{vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo\.co(?:.+(?:\/)([^\/].*)+$)/,html:'<iframe src="<%= protocol %>//player.vimeo.com/video/<%= remote_id %>?title=0&byline=0" width="580" height="320" frameborder="0"></iframe>',url:function(t){return"https://player.vimeo.com/video/".concat(t)}},youtube:{regex:/^.*(?:(?:youtu\.be\/)|(?:youtube\.com)\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)/,html:'<iframe src="<%= protocol %>//www.youtube.com/embed/<%= remote_id %>" width="580" height="320" frameborder="0" allowfullscreen></iframe>',url:function(t){return"https://www.youtube.com/embed/".concat(t)}}},type:"video",droppable:!0,pastable:!0,icon_name:"video",loadData:function(t){if(this.providers.hasOwnProperty(t.source)){var e=this.providers[t.source],r="file:"===window.location.protocol?"http:":window.location.protocol,i=e.square?"with-square-media":"with-sixteen-by-nine-media";this.editor.classList.add("st-block__editor--"+i),this.editor.innerHTML=n.template(e.html,{protocol:r,remote_id:t.remote_id,width:this.editor.style.width})}},onContentPasted:function(t){this.handleDropPaste(t.target.value)},matchVideoProvider:function(t,e,r){var i=t.regex.exec(r);return null==i||n.isUndefined(i[1])?{}:{source:e,remote_id:i[1]}},handleDropPaste:function(t){if(i.isURI(t))for(var e in this.providers)this.providers.hasOwnProperty(e)&&this.setAndLoadData(this.matchVideoProvider(this.providers[e],e,t))},onDrop:function(t){var e=t.getData("text/plain");this.handleDropPaste(e)},asClipboardHTML:function(){var t=this.getBlockData(),e=this.providers[t.source].url(t.remote_id);return"<p>".concat(e,"</p>")}})},function(t,e,r){"use strict";var n=r(1);t.exports=function(t){var e=t.name,r=(t.text,t.cmd),i=t.iconName;return'\n    <button type="button" class="st-format-btn st-format-btn--'.concat(e,'" data-cmd="').concat(r,'">\n      <svg role="img" class="st-icon">\n        <use xlink:href="').concat(n.defaults.iconUrl,"#").concat(i,'"/>\n      </svg>\n    </button>\n  ')}},function(t,e,r){"use strict";var n=r(0),i=r(1),o=r(2),s=r(3),a=r(9),u=r(4),c=r(92),l=r(238),f=r(240),h=r(242),p=r(86),d=r(91),y=r(61),v=r(243),g=r(82),m=r(244),b=function(t){this.initialize(t)};Object.assign(b.prototype,r(6),r(9),{bound:["onFormSubmit","hideAllTheThings","changeBlockPosition","removeBlockDragOver","blockLimitReached","blockOrderUpdated","onBlockCountChange","renderBlockPositionerSelect"],events:{"block:reorder:dragend":"removeBlockDragOver","block:reorder:dropped":"removeBlockDragOver","block:content:dropped":"removeBlockDragOver"},initialize:function(t){if(o.log("Init SirTrevor.Editor"),this.options=Object.assign({},i.defaults,t||{}),this.ID=n.uniqueId("st-editor-"),!this._ensureAndSetElements())return!1;!n.isUndefined(this.options.onEditorRender)&&n.isFunction(this.options.onEditorRender)&&(this.onEditorRender=this.options.onEditorRender),this.mediator=Object.assign({},a),this._bindFunctions(),i.instances.push(this),this.build(),c.bindFormSubmit(this.form)},build:function(){var t=this;s.hide(this.el),this.errorHandler=new v(this.outer,this.mediator,this.options.errorsContainer),this.store=new y(this.el.value,this.mediator),this.blockManager=new p(this),this.blockAddition=f.create(this),this.BlockAdditionTop=h.create(this),this.blockControls=l.create(this),this.blockPositionerSelect=new g(this.mediator),this.selectionHandler=new m(this.outer,this.mediator,this),this.formatBar=new d(this.options.formatBar,this.mediator,this),this.mediator.on("block:changePosition",this.changeBlockPosition),this.mediator.on("block:limitReached",this.blockLimitReached),this.mediator.on("block:rerender",this.blockOrderUpdated),this.mediator.on("block:create",this.blockOrderUpdated),this.mediator.on("block:remove",this.blockOrderUpdated),this.mediator.on("block:replace",this.blockOrderUpdated),this.mediator.on("block:countUpdate",this.onBlockCountChange),this.mediator.on("block-positioner-select:render",this.renderBlockPositionerSelect),this.dataStore="Please use store.retrieve();",this._setEvents(),window.addEventListener("click",this.hideAllTheThings),document.body.addEventListener("keydown",this.disableBackButton),i.selectionMouse&&window.addEventListener("mouseup",function(){window.mouseDown=!1,t.mediator.trigger("selection:complete")}),this.createBlocks(),this.wrapper.classList.add("st-ready"),n.isUndefined(this.onEditorRender)||this.onEditorRender()},createBlocks:function(){var t=this.store.retrieve();if(t.data.length>0?t.data.forEach(function(t){this.mediator.trigger("block:create",t.type,t.data)},this):!1!==this.options.defaultType&&this.mediator.trigger("block:create",this.options.defaultType,{}),this.options.focusOnInit){var e=this.wrapper.querySelectorAll(".st-block")[0];if(e)this.blockManager.findBlockById(e.getAttribute("id")).focus()}},destroy:function(){this.formatBar.destroy(),this.blockAddition.destroy(),this.blockControls.destroy(),this.blockManager.blocks.forEach(function(t){this.mediator.trigger("block:remove",t.blockID)},this),this.mediator.stopListening(),this.stopListening(),i.instances=i.instances.filter(function(t){return t.ID!==this.ID},this),window.removeEventListener("click",this.hideAllTheThings),document.body.removeEventListener("keydown",this.disableBackButton),this.store.reset(),s.replaceWith(this.outer,this.el)},getData:function(){return this.onFormSubmit(),this.store.retrieve()},reinitialize:function(t){this.destroy(),this.initialize(t||this.options)},restore:function(t){this.el.value=t,this.reinitialize()},blockLimitReached:function(t){this.wrapper.classList.toggle("st--block-limit-reached",t)},blockOrderUpdated:function(){var t=this.wrapper.querySelectorAll(".st-block")[0],e=!1;if(t){var r=this.blockManager.findBlockById(t.getAttribute("id"));e=r&&r.textable}this._toggleHideTopControls(e)},_toggleHideTopControls:function(t){this.wrapper.classList.toggle("st--hide-top-controls",t)},onBlockCountChange:function(t){this.blockPositionerSelect.onBlockCountChange(t)},renderBlockPositionerSelect:function(t){this.blockPositionerSelect.renderInBlock(t)},_setEvents:function(){Object.keys(this.events).forEach(function(t){u.on(t,this[this.events[t]],this)},this)},hideAllTheThings:function(t){this.blockControls.hide(),this.blockAddition.hide(),null===document.activeElement.getAttribute("contenteditable")&&this.formatBar.hide();Array.prototype.forEach.call(this.wrapper.querySelectorAll(".st-block__ui-delete-controls"),function(t){t.classList.remove("active")})},store:function(t,e){return o.log("The store method has been removed, please call store[methodName]"),this.store[t].call(this,e||{})},removeBlockDragOver:function(){var t=this.outer.querySelector(".st-drag-over");t&&t.classList.remove("st-drag-over")},changeBlockPosition:function(t,e){e-=1;var r=this.blockManager.getBlockPosition(t),n=this.wrapper.querySelectorAll(".st-block")[e];n&&n.getAttribute("id")!==t.getAttribute("id")&&(this.hideAllTheThings(),r>e?n.parentNode.insertBefore(t,n):s.insertAfter(t,n))},onFormSubmit:function(t){return t=!1!==t,o.log("Handling form submission for Editor "+this.ID),this.mediator.trigger("errors:reset"),this.store.reset(),this.validateBlocks(t),this.blockManager.validateBlockTypesExist(t),this.mediator.trigger("errors:render"),this.el.value=this.store.toString(),this.errorHandler.errors.length},validateBlocks:function(t){var e=this;Array.prototype.forEach.call(this.wrapper.querySelectorAll(".st-block"),function(r,i){var o=e.blockManager.findBlockById(r.getAttribute("id"));n.isUndefined(o)||e.validateAndSaveBlock(o,t)})},validateAndSaveBlock:function(t,e){if(!i.skipValidation&&e&&!t.valid())return this.mediator.trigger("errors:add",{text:n.result(t,"validationFailMsg")}),void o.log("Block "+t.blockID+" failed validation");if("text"!==t.type||!t.isEmpty()){var r=t.getData();o.log("Adding data for block "+t.blockID+" to block store:",r),this.store.addData(r)}},disableBackButton:function(t){var e=t.target||t.srcElement;if(8===t.keyCode){if(e.getAttribute("contenteditable")||"INPUT"===e.tagName||"TEXTAREA"===e.tagName)return;t.preventDefault()}},findBlockById:function(t){return this.blockManager.findBlockById(t)},getBlocksByType:function(t){return this.blockManager.getBlocksByType(t)},getBlocksByIDs:function(t){return this.blockManager.getBlocksByIDs(t)},getBlockPosition:function(t){return o.log("This method has been moved to blockManager.getBlockPosition()"),this.blockManager.getBlockPosition(t)},getBlocks:function(){var t=this;return[].map.call(this.wrapper.querySelectorAll(".st-block"),function(e){return t.findBlockById(e.getAttribute("id"))})},_ensureAndSetElements:function(){if(n.isUndefined(this.options.el))return o.log("You must provide an el"),!1;this.el=this.options.el,this.form=s.getClosest(this.el,"form");var t=s.createElement("div",{id:this.ID,class:"st-outer notranslate",dropzone:"copy link move"}),e=s.createElement("div",{class:"st-blocks"});return s.wrap(s.wrap(this.el,t),e),this.outer=this.form.querySelector("#"+this.ID),this.wrapper=this.outer.querySelector(".st-blocks"),!0}}),t.exports=b},function(t,e,r){"use strict";var n=r(20),i=r(10),o=r(239);function s(t,e){var r=document.createElement("div");r.className="st-block-controls__buttons",r.innerHTML=function(t,e){return e.reduce(function(e,r){return t.hasOwnProperty(r)&&t[r].prototype.toolbarEnabled?e+o(t[r].prototype):e},"")}.apply(null,arguments);var n=document.createElement("div");return n.className="st-block-controls",n.appendChild(r),n}t.exports.create=function(t){var e=s(n,t.blockManager.blockTypes);function r(){var t=e.parentNode;if(t)return t.removeChild(e),t.classList.remove("st-block--controls-active"),t}return i.delegate(t.wrapper,".st-block-replacer","click",function(t){t.stopPropagation();var n=this.parentNode;n&&r()!==n&&(n.appendChild(e),n.classList.toggle("st-block--controls-active"))}),i.delegate(t.wrapper,".st-block-controls__button","click",function(r){t.mediator.trigger("block:replace",e.parentNode,this.getAttribute("data-type"))}),{el:e,hide:r,destroy:function(){t=null,e=null}}}},function(t,e,r){"use strict";var n=r(1);t.exports=function(t){return'\n    <button class="st-block-controls__button" data-type="'.concat(t.type,'" type="button">\n      <svg role="img" class="st-icon">\n        <use xlink:href="').concat(n.defaults.iconUrl,"#").concat(t.icon_name,'"/>\n      </svg>\n      ').concat(t.title(),"\n    </button>\n  ")}},function(t,e,r){"use strict";var n=r(34),i=r(4),o=r(3),s=r(10),a=r(241);t.exports.create=function(t){t.wrapper.insertAdjacentHTML("beforeend",a());var e=t.wrapper.querySelector(".st-top-controls");return n.dropArea(e),e.addEventListener("drop",function(r){r.preventDefault();var n=e,s=r.dataTransfer.getData("text/plain"),a=document.querySelector("#"+s);n.id!==s&&o.insertAfter(a,n),t.mediator.trigger("block:rerender",s),i.trigger("block:reorder:dropped",s)}),s.delegate(t.wrapper,".st-block-addition","click",function(e){t.mediator.trigger("block:create","Text",null,this.parentNode.parentNode.id?this.parentNode.parentNode:this.parentNode)}),{destroy:function(){t=null},hide:function(){}}}},function(t,e,r){"use strict";var n=r(88);t.exports=function(){return'\n    <div id="st_top" class="st-top-controls">\n      '.concat(n(),"\n    </div>\n  ")}},function(t,e,r){"use strict";var n=r(10);t.exports.create=function(t){function e(e){t.mediator.trigger("block:create","Text",null,this.parentNode.parentNode.previousSibling,{autoFocus:!0})}return n.delegate(t.wrapper,".st-block-addition-top__button","click",e),n.delegate(t.wrapper,".st-block-addition-top__icon","click",e),{destroy:function(){t=null},hide:function(){}}}},function(t,e,r){"use strict";var n=r(0),i=r(3),o=function(t,e,r){this.wrapper=t,this.mediator=e,this.el=r,n.isUndefined(this.el)&&(this._ensureElement(),this.wrapper.insertBefore(this.el,this.wrapper.firstChild)),i.hide(this.el),this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};Object.assign(o.prototype,r(6),r(29),r(11),{errors:[],className:"st-errors",eventNamespace:"errors",mediatedEvents:{reset:"reset",add:"addMessage",render:"render"},initialize:function(){var t=document.createElement("ul"),e=document.createElement("p");e.innerHTML=i18n.t("errors:title"),this.el.appendChild(e).appendChild(t),this.list=t},render:function(){if(0===this.errors.length)return!1;this.errors.forEach(this.createErrorItem,this),i.show(this.el)},createErrorItem:function(t){var e=document.createElement("li");e.classList.add("st-errors__msg"),e.innerHTML=t.text,this.list.appendChild(e)},addMessage:function(t){this.errors.push(t)},reset:function(){if(0===this.errors.length)return!1;this.errors=[],this.list.innerHTML="",i.hide(this.el)}}),t.exports=o},function(t,e,r){"use strict";r(0);var n=r(3),i=function(t,e,r){this.wrapper=t,this.mediator=e,this.editor=r,this.options=r.options,this.startIndex=void 0,this.endIndex=void 0,this.selecting=!1,this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};Object.assign(i.prototype,r(6),r(29),{eventNamespace:"selection",mediatedEvents:{start:"start",render:"render",complete:"complete",all:"all",copy:"copy",update:"update",delete:"delete",cancel:"cancel"},cancelSelectAll:function(){if(n.getClosest(document.activeElement,"input")!==document.body)return!0;var t=n.getClosest(document.activeElement,".st-outer");return!(!this.options.selectionLimitToEditor||t===this.wrapper)||void 0},initialize:function(){var t=this;window.addEventListener("keydown",function(e){if((e=e||window.event).ctrlKey||e.metaKey)if(t.options.selectionCopy&&"a"===e.key){if(t.cancelSelectAll())return;e.preventDefault(),t.mediator.trigger("selection:all")}else if(t.options.selectionCopy&&"c"===e.key){if(!t.selecting)return;e.preventDefault(),t.mediator.trigger("selection:copy")}else t.options.selectionDelete&&"x"===e.key&&t.mediator.trigger("selection:delete")},!1),window.addEventListener("click",function(){t.mediator.trigger("selection:complete"),t.mediator.trigger("selection:cancel")})},start:function(t){this.startIndex=this.endIndex=t,window.mouseDown=!0,this.mediator.trigger("selection:render"),window.addEventListener("mousemove",this.onMouseMove)},onMouseMove:function(){},update:function(t){this.endIndex=t,this.selecting=this.startIndex!==this.endIndex,this.mediator.trigger("selection:render")},complete:function(){this.selecting=!1,window.removeEventListener("mousemove",this.onMouseMove)},all:function(){this.removeNativeSelection();var t=this.editor.getBlocks();this.selecting=!0,this.startIndex=0,this.endIndex=t.length,this.mediator.trigger("selection:render")},cancel:function(){this.mouseDown=!1,this.selecting=!1,this.render()},removeNativeSelection:function(){var t=window.getSelection?window.getSelection():document.selection;t&&(t.removeAllRanges?t.removeAllRanges():t.empty&&t.empty()),document.activeElement&&document.activeElement.blur()},render:function(){var t=this;this.editor.getBlocks().forEach(function(e,r){e.select(t.selecting&&t.indexSelected(r))})},getClipboardData:function(){var t=this;this.editor.getData();var e=[];return this.editor.getBlocks().forEach(function(r,n){t.indexSelected(n)&&e.push(r.asClipboardHTML())}),e.join("\n")},copy:function(){var t=document.body.querySelector(".st-copy-area");t||(t=n.createElement("div",{contenteditable:!0,class:"st-copy-area st-utils__hidden"}),document.body.appendChild(t)),t.innerHTML=this.getClipboardData();var e=window.getSelection(),r=document.createRange();r.selectNodeContents(t),e.removeAllRanges(),e.addRange(r);try{document.execCommand("copy"),t.blur()}catch(t){console.log("Copy could not be performed")}},delete:function(){var t=this;this.editor.getBlocks().forEach(function(e,r){t.indexSelected(r)&&t.mediator.trigger("block:remove",block.blockID,{focusOnNext:!0})})},indexSelected:function(t){return t>=Math.min(this.startIndex,this.endIndex)&&t<=Math.max(this.startIndex,this.endIndex)}}),t.exports=i},function(t,e,r){"use strict";var n=r(0),i=r(2);t.exports=function(t,e){var o=r(20);e=i.classify(e);var s=t;s=(s=s.replace(/&nbsp;/g," ")).replace(/( class=(")?Mso[a-zA-Z]+(")?)/g,"").replace(/<!--(.*?)-->/g,"").replace(/\/\*(.*?)\*\//g,"").replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var a,u,c=["style","script","applet","embed","noframes","noscript"];for(u=0;u<c.length;u++)a=new RegExp("<"+c[u]+".*?"+c[u]+"(.*?)>","gi"),s=s.replace(a,"");s=s.replace(/\*/g,"\\*").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\_/g,"\\_").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\-/g,"\\-");var l,f=["em","i","strong","b"];for(u=0;u<f.length;u++)a=new RegExp("<"+f[u]+"><br></"+f[u]+">","gi"),s=s.replace(a,"<br>");function h(t,e,r){return n.isUndefined(r)&&(r=""),"**"+e.replace(/<(.)?br(.)?>/g,"")+"**"+r}function p(t,e,r){return n.isUndefined(r)&&(r=""),"_"+e.replace(/<(.)?br(.)?>/g,"")+"_"+r}return s=(s=s.replace(/<(\w+)(?:\s+\w+="[^"]+(?:"\$[^"]+"[^"]+)?")*>\s*<\/\1>/gim,"").replace(/\n/gm,"").replace(/<a.*?href=[""'](.*?)[""'].*?>(.*?)<\/a>/gim,function(t,e,r){return"["+r.trim().replace(/<(.)?br(.)?>/g,"")+"]("+e+")"}).replace(/<strong>(?:\s*)(.*?)(\s)*?<\/strong>/gim,h).replace(/<b>(?:\s*)(.*?)(\s*)?<\/b>/gim,h).replace(/<em>(?:\s*)(.*?)(\s*)?<\/em>/gim,p).replace(/<i>(?:\s*)(.*?)(\s*)?<\/i>/gim,p)).replace(/([^<>]+)(<div>)/g,"$1\n$2").replace(/<div><div>/g,"\n<div>").replace(/(?:<div>)([^<>]+)(?:<div>)/g,"$1\n").replace(/(?:<div>)(?:<br>)?([^<>]+)(?:<br>)?(?:<\/div>)/g,"$1\n").replace(/<\/p>/g,"\n\n").replace(/<(.)?br(.)?>/g,"\n").replace(/&lt;/g,"<").replace(/&gt;/g,">"),o.hasOwnProperty(e)&&(l=o[e],!n.isUndefined(l.prototype.toMarkdown)&&n.isFunction(l.prototype.toMarkdown)&&(s=l.prototype.toMarkdown(s))),s=s.replace(/<\/?[^>]+(>|$)/g,"")}},function(t,e,r){}])});