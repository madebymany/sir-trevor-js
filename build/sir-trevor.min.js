/*!
 * Sir Trevor JS v0.8.1-beta8
 *
 * Released under the MIT license
 * www.opensource.org/licenses/MIT
 *
 * 2019-04-12
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SirTrevor=e():t.SirTrevor=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=93)}([function(t,e,n){"use strict";e.isEmpty=n(119),e.isFunction=n(28),e.isObject=n(18),e.isString=n(129),e.isUndefined=n(130),e.result=n(131),e.template=n(132),e.uniqueId=n(139)},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(3),s=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,a={getInstance:function(t){return r.isUndefined(t)?i.instances[0]:r.isString(t)?i.instances.find(function(e){return e.ID===t}):i.instances[t]},getInstanceBySelection:function(){return a.getInstance(o.getClosest(window.getSelection().anchorNode.parentNode,".st-block").getAttribute("data-instance"))},getBlockBySelection:function(){var t=a.getInstanceBySelection();if(t)return t.findBlockById(o.getClosest(window.getSelection().anchorNode.parentNode,".st-block").id)},log:function(){!r.isUndefined(console)&&i.debug&&console.log.apply(console,arguments)},isURI:function(t){return s.test(t)},titleize:function(t){return null===t?"":(t=String(t).toLowerCase()).replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()})},classify:function(t){return a.titleize(String(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()},flatten:function(t){var e={};return(Array.isArray(t)?t:Object.keys(t)).forEach(function(t){e[t]=!0}),e},underscored:function(t){return t.trim().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},reverse:function(t){return t.split("").reverse().join("")},toSlug:function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},leftTrim:function(t){return t.replace(/^\s+/,"")}};t.exports=a},function(t,e,n){"use strict";var r={html:['<div class="st-block__dropzone">','<svg role="img" class="st-icon"><use xlink:href="<%= config.defaults.iconUrl %>#<%= _.result(block, "icon_name") %>"/></svg>','<p><%= i18n.t("general:drop", { block: "<span>" + _.result(block, "title") + "</span>" }) %>',"</p></div>"].join("\n"),re_render_on_reorder:!1},i={html:['<input type="text" placeholder="<%= i18n.t("general:paste") %>"',' class="st-block__paste-input st-paste-block">'].join("")},o={html:['<div class="st-block__upload-container">','<input type="file" type="st-file-upload">','<button class="st-upload-btn"><%= i18n.t("general:upload") %></button>',"</div>"].join("\n")};t.exports={debug:!1,scribeDebug:!1,skipValidation:!1,version:"0.4.0",language:"en",instances:[],defaults:{defaultType:!1,spinner:{className:"st-spinner",lines:9,length:8,width:3,radius:6,color:"#000",speed:1.4,trail:57,shadow:!1,left:"50%",top:"50%"},Block:{drop_options:r,paste_options:i,upload_options:o},blockLimit:0,blockTypeLimits:{},required:[],uploadUrl:"/attachments",attachmentName:"attachment[name]",attachmentFile:"attachment[file]",attachmentUid:"attachment[uid]",baseImageUrl:"/sir-trevor-uploads/",iconUrl:"../src/icons/sir-trevor-icons.svg",errorsContainer:void 0,convertFromMarkdown:!0,joinListBlocksOnBlockRemove:!1,formatBar:{commands:[{name:"Bold",title:"bold",iconName:"fmt-bold",cmd:"bold",keyCode:66,text:"B"},{name:"Italic",title:"italic",iconName:"fmt-italic",cmd:"italic",keyCode:73,text:"i"},{name:"Link",title:"link",iconName:"fmt-link",cmd:"linkPrompt",text:"link"},{name:"Unlink",title:"unlink",iconName:"fmt-unlink",cmd:"unlink",text:"link"},{name:"Heading",title:"heading",iconName:"fmt-heading",cmd:"heading",text:"heading"},{name:"Quote",title:"quote",iconName:"fmt-quote",cmd:"quote",text:"quote"}]},ajaxOptions:{headers:{}},focusOnInit:!0,selectionMouse:!0,selectionCopy:!0,selectionCut:!0,selectionPaste:!0,selectionLimitToEditor:!0}}},function(t,e,n){"use strict";var r,i,o=n(0),s=Object.create(null);s.setAttributes=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.html&&(t.innerHTML=o.result(e,"html"),delete e.html),e.text&&(t.textContent=e.text,delete e.text),Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])}),t},s.createElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement(t);return s.setAttributes(n,e),n},s.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},s.remove=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},s.replaceWith=function(t,e){s.remove(e),t.parentNode.replaceChild(e,t)},s.hide=function(t){t.style.display="none"},s.show=function(t){t.style.display=""},s.matches=(r=Element.prototype,i=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=0;e[n]&&e[n]!==this;)n++;return!!e[n]},function(t,e){return i.call(t,e)}),s.getClosest=function(t,e){for(;t&&t!==document.body&&!s.matches(t,e);t=t.parentNode);return t},s.wrap=function(t,e){return e=e||document.createElement("div"),t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),e.appendChild(t)},s.createDocumentFragmentFromString=function(t){var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.childNodes[0];)e.appendChild(n.childNodes[0]);return e},t.exports=s},function(t,e,n){"use strict";t.exports=Object.assign({},n(9))},function(t,e,n){t.exports=function(){"use strict";var t=Array.prototype.slice;function e(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function n(t){return s(t)?t:W(t)}function r(t){return a(t)?t:V(t)}function i(t){return u(t)?t:G(t)}function o(t){return s(t)&&!c(t)?t:J(t)}function s(t){return!(!t||!t[f])}function a(t){return!(!t||!t[h])}function u(t){return!(!t||!t[p])}function c(t){return a(t)||u(t)}function l(t){return!(!t||!t[d])}e(r,n),e(i,n),e(o,n),n.isIterable=s,n.isKeyed=a,n.isIndexed=u,n.isAssociative=c,n.isOrdered=l,n.Keyed=r,n.Indexed=i,n.Set=o;var f="@@__IMMUTABLE_ITERABLE__@@",h="@@__IMMUTABLE_KEYED__@@",p="@@__IMMUTABLE_INDEXED__@@",d="@@__IMMUTABLE_ORDERED__@@",y=5,v=1<<y,g=v-1,m={},b={value:!1},_={value:!1};function w(t){return t.value=!1,t}function x(t){t&&(t.value=!0)}function S(){}function E(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;i<n;i++)r[i]=t[i+e];return r}function k(t){return void 0===t.size&&(t.size=t.__iterate(C)),t.size}function T(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?k(t)+e:e}function C(){return!0}function O(t,e,n){return(0===t||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function A(t,e){return D(t,e,0)}function B(t,e){return D(t,e,e)}function D(t,e,n){return void 0===t?n:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}var j=0,M=1,P=2,I="function"==typeof Symbol&&Symbol.iterator,L="@@iterator",U=I||L;function N(t){this.next=t}function z(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function F(){return{value:void 0,done:!0}}function q(t){return!!H(t)}function R(t){return t&&"function"==typeof t.next}function $(t){var e=H(t);return e&&e.call(t)}function H(t){var e=t&&(I&&t[I]||t[L]);if("function"==typeof e)return e}function K(t){return t&&"number"==typeof t.length}function W(t){return null==t?ot():s(t)?t.toSeq():function(t){var e=ut(t)||"object"==typeof t&&new et(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}(t)}function V(t){return null==t?ot().toKeyedSeq():s(t)?a(t)?t.toSeq():t.fromEntrySeq():st(t)}function G(t){return null==t?ot():s(t)?a(t)?t.entrySeq():t.toIndexedSeq():at(t)}function J(t){return(null==t?ot():s(t)?a(t)?t.entrySeq():t:at(t)).toSetSeq()}N.prototype.toString=function(){return"[Iterator]"},N.KEYS=j,N.VALUES=M,N.ENTRIES=P,N.prototype.inspect=N.prototype.toSource=function(){return this.toString()},N.prototype[U]=function(){return this},e(W,n),W.of=function(){return W(arguments)},W.prototype.toSeq=function(){return this},W.prototype.toString=function(){return this.__toString("Seq {","}")},W.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},W.prototype.__iterate=function(t,e){return ct(this,t,e,!0)},W.prototype.__iterator=function(t,e){return lt(this,t,e,!0)},e(V,W),V.prototype.toKeyedSeq=function(){return this},e(G,W),G.of=function(){return G(arguments)},G.prototype.toIndexedSeq=function(){return this},G.prototype.toString=function(){return this.__toString("Seq [","]")},G.prototype.__iterate=function(t,e){return ct(this,t,e,!1)},G.prototype.__iterator=function(t,e){return lt(this,t,e,!1)},e(J,W),J.of=function(){return J(arguments)},J.prototype.toSetSeq=function(){return this},W.isSeq=it,W.Keyed=V,W.Set=J,W.Indexed=G;var X,Q,Y,Z="@@__IMMUTABLE_SEQ__@@";function tt(t){this._array=t,this.size=t.length}function et(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function nt(t){this._iterable=t,this.size=t.length||t.size}function rt(t){this._iterator=t,this._iteratorCache=[]}function it(t){return!(!t||!t[Z])}function ot(){return X||(X=new tt([]))}function st(t){var e=Array.isArray(t)?new tt(t).fromEntrySeq():R(t)?new rt(t).fromEntrySeq():q(t)?new nt(t).fromEntrySeq():"object"==typeof t?new et(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function at(t){var e=ut(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function ut(t){return K(t)?new tt(t):R(t)?new rt(t):q(t)?new nt(t):void 0}function ct(t,e,n,r){var i=t._cache;if(i){for(var o=i.length-1,s=0;s<=o;s++){var a=i[n?o-s:s];if(!1===e(a[1],r?a[0]:s,t))return s+1}return s}return t.__iterateUncached(e,n)}function lt(t,e,n,r){var i=t._cache;if(i){var o=i.length-1,s=0;return new N(function(){var t=i[n?o-s:s];return s++>o?{value:void 0,done:!0}:z(e,r?t[0]:s-1,t[1])})}return t.__iteratorUncached(e,n)}function ft(t,e){return e?function t(e,n,r,i){return Array.isArray(n)?e.call(i,r,G(n).map(function(r,i){return t(e,r,i,n)})):pt(n)?e.call(i,r,V(n).map(function(r,i){return t(e,r,i,n)})):n}(e,t,"",{"":t}):ht(t)}function ht(t){return Array.isArray(t)?G(t).map(ht).toList():pt(t)?V(t).map(ht).toMap():t}function pt(t){return t&&(t.constructor===Object||void 0===t.constructor)}function dt(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function yt(t,e){if(t===e)return!0;if(!s(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||a(t)!==a(e)||u(t)!==u(e)||l(t)!==l(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!c(t);if(l(t)){var r=t.entries();return e.every(function(t,e){var i=r.next().value;return i&&dt(i[1],t)&&(n||dt(i[0],e))})&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var f=!0,h=e.__iterate(function(e,r){if(n?!t.has(e):i?!dt(e,t.get(r,m)):!dt(t.get(r,m),e))return f=!1,!1});return f&&t.size===h}function vt(t,e){if(!(this instanceof vt))return new vt(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(Q)return Q;Q=this}}function gt(t,e){if(!t)throw new Error(e)}function mt(t,e,n){if(!(this instanceof mt))return new mt(t,e,n);if(gt(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),e<t&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(Y)return Y;Y=this}}function bt(){throw TypeError("Abstract")}function _t(){}function wt(){}function xt(){}W.prototype[Z]=!0,e(tt,G),tt.prototype.get=function(t,e){return this.has(t)?this._array[T(this,t)]:e},tt.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length-1,i=0;i<=r;i++)if(!1===t(n[e?r-i:i],i,this))return i+1;return i},tt.prototype.__iterator=function(t,e){var n=this._array,r=n.length-1,i=0;return new N(function(){return i>r?{value:void 0,done:!0}:z(t,i,n[e?r-i++:i++])})},e(et,V),et.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},et.prototype.has=function(t){return this._object.hasOwnProperty(t)},et.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length-1,o=0;o<=i;o++){var s=r[e?i-o:o];if(!1===t(n[s],s,this))return o+1}return o},et.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length-1,o=0;return new N(function(){var s=r[e?i-o:o];return o++>i?{value:void 0,done:!0}:z(t,s,n[s])})},et.prototype[d]=!0,e(nt,G),nt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=this._iterable,r=$(n),i=0;if(R(r))for(var o;!(o=r.next()).done&&!1!==t(o.value,i++,this););return i},nt.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterable,r=$(n);if(!R(r))return new N(F);var i=0;return new N(function(){var e=r.next();return e.done?e:z(t,i++,e.value)})},e(rt,G),rt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n,r=this._iterator,i=this._iteratorCache,o=0;o<i.length;)if(!1===t(i[o],o++,this))return o;for(;!(n=r.next()).done;){var s=n.value;if(i[o]=s,!1===t(s,o++,this))break}return o},rt.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,i=0;return new N(function(){if(i>=r.length){var e=n.next();if(e.done)return e;r[i]=e.value}return z(t,i,r[i++])})},e(vt,G),vt.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},vt.prototype.get=function(t,e){return this.has(t)?this._value:e},vt.prototype.includes=function(t){return dt(this._value,t)},vt.prototype.slice=function(t,e){var n=this.size;return O(t,e,n)?this:new vt(this._value,B(e,n)-A(t,n))},vt.prototype.reverse=function(){return this},vt.prototype.indexOf=function(t){return dt(this._value,t)?0:-1},vt.prototype.lastIndexOf=function(t){return dt(this._value,t)?this.size:-1},vt.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(!1===t(this._value,n,this))return n+1;return n},vt.prototype.__iterator=function(t,e){var n=this,r=0;return new N(function(){return r<n.size?z(t,r++,n._value):{value:void 0,done:!0}})},vt.prototype.equals=function(t){return t instanceof vt?dt(this._value,t._value):yt(t)},e(mt,G),mt.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},mt.prototype.get=function(t,e){return this.has(t)?this._start+T(this,t)*this._step:e},mt.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},mt.prototype.slice=function(t,e){return O(t,e,this.size)?this:(t=A(t,this.size),(e=B(e,this.size))<=t?new mt(0,0):new mt(this.get(t,this._end),this.get(e,this._end),this._step))},mt.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},mt.prototype.lastIndexOf=function(t){return this.indexOf(t)},mt.prototype.__iterate=function(t,e){for(var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;o<=n;o++){if(!1===t(i,o,this))return o+1;i+=e?-r:r}return o},mt.prototype.__iterator=function(t,e){var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;return new N(function(){var s=i;return i+=e?-r:r,o>n?{value:void 0,done:!0}:z(t,o++,s)})},mt.prototype.equals=function(t){return t instanceof mt?this._start===t._start&&this._end===t._end&&this._step===t._step:yt(this,t)},e(bt,n),e(_t,bt),e(wt,bt),e(xt,bt),bt.Keyed=_t,bt.Indexed=wt,bt.Set=xt;var St="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),r=65535&(e|=0);return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0};function Et(t){return t>>>1&1073741824|3221225471&t}function kt(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e,n,r=typeof t;if("number"===r){if(t!=t||t===1/0)return 0;var i=0|t;for(i!==t&&(i^=4294967295*t);t>4294967295;)i^=t/=4294967295;return Et(i)}if("string"===r)return t.length>Mt?(void 0===(n=Lt[e=t])&&(n=Tt(e),It===Pt&&(It=0,Lt={}),It++,Lt[e]=n),n):Tt(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===r)return function(t){var e;if(Bt&&void 0!==(e=Ct.get(t)))return e;if(void 0!==(e=t[jt]))return e;if(!At){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[jt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=++Dt,1073741824&Dt&&(Dt=0),Bt)Ct.set(t,e);else{if(void 0!==Ot&&!1===Ot(t))throw new Error("Non-extensible objects are not allowed as keys.");if(At)Object.defineProperty(t,jt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[jt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[jt]=e}}return e}(t);if("function"==typeof t.toString)return Tt(t.toString());throw new Error("Value type "+r+" cannot be hashed.")}function Tt(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return Et(e)}var Ct,Ot=Object.isExtensible,At=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),Bt="function"==typeof WeakMap;Bt&&(Ct=new WeakMap);var Dt=0,jt="__immutablehash__";"function"==typeof Symbol&&(jt=Symbol(jt));var Mt=16,Pt=255,It=0,Lt={};function Ut(t){gt(t!==1/0,"Cannot perform this action with an infinite size.")}function Nt(t){return null==t?Yt():zt(t)&&!l(t)?t:Yt().withMutations(function(e){var n=r(t);Ut(n.size),n.forEach(function(t,n){return e.set(n,t)})})}function zt(t){return!(!t||!t[qt])}e(Nt,_t),Nt.of=function(){var e=t.call(arguments,0);return Yt().withMutations(function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}})},Nt.prototype.toString=function(){return this.__toString("Map {","}")},Nt.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},Nt.prototype.set=function(t,e){return Zt(this,t,e)},Nt.prototype.setIn=function(t,e){return this.updateIn(t,m,function(){return e})},Nt.prototype.remove=function(t){return Zt(this,t,m)},Nt.prototype.deleteIn=function(t){return this.updateIn(t,function(){return m})},Nt.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},Nt.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var r=function t(e,n,r,i){var o=e===m,s=n.next();if(s.done){var a=o?r:e,u=i(a);return u===a?e:u}gt(o||e&&e.set,"invalid keyPath");var c=s.value,l=o?m:e.get(c,m),f=t(l,n,r,i);return f===l?e:f===m?e.remove(c):(o?Yt():e).set(c,f)}(this,nn(t),e,n);return r===m?void 0:r},Nt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Yt()},Nt.prototype.merge=function(){return re(this,void 0,arguments)},Nt.prototype.mergeWith=function(e){var n=t.call(arguments,1);return re(this,e,n)},Nt.prototype.mergeIn=function(e){var n=t.call(arguments,1);return this.updateIn(e,Yt(),function(t){return"function"==typeof t.merge?t.merge.apply(t,n):n[n.length-1]})},Nt.prototype.mergeDeep=function(){return re(this,ie,arguments)},Nt.prototype.mergeDeepWith=function(e){var n=t.call(arguments,1);return re(this,oe(e),n)},Nt.prototype.mergeDeepIn=function(e){var n=t.call(arguments,1);return this.updateIn(e,Yt(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,n):n[n.length-1]})},Nt.prototype.sort=function(t){return Ae(Ke(this,t))},Nt.prototype.sortBy=function(t,e){return Ae(Ke(this,e,t))},Nt.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},Nt.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new S)},Nt.prototype.asImmutable=function(){return this.__ensureOwner()},Nt.prototype.wasAltered=function(){return this.__altered},Nt.prototype.__iterator=function(t,e){return new Gt(this,t,e)},Nt.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},Nt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Qt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Nt.isMap=zt;var Ft,qt="@@__IMMUTABLE_MAP__@@",Rt=Nt.prototype;function $t(t,e){this.ownerID=t,this.entries=e}function Ht(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function Kt(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function Wt(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function Vt(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function Gt(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&Xt(t._root)}function Jt(t,e){return z(t,e[0],e[1])}function Xt(t,e){return{node:t,index:0,__prev:e}}function Qt(t,e,n,r){var i=Object.create(Rt);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Yt(){return Ft||(Ft=Qt(0))}function Zt(t,e,n){var r,i;if(t._root){var o=w(b),s=w(_);if(r=te(t._root,t.__ownerID,0,void 0,e,n,o,s),!s.value)return t;i=t.size+(o.value?n===m?-1:1:0)}else{if(n===m)return t;i=1,r=new $t(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=i,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?Qt(i,r):Yt()}function te(t,e,n,r,i,o,s,a){return t?t.update(e,n,r,i,o,s,a):o===m?t:(x(a),x(s),new Vt(e,r,[i,o]))}function ee(t){return t.constructor===Vt||t.constructor===Wt}function ne(t,e,n,r,i){if(t.keyHash===r)return new Wt(e,r,[t.entry,i]);var o,s=(0===n?t.keyHash:t.keyHash>>>n)&g,a=(0===n?r:r>>>n)&g,u=s===a?[ne(t,e,n+y,r,i)]:(o=new Vt(e,r,i),s<a?[t,o]:[o,t]);return new Ht(e,1<<s|1<<a,u)}function re(t,e,n){for(var i=[],o=0;o<n.length;o++){var a=n[o],u=r(a);s(a)||(u=u.map(function(t){return ft(t)})),i.push(u)}return se(t,e,i)}function ie(t,e,n){return t&&t.mergeDeep&&s(e)?t.mergeDeep(e):dt(t,e)?t:e}function oe(t){return function(e,n,r){if(e&&e.mergeDeepWith&&s(n))return e.mergeDeepWith(t,n);var i=t(e,n,r);return dt(e,i)?e:i}}function se(t,e,n){return 0===(n=n.filter(function(t){return 0!==t.size})).length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations(function(t){for(var r=e?function(n,r){t.update(r,m,function(t){return t===m?n:e(t,n,r)})}:function(e,n){t.set(n,e)},i=0;i<n.length;i++)n[i].forEach(r)}):t.constructor(n[0])}function ae(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function ue(t,e,n,r){var i=r?t:E(t);return i[e]=n,i}Rt[qt]=!0,Rt.delete=Rt.remove,Rt.removeIn=Rt.deleteIn,$t.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(dt(n,i[o][0]))return i[o][1];return r},$t.prototype.update=function(t,e,n,r,i,o,s){for(var a=i===m,u=this.entries,c=0,l=u.length;c<l&&!dt(r,u[c][0]);c++);var f=c<l;if(f?u[c][1]===i:a)return this;if(x(s),(a||!f)&&x(o),!a||1!==u.length){if(!f&&!a&&u.length>=ce)return function(t,e,n,r){t||(t=new S);for(var i=new Vt(t,kt(n),[n,r]),o=0;o<e.length;o++){var s=e[o];i=i.update(t,0,void 0,s[0],s[1])}return i}(t,u,r,i);var h=t&&t===this.ownerID,p=h?u:E(u);return f?a?c===l-1?p.pop():p[c]=p.pop():p[c]=[r,i]:p.push([r,i]),h?(this.entries=p,this):new $t(t,p)}},Ht.prototype.get=function(t,e,n,r){void 0===e&&(e=kt(n));var i=1<<((0===t?e:e>>>t)&g),o=this.bitmap;return 0==(o&i)?r:this.nodes[ae(o&i-1)].get(t+y,e,n,r)},Ht.prototype.update=function(t,e,n,r,i,o,s){void 0===n&&(n=kt(r));var a=(0===e?n:n>>>e)&g,u=1<<a,c=this.bitmap,l=0!=(c&u);if(!l&&i===m)return this;var f=ae(c&u-1),h=this.nodes,p=l?h[f]:void 0,d=te(p,t,e+y,n,r,i,o,s);if(d===p)return this;if(!l&&d&&h.length>=le)return function(t,e,n,r,i){for(var o=0,s=new Array(v),a=0;0!==n;a++,n>>>=1)s[a]=1&n?e[o++]:void 0;return s[r]=i,new Kt(t,o+1,s)}(t,h,c,a,d);if(l&&!d&&2===h.length&&ee(h[1^f]))return h[1^f];if(l&&d&&1===h.length&&ee(d))return d;var b=t&&t===this.ownerID,_=l?d?c:c^u:c|u,w=l?d?ue(h,f,d,b):function(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,s=0;s<r;s++)s===e&&(o=1),i[s]=t[s+o];return i}(h,f,b):function(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),s=0,a=0;a<i;a++)a===e?(o[a]=n,s=-1):o[a]=t[a+s];return o}(h,f,d,b);return b?(this.bitmap=_,this.nodes=w,this):new Ht(t,_,w)},Kt.prototype.get=function(t,e,n,r){void 0===e&&(e=kt(n));var i=(0===t?e:e>>>t)&g,o=this.nodes[i];return o?o.get(t+y,e,n,r):r},Kt.prototype.update=function(t,e,n,r,i,o,s){void 0===n&&(n=kt(r));var a=(0===e?n:n>>>e)&g,u=i===m,c=this.nodes,l=c[a];if(u&&!l)return this;var f=te(l,t,e+y,n,r,i,o,s);if(f===l)return this;var h=this.count;if(l){if(!f&&--h<fe)return function(t,e,n,r){for(var i=0,o=0,s=new Array(n),a=0,u=1,c=e.length;a<c;a++,u<<=1){var l=e[a];void 0!==l&&a!==r&&(i|=u,s[o++]=l)}return new Ht(t,i,s)}(t,c,h,a)}else h++;var p=t&&t===this.ownerID,d=ue(c,a,f,p);return p?(this.count=h,this.nodes=d,this):new Kt(t,h,d)},Wt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(dt(n,i[o][0]))return i[o][1];return r},Wt.prototype.update=function(t,e,n,r,i,o,s){void 0===n&&(n=kt(r));var a=i===m;if(n!==this.keyHash)return a?this:(x(s),x(o),ne(this,t,e,n,[r,i]));for(var u=this.entries,c=0,l=u.length;c<l&&!dt(r,u[c][0]);c++);var f=c<l;if(f?u[c][1]===i:a)return this;if(x(s),(a||!f)&&x(o),a&&2===l)return new Vt(t,this.keyHash,u[1^c]);var h=t&&t===this.ownerID,p=h?u:E(u);return f?a?c===l-1?p.pop():p[c]=p.pop():p[c]=[r,i]:p.push([r,i]),h?(this.entries=p,this):new Wt(t,this.keyHash,p)},Vt.prototype.get=function(t,e,n,r){return dt(n,this.entry[0])?this.entry[1]:r},Vt.prototype.update=function(t,e,n,r,i,o,s){var a=i===m,u=dt(r,this.entry[0]);return(u?i===this.entry[1]:a)?this:(x(s),a?void x(o):u?t&&t===this.ownerID?(this.entry[1]=i,this):new Vt(t,this.keyHash,[r,i]):(x(o),ne(this,t,e,kt(r),[r,i])))},$t.prototype.iterate=Wt.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===t(n[e?i-r:r]))return!1},Ht.prototype.iterate=Kt.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[e?i-r:r];if(o&&!1===o.iterate(t,e))return!1}},Vt.prototype.iterate=function(t,e){return t(this.entry)},e(Gt,N),Gt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,r=e.node,i=e.index++;if(r.entry){if(0===i)return Jt(t,r.entry)}else if(r.entries){if(n=r.entries.length-1,i<=n)return Jt(t,r.entries[this._reverse?n-i:i])}else if(n=r.nodes.length-1,i<=n){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return Jt(t,o.entry);e=this._stack=Xt(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var ce=v/4,le=v/2,fe=v/4;function he(t){var e=xe();if(null==t)return e;if(pe(t))return t;var n=i(t),r=n.size;return 0===r?e:(Ut(r),r>0&&r<v?we(0,r,y,null,new ve(n.toArray())):e.withMutations(function(t){t.setSize(r),n.forEach(function(e,n){return t.set(n,e)})}))}function pe(t){return!(!t||!t[de])}e(he,wt),he.of=function(){return this(arguments)},he.prototype.toString=function(){return this.__toString("List [","]")},he.prototype.get=function(t,e){if((t=T(this,t))>=0&&t<this.size){var n=ke(this,t+=this._origin);return n&&n.array[t&g]}return e},he.prototype.set=function(t,e){return function(t,e,n){if((e=T(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Te(t,e).set(0,n):Te(t,0,e+1).set(e,n)});e+=t._origin;var r=t._tail,i=t._root,o=w(_);return e>=Oe(t._capacity)?r=Se(r,t.__ownerID,0,e,n,o):i=Se(i,t.__ownerID,t._level,e,n,o),o.value?t.__ownerID?(t._root=i,t._tail=r,t.__hash=void 0,t.__altered=!0,t):we(t._origin,t._capacity,t._level,i,r):t}(this,t,e)},he.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},he.prototype.insert=function(t,e){return this.splice(t,0,e)},he.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=y,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):xe()},he.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){Te(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},he.prototype.pop=function(){return Te(this,0,-1)},he.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Te(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},he.prototype.shift=function(){return Te(this,1)},he.prototype.merge=function(){return Ce(this,void 0,arguments)},he.prototype.mergeWith=function(e){var n=t.call(arguments,1);return Ce(this,e,n)},he.prototype.mergeDeep=function(){return Ce(this,ie,arguments)},he.prototype.mergeDeepWith=function(e){var n=t.call(arguments,1);return Ce(this,oe(e),n)},he.prototype.setSize=function(t){return Te(this,0,t)},he.prototype.slice=function(t,e){var n=this.size;return O(t,e,n)?this:Te(this,A(t,n),B(e,n))},he.prototype.__iterator=function(t,e){var n=0,r=_e(this,e);return new N(function(){var e=r();return e===be?{value:void 0,done:!0}:z(t,n++,e)})},he.prototype.__iterate=function(t,e){for(var n,r=0,i=_e(this,e);(n=i())!==be&&!1!==t(n,r++,this););return r},he.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?we(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},he.isList=pe;var de="@@__IMMUTABLE_LIST__@@",ye=he.prototype;function ve(t,e){this.array=t,this.ownerID=e}ye[de]=!0,ye.delete=ye.remove,ye.setIn=Rt.setIn,ye.deleteIn=ye.removeIn=Rt.removeIn,ye.update=Rt.update,ye.updateIn=Rt.updateIn,ye.mergeIn=Rt.mergeIn,ye.mergeDeepIn=Rt.mergeDeepIn,ye.withMutations=Rt.withMutations,ye.asMutable=Rt.asMutable,ye.asImmutable=Rt.asImmutable,ye.wasAltered=Rt.wasAltered,ve.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&g;if(r>=this.array.length)return new ve([],t);var i,o=0===r;if(e>0){var s=this.array[r];if((i=s&&s.removeBefore(t,e-y,n))===s&&o)return this}if(o&&!i)return this;var a=Ee(this,t);if(!o)for(var u=0;u<r;u++)a.array[u]=void 0;return i&&(a.array[r]=i),a},ve.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r,i=n-1>>>e&g;if(i>=this.array.length)return this;if(e>0){var o=this.array[i];if((r=o&&o.removeAfter(t,e-y,n))===o&&i===this.array.length-1)return this}var s=Ee(this,t);return s.array.splice(i+1),r&&(s.array[i]=r),s};var ge,me,be={};function _e(t,e){var n=t._origin,r=t._capacity,i=Oe(r),o=t._tail;return s(t._root,t._level,0);function s(t,a,u){return 0===a?function(t,s){var a=s===i?o&&o.array:t&&t.array,u=s>n?0:n-s,c=r-s;return c>v&&(c=v),function(){if(u===c)return be;var t=e?--c:u++;return a&&a[t]}}(t,u):function(t,i,o){var a,u=t&&t.array,c=o>n?0:n-o>>i,l=1+(r-o>>i);return l>v&&(l=v),function(){for(;;){if(a){var t=a();if(t!==be)return t;a=null}if(c===l)return be;var n=e?--l:c++;a=s(u&&u[n],i-y,o+(n<<i))}}}(t,a,u)}}function we(t,e,n,r,i,o,s){var a=Object.create(ye);return a.size=e-t,a._origin=t,a._capacity=e,a._level=n,a._root=r,a._tail=i,a.__ownerID=o,a.__hash=s,a.__altered=!1,a}function xe(){return ge||(ge=we(0,0,y))}function Se(t,e,n,r,i,o){var s,a=r>>>n&g,u=t&&a<t.array.length;if(!u&&void 0===i)return t;if(n>0){var c=t&&t.array[a],l=Se(c,e,n-y,r,i,o);return l===c?t:((s=Ee(t,e)).array[a]=l,s)}return u&&t.array[a]===i?t:(x(o),s=Ee(t,e),void 0===i&&a===s.array.length-1?s.array.pop():s.array[a]=i,s)}function Ee(t,e){return e&&t&&e===t.ownerID?t:new ve(t?t.array.slice():[],e)}function ke(t,e){if(e>=Oe(t._capacity))return t._tail;if(e<1<<t._level+y){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&g],r-=y;return n}}function Te(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new S,i=t._origin,o=t._capacity,s=i+e,a=void 0===n?o:n<0?o+n:i+n;if(s===i&&a===o)return t;if(s>=a)return t.clear();for(var u=t._level,c=t._root,l=0;s+l<0;)c=new ve(c&&c.array.length?[void 0,c]:[],r),l+=1<<(u+=y);l&&(s+=l,i+=l,a+=l,o+=l);for(var f=Oe(o),h=Oe(a);h>=1<<u+y;)c=new ve(c&&c.array.length?[c]:[],r),u+=y;var p=t._tail,d=h<f?ke(t,a-1):h>f?new ve([],r):p;if(p&&h>f&&s<o&&p.array.length){for(var v=c=Ee(c,r),m=u;m>y;m-=y){var b=f>>>m&g;v=v.array[b]=Ee(v.array[b],r)}v.array[f>>>y&g]=p}if(a<o&&(d=d&&d.removeAfter(r,0,a)),s>=h)s-=h,a-=h,u=y,c=null,d=d&&d.removeBefore(r,0,s);else if(s>i||h<f){for(l=0;c;){var _=s>>>u&g;if(_!==h>>>u&g)break;_&&(l+=(1<<u)*_),u-=y,c=c.array[_]}c&&s>i&&(c=c.removeBefore(r,u,s-l)),c&&h<f&&(c=c.removeAfter(r,u,h-l)),l&&(s-=l,a-=l)}return t.__ownerID?(t.size=a-s,t._origin=s,t._capacity=a,t._level=u,t._root=c,t._tail=d,t.__hash=void 0,t.__altered=!0,t):we(s,a,u,c,d)}function Ce(t,e,n){for(var r=[],o=0,a=0;a<n.length;a++){var u=n[a],c=i(u);c.size>o&&(o=c.size),s(u)||(c=c.map(function(t){return ft(t)})),r.push(c)}return o>t.size&&(t=t.setSize(o)),se(t,e,r)}function Oe(t){return t<v?0:t-1>>>y<<y}function Ae(t){return null==t?je():Be(t)?t:je().withMutations(function(e){var n=r(t);Ut(n.size),n.forEach(function(t,n){return e.set(n,t)})})}function Be(t){return zt(t)&&l(t)}function De(t,e,n,r){var i=Object.create(Ae.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function je(){return me||(me=De(Yt(),xe()))}function Me(t,e,n){var r,i,o=t._map,s=t._list,a=o.get(e),u=void 0!==a;if(n===m){if(!u)return t;s.size>=v&&s.size>=2*o.size?(i=s.filter(function(t,e){return void 0!==t&&a!==e}),r=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=a===s.size-1?s.pop():s.set(a,void 0))}else if(u){if(n===s.get(a)[1])return t;r=o,i=s.set(a,[e,n])}else r=o.set(e,s.size),i=s.set(s.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t):De(r,i)}function Pe(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function Ie(t){this._iter=t,this.size=t.size}function Le(t){this._iter=t,this.size=t.size}function Ue(t){this._iter=t,this.size=t.size}function Ne(t){var e=Ze(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=tn,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return!1!==e(n,t,r)},n)},e.__iteratorUncached=function(e,n){if(e===P){var r=t.__iterator(e,n);return new N(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===M?j:M,n)},e}function ze(t,e,n){var r=Ze(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,m);return o===m?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate(function(t,i,s){return!1!==r(e.call(n,t,i,s),i,o)},i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(P,i);return new N(function(){var i=o.next();if(i.done)return i;var s=i.value,a=s[0];return z(r,a,e.call(n,s[1],a,t),i)})},r}function Fe(t,e){var n=Ze(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=Ne(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,r){return t.get(e?n:-1-n,r)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=tn,n.__iterate=function(e,n){var r=this;return t.__iterate(function(t,n){return e(t,n,r)},!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function qe(t,e,n,r){var i=Ze(t);return r&&(i.has=function(r){var i=t.get(r,m);return i!==m&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,m);return o!==m&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var s=this,a=0;return t.__iterate(function(t,o,u){if(e.call(n,t,o,u))return a++,i(t,r?o:a-1,s)},o),a},i.__iteratorUncached=function(i,o){var s=t.__iterator(P,o),a=0;return new N(function(){for(;;){var o=s.next();if(o.done)return o;var u=o.value,c=u[0],l=u[1];if(e.call(n,l,c,t))return z(i,r?c:a++,l,o)}})},i}function Re(t,e,n,r){var i=t.size;if(void 0!==e&&(e|=0),void 0!==n&&(n===1/0?n=i:n|=0),O(e,n,i))return t;var o=A(e,i),s=B(n,i);if(o!=o||s!=s)return Re(t.toSeq().cacheResult(),e,n,r);var a,u=s-o;u==u&&(a=u<0?0:u);var c=Ze(t);return c.size=0===a?a:t.size&&a||void 0,!r&&it(t)&&a>=0&&(c.get=function(e,n){return(e=T(this,e))>=0&&e<a?t.get(e+o,n):n}),c.__iterateUncached=function(e,n){var i=this;if(0===a)return 0;if(n)return this.cacheResult().__iterate(e,n);var s=0,u=!0,c=0;return t.__iterate(function(t,n){if(!u||!(u=s++<o))return c++,!1!==e(t,r?n:c-1,i)&&c!==a}),c},c.__iteratorUncached=function(e,n){if(0!==a&&n)return this.cacheResult().__iterator(e,n);var i=0!==a&&t.__iterator(e,n),s=0,u=0;return new N(function(){for(;s++<o;)i.next();if(++u>a)return{value:void 0,done:!0};var t=i.next();return r||e===M?t:z(e,u-1,e===j?void 0:t.value[1],t)})},c}function $e(t,e,n,r){var i=Ze(t);return i.__iterateUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterate(i,o);var a=!0,u=0;return t.__iterate(function(t,o,c){if(!a||!(a=e.call(n,t,o,c)))return u++,i(t,r?o:u-1,s)}),u},i.__iteratorUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterator(i,o);var a=t.__iterator(P,o),u=!0,c=0;return new N(function(){var t,o,l;do{if((t=a.next()).done)return r||i===M?t:z(i,c++,i===j?void 0:t.value[1],t);var f=t.value;o=f[0],l=f[1],u&&(u=e.call(n,l,o,s))}while(u);return i===P?t:z(i,o,l,t)})},i}function He(t,e,n){var r=Ze(t);return r.__iterateUncached=function(r,i){var o=0,a=!1;return function t(u,c){var l=this;u.__iterate(function(i,u){return(!e||c<e)&&s(i)?t(i,c+1):!1===r(i,n?u:o++,l)&&(a=!0),!a},i)}(t,0),o},r.__iteratorUncached=function(r,i){var o=t.__iterator(r,i),a=[],u=0;return new N(function(){for(;o;){var t=o.next();if(!1===t.done){var c=t.value;if(r===P&&(c=c[1]),e&&!(a.length<e)||!s(c))return n?t:z(r,u++,c,t);a.push(o),o=c.__iterator(r,i)}else o=a.pop()}return{value:void 0,done:!0}})},r}function Ke(t,e,n){e||(e=en);var r=a(t),i=0,o=t.toSeq().map(function(e,r){return[r,e,i++,n?n(e,r,t):e]}).toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?V(o):u(t)?G(o):J(o)}function We(t,e,n){if(e||(e=en),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return Ve(e,t[1],n[1])?n:t});return r&&r[0]}return t.reduce(function(t,n){return Ve(e,t,n)?n:t})}function Ve(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(null==n||n!=n)||r>0}function Ge(t,e,r){var i=Ze(t);return i.size=new tt(r).map(function(t){return t.size}).min(),i.__iterate=function(t,e){for(var n,r=this.__iterator(M,e),i=0;!(n=r.next()).done&&!1!==t(n.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=r.map(function(t){return t=n(t),$(i?t.reverse():t)}),s=0,a=!1;return new N(function(){var n;return a||(n=o.map(function(t){return t.next()}),a=n.some(function(t){return t.done})),a?{value:void 0,done:!0}:z(t,s++,e.apply(null,n.map(function(t){return t.value})))})},i}function Je(t,e){return it(t)?e:t.constructor(e)}function Xe(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Qe(t){return Ut(t.size),k(t)}function Ye(t){return a(t)?r:u(t)?i:o}function Ze(t){return Object.create((a(t)?V:u(t)?G:J).prototype)}function tn(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):W.prototype.cacheResult.call(this)}function en(t,e){return t>e?1:t<e?-1:0}function nn(t){var e=$(t);if(!e){if(!K(t))throw new TypeError("Expected iterable or array-like: "+t);e=$(n(t))}return e}function rn(t,e){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var s=Object.keys(t);!function(t,e){try{e.forEach(function(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){gt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}.bind(void 0,t))}catch(t){}}(i,s),i.size=s.length,i._name=e,i._keys=s,i._defaultValues=t}this._map=Nt(o)},i=r.prototype=Object.create(on);return i.constructor=r,r}e(Ae,Nt),Ae.of=function(){return this(arguments)},Ae.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Ae.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},Ae.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):je()},Ae.prototype.set=function(t,e){return Me(this,t,e)},Ae.prototype.remove=function(t){return Me(this,t,m)},Ae.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Ae.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},Ae.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Ae.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?De(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},Ae.isOrderedMap=Be,Ae.prototype[d]=!0,Ae.prototype.delete=Ae.prototype.remove,e(Pe,V),Pe.prototype.get=function(t,e){return this._iter.get(t,e)},Pe.prototype.has=function(t){return this._iter.has(t)},Pe.prototype.valueSeq=function(){return this._iter.valueSeq()},Pe.prototype.reverse=function(){var t=this,e=Fe(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},Pe.prototype.map=function(t,e){var n=this,r=ze(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},Pe.prototype.__iterate=function(t,e){var n,r=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?Qe(this):0,function(i){return t(i,e?--n:n++,r)}),e)},Pe.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(M,e),r=e?Qe(this):0;return new N(function(){var i=n.next();return i.done?i:z(t,e?--r:r++,i.value,i)})},Pe.prototype[d]=!0,e(Ie,G),Ie.prototype.includes=function(t){return this._iter.includes(t)},Ie.prototype.__iterate=function(t,e){var n=this,r=0;return this._iter.__iterate(function(e){return t(e,r++,n)},e)},Ie.prototype.__iterator=function(t,e){var n=this._iter.__iterator(M,e),r=0;return new N(function(){var e=n.next();return e.done?e:z(t,r++,e.value,e)})},e(Le,J),Le.prototype.has=function(t){return this._iter.includes(t)},Le.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},Le.prototype.__iterator=function(t,e){var n=this._iter.__iterator(M,e);return new N(function(){var e=n.next();return e.done?e:z(t,e.value,e.value,e)})},e(Ue,V),Ue.prototype.entrySeq=function(){return this._iter.toSeq()},Ue.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){Xe(e);var r=s(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}},e)},Ue.prototype.__iterator=function(t,e){var n=this._iter.__iterator(M,e);return new N(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){Xe(r);var i=s(r);return z(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}})},Ie.prototype.cacheResult=Pe.prototype.cacheResult=Le.prototype.cacheResult=Ue.prototype.cacheResult=tn,e(rn,_t),rn.prototype.toString=function(){return this.__toString(an(this)+" {","}")},rn.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},rn.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},rn.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=sn(this,Yt()))},rn.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+an(this));if(this._map&&!this._map.has(t)){var n=this._defaultValues[t];if(e===n)return this}var r=this._map&&this._map.set(t,e);return this.__ownerID||r===this._map?this:sn(this,r)},rn.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:sn(this,e)},rn.prototype.wasAltered=function(){return this._map.wasAltered()},rn.prototype.__iterator=function(t,e){var n=this;return r(this._defaultValues).map(function(t,e){return n.get(e)}).__iterator(t,e)},rn.prototype.__iterate=function(t,e){var n=this;return r(this._defaultValues).map(function(t,e){return n.get(e)}).__iterate(t,e)},rn.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?sn(this,e,t):(this.__ownerID=t,this._map=e,this)};var on=rn.prototype;function sn(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._map=e,r.__ownerID=n,r}function an(t){return t._name||t.constructor.name||"Record"}function un(t){return null==t?yn():cn(t)&&!l(t)?t:yn().withMutations(function(e){var n=o(t);Ut(n.size),n.forEach(function(t){return e.add(t)})})}function cn(t){return!(!t||!t[fn])}on.delete=on.remove,on.deleteIn=on.removeIn=Rt.removeIn,on.merge=Rt.merge,on.mergeWith=Rt.mergeWith,on.mergeIn=Rt.mergeIn,on.mergeDeep=Rt.mergeDeep,on.mergeDeepWith=Rt.mergeDeepWith,on.mergeDeepIn=Rt.mergeDeepIn,on.setIn=Rt.setIn,on.update=Rt.update,on.updateIn=Rt.updateIn,on.withMutations=Rt.withMutations,on.asMutable=Rt.asMutable,on.asImmutable=Rt.asImmutable,e(un,xt),un.of=function(){return this(arguments)},un.fromKeys=function(t){return this(r(t).keySeq())},un.prototype.toString=function(){return this.__toString("Set {","}")},un.prototype.has=function(t){return this._map.has(t)},un.prototype.add=function(t){return pn(this,this._map.set(t,!0))},un.prototype.remove=function(t){return pn(this,this._map.remove(t))},un.prototype.clear=function(){return pn(this,this._map.clear())},un.prototype.union=function(){var e=t.call(arguments,0);return 0===(e=e.filter(function(t){return 0!==t.size})).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var n=0;n<e.length;n++)o(e[n]).forEach(function(e){return t.add(e)})}):this.constructor(e[0])},un.prototype.intersect=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map(function(t){return o(t)});var n=this;return this.withMutations(function(t){n.forEach(function(n){e.every(function(t){return t.includes(n)})||t.remove(n)})})},un.prototype.subtract=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map(function(t){return o(t)});var n=this;return this.withMutations(function(t){n.forEach(function(n){e.some(function(t){return t.includes(n)})&&t.remove(n)})})},un.prototype.merge=function(){return this.union.apply(this,arguments)},un.prototype.mergeWith=function(e){var n=t.call(arguments,1);return this.union.apply(this,n)},un.prototype.sort=function(t){return vn(Ke(this,t))},un.prototype.sortBy=function(t,e){return vn(Ke(this,e,t))},un.prototype.wasAltered=function(){return this._map.wasAltered()},un.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e,r){return t(r,r,n)},e)},un.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},un.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},un.isSet=cn;var ln,fn="@@__IMMUTABLE_SET__@@",hn=un.prototype;function pn(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function dn(t,e){var n=Object.create(hn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function yn(){return ln||(ln=dn(Yt()))}function vn(t){return null==t?wn():gn(t)?t:wn().withMutations(function(e){var n=o(t);Ut(n.size),n.forEach(function(t){return e.add(t)})})}function gn(t){return cn(t)&&l(t)}hn[fn]=!0,hn.delete=hn.remove,hn.mergeDeep=hn.merge,hn.mergeDeepWith=hn.mergeWith,hn.withMutations=Rt.withMutations,hn.asMutable=Rt.asMutable,hn.asImmutable=Rt.asImmutable,hn.__empty=yn,hn.__make=dn,e(vn,un),vn.of=function(){return this(arguments)},vn.fromKeys=function(t){return this(r(t).keySeq())},vn.prototype.toString=function(){return this.__toString("OrderedSet {","}")},vn.isOrderedSet=gn;var mn,bn=vn.prototype;function _n(t,e){var n=Object.create(bn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function wn(){return mn||(mn=_n(je()))}function xn(t){return null==t?On():Sn(t)?t:On().unshiftAll(t)}function Sn(t){return!(!t||!t[kn])}bn[d]=!0,bn.__empty=wn,bn.__make=_n,e(xn,wt),xn.of=function(){return this(arguments)},xn.prototype.toString=function(){return this.__toString("Stack [","]")},xn.prototype.get=function(t,e){var n=this._head;for(t=T(this,t);n&&t--;)n=n.next;return n?n.value:e},xn.prototype.peek=function(){return this._head&&this._head.value},xn.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Cn(t,e)},xn.prototype.pushAll=function(t){if(0===(t=i(t)).size)return this;Ut(t.size);var e=this.size,n=this._head;return t.reverse().forEach(function(t){e++,n={value:t,next:n}}),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Cn(e,n)},xn.prototype.pop=function(){return this.slice(1)},xn.prototype.unshift=function(){return this.push.apply(this,arguments)},xn.prototype.unshiftAll=function(t){return this.pushAll(t)},xn.prototype.shift=function(){return this.pop.apply(this,arguments)},xn.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):On()},xn.prototype.slice=function(t,e){if(O(t,e,this.size))return this;var n=A(t,this.size),r=B(e,this.size);if(r!==this.size)return wt.prototype.slice.call(this,t,e);for(var i=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):Cn(i,o)},xn.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Cn(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},xn.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,r=this._head;r&&!1!==t(r.value,n++,this);)r=r.next;return n},xn.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,r=this._head;return new N(function(){if(r){var e=r.value;return r=r.next,z(t,n++,e)}return{value:void 0,done:!0}})},xn.isStack=Sn;var En,kn="@@__IMMUTABLE_STACK__@@",Tn=xn.prototype;function Cn(t,e,n,r){var i=Object.create(Tn);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function On(){return En||(En=Cn(0))}function An(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}Tn[kn]=!0,Tn.withMutations=Rt.withMutations,Tn.asMutable=Rt.asMutable,Tn.asImmutable=Rt.asImmutable,Tn.wasAltered=Rt.wasAltered,n.Iterator=N,An(n,{toArray:function(){Ut(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,n){t[n]=e}),t},toIndexedSeq:function(){return new Ie(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new Pe(this,!0)},toMap:function(){return Nt(this.toKeyedSeq())},toObject:function(){Ut(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t},toOrderedMap:function(){return Ae(this.toKeyedSeq())},toOrderedSet:function(){return vn(a(this)?this.valueSeq():this)},toSet:function(){return un(a(this)?this.valueSeq():this)},toSetSeq:function(){return new Le(this)},toSeq:function(){return u(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return xn(a(this)?this.valueSeq():this)},toList:function(){return he(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var e=t.call(arguments,0);return Je(this,function(t,e){var n=a(t),i=[t].concat(e).map(function(t){return s(t)?n&&(t=r(t)):t=n?st(t):at(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===i.length)return t;if(1===i.length){var o=i[0];if(o===t||n&&a(o)||u(t)&&u(o))return o}var c=new tt(i);return n?c=c.toKeyedSeq():u(t)||(c=c.toSetSeq()),(c=c.flatten(!0)).size=i.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),c}(this,e))},includes:function(t){return this.some(function(e){return dt(e,t)})},entries:function(){return this.__iterator(P)},every:function(t,e){Ut(this.size);var n=!0;return this.__iterate(function(r,i,o){if(!t.call(e,r,i,o))return n=!1,!1}),n},filter:function(t,e){return Je(this,qe(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return Ut(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Ut(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!=r?r.toString():""}),e},keys:function(){return this.__iterator(j)},map:function(t,e){return Je(this,ze(this,t,e))},reduce:function(t,e,n){var r,i;return Ut(this.size),arguments.length<2?i=!0:r=e,this.__iterate(function(e,o,s){i?(i=!1,r=e):r=t.call(n,r,e,o,s)}),r},reduceRight:function(t,e,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return Je(this,Fe(this,!0))},slice:function(t,e){return Je(this,Re(this,t,e,!0))},some:function(t,e){return!this.every(Pn(t),e)},sort:function(t){return Je(this,Ke(this,t))},values:function(){return this.__iterator(M)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return k(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,n){var r=Nt().asMutable();return t.__iterate(function(i,o){r.update(e.call(n,i,o,t),0,function(t){return t+1})}),r.asImmutable()}(this,t,e)},equals:function(t){return yt(this,t)},entrySeq:function(){var t=this;if(t._cache)return new tt(t._cache);var e=t.toSeq().map(Mn).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Pn(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate(function(n,i,o){if(t.call(e,n,i,o))return r=[i,n],!1}),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(C)},flatMap:function(t,e){return Je(this,function(t,e,n){var r=Ye(t);return t.toSeq().map(function(i,o){return r(e.call(n,i,o,t))}).flatten(!0)}(this,t,e))},flatten:function(t){return Je(this,He(this,t,!0))},fromEntrySeq:function(){return new Ue(this)},get:function(t,e){return this.find(function(e,n){return dt(n,t)},void 0,e)},getIn:function(t,e){for(var n,r=this,i=nn(t);!(n=i.next()).done;){var o=n.value;if((r=r&&r.get?r.get(o,m):m)===m)return e}return r},groupBy:function(t,e){return function(t,e,n){var r=a(t),i=(l(t)?Ae():Nt()).asMutable();t.__iterate(function(o,s){i.update(e.call(n,o,s,t),function(t){return(t=t||[]).push(r?[s,o]:o),t})});var o=Ye(t);return i.map(function(e){return Je(t,o(e))})}(this,t,e)},has:function(t){return this.get(t,m)!==m},hasIn:function(t){return this.getIn(t,m)!==m},isSubset:function(t){return t="function"==typeof t.includes?t:n(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:n(t)).isSubset(this)},keyOf:function(t){return this.findKey(function(e){return dt(e,t)})},keySeq:function(){return this.toSeq().map(jn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return We(this,t)},maxBy:function(t,e){return We(this,e,t)},min:function(t){return We(this,t?In(t):Nn)},minBy:function(t,e){return We(this,e?In(e):Nn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Je(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return Je(this,$e(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Pn(t),e)},sortBy:function(t,e){return Je(this,Ke(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Je(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return Je(this,function(t,e,n){var r=Ze(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var s=0;return t.__iterate(function(t,i,a){return e.call(n,t,i,a)&&++s&&r(t,i,o)}),s},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var s=t.__iterator(P,i),a=!0;return new N(function(){if(!a)return{value:void 0,done:!0};var t=s.next();if(t.done)return t;var i=t.value,u=i[0],c=i[1];return e.call(n,c,u,o)?r===P?t:z(r,u,c,t):(a=!1,{value:void 0,done:!0})})},r}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Pn(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=l(t),n=a(t),r=e?1:0;return function(t,e){return e=St(e,3432918353),e=St(e<<15|e>>>-15,461845907),e=St(e<<13|e>>>-13,5),e=St((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=Et((e=St(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(n?e?function(t,e){r=31*r+zn(kt(t),kt(e))|0}:function(t,e){r=r+zn(kt(t),kt(e))|0}:e?function(t){r=31*r+kt(t)|0}:function(t){r=r+kt(t)|0}),r)}(this))}});var Bn=n.prototype;Bn[f]=!0,Bn[U]=Bn.values,Bn.__toJS=Bn.toArray,Bn.__toStringMapper=Ln,Bn.inspect=Bn.toSource=function(){return this.toString()},Bn.chain=Bn.flatMap,Bn.contains=Bn.includes,An(r,{flip:function(){return Je(this,Ne(this))},mapEntries:function(t,e){var n=this,r=0;return Je(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return Je(this,this.toSeq().flip().map(function(r,i){return t.call(e,r,i,n)}).flip())}});var Dn=r.prototype;function jn(t,e){return e}function Mn(t,e){return[e,t]}function Pn(t){return function(){return!t.apply(this,arguments)}}function In(t){return function(){return-t.apply(this,arguments)}}function Ln(t){return"string"==typeof t?JSON.stringify(t):String(t)}function Un(){return E(arguments)}function Nn(t,e){return t<e?1:t>e?-1:0}function zn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}return Dn[h]=!0,Dn[U]=Bn.entries,Dn.__toJS=Bn.toObject,Dn.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+Ln(t)},An(i,{toKeyedSeq:function(){return new Pe(this,!1)},filter:function(t,e){return Je(this,qe(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Je(this,Fe(this,!1))},slice:function(t,e){return Je(this,Re(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=A(t,t<0?this.count():this.size);var r=this.slice(0,t);return Je(this,1===n?r:r.concat(E(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Je(this,He(this,t,!1))},get:function(t,e){return(t=T(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return(t=T(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Je(this,function(t,e){var n=Ze(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate(function(t,r){return(!o||!1!==n(e,o++,i))&&!1!==n(t,o++,i)},r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(M,r),s=0;return new N(function(){return(!i||s%2)&&(i=o.next()).done?i:s%2?z(n,s++,e):z(n,s++,i.value,i)})},n}(this,t))},interleave:function(){var t=[this].concat(E(arguments)),e=Ge(this.toSeq(),G.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),Je(this,n)},keySeq:function(){return mt(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Je(this,$e(this,t,e,!1))},zip:function(){return Je(this,Ge(this,Un,[this].concat(E(arguments))))},zipWith:function(t){var e=E(arguments);return e[0]=this,Je(this,Ge(this,t,e))}}),i.prototype[p]=!0,i.prototype[d]=!0,An(o,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),o.prototype.has=Bn.includes,o.prototype.contains=o.prototype.includes,An(V,r.prototype),An(G,i.prototype),An(J,o.prototype),An(_t,r.prototype),An(wt,i.prototype),An(xt,o.prototype),{Iterable:n,Seq:W,Collection:bt,Map:Nt,OrderedMap:Ae,List:he,Stack:xn,Set:un,OrderedSet:vn,Record:rn,Range:mt,Repeat:vt,is:dt,fromJS:ft}}()},function(t,e,n){"use strict";t.exports={bound:[],_bindFunctions:function(){this.bound.forEach(function(t){this[t]=this[t].bind(this)},this)}}},function(t,e,n){var r;void 0===(r=function(){var t=Math.pow(2,53)-1;return function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}}.apply(e,[]))||(t.exports=r)},function(t,e,n){"use strict";var r=n(0),i=n(68),o=n(2),s=n(1),a=n(3),u=n(10),c=n(65),l=n(87),f=n(39),h=n(83),p=n(81),d=n(4),y=n(226).Spinner,v=n(16).trimScribeContent,g=n(227),m=function(t,e,n,r,i){l.apply(this,arguments)};(m.prototype=Object.create(l.prototype)).constructor=m,Object.assign(m.prototype,l.fn,n(84),{bound:["_handleContentPaste","_onFocus","_onBlur","onDrop","onDeleteClick","clearInsertedStyles","getSelectionForFormatter","onBlockRender","onDeleteConfirm","onPositionerClick"],className:"st-block",attributes:function(){return Object.assign(l.fn.attributes.call(this))},icon_name:"default",validationFailMsg:function(){return i18n.t("errors:validation_fail",{type:r.isFunction(this.title)?this.title():this.title})},editorHTML:'<div class="st-block__editor"></div>',toolbarEnabled:!0,availableMixins:["droppable","pastable","uploadable","fetchable","ajaxable","controllable","multi_editable","textable"],droppable:!1,pastable:!1,uploadable:!1,fetchable:!1,ajaxable:!1,mergeable:!1,multi_editable:!1,textable:!1,drop_options:{},paste_options:{},upload_options:{},formattable:!0,supressKeyListeners:!1,_previousSelection:"",initialize:function(){},toMarkdown:function(t){return t},toHTML:function(t){return t},withMixin:function(t){if(r.isObject(t)){var e="initialize"+t.mixinName;r.isUndefined(this[e])&&(Object.assign(this,t),this[e]())}},render:function(){if(this.beforeBlockRender(),this._setBlockInner(),this.editor=this.inner.children[0],this.mixinsRequireInputs=!1,this.availableMixins.forEach(function(t){if(this[t]){var e=c[s.classify(t)];!r.isUndefined(e.requireInputs)&&e.requireInputs&&(this.mixinsRequireInputs=!0)}},this),this.mixinsRequireInputs){var t=document.createElement("div");t.classList.add("st-block__inputs"),this.inner.appendChild(t),this.inputs=t}return this.hasTextBlock()&&this._initTextBlocks(),this.availableMixins.forEach(function(t){this[t]&&this.withMixin(c[s.classify(t)])},this),this.formattable&&this._initFormatting(),this._blockPrepare(),this},remove:function(){this.ajaxable&&this.resolveAllInQueue(),a.remove(this.el)},loading:function(){r.isUndefined(this.spinner)||this.ready(),this.spinner=new y(o.defaults.spinner),this.spinner.spin(this.el),this.el.classList.add("st--is-loading")},ready:function(){this.el.classList.remove("st--is-loading"),r.isUndefined(this.spinner)||(this.spinner.stop(),delete this.spinner)},_serializeData:function(){s.log("toData for "+this.blockID);var t={};this.hasTextBlock()&&(t.text=this.getTextBlockHTML(),t.format="html");var e=['input:not([class="st-paste-block"])','textarea:not([class="st-paste-block"])','select:not([class="st-paste-block"])','button:not([class="st-paste-block"])'].join(",");return this.$(e).length>0&&Array.prototype.forEach.call(this.$("input, textarea, select, button"),function(e){var n=e.getAttribute("data-name")||e.getAttribute("name");if(n)if("number"===e.getAttribute("type"))t[n]=parseInt(e.value);else if("checkbox"===e.getAttribute("type")){var r="";e.getAttribute("data-toggle")?(r="off",!0===e.checked&&(r="on")):!0===e.checked&&(r=e.value),t[n]=r}else"radio"===e.getAttribute("type")?!0===e.checked&&(t[n]=e.value):t[n]=e.value}),t},focus:function(){Array.prototype.forEach.call(this.getTextBlock(),function(t){t.focus()})},focusAtStart:function(){this.focus()},focusAtEnd:function(){this.focus()},blur:function(){Array.prototype.forEach.call(this.getTextBlock(),function(t){t.blur()})},onFocus:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),function(e){e.addEventListener("focus",t._onFocus)})},onBlur:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),function(e){e.addEventListener("blur",t._onBlur)})},_onFocus:function(){this.trigger("blockFocus",this.el)},_onBlur:function(){},onDrop:function(t){},onDeleteConfirm:function(t){t.preventDefault(),this.mediator.trigger("block:remove",this.blockID,{focusOnPrevious:!0})},addDeleteControls:function(){var t=this;this.ui.insertAdjacentHTML("beforeend",g()),u.delegate(this.el,".js-st-block-confirm-delete","click",this.onDeleteConfirm),u.delegate(this.el,".js-st-block-deny-delete","click",function(e){e.preventDefault(),t.deleteEl.classList.remove("active")})},onDeleteClick:function(t){t.preventDefault(),t.stopPropagation(),this.isEmpty()?this.onDeleteConfirm.call(this,new CustomEvent("click")):(this.deleteEl=this.el.querySelector(".st-block__ui-delete-controls"),this.deleteEl.classList.toggle("active"))},onPositionerClick:function(t){t.preventDefault(),this.positioner.toggle()},beforeLoadingData:function(){this.loading(),this.mixinsRequireInputs&&(a.show(this.editor),a.hide(this.inputs)),l.fn.beforeLoadingData.call(this),this.ready()},execTextBlockCommand:function(t){if(r.isUndefined(this._scribe))throw"No Scribe instance found to send a command to";return i.execTextBlockCommand(this._scribe,t)},queryTextBlockCommandState:function(t){if(r.isUndefined(this._scribe))throw"No Scribe instance found to query command";return i.queryTextBlockCommandState(this._scribe,t)},_handleContentPaste:function(t){setTimeout(this.onContentPasted.bind(this,t,t.currentTarget),0)},_getBlockClass:function(){return"st-block--"+this.className},_initUIComponents:function(){this.addDeleteControls(),this.positioner=new p(this.el,this.mediator),this._withUIComponent(this.positioner,".st-block-ui-btn__reorder",this.onPositionerClick),this._withUIComponent(new f(this.el,this.mediator)),this._withUIComponent(new h,".st-block-ui-btn__delete",this.onDeleteClick),this.onFocus(),this.onBlur()},_initFormatting:function(){var t=this;this.options.formatBar&&this.options.formatBar.commands.forEach(function(e){r.isUndefined(e.keyCode)||u.delegate(t.el,".st-text-block","keydown",function(n){(n.metaKey||n.ctrlKey)&&n.keyCode===e.keyCode&&(n.preventDefault(),t.execTextBlockCommand(e.cmd))})})},_initTextBlocks:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),function(e){e.addEventListener("keyup",t.getSelectionForFormatter),e.addEventListener("mousedown",t.addMouseupListener.bind(t)),e.addEventListener("DOMNodeInserted",t.clearInsertedStyles)});var e=this.getTextBlock()[0];if(!r.isUndefined(e)&&r.isUndefined(this._scribe)){var n=r.isFunction(this.configureScribe)?this.configureScribe.bind(this):null;this._scribe=i.initScribeInstance(e,this.scribeOptions,n)}},addMouseupListener:function(){var t=this;window.addEventListener("mouseup",function e(){t.getSelectionForFormatter(),window.removeEventListener("mouseup",e)})},getSelectionForFormatter:function(){var t=this;setTimeout(function(){var e="formatter:"+(""===window.getSelection().toString().trim()?"hide":"position");t.mediator.trigger(e,t),d.trigger(e,t)},1)},clearInsertedStyles:function(t){var e=t.target;r.isUndefined(e.tagName)&&(e=e.parentNode),e.removeAttribute("style")},hasTextBlock:function(){return this.getTextBlock().length>0},getTextBlock:function(){return r.isUndefined(this.text_block)&&(this.text_block=this.$(".st-text-block")),this.text_block},getTextBlockHTML:function(){return this._scribe.getContent()},setTextBlockHTML:function(t){var e=this._scribe.setContent(t);return v(this._scribe),e},isEmpty:function(){return r.isEmpty(this.getBlockData())},select:function(t){this.el.classList.toggle("st-block--is-selected",t)},split:function(){},asClipboardHTML:function(){}}),m.extend=n(89),t.exports=m},function(t,e,n){"use strict";t.exports=n(141)},function(t,e,n){"use strict";var r=n(3),i=function(t,e){for(var n,r={},i={shared:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),mouseEvent:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),keyEvent:"char charCode key keyCode".split(" ")},o=/^(?:mouse|pointer|contextmenu|drag|drop)|click/.test(t.type)?i.shared.concat(i.mouseEvent):/^key/.test(t.type)?i.shared.concat(i.keyEvent):i.shared,s=0;s<o.length;s++)r[n=o[s]]=t[n];return r.currentTarget=e,r.originalEvent=t,r.preventDefault=function(){this.originalEvent&&this.originalEvent.preventDefault()},r.stopPropagation=function(){this.originalEvent&&this.originalEvent.stopPropagation()},r};t.exports.delegate=function(t,e,n,o){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t.addEventListener(n,function(n){for(var s=n.target;s&&s!==t;s=s.parentNode)if(r.matches(s,e)){o.call(s,i(n,s));break}s=null},s)}},function(t,e,n){"use strict";var r=n(0),i=n(3);t.exports={tagName:"div",className:"sir-trevor__view",attributes:{},$:function(t){return this.el.querySelectorAll(t)},render:function(){return this},destroy:function(){r.isUndefined(this.stopListening)||this.stopListening(),i.remove(this.el)},_ensureElement:function(){if(this.el)this._setElement(this.el);else{var t=Object.assign({},r.result(this,"attributes"));this.id&&(t.id=this.id),this.className&&(t.class=this.className);var e=i.createElement(this.tagName,t);this._setElement(e)}},_setElement:function(t){return this.el=t,this}}},function(t,e,n){var r=n(25),i=n(18),o=n(128),s=r(s=Object.keys)&&s,a=s?function(t){return i(t)?s(t):[]}:o;t.exports=a},function(t,e,n){var r=n(151),i=window.getSelection();function o(t,e){t.focus(),i.removeAllRanges(),i.addRange(e)}t.exports=function(t,e){if(1==arguments.length){if(!i.rangeCount)return;var n={},s=i.getRangeAt(0),a=s.cloneRange();return a.selectNodeContents(t),a.setEnd(s.endContainer,s.endOffset),n.end=a.toString().length,a.setStart(s.startContainer,s.startOffset),n.start=n.end-a.toString().length,n.atStart=0===a.startOffset,n}var u,c,l=e.end&&e.end!==e.start,f=0,s=document.createRange(),h=r(t).select(Node.TEXT_NODE).revisit(!1),p=e.start>t.textContent.length?t.textContent.length:e.start,d=e.end>t.textContent.length?t.textContent.length:e.end,y=e.atStart;for(;u=h.next();){var v=f;f+=u.textContent.length;var g=y?f>p:f>=p;if(!c&&g&&(c=!0,s.setStart(u,p-v),!l)){s.collapse(!0),o(t,s);break}if(l&&f>=d){s.setEnd(u,d-v),o(t,s);break}}}},function(t,e,n){var r;void 0===(r=function(){return function(t){var e=typeof t;return"function"==e||t&&"object"==e||!1}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){return function(t){return t&&"object"==typeof t||!1}}.apply(e,[]))||(t.exports=r)},function(t,e,n){"use strict";n.r(e),n.d(e,"createBlocksFromParagraphs",function(){return f}),n.d(e,"getTotalLength",function(){return a}),n.d(e,"isAtStart",function(){return s}),n.d(e,"isAtEnd",function(){return u}),n.d(e,"selectToEnd",function(){return o}),n.d(e,"isSelectedFromStart",function(){return l}),n.d(e,"isSelectedToEnd",function(){return c}),n.d(e,"rangeToHTML",function(){return h}),n.d(e,"trimScribeContent",function(){return p});var r=n(13),i=n(1),o=function(t){var e=(new t.api.Selection).range.cloneRange();return e.setEndAfter(t.el.lastChild,0),e},s=function(t){var e=r(t.el);return 0===e.start&&0===e.end&&e.atStart},a=function(t){var e=(new t.api.Selection).range.cloneRange();return e.selectNodeContents(t.el),e.toString().length},u=function(t){var e=r(t.el);return a(t)===e.end&&e.start===e.end},c=function(t){var e=r(t.el);return a(t)===e.end},l=function(t){var e=r(t.el);return e.atStart&&0===e.start},f=function(t,e){var n,r=document.createElement("div");if(r.appendChild(o(e).extractContents()),function(t){if(null!==t.firstChild){var e=t.firstChild.childNodes[0];e&&"#text"!==e.nodeName&&""===e.innerText&&t.firstChild.removeChild(e)}}(r),!e.allowsBlockElements()){var i=document.createElement("div");i.appendChild(r),r=i}r.childNodes.length>=1&&[].slice.call(r.childNodes).reverse().forEach(function(e){""!==e.innerText&&(n={format:"html",text:e.innerHTML.trim()},t.mediator.trigger("block:create",t.type,n,t.el,{autoFocus:!0}))})},h=function(t){var e=document.createElement("div");return e.appendChild(t.extractContents()),e.innerHTML},p=function(t){var e=t.node.firstDeepestChild(t.el);for("#text"===e.nodeName&&(e.textContent=i.leftTrim(e.textContent));t.el.firstChild&&""===t.el.firstChild.textContent&&-1!=document.createElement(t.el.firstChild.tagName).outerHTML.indexOf("/");)t.el.removeChild(t.el.firstChild);for(;t.el.lastChild&&""===t.el.lastChild.textContent&&-1!=document.createElement(t.el.lastChild.tagName).outerHTML.indexOf("/");)t.el.removeChild(t.el.lastChild);for(;t.el.lastChild&&"BR"===t.el.lastChild.nodeName;)t.el.removeChild(t.el.lastChild)}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(26);t.exports=function(t){return!(!t||!r[typeof t])}},function(t,e,n){var r,i;r=[n(202),n(15)],void 0===(i=function(t,e){var n="[object Function]",r=/^\[object .+?Constructor\]$/,i=Object.prototype,o=Function.prototype.toString,s=i.toString,a=RegExp("^"+t(s).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return function(t){return null!=t&&(s.call(t)==n?a.test(o.call(t)):e(t)&&r.test(t)||!1)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(7),n(19),n(15)],void 0===(i=function(t,e,n){var r=Object.prototype.toString,i=e(i=Array.isArray)&&i;return i||function(e){return n(e)&&t(e.length)&&"[object Array]"==r.call(e)||!1}}.apply(e,r))||(t.exports=i)},function(t,e,n){"use strict";t.exports={Text:n(222),Quote:n(229),Image:n(230),Heading:n(231),List:n(232),Tweet:n(234),Video:n(235)}},function(t,e,n){"use strict";var r=n(0),i=n(1);t.exports=function(t,e){var o,s=n(21),a=t,u="Text"===(e=i.classify(e));return r.isUndefined(u)&&(u=!1),u&&(a="<p>"+a),a=a.replace(/\[([^\]]+)\]\(([^\)]+)\)/gm,function(t,e,n){return"<a href='"+n+"'>"+e.replace(/\n/g,"")+"</a>"}),a=(a=i.reverse(i.reverse(a).replace(/_(?!\\)((_\\|[^_])*)_(?=$|[^\\])/gm,function(t,e){return">i/<"+e.replace(/\n/g,"").replace(/[\s]+$/,"")+">i<"}).replace(/\*\*(?!\\)((\*\*\\|[^\*\*])*)\*\*(?=$|[^\\])/gm,function(t,e){return">b/<"+e.replace(/\n/g,"").replace(/[\s]+$/,"")+">b<"}))).replace(/^\> (.+)$/gm,"$1"),s.hasOwnProperty(e)&&(o=s[e],!r.isUndefined(o.prototype.toHTML)&&r.isFunction(o.prototype.toHTML)&&(a=o.prototype.toHTML(a))),u&&(a=(a=a.replace(/\n\s*\n/gm,"</p><p>")).replace(/\n/gm,"<br>")),a=(a=a.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\n/g,"<br>").replace(/\*\*/,"").replace(/__/,"")).replace(/\\\*/g,"*").replace(/\\\[/g,"[").replace(/\\\]/g,"]").replace(/\\\_/g,"_").replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/\\\-/g,"-"),u&&(a+="</p>"),a}},function(t,e,n){"use strict";var r=n(42),i=n(98),o="function"==typeof Symbol&&"symbol"==typeof Symbol(),s=Object.prototype.toString,a=Object.defineProperty&&function(){var t={};try{for(var e in Object.defineProperty(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),u=function(t,e,n,r){var i;e in t&&("function"!=typeof(i=r)||"[object Function]"!==s.call(i)||!r())||(a?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},c=function(t,e){var n=arguments.length>2?arguments[2]:{},s=r(e);o&&(s=s.concat(Object.getOwnPropertySymbols(e))),i(s,function(r){u(t,r,e[r],n[r])})};c.supportsDescriptors=!!a,t.exports=c},function(t,e,n){"use strict";var r=n(99);t.exports=Function.prototype.bind||r},function(t,e){var n=Object.prototype.toString,r=RegExp("^"+String(n).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");t.exports=function(t){return"function"==typeof t&&r.test(t)}},function(t,e){t.exports={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1}},function(t,e){t.exports=function(t,e,n){e||(e=0),void 0===n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,o=Array(i<0?0:i);++r<i;)o[r]=t[e+r];return o}},function(t,e){t.exports=function(t){return"function"==typeof t}},function(t,e,n){var r,i;r=[n(157),n(158),n(5)],void 0===(i=function(t,e,n){"use strict";function r(t){return t.nodeType===Node.TEXT_NODE}function i(t,e){return function(n){return n.nodeType===t.ELEMENT_NODE&&n.className===e}}function o(t,e){return!(e.nodeType!==t.TEXT_NODE||!/^\s*$/.test(e.nodeValue))}function s(t,e){for(;e.childNodes.length>0;)t.insertBefore(e.childNodes[0],e);t.removeChild(e)}return{isInlineElement:function(e){return t.includes(e.nodeName)},isBlockElement:function(t){return e.includes(t.nodeName)},isEmptyInlineElement:function t(e){return!(e.children.length>1)&&(1!==e.children.length||""===e.textContent.trim())&&(0===e.children.length?""===e.textContent.trim():t(e.children[0]))},isText:r,isEmptyTextNode:function(t){var e=!1;try{e=r(t)&&""===t.data}catch(t){e=!0}return e},isWhitespaceOnlyTextNode:o,isTextNodeWithContent:function(t,e){return e.nodeType===t.TEXT_NODE&&!o(t,e)},isFragment:function(t){return t.nodeType===Node.DOCUMENT_FRAGMENT_NODE},isBefore:function(t,e){return t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING},isSelectionMarkerNode:function(t){return i(Node,"scribe-marker")(t)},isCaretPositionNode:function(t){return i(Node,"caret-position")(t)},firstDeepestChild:function t(e){var n=e.firstChild;return n&&"BR"!==n.nodeName?t(n):e},insertAfter:function(t,e){return e.parentNode.insertBefore(t,e.nextSibling)},removeNode:function(t){return t.parentNode.removeChild(t)},getAncestor:function(t,e,n){function r(t){return e===t}if(!r(t))for(var i=t.parentNode;i&&!r(i);){if(n(i))return i;i=i.parentNode}},nextSiblings:function(t){for(var e=n.List();t=t.nextSibling;)e=e.push(t);return e},wrap:function(t,e){return t[0].parentNode.insertBefore(e,t[0]),t.forEach(function(t){e.appendChild(t)}),e},unwrap:s,removeChromeArtifacts:function(e){var r=n.List(e.querySelectorAll(t.map(function(t){return t+'[style*="line-height"]'}).join(",")));r=r.filter(function(t,e){return window.getComputedStyle(e).lineHeight===t.lineHeight}.bind(null,window.getComputedStyle(e)));var i=n.List();r.forEach(function(t){t.style.lineHeight=null,""===t.getAttribute("style")&&t.removeAttribute("style"),"SPAN"===t.nodeName&&0===t.attributes.length&&(i=i.push(t))}),i.forEach(function(t){s(t.parentNode,t)})},elementHasClass:i,hasContent:function(t){return!!(t&&t.children&&t.children.length>0)||!(!t||"BR"!==t.nodeName)}}}.apply(e,r))||(t.exports=i)},function(t,e,n){"use strict";t.exports={mediatedEvents:{},eventNamespace:null,_bindMediatedEvents:function(){Object.keys(this.mediatedEvents).forEach(function(t){var e=this.mediatedEvents[t];t=this.eventNamespace?this.eventNamespace+":"+t:t,this.mediator.on(t,this[e].bind(this))},this)}}},function(t,e,n){"use strict";var r=n(24);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,n){"use strict";var r=Function.prototype.toString,i=/^\s*class\b/,o=function(t){try{var e=r.call(t);return i.test(e)}catch(t){return!1}},s=Object.prototype.toString,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(a)return function(t){try{return!o(t)&&(r.call(t),!0)}catch(t){return!1}}(t);if(o(t))return!1;var e=s.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},function(t,e,n){var r=n(25),i=n(57),o={configurable:!1,enumerable:!1,value:null,writable:!1},s=function(){try{var t={},e=r(e=Object.defineProperty)&&e,n=e(t,t,t)&&e}catch(t){}return n}(),a=s?function(t,e){o.value=e,s(t,"__bindData__",o)}:i;t.exports=a},function(t,e,n){"use strict";var r=n(1);t.exports={mixinName:"Ajaxable",ajaxable:!0,initializeAjaxable:function(){this._queued=[]},addQueuedItem:function(t,e){r.log("Adding queued item for "+this.blockID+" called "+t),this._queued.push({name:t,deferred:e})},removeQueuedItem:function(t){r.log("Removing queued item for "+this.blockID+" called "+t),this._queued=this._queued.filter(function(e){return e.name!==t})},hasItemsInQueue:function(){return this._queued.length>0},resolveAllInQueue:function(){this._queued.forEach(function(t){r.log("Aborting queued request: "+t.name),t.deferred.cancel()},this)}}},function(t,e,n){"use strict";function r(t){t.preventDefault(),t.stopPropagation()}function i(t){t.dataTransfer.dropEffect="copy",t.currentTarget.classList.add("st-drag-over"),t.preventDefault(),t.stopPropagation()}function o(t){t.currentTarget.classList.remove("st-drag-over"),t.preventDefault(),t.stopPropagation()}t.exports={dropArea:function(t){return t.addEventListener("dragenter",r),t.addEventListener("dragover",i),t.addEventListener("dragleave",o),t},noDropArea:function(t){return t.removeEventListener("dragenter"),t.removeEventListener("dragover"),t.removeEventListener("dragleave"),t}}},function(t,e,n){var r,i;r=[n(7),n(15)],void 0===(i=function(t,e){var n,r="[object Arguments]",i=Object.prototype.toString;return function(o){var s=e(o)?o.length:n;return t(s)&&i.call(o)==r||!1}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){var t=Math.pow(2,53)-1;return function(e,n){return n=null==n?t:n,(e=+e)>-1&&e%1==0&&e<n}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(36),n(20),n(37),n(7),n(14),n(75)],void 0===(i=function(t,e,n,r,i,o){var s=Object.prototype.hasOwnProperty;return function(a){if(null==a)return[];i(a)||(a=Object(a));var u=a.length;u=u&&r(u)&&(e(a)||o.nonEnumArgs&&t(a))&&u||0;for(var c=a.constructor,l=-1,f="function"==typeof c&&c.prototype===a,h=Array(u),p=u>0;++l<u;)h[l]=l+"";for(var d in a)p&&n(d,u)||"constructor"==d&&(f||!s.call(a,d))||h.push(d);return h}}.apply(e,r))||(t.exports=i)},function(t,e,n){"use strict";var r=n(35),i=n(4),o=n(3),s=n(2),a=function(t,e){this.block=t,this.blockID=this.block.getAttribute("id"),this.mediator=e,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(a.prototype,n(6),n(11),{bound:["onMouseDown","onDragStart","onDragEnd","onDrop"],className:"st-block-ui-btn__reorder",tagName:"a",attributes:function(){return{html:'<svg role="img" class="st-icon">\n                 <use xlink:href="'.concat(s.defaults.iconUrl,'#move"/>\n               </svg>'),draggable:"true","data-icon":"move"}},initialize:function(){this.el.addEventListener("mousedown",this.onMouseDown),this.el.addEventListener("dragstart",this.onDragStart),this.el.addEventListener("dragend",this.onDragEnd),r.dropArea(this.block),this.block.addEventListener("drop",this.onDrop)},blockId:function(){return this.block.getAttribute("id")},onMouseDown:function(){i.trigger("block:reorder:down")},onDrop:function(t){t.preventDefault();var e=this.block,n=t.dataTransfer.getData("text/plain"),r=document.querySelector("#"+n);e.id!==n&&o.insertAfter(r,e),this.mediator.trigger("block:rerender",n),i.trigger("block:reorder:dropped",n)},onDragStart:function(t){var e=this.block;this.dragEl=e.cloneNode(!0),this.dragEl.classList.add("st-drag-element"),this.dragEl.style.top="".concat(e.offsetTop,"px"),this.dragEl.style.left="".concat(e.offsetLeft,"px"),e.parentNode.appendChild(this.dragEl),t.dataTransfer.setDragImage(this.dragEl,0,0),t.dataTransfer.setData("text/plain",this.blockId()),this.mediator.trigger("block-controls:hide"),i.trigger("block:reorder:dragstart"),e.classList.add("st-block--dragging")},onDragEnd:function(t){i.trigger("block:reorder:dragend"),this.block.classList.remove("st-block--dragging"),this.dragEl.parentNode.removeChild(this.dragEl)},render:function(){return this}}),t.exports=a},function(t,e,n){"use strict";t.exports=function(t){return function(e){var n=new e.api.Command("heading");n.queryEnabled=function(){return t.inline_editable},n.queryState=function(){return"heading"===t.type},n.execute=function(e){var r={format:"html",text:t.getScribeInnerContent()};t.mediator.trigger("block:replace",t.el,n.queryState()?"Text":"Heading",r)},e.commands.heading=n}}},function(t,e,n){"use strict";t.exports=function(t){return function(e){var n=new e.api.Command("quote");n.queryEnabled=function(){return t.inline_editable},n.queryState=function(){return"quote"===t.type},n.execute=function(e){var r={format:"html",text:t.getScribeInnerContent()};t.mediator.trigger("block:replace",t.el,n.queryState()?"Text":"Quote",r)},e.commands.quote=n}}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Array.prototype.slice,s=n(97),a=Object.prototype.propertyIsEnumerable,u=!a.call({toString:null},"toString"),c=a.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(t){var e=t.constructor;return e&&e.prototype===t},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!h["$"+t]&&r.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{f(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),d=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===i.call(t),o=s(t),a=e&&"[object String]"===i.call(t),h=[];if(!e&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var d=c&&n;if(a&&t.length>0&&!r.call(t,0))for(var y=0;y<t.length;++y)h.push(String(y));if(o&&t.length>0)for(var v=0;v<t.length;++v)h.push(String(v));else for(var g in t)d&&"prototype"===g||!r.call(t,g)||h.push(String(g));if(u)for(var m=function(t){if("undefined"==typeof window||!p)return f(t);try{return f(t)}catch(t){return!1}}(t),b=0;b<l.length;++b)m&&"constructor"===l[b]||!r.call(t,l[b])||h.push(l[b]);return h};d.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var t=Object.keys;Object.keys=function(e){return s(e)?t(o.call(e)):t(e)}}}else Object.keys=d;return Object.keys||d},t.exports=d},function(t,e,n){"use strict";var r=n(42),i=n(24),o=n(44)(),s=Object,a=i.call(Function.call,Array.prototype.push),u=i.call(Function.call,Object.prototype.propertyIsEnumerable),c=o?Object.getOwnPropertySymbols:null;t.exports=function(t,e){if(null==t)throw new TypeError("target must be an object");var n,i,l,f,h,p,d,y=s(t);for(n=1;n<arguments.length;++n){i=s(arguments[n]),f=r(i);var v=o&&(Object.getOwnPropertySymbols||c);if(v)for(h=v(i),l=0;l<h.length;++l)d=h[l],u(i,d)&&a(f,d);for(l=0;l<f.length;++l)p=i[d=f[l]],u(i,d)&&(y[d]=p)}return y}},function(t,e,n){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},function(t,e,n){"use strict";var r=n(43);t.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),n={},r=0;r<e.length;++r)n[e[r]]=e[r];var i=Object.assign({},n),o="";for(var s in i)o+=s;return t!==o}()?r:function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1}()?r:Object.assign:r}},function(t,e,n){"use strict";t.exports=n(102)},function(t,e){t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,n){"use strict";var r=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,o=Object.getPrototypeOf||function(t){return t.__proto__},s=void 0,a="undefined"==typeof Uint8Array?void 0:o(Uint8Array),u={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":i?o([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":void 0,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":void 0,"$ %AsyncIteratorPrototype%":s&&i&&Symbol.asyncIterator?s[Symbol.asyncIterator]():void 0,"$ %Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?void 0:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":void 0,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":void 0,"$ %Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":i?o(o([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&i?o((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof Promise?void 0:Promise,"$ %PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"$ %PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"$ %Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"$ %Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"$ %Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"$ %Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&i?o((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":i?o(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":i?Symbol:void 0,"$ %SymbolPrototype%":i?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":r,"$ %TypedArray%":a,"$ %TypedArrayPrototype%":a?a.prototype:void 0,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype};t.exports=function(t,e){if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');var n="$ "+t;if(!(n in u))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===u[n]&&!e)throw new TypeError("intrinsic "+t+" exists, but is not available. Please file an issue!");return u[n]}},function(t,e){t.exports=Number.isNaN||function(t){return t!=t}},function(t,e){var n=Number.isNaN||function(t){return t!=t};t.exports=Number.isFinite||function(t){return"number"==typeof t&&!n(t)&&t!==1/0&&t!==-1/0}},function(t,e){t.exports=function(t){return t>=0?1:-1}},function(t,e){t.exports=function(t,e){var n=t%e;return Math.floor(n>=0?n:n+e)}},function(t,e,n){"use strict";var r=n(46);t.exports=function(t){var e=r.ToObject(this),n=r.ToInteger(r.ToLength(e.length));if(!r.IsCallable(t))throw new TypeError("Array#find: predicate must be a function");if(0!==n)for(var i,o=arguments[1],s=0;s<n;s++)if(i=e[s],r.Call(t,o,[i,s,e]))return i}},function(t,e,n){"use strict";t.exports=function(){return Array.prototype.find&&1!==[,1].find(function(){return!0})?Array.prototype.find:n(53)}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var t=a(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){(function(e){var r=n(25),i=n(18),o=(n(57),r(o=Object.create)&&o);function s(t,e){return i(t)?o(t):{}}o||(s=function(){function t(){}return function(n){if(i(n)){t.prototype=n;var r=new t;t.prototype=null}return r||e.Object()}}()),t.exports=s}).call(this,n(17))},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(134),i=(n(12),n(135));t.exports=function(t){return null==t?"":String(t).replace(i,r)}},function(t,e){t.exports={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}},function(t,e){t.exports=/<%=([\s\S]+?)%>/g},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t,e){this.mediator=e,this.initialize(t?t.trim():"")};Object.assign(o.prototype,{initialize:function(t){this.store=this._parseData(t)||{data:[]}},retrieve:function(){return this.store},toString:function(t){return JSON.stringify(this.store,void 0,t)},reset:function(){i.log("Resetting the EditorStore"),this.store={data:[]}},addData:function(t){return this.store.data.push(t),this.store},_parseData:function(t){var e;if(0===t.length)return e;try{var n=JSON.parse(t);r.isUndefined(n.data)||(e=n)}catch(t){this.mediator.trigger("errors:add",{text:i18n.t("errors:load_fail")}),this.mediator.trigger("errors:render"),console.log("Sorry there has been a problem with parsing the JSON"),console.log(t)}return e}}),t.exports=o},function(t,e,n){"use strict";var r=n(1),i=n(4),o=function(t){this.form=t,this.initialize()};Object.assign(o.prototype,{initialize:function(){this.submitBtns=this.form.querySelectorAll("input[type='submit']");var t=[];Array.prototype.forEach.call(this.submitBtns,function(e,n){t.push(e.getAttribute("value"))}),this.submitBtnTitles=t,this.canSubmit=!0,this.globalUploadCount=0,this._bindEvents()},setSubmitButton:function(t,e){Array.prototype.forEach.call(this.submitBtns,function(t,n){t.setAttribute("value",e)})},resetSubmitButton:function(){var t=this.submitBtnTitles;Array.prototype.forEach.call(this.submitBtns,function(e,n){e.setAttribute("value",t[n])})},onUploadStart:function(t){this.globalUploadCount++,r.log("onUploadStart called "+this.globalUploadCount),1===this.globalUploadCount&&this._disableSubmitButton()},onUploadStop:function(t){this.globalUploadCount=this.globalUploadCount<=0?0:this.globalUploadCount-1,r.log("onUploadStop called "+this.globalUploadCount),0===this.globalUploadCount&&this._enableSubmitButton()},onError:function(t){r.log("onError called"),this.canSubmit=!1},_disableSubmitButton:function(t){this.setSubmitButton(null,t||i18n.t("general:wait")),Array.prototype.forEach.call(this.submitBtns,function(t,e){t.setAttribute("disabled","disabled"),t.classList.add("disabled")})},_enableSubmitButton:function(){this.resetSubmitButton(),Array.prototype.forEach.call(this.submitBtns,function(t,e){t.removeAttribute("disabled"),t.classList.remove("disabled")})},_events:{disableSubmitButton:"_disableSubmitButton",enableSubmitButton:"_enableSubmitButton",setSubmitButton:"setSubmitButton",resetSubmitButton:"resetSubmitButton",onError:"onError",onUploadStart:"onUploadStart",onUploadStop:"onUploadStop"},_bindEvents:function(){Object.keys(this._events).forEach(function(t){i.on(t,this[this._events[t]],this)},this)}}),t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(64),a=n(4);t.exports=function(t,e,n,u){var c=[t.blockID,(new Date).getTime(),"raw"].join("-"),l=new FormData,f=t.attachmentName||i.defaults.attachmentName,h=t.attachmentFile||i.defaults.attachmentFile,p=t.attachmentUid||i.defaults.attachmentUid;l.append(f,e.name),l.append(h,e),l.append(p,c),a.trigger("onUploadStart",l),t.resetMessages();var d=t.uploadUrl||i.defaults.uploadUrl,y=s.fetch(d,{body:l,method:"POST",dataType:"json"});return t.addQueuedItem(c,y),y.then(function(e){o.log("Upload callback called"),a.trigger("onUploadStop",e),!r.isUndefined(n)&&r.isFunction(n)&&n.apply(t,arguments,e),t.removeQueuedItem(c)}).catch(function(e,n,i){o.log("Upload callback error called"),a.trigger("onUploadStop",void 0,i,n,e),!r.isUndefined(u)&&r.isFunction(u)&&u.call(t,n),t.removeQueuedItem(c)}),y}},function(t,e,n){"use strict";n(142);var r=n(143),i=n(144),o=n(2),s=Object.create(null);s.fetch=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=(n=Object.assign({},o.defaults.ajaxOptions,n)).jsonp?r(t).promise:fetch(t,n).then(function(t){return"json"===n.dataType?t.json():t.text()}),i(e)},t.exports=s},function(t,e,n){"use strict";t.exports={Ajaxable:n(34),Controllable:n(145),Droppable:n(146),Fetchable:n(147),Pastable:n(148),Uploadable:n(149),MultiEditable:n(150),Textable:n(221)}},function(t,e){t.exports=function(t,e){return!t!=!e}},function(t,e){var n=/\b(Array|Date|Object|Math|JSON)\b/g;t.exports=function(t,e){var r=function(t){for(var e=[],n=0;n<t.length;n++)~e.indexOf(t[n])||e.push(t[n]);return e}(function(t){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\//g,"").replace(n,"").match(/[a-zA-Z_]\w*/g)||[]}(t));return e&&"string"==typeof e&&(e=function(t){return function(e){return t+e}}(e)),e?function(t,e,n){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\/|[a-zA-Z_]\w*/g,function(t){return"("==t[t.length-1]?n(t):~e.indexOf(t)?n(t):t})}(t,r,e):r}},function(t,e,n){"use strict";var r=n(0),i=n(152),o=n(2),s=n(191),a=n(192),u=n(197),c={p:!0,a:{href:!0,target:"_blank",rel:!0},i:!0,b:!0,strong:!0,em:!0};t.exports={initScribeInstance:function(t,e,n){e=e||{};var l={debug:o.scribeDebug},f=c;r.isObject(e)&&(l=Object.assign(l,e));var h=new i(t,l);return e.hasOwnProperty("tags")&&(f=Object.assign(c,e.tags)),h.use(s()),h.use(a()),h.use(u({tags:f})),r.isFunction(n)&&n.call(this,h),h},execTextBlockCommand:function(t,e){if(r.isUndefined(t))throw"No Scribe instance found to query command";var n=t.getCommand(e);return t.el.focus(),n.execute()},queryTextBlockCommandState:function(t,e){if(r.isUndefined(t))throw"No Scribe instance found to query command";var n=t.getCommand(e);return(new t.api.Selection).range&&n.queryState()}}},function(t,e,n){var r;void 0===(r=function(){"use strict";return{isUndoKeyCombination:function(t){return!t.shiftKey&&(t.metaKey||t.ctrlKey&&!t.altKey)&&90===t.keyCode},isRedoKeyCombination:function(t){return t.shiftKey&&(t.metaKey||t.ctrlKey&&!t.altKey)&&90===t.keyCode}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return{contentChanged:"scribe:content-changed",legacyContentChanged:"content-changed",destroy:"scribe:destroy"}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){return function(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(73),n(74)],void 0===(i=function(t,e){return function(n,r){return t(n,r,e)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(201)],void 0===(i=function(t){return function(e,n,r){for(var i=-1,o=t(e),s=r(e),a=s.length;++i<a;){var u=s[i];if(!1===n(o[u],u,o))break}return e}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(7),n(19),n(14),n(204)],void 0===(i=function(t,e,n,r){var i=e(i=Object.keys)&&i;return i?function(e){if(e)var o=e.constructor,s=e.length;return"function"==typeof o&&o.prototype===e||"function"!=typeof e&&s&&t(s)?r(e):n(e)?i(e):[]}:r}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(19),n(76)],void 0===(i=function(t,e){var n=/\bthis\b/,r=Object.prototype,i=(i=e.window)&&i.document,o=r.propertyIsEnumerable,s={};return function(r){s.funcDecomp=!t(e.WinRTError)&&n.test(function(){return this}),s.funcNames="string"==typeof Function.name;try{s.dom=11===i.createDocumentFragment().nodeType}catch(t){s.dom=!1}try{s.nonEnumArgs=!o.call(arguments,1)}catch(t){s.nonEnumArgs=!0}}(0,0),s}.apply(e,r))||(t.exports=i)},function(t,e,n){(function(t,n){var r;void 0===(r=function(){var r={function:!0,object:!0},i=r[typeof e]&&e&&!e.nodeType&&e,o=r[typeof t]&&t&&!t.nodeType&&t,s=r[typeof window]&&window;return i&&o&&"object"==typeof n&&n||s!==(this&&this.window)&&s||this}.apply(e,[]))||(t.exports=r)}).call(this,n(205)(t),n(17))},function(t,e,n){var r;void 0===(r=function(){return function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(7),n(15)],void 0===(i=function(t,e){var n={};n["[object Float32Array]"]=n["[object Float64Array]"]=n["[object Int8Array]"]=n["[object Int16Array]"]=n["[object Int32Array]"]=n["[object Uint8Array]"]=n["[object Uint8ClampedArray]"]=n["[object Uint16Array]"]=n["[object Uint32Array]"]=!0,n["[object Arguments]"]=n["[object Array]"]=n["[object ArrayBuffer]"]=n["[object Boolean]"]=n["[object Date]"]=n["[object Error]"]=n["[object Function]"]=n["[object Map]"]=n["[object Number]"]=n["[object Object]"]=n["[object RegExp]"]=n["[object Set]"]=n["[object String]"]=n["[object WeakMap]"]=!1;var r=Object.prototype.toString;return function(i){return e(i)&&t(i.length)&&n[r.call(i)]||!1}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){return function(t,e,n){n||(n=e,e={});for(var r=-1,i=n.length;++r<i;){var o=n[r];e[o]=t[o]}return e}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(212)],void 0===(i=function(t){return function(e,n,r){if("function"!=typeof e)return t;if(void 0===n)return e;switch(r){case 1:return function(t){return e.call(n,t)};case 3:return function(t,r,i){return e.call(n,t,r,i)};case 4:return function(t,r,i,o){return e.call(n,t,r,i,o)};case 5:return function(t,r,i,o,s){return e.call(n,t,r,i,o,s)}}return function(){return e.apply(n,arguments)}}}.apply(e,r))||(t.exports=i)},function(t,e,n){"use strict";var r=function(t,e){this.mediator=e,this.block=t,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(r.prototype,n(6),n(11),{bound:["toggle","show","hide"],className:"st-block-positioner",visibleClass:"active",initialize:function(){},toggle:function(){this.mediator.trigger("block-positioner-select:render",this),this.el.classList.toggle(this.visibleClass)},show:function(){this.el.classList.add(this.visibleClass)},hide:function(){this.el.classList.remove(this.visibleClass)}}),t.exports=r},function(t,e,n){"use strict";var r=n(3),i=["<span class='st-block-positioner__selected-value'></span>","<select class='st-block-positioner__select'></select>"].join("\n"),o=function(t){this.mediator=t,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(o.prototype,n(6),n(11),{total_blocks:0,bound:["onBlockCountChange","onSelectChange"],className:"st-block-positioner__inner",initialize:function(){this.el.insertAdjacentHTML("beforeend",i),this.select=this.el.querySelector(".st-block-positioner__select"),this.positioner=null,this.select.addEventListener("change",this.onSelectChange)},onBlockCountChange:function(t){t!==this.total_blocks&&(this.total_blocks=t,this.renderPositionList())},onSelectChange:function(){var t=this.select.value;0!==t&&(this.mediator.trigger("block:changePosition",this.positioner.block,t,1===t?"before":"after"),this.positioner.toggle())},renderPositionList:function(){for(var t="<option value='0'>"+i18n.t("general:position")+"</option>",e=1;e<=this.total_blocks;e++)t+="<option value="+e+">"+e+"</option>";this.select.innerHTML=t},renderInBlock:function(t){this.positioner&&this.positioner!==t&&this.positioner.hide(),this.positioner=t,this.select.value=0,r.remove(this.el),t.el.appendChild(this.el)}}),t.exports=o},function(t,e,n){"use strict";var r=n(2),i=function(){this._ensureElement(),this._bindFunctions()};Object.assign(i.prototype,n(6),n(11),{tagName:"a",className:"st-block-ui-btn__delete",attributes:{html:function(){return'<svg role="img" class="st-icon">\n                   <use xlink:href="'.concat(r.defaults.iconUrl,'#cross"/>\n                 </svg>')},"data-icon":"close"}}),t.exports=i},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){var e=t.getAttribute("data-st-name")||t.getAttribute("name");return e||(e="Field"),i.capitalize(e)};t.exports={errors:[],valid:function(){return this.performValidations(),0===this.errors.length},performValidations:function(){this.resetErrors();var t=this.$(".st-required");Array.prototype.forEach.call(t,function(t,e){this.validateField(t)}.bind(this)),this.validations.forEach(this.runValidator,this),this.el.classList.toggle("st-block--with-errors",this.errors.length>0)},validations:[],validateField:function(t){0===(t.getAttribute("contenteditable")?t.textContent:t.value).length&&this.setError(t,i18n.t("errors:block_empty",{name:o(t)}))},runValidator:function(t){r.isUndefined(this[t])||this[t].call(this)},setError:function(t,e){var n=this.addMessage(e,"st-msg--error");t.classList.add("st-error"),this.errors.push({field:t,reason:e,msg:n})},resetErrors:function(){this.errors.forEach(function(t){t.field.classList.remove("st-error"),t.msg.remove()}),this.messages.classList.remove("st-block__messages--is-visible"),this.errors=[]}}},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(4);t.exports={blockStorage:{},createStore:function(t){this.blockStorage={type:i.underscored(this.type),data:t||{}}},save:function(){var t=this._serializeData();r.isEmpty(t)||this.setData(t)},getData:function(){return this.save(),this.blockStorage},getBlockData:function(){return this.save(),this.blockStorage.data},_getData:function(){return this.blockStorage.data},setData:function(t){i.log("Setting data for block "+this.blockID),Object.assign(this.blockStorage.data,t||{})},setAndLoadData:function(t){this.setData(t),this.beforeLoadingData()},_serializeData:function(){},loadData:function(){},beforeLoadingData:function(){i.log("loadData for "+this.blockID),o.trigger("editor/block/loadData"),this.loadData(this._getData())},_loadData:function(){i.log("_loadData is deprecated and will be removed in the future. Please use beforeLoadingData instead."),this.beforeLoadingData()},checkAndLoadData:function(){r.isEmpty(this._getData())||this.beforeLoadingData()}}},function(t,e,n){"use strict";var r=n(13),i=n(0),o=n(1),s=n(2),a=n(4),u=n(21),c=n(3),l=["convertToMarkdown","convertFromMarkdown","formatBar"],f=function(t){this.options=t.options,this.blockOptions=l.reduce(function(e,n){return e[n]=t.options[n],e},{}),this.instance_scope=t.ID,this.mediator=t.mediator,this.editor=t,this.wrapper=t.wrapper,this.blocks=[],this.blockCounts={},this.blockTypes=[],this._setBlocksTypes(),this._setRequired(),this._bindMediatedEvents(),this.initialize()};Object.assign(f.prototype,n(6),n(30),n(9),{eventNamespace:"block",mediatedEvents:{create:"createBlock",createBefore:"createBlockBefore",remove:"removeBlock",rerender:"rerenderBlock",replace:"replaceBlock",focusPrevious:"focusPreviousBlock",focusNext:"focusNextBlock",paste:"paste"},initialize:function(){},createBlock:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(r=Object.assign({autoFocus:!1,focusAtEnd:!1},r),t=o.classify(t),this.canCreateBlock(t)){var i=new u[t](e,this.instance_scope,this.mediator,this.blockOptions,this.options);this.blocks.push(i),this._incrementBlockTypeCount(t),this.renderBlock(i,n),r.autoFocus?i.focus():r.focusAtEnd&&i.focusAtEnd(),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),this.mediator.trigger("block:created",i),a.trigger(e?"block:create:existing":"block:create:new",i),o.log("Block created of type "+t)}},createBlockBefore:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(r=Object.assign({autoFocus:!1,focusAtEnd:!1},r),t=o.classify(t),this.canCreateBlock(t)){var i=new u[t](e,this.instance_scope,this.mediator,this.blockOptions,this.options);this.blocks.push(i),this._incrementBlockTypeCount(t);var s=this.getPreviousBlock(n);s?this.renderBlock(i,s.el):this.renderBlock(i,this.wrapper.querySelector(".st-top-controls")),r.autoFocus?i.focus():r.focusAtEnd&&i.focusAtEnd(),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),this.mediator.trigger("block:created",i),a.trigger(e?"block:create:existing":"block:create:new",i),o.log("Block created of type "+t)}},removeBlock:function(t,e){e=Object.assign({transposeContent:!1,focusOnPrevious:!1,focusOnNext:!1,createNextBlock:!1},e);var n=this.findBlockById(t),i=o.classify(n.type),s=this.getPreviousBlock(n),u=this.getNextBlock(n);if(e.transposeContent&&n.mergeable){if(!s&&1===this.blocks.length)return;if(s&&"list"===s.type)s.focusAtEnd(),s.appendToCurrentItem(n.getScribeInnerContent());else if(s&&s.mergeable)s.appendContent(n.getScribeInnerContent(),{keepCaretPosition:!0});else{if(""!==n.getScribeInnerContent())return;s?s.focusAtEnd():u&&u.focus()}}if(this.mediator.trigger("block-controls:reset"),this.blocks=this.blocks.filter(function(t){return t.blockID!==n.blockID}),n.remove(),s&&u&&this.options.joinListBlocksOnBlockRemove&&"list"===s.type&&"list"===u.type){var c=u._serializeData().listItems;u.remove();var l=s.getCurrentTextEditor(),f=r(l.scribe.el);c.forEach(function(t){s.addListItem(t.content)}),s.focusOn(l,{caretPosition:f.start})}e.focusOnPrevious&&s&&s.focusAtEnd(),e.focusOnNext&&(u?u.focus():e.createNextBlock&&this.createBlock("text",null,null,{autoFocus:!0})),this._decrementBlockTypeCount(i),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),a.trigger("block:remove",t)},replaceBlock:function(t,e,n){var r=this.findBlockById(t.id);this.createBlock(e,n||null,t),this.removeBlock(t.id),r.remove()},renderBlock:function(t,e){var n=this,r=t.render().el;e?c.insertAfter(r,e):this.wrapper.appendChild(r),t.trigger("onRender"),this.options.selectionMouse&&(r.addEventListener("mouseenter",function(){if(n.editor.mouseDown){var e=n.getBlockPosition(t.el);n.mediator.trigger("selection:update",e)}}),r.addEventListener("mousedown",function(e){var r=n.getBlockPosition(t.el),i={mouseEnabled:!0,expand:e.shiftKey||e.metaKey};n.mediator.trigger("selection:start",r,i)}))},rerenderBlock:function(t){var e=this.findBlockById(t);i.isUndefined(e)||e.isEmpty()||!e.drop_options.re_render_on_reorder||e.beforeLoadingData()},getPreviousBlock:function(t){var e=this.getBlockPosition(t.el);if(!(e<1)){var n=this.wrapper.querySelectorAll(".st-block")[e-1];return this.findBlockById(n.getAttribute("id"))}},getNextBlock:function(t){var e=this.getBlockPosition(t.el);if(!(e<0||e>=this.blocks.length-1))return this.findBlockById(this.wrapper.querySelectorAll(".st-block")[e+1].getAttribute("id"))},getBlockPosition:function(t){return Array.prototype.indexOf.call(this.wrapper.querySelectorAll(".st-block"),t)},focusPreviousBlock:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object.assign({force:!1},e);var n=this.findBlockById(t);if(n&&(n.mergeable||e.force)){var r=this.getPreviousBlock(n);r&&r.mergeable?r.focusAtEnd():e.force&&n.focus()}},focusNextBlock:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object.assign({force:!1},e);var n=this.findBlockById(t);if(n&&(n.mergeable||e.force)){var r=this.getNextBlock(n);r&&r.mergeable?r.focusAtStart():e.force&&n.focusAtEnd()}},paste:function(t){var e=this,n=o.getBlockBySelection();if(n){n.split();var r=this.getNextBlock(n);if(n.isEmpty()&&this.removeBlock(n.blockID),r)return void t.forEach(function(t){e.createBlockBefore(t.type,t.data,r,{focusAtEnd:!0})})}t.forEach(function(t){e.createBlock(t.type,t.data,void 0,{focusAtEnd:!0})})},triggerBlockCountUpdate:function(){this.mediator.trigger("block:countUpdate",this.blocks.length)},canCreateBlock:function(t){return this.blockLimitReached()?(o.log("Cannot add any more blocks. Limit reached."),!1):this.isBlockTypeAvailable(t)?!!this.canAddBlockType(t)||(o.log("Block Limit reached for type "+t),!1):(o.log("Block type not available "+t),!1)},validateBlockTypesExist:function(t){if(s.skipValidation||!t)return!1;(this.required||[]).forEach(function(t,e){if(this.isBlockTypeAvailable(t))if(0===this._getBlockTypeCount(t))o.log("Failed validation on required block type "+t),this.mediator.trigger("errors:add",{text:i18n.t("errors:type_missing",{type:t})});else{if(this.getBlocksByType(t).filter(function(t){return!t.isEmpty()}).length>0)return!1;this.mediator.trigger("errors:add",{text:i18n.t("errors:required_type_empty",{type:t})}),o.log("A required block type "+t+" is empty")}},this)},findBlockById:function(t){return this.blocks.find(function(e){return e.blockID===t})},getBlocksByType:function(t){return this.blocks.filter(function(e){return o.classify(e.type)===t})},getBlocksByIDs:function(t){return this.blocks.filter(function(e){return t.includes(e.blockID)})},blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},isBlockTypeAvailable:function(t){return this.blockTypes.includes(t)},canAddBlockType:function(t){var e=this._getBlockTypeLimit(t);return!(0!==e&&this._getBlockTypeCount(t)>=e)},_setBlocksTypes:function(){this.blockTypes=this.options.blockTypes||Object.keys(u)},_setRequired:function(){this.required=!1,Array.isArray(this.options.required)&&!i.isEmpty(this.options.required)&&(this.required=this.options.required)},_incrementBlockTypeCount:function(t){this.blockCounts[t]=i.isUndefined(this.blockCounts[t])?1:this.blockCounts[t]+1},_decrementBlockTypeCount:function(t){this.blockCounts[t]=i.isUndefined(this.blockCounts[t])?1:this.blockCounts[t]-1},_getBlockTypeCount:function(t){return i.isUndefined(this.blockCounts[t])?0:this.blockCounts[t]},_blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},_getBlockTypeLimit:function(t){return this.isBlockTypeAvailable(t)?parseInt(i.isUndefined(this.options.blockTypeLimits[t])?0:this.options.blockTypeLimits[t],10):0}}),t.exports=f},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(3),s=n(10),a=n(39),u=n(223),c=function(t,e,n,i,o){this.createStore(t),this.blockID=r.uniqueId("st-block-"),this.instanceID=e,this.mediator=n,this.options=i||{},this.editorOptions=o||{},this._ensureElement(),this._bindFunctions(),this.initialize.apply(this,arguments)};Object.assign(c.prototype,n(6),n(9),n(11),n(85),{focus:function(){},valid:function(){return!0},className:"st-block",block_template:u,attributes:function(){return{id:this.blockID,"data-type":this.type,"data-instance":this.instanceID}},title:function(){return i18n.t("blocks:".concat(this.type,":title"))||i.titleize(this.type.replace(/[\W_]/g," "))},blockCSSClass:function(){return this.blockCSSClass=i.toSlug(this.type),this.blockCSSClass},type:"",class:function(){return i.classify(this.type)},editorHTML:"",initialize:function(){},onBlockRender:function(){},beforeBlockRender:function(){},_setBlockInner:function(){var t=r.result(this,"editorHTML");this.el.insertAdjacentHTML("beforeend",this.block_template(t)),this.inner=this.el.querySelector(".st-block__inner")},render:function(){return this.beforeBlockRender(),this._setBlockInner(),this._blockPrepare(),this},_blockPrepare:function(){this._initUI(),this._initMessages(),this.checkAndLoadData(),this.el.classList.add("st-item-ready"),this.on("onRender",this.onBlockRender),this.save()},_withUIComponent:function(t,e,n){this.ui.appendChild(t.render().el),e&&n&&s.delegate(this.ui,e,"click",n)},_initUI:function(){var t=o.createElement("div",{class:"st-block__ui"});this.el.appendChild(t),this.ui=t,this._initUIComponents()},_initMessages:function(){var t=o.createElement("div",{class:"st-block__messages"});this.inner.insertBefore(t,this.inner.firstChild),this.messages=t},addMessage:function(t,e){return t=o.createElement("span",{html:t,class:"st-msg "+e}),this.messages.appendChild(t),this.messages.classList.add("st-block__messages--is-visible"),t},resetMessages:function(){this.messages.innerHTML="",this.messages.classList.remove("st-block__messages--is-visible")},_initUIComponents:function(){this._withUIComponent(new a(this.el))}}),c.fn=c.prototype,c.extend=n(89),t.exports=c},function(t,e,n){"use strict";var r=n(2);t.exports=function(){return'\n    <button class="st-block-addition" type="button">\n      <span class="st-block-addition__button">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'.concat(r.defaults.iconUrl,'#plus"/>\n        </svg>\n      </span>\n    </button>\n  ')}},function(t,e,n){"use strict";t.exports=function(t,e){var n,r=this;n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return r.apply(this,arguments)},Object.assign(n,r,e);var i=function(){this.constructor=n};return i.prototype=r.prototype,n.prototype=new i,t&&Object.assign(n.prototype,t),n.__super__=r.prototype,n}},function(t,e,n){"use strict";var r=n(16),i=r.createBlocksFromParagraphs,o=r.isAtStart,s=r.isAtEnd,a=r.isSelectedFromStart,u=r.isSelectedToEnd,c=r.selectToEnd;t.exports=function(t){return function(e){var n=!1;e.el.addEventListener("keydown",function(r){t.supressKeyListeners||("Enter"!==r.key||r.shiftKey?["Left","ArrowLeft","Up","ArrowUp"].indexOf(r.key)>-1?r.shiftKey&&a(e)?(r.preventDefault(),r.stopPropagation(),document.activeElement&&document.activeElement.blur(),t.mediator.trigger("selection:block",t)):o(e)&&(r.preventDefault(),r.stopPropagation(),t.mediator.trigger("block:focusPrevious",t.blockID)):8===r.keyCode&&o(e)?(r.preventDefault(),n=!0):["Right","ArrowRight","Down","ArrowDown"].indexOf(r.key)>-1&&(r.shiftKey&&u(e)?(r.preventDefault(),r.stopPropagation(),document.activeElement&&document.activeElement.blur(),t.mediator.trigger("selection:block",t)):s(e)&&(r.preventDefault(),t.mediator.trigger("block:focusNext",t.blockID))):(r.preventDefault(),s(e)?(c(e).extractContents(),t.mediator.trigger("block:create","Text",null,t.el,{autoFocus:!0})):i(t,e),e.allowsBlockElements()&&""===e.getTextContent()&&e.setContent("<p><br></p>")))}),e.el.addEventListener("keyup",function(e){t.supressKeyListeners||"Backspace"===e.key&&n&&(e.preventDefault(),t.mediator.trigger("block:remove",t.blockID,{transposeContent:!0}),n=!1)})}}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(3),s=n(10),a=n(236),u=function(t,e,n){this.editor=n,this.options=Object.assign({},i.defaults.formatBar,t||{}),this.commands=this.options.commands,this.mediator=e,this.isShown=!1,this._ensureElement(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize.apply(this,arguments)};Object.assign(u.prototype,n(6),n(30),n(9),n(11),{className:"st-format-bar",bound:["onFormatButtonClick","renderBySelection","hide"],eventNamespace:"formatter",mediatedEvents:{position:"renderBySelection",show:"show",hide:"hide"},initialize:function(){var t=this.commands.reduce(function(t,e){return t+a(e)},"");this.el.insertAdjacentHTML("beforeend",t),s.delegate(this.el,".st-format-btn","mousedown",this.onFormatButtonClick)},hide:function(){this.block=void 0,this.isShown=!1,this.el.classList.remove("st-format-bar--is-ready"),o.remove(this.el)},show:function(){this.isShown||(this.isShown=!0,this.editor.outer.appendChild(this.el),this.el.classList.add("st-format-bar--is-ready"))},remove:function(){o.remove(this.el)},renderBySelection:function(t){this.block=t,this.highlightSelectedButtons(),this.show(),this.calculatePosition()},calculatePosition:function(){var t=window.getSelection().getRangeAt(0).getBoundingClientRect(),e={},n=this.editor.outer.getBoundingClientRect();e.top=t.top-n.top+"px",e.left=(t.left+t.right)/2-this.el.offsetWidth/2-n.left+"px",this.el.style.top=e.top,this.el.style.left=e.left},highlightSelectedButtons:function(){var t=this;[].forEach.call(this.el.querySelectorAll(".st-format-btn"),function(e){var n=e.getAttribute("data-cmd");e.classList.toggle("st-format-btn--is-active",t.block.queryTextBlockCommandState(n)),e=null})},onFormatButtonClick:function(t){if(t.preventDefault(),t.stopPropagation(),r.isUndefined(this.block))throw"Associated block not found";var e=t.currentTarget.getAttribute("data-cmd");return!r.isUndefined(e)&&(this.block.execTextBlockCommand(e),this.highlightSelectedButtons(),document.activeElement.focus(),!1)}}),t.exports=u},function(t,e,n){"use strict";var r=n(2),i=n(1),o=n(4),s=n(62),a=!1,u={bindFormSubmit:function(t){a||(new s(t),t.addEventListener("submit",this.onFormSubmit),a=!0)},onBeforeSubmit:function(t){var e=0;return r.instances.forEach(function(n,r){e+=n.onFormSubmit(t)}),i.log("Total errors: "+e),e},onFormSubmit:function(t){u.onBeforeSubmit()>0&&(o.trigger("onError"),t.preventDefault())}};t.exports=u},function(t,e,n){t.exports=n(94),n(246)},function(t,e,n){"use strict";n(95),n(96).shim(),n(101).shim(),n(114),n(115).polyfill(),n(116),n(117),n(118);var r=n(1),i={config:n(2),log:r.log,Locales:n(140),Events:n(9),EventBus:n(4),EditorStore:n(61),Submittable:n(62),FileUploader:n(63),BlockMixins:n(65),BlockPositioner:n(81),BlockPositionerSelect:n(82),BlockReorder:n(39),BlockDeletion:n(83),BlockValidations:n(84),BlockStore:n(85),BlockManager:n(86),SimpleBlock:n(87),Block:n(8),Blocks:n(21),FormatBar:n(91),Editor:n(237),toMarkdown:n(245),toHTML:n(22),setDefaults:function(t){Object.assign(i.config.defaults,t||{})},getInstance:r.getInstance,setBlockOptions:function(t,e){var n=i.Blocks[t];void 0!==n&&Object.assign(n.prototype,e||{})},runOnAllInstances:function(t){if(i.Editor.prototype.hasOwnProperty(t)){var e=Array.prototype.slice.call(arguments,1);Array.prototype.forEach.call(i.config.instances,function(n){n[t].apply(null,e)})}else i.log("method doesn't exist")}};Object.assign(i,n(92)),t.exports=i},function(t,e,n){t.exports=n.p+"178289a66e4bc63fe9a24fba4c8acf36.svg"},function(t,e,n){"use strict";var r=n(23),i=n(43),o=n(45),s=n(100),a=o();r(a,{getPolyfill:o,implementation:i,shim:s}),t.exports=a},function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e=r.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===r.call(t.callee)),n}},function(t,e){var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString;t.exports=function(t,e,i){if("[object Function]"!==r.call(e))throw new TypeError("iterator must be a function");var o=t.length;if(o===+o)for(var s=0;s<o;s++)e.call(i,t[s],s,t);else for(var a in t)n.call(t,a)&&e.call(i,t[a],a,t)}},function(t,e,n){"use strict";var r=Array.prototype.slice,i=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==i.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n,o=r.call(arguments,1),s=Math.max(0,e.length-o.length),a=[],u=0;u<s;u++)a.push("$"+u);if(n=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof n){var i=e.apply(this,o.concat(r.call(arguments)));return Object(i)===i?i:this}return e.apply(t,o.concat(r.call(arguments)))}),e.prototype){var c=function(){};c.prototype=e.prototype,n.prototype=new c,c.prototype=null}return n}},function(t,e,n){"use strict";var r=n(23),i=n(45);t.exports=function(){var t=i();return r(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t}},function(t,e,n){"use strict";var r=n(23),i=n(46),o=n(53),s=n(54),a=n(113),u=Array.prototype.slice,c=s(),l=function(t,e){i.RequireObjectCoercible(t);var n=u.call(arguments,1);return c.apply(t,n)};r(l,{getPolyfill:s,implementation:o,shim:a}),t.exports=l},function(t,e,n){"use strict";var r=n(31),i=n(103),o=n(48),s=o("%TypeError%"),a=o("%SyntaxError%"),u=o("%Array%"),c=o("%String%"),l=o("%Object%"),f=o("%Number%"),h=o("%Symbol%",!0),p=o("%RegExp%"),d=!!h,y=n(49),v=n(50),g=f.MAX_SAFE_INTEGER||Math.pow(2,53)-1,m=n(108),b=n(51),_=n(52),w=n(109),x=parseInt,S=n(24),E=S.call(Function.call,u.prototype.slice),k=S.call(Function.call,c.prototype.slice),T=S.call(Function.call,p.prototype.test,/^0b[01]+$/i),C=S.call(Function.call,p.prototype.test,/^0o[0-7]+$/i),O=S.call(Function.call,p.prototype.exec),A=new p("["+["","",""].join("")+"]","g"),B=S.call(Function.call,p.prototype.test,A),D=S.call(Function.call,p.prototype.test,/^[-+]0x[0-9a-f]+$/i),j=S.call(Function.call,c.prototype.charCodeAt),M=S.call(Function.call,Object.prototype.toString),P=Math.floor,I=Math.abs,L=Object.create,U=l.getOwnPropertyDescriptor,N=l.isExtensible,z=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),F=new RegExp("(^["+z+"]+)|(["+z+"]+$)","g"),q=S.call(Function.call,c.prototype.replace),R=n(110),$=n(112),H=m(m({},R),{Call:function(t,e){var n=arguments.length>2?arguments[2]:[];if(!this.IsCallable(t))throw new s(t+" is not a function");return t.apply(e,n)},ToPrimitive:i,ToNumber:function(t){var e=w(t)?t:i(t,f);if("symbol"==typeof e)throw new s("Cannot convert a Symbol value to a number");if("string"==typeof e){if(T(e))return this.ToNumber(x(k(e,2),2));if(C(e))return this.ToNumber(x(k(e,2),8));if(B(e)||D(e))return NaN;var n=function(t){return q(t,F,"")}(e);if(n!==e)return this.ToNumber(n)}return f(e)},ToInt16:function(t){var e=this.ToUint16(t);return e>=32768?e-65536:e},ToInt8:function(t){var e=this.ToUint8(t);return e>=128?e-256:e},ToUint8:function(t){var e=this.ToNumber(t);if(y(e)||0===e||!v(e))return 0;var n=b(e)*P(I(e));return _(n,256)},ToUint8Clamp:function(t){var e=this.ToNumber(t);if(y(e)||e<=0)return 0;if(e>=255)return 255;var n=P(t);return n+.5<e?n+1:e<n+.5?n:n%2!=0?n+1:n},ToString:function(t){if("symbol"==typeof t)throw new s("Cannot convert a Symbol value to a string");return c(t)},ToObject:function(t){return this.RequireObjectCoercible(t),l(t)},ToPropertyKey:function(t){var e=this.ToPrimitive(t,c);return"symbol"==typeof e?e:this.ToString(e)},ToLength:function(t){var e=this.ToInteger(t);return e<=0?0:e>g?g:e},CanonicalNumericIndexString:function(t){if("[object String]"!==M(t))throw new s("must be a string");if("-0"===t)return-0;var e=this.ToNumber(t);return this.SameValue(this.ToString(e),t)?e:void 0},RequireObjectCoercible:R.CheckObjectCoercible,IsArray:u.isArray||function(t){return"[object Array]"===M(t)},IsConstructor:function(t){return"function"==typeof t&&!!t.prototype},IsExtensible:Object.preventExtensions?function(t){return!w(t)&&N(t)}:function(t){return!0},IsInteger:function(t){if("number"!=typeof t||y(t)||!v(t))return!1;var e=I(t);return P(e)===e},IsPropertyKey:function(t){return"string"==typeof t||"symbol"==typeof t},IsRegExp:function(t){if(!t||"object"!=typeof t)return!1;if(d){var e=t[h.match];if(void 0!==e)return R.ToBoolean(e)}return $(t)},SameValueZero:function(t,e){return t===e||y(t)&&y(e)},GetV:function(t,e){if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");return this.ToObject(t)[e]},GetMethod:function(t,e){if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");var n=this.GetV(t,e);if(null!=n){if(!this.IsCallable(n))throw new s(e+"is not a function");return n}},Get:function(t,e){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");return t[e]},Type:function(t){return"symbol"==typeof t?"Symbol":R.Type(t)},SpeciesConstructor:function(t,e){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");var n=t.constructor;if(void 0===n)return e;if("Object"!==this.Type(n))throw new s("O.constructor is not an Object");var r=d&&h.species?n[h.species]:void 0;if(null==r)return e;if(this.IsConstructor(r))return r;throw new s("no constructor found")},CompletePropertyDescriptor:function(t){if(!this.IsPropertyDescriptor(t))throw new s("Desc must be a Property Descriptor");return this.IsGenericDescriptor(t)||this.IsDataDescriptor(t)?(r(t,"[[Value]]")||(t["[[Value]]"]=void 0),r(t,"[[Writable]]")||(t["[[Writable]]"]=!1)):(r(t,"[[Get]]")||(t["[[Get]]"]=void 0),r(t,"[[Set]]")||(t["[[Set]]"]=void 0)),r(t,"[[Enumerable]]")||(t["[[Enumerable]]"]=!1),r(t,"[[Configurable]]")||(t["[[Configurable]]"]=!1),t},Set:function(t,e,n,r){if("Object"!==this.Type(t))throw new s("O must be an Object");if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");if("Boolean"!==this.Type(r))throw new s("Throw must be a Boolean");if(r)return t[e]=n,!0;try{t[e]=n}catch(t){return!1}},HasOwnProperty:function(t,e){if("Object"!==this.Type(t))throw new s("O must be an Object");if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");return r(t,e)},HasProperty:function(t,e){if("Object"!==this.Type(t))throw new s("O must be an Object");if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");return e in t},IsConcatSpreadable:function(t){if("Object"!==this.Type(t))return!1;if(d&&"symbol"==typeof h.isConcatSpreadable){var e=this.Get(t,Symbol.isConcatSpreadable);if(void 0!==e)return this.ToBoolean(e)}return this.IsArray(t)},Invoke:function(t,e){if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");var n=E(arguments,2),r=this.GetV(t,e);return this.Call(r,t,n)},GetIterator:function(t,e){if(!d)throw new SyntaxError("ES.GetIterator depends on native iterator support.");var n=e;arguments.length<2&&(n=this.GetMethod(t,h.iterator));var r=this.Call(n,t);if("Object"!==this.Type(r))throw new s("iterator must return an object");return r},IteratorNext:function(t,e){var n=this.Invoke(t,"next",arguments.length<2?[]:[e]);if("Object"!==this.Type(n))throw new s("iterator next must return an object");return n},IteratorComplete:function(t){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(iterResult) is not Object");return this.ToBoolean(this.Get(t,"done"))},IteratorValue:function(t){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(iterResult) is not Object");return this.Get(t,"value")},IteratorStep:function(t){var e=this.IteratorNext(t);return!0!==this.IteratorComplete(e)&&e},IteratorClose:function(t,e){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(iterator) is not Object");if(!this.IsCallable(e))throw new s("Assertion failed: completion is not a thunk for a Completion Record");var n,r=e,i=this.GetMethod(t,"return");if(void 0===i)return r();try{var o=this.Call(i,t,[])}catch(t){throw n=r(),r=null,t}if(n=r(),r=null,"Object"!==this.Type(o))throw new s("iterator .return must return an object");return n},CreateIterResultObject:function(t,e){if("Boolean"!==this.Type(e))throw new s("Assertion failed: Type(done) is not Boolean");return{value:t,done:e}},RegExpExec:function(t,e){if("Object"!==this.Type(t))throw new s("R must be an Object");if("String"!==this.Type(e))throw new s("S must be a String");var n=this.Get(t,"exec");if(this.IsCallable(n)){var r=this.Call(n,t,[e]);if(null===r||"Object"===this.Type(r))return r;throw new s('"exec" method must return `null` or an Object')}return O(t,e)},ArraySpeciesCreate:function(t,e){if(!this.IsInteger(e)||e<0)throw new s("Assertion failed: length must be an integer >= 0");var n,r=0===e?0:e;if(this.IsArray(t)&&(n=this.Get(t,"constructor"),"Object"===this.Type(n)&&d&&h.species&&null===(n=this.Get(n,h.species))&&(n=void 0)),void 0===n)return u(r);if(!this.IsConstructor(n))throw new s("C must be a constructor");return new n(r)},CreateDataProperty:function(t,e,n){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");var r=U(t,e),i=r||"function"!=typeof N||N(t);if(r&&(!r.writable||!r.configurable)||!i)return!1;var o={configurable:!0,enumerable:!0,value:n,writable:!0};return Object.defineProperty(t,e,o),!0},CreateDataPropertyOrThrow:function(t,e,n){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");var r=this.CreateDataProperty(t,e,n);if(!r)throw new s("unable to create data property");return r},ObjectCreate:function(t,e){if(null!==t&&"Object"!==this.Type(t))throw new s("Assertion failed: proto must be null or an object");if((arguments.length<2?[]:e).length>0)throw new a("es-abstract does not yet support internal slots");if(null===t&&!L)throw new a("native Object.create support is required to create null objects");return L(t)},AdvanceStringIndex:function(t,e,n){if("String"!==this.Type(t))throw new s("S must be a String");if(!this.IsInteger(e)||e<0||e>g)throw new s("Assertion failed: length must be an integer >= 0 and <= 2**53");if("Boolean"!==this.Type(n))throw new s("Assertion failed: unicode must be a Boolean");if(!n)return e+1;if(e+1>=t.length)return e+1;var r=j(t,e);if(r<55296||r>56319)return e+1;var i=j(t,e+1);return i<56320||i>57343?e+1:e+2}});delete H.CheckObjectCoercible,t.exports=H},function(t,e,n){"use strict";t.exports=n(104)},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,i=n(47),o=n(32),s=n(105),a=n(106);t.exports=function(t){if(i(t))return t;var e,n="default";if(arguments.length>1&&(arguments[1]===String?n="string":arguments[1]===Number&&(n="number")),r&&(Symbol.toPrimitive?e=function(t,e){var n=t[e];if(null!=n){if(!o(n))throw new TypeError(n+" returned for property "+e+" of object "+t+" is not a function");return n}}(t,Symbol.toPrimitive):a(t)&&(e=Symbol.prototype.valueOf)),void 0!==e){var u=e.call(t,n);if(i(u))return u;throw new TypeError("unable to convert exotic object to primitive")}return"default"===n&&(s(t)||a(t))&&(n="string"),function(t,e){if(null==t)throw new TypeError("Cannot call method on "+t);if("string"!=typeof e||"number"!==e&&"string"!==e)throw new TypeError('hint must be "string" or "number"');var n,r,s,a="string"===e?["toString","valueOf"]:["valueOf","toString"];for(s=0;s<a.length;++s)if(n=t[a[s]],o(n)&&(r=n.call(t),i(r)))return r;throw new TypeError("No default value")}(t,"default"===n?"number":n)}},function(t,e,n){"use strict";var r=Date.prototype.getDay,i=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(o?function(t){try{return r.call(t),!0}catch(t){return!1}}(t):"[object Date]"===i.call(t))}},function(t,e,n){"use strict";var r=Object.prototype.toString;if(n(107)()){var i=Symbol.prototype.toString,o=/^Symbol\(.*\)$/;t.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==r.call(t))return!1;try{return function(t){return"symbol"==typeof t.valueOf()&&o.test(i.call(t))}(t)}catch(t){return!1}}}else t.exports=function(t){return!1}},function(t,e,n){"use strict";(function(e){var r=e.Symbol,i=n(44);t.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&i())))}}).call(this,n(17))},function(t,e,n){var r=n(24).call(Function.call,Object.prototype.hasOwnProperty),i=Object.assign;t.exports=function(t,e){if(i)return i(t,e);for(var n in e)r(e,n)&&(t[n]=e[n]);return t}},function(t,e){t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,n){"use strict";var r=n(48),i=r("%Object%"),o=r("%TypeError%"),s=r("%String%"),a=n(49),u=n(50),c=n(51),l=n(52),f=n(32),h=n(111),p=n(31),d={ToPrimitive:h,ToBoolean:function(t){return!!t},ToNumber:function(t){return+t},ToInteger:function(t){var e=this.ToNumber(t);return a(e)?0:0!==e&&u(e)?c(e)*Math.floor(Math.abs(e)):e},ToInt32:function(t){return this.ToNumber(t)>>0},ToUint32:function(t){return this.ToNumber(t)>>>0},ToUint16:function(t){var e=this.ToNumber(t);if(a(e)||0===e||!u(e))return 0;var n=c(e)*Math.floor(Math.abs(e));return l(n,65536)},ToString:function(t){return s(t)},ToObject:function(t){return this.CheckObjectCoercible(t),i(t)},CheckObjectCoercible:function(t,e){if(null==t)throw new o(e||"Cannot call method on "+t);return t},IsCallable:f,SameValue:function(t,e){return t===e?0!==t||1/t==1/e:a(t)&&a(e)},Type:function(t){return null===t?"Null":void 0===t?"Undefined":"function"==typeof t||"object"==typeof t?"Object":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"string"==typeof t?"String":void 0},IsPropertyDescriptor:function(t){if("Object"!==this.Type(t))return!1;var e={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in t)if(p(t,n)&&!e[n])return!1;var r=p(t,"[[Value]]"),i=p(t,"[[Get]]")||p(t,"[[Set]]");if(r&&i)throw new o("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");return!(!p(t,"[[Get]]")&&!p(t,"[[Set]]"))},IsDataDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");return!(!p(t,"[[Value]]")&&!p(t,"[[Writable]]"))},IsGenericDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");return!this.IsAccessorDescriptor(t)&&!this.IsDataDescriptor(t)},FromPropertyDescriptor:function(t){if(void 0===t)return t;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");if(this.IsDataDescriptor(t))return{value:t["[[Value]]"],writable:!!t["[[Writable]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};if(this.IsAccessorDescriptor(t))return{get:t["[[Get]]"],set:t["[[Set]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};throw new o("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(t){if("Object"!==this.Type(t))throw new o("ToPropertyDescriptor requires an object");var e={};if(p(t,"enumerable")&&(e["[[Enumerable]]"]=this.ToBoolean(t.enumerable)),p(t,"configurable")&&(e["[[Configurable]]"]=this.ToBoolean(t.configurable)),p(t,"value")&&(e["[[Value]]"]=t.value),p(t,"writable")&&(e["[[Writable]]"]=this.ToBoolean(t.writable)),p(t,"get")){var n=t.get;if(void 0!==n&&!this.IsCallable(n))throw new TypeError("getter must be a function");e["[[Get]]"]=n}if(p(t,"set")){var r=t.set;if(void 0!==r&&!this.IsCallable(r))throw new o("setter must be a function");e["[[Set]]"]=r}if((p(e,"[[Get]]")||p(e,"[[Set]]"))&&(p(e,"[[Value]]")||p(e,"[[Writable]]")))throw new o("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return e}};t.exports=d},function(t,e,n){"use strict";var r=Object.prototype.toString,i=n(47),o=n(32),s=function(t){var e;if((e=arguments.length>1?arguments[1]:"[object Date]"===r.call(t)?String:Number)===String||e===Number){var n,s,a=e===String?["toString","valueOf"]:["valueOf","toString"];for(s=0;s<a.length;++s)if(o(t[a[s]])&&(n=t[a[s]](),i(n)))return n;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};t.exports=function(t){return i(t)?t:arguments.length>1?s(t,arguments[1]):s(t)}},function(t,e,n){"use strict";var r=n(31),i=RegExp.prototype.exec,o=Object.getOwnPropertyDescriptor,s=Object.prototype.toString,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!a)return"[object RegExp]"===s.call(t);var e=o(t,"lastIndex");return!(!e||!r(e,"value"))&&function(t){try{var e=t.lastIndex;return t.lastIndex=0,i.call(t),!0}catch(t){return!1}finally{t.lastIndex=e}}(t)}},function(t,e,n){"use strict";var r=n(23),i=n(54);t.exports=function(){var t=i();return r(Array.prototype,{find:t},{find:function(){return Array.prototype.find!==t}}),t}},function(t,e,n){"use strict";Array.prototype.includes||(Array.prototype.includes=function(t){var e=Object(this),n=parseInt(e.length)||0;if(0===n)return!1;var r,i,o=parseInt(arguments[1])||0;for(o>=0?r=o:(r=n+o)<0&&(r=0);r<n;){if(t===(i=e[r])||t!=t&&i!=i)return!0;r++}return!1})},function(t,e,n){(function(e,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */var r;r=function(){"use strict";function t(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,o=void 0,s=void 0,a=function(t,e){d[i]=t,d[i+1]=e,2===(i+=2)&&(s?s(y):_())},u="undefined"!=typeof window?window:void 0,c=u||{},l=c.MutationObserver||c.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var t=setTimeout;return function(){return t(y,1)}}var d=new Array(1e3);function y(){for(var t=0;t<i;t+=2){(0,d[t])(d[t+1]),d[t]=void 0,d[t+1]=void 0}i=0}var v,g,m,b,_=void 0;function w(t,e){var n=this,r=new this.constructor(E);void 0===r[S]&&z(r);var i=n._state;if(i){var o=arguments[i-1];a(function(){return U(i,r,o,n._result)})}else I(n,r,t,e);return r}function x(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(E);return D(e,t),e}f?_=function(){return e.nextTick(y)}:l?(g=0,m=new l(y),b=document.createTextNode(""),m.observe(b,{characterData:!0}),_=function(){b.data=g=++g%2}):h?((v=new MessageChannel).port1.onmessage=y,_=function(){return v.port2.postMessage(0)}):_=void 0===u?function(){try{var t=Function("return this")().require("vertx");return void 0!==(o=t.runOnLoop||t.runOnContext)?function(){o(y)}:p()}catch(t){return p()}}():p();var S=Math.random().toString(36).substring(2);function E(){}var k=void 0,T=1,C=2,O={error:null};function A(t){try{return t.then}catch(t){return O.error=t,O}}function B(e,n,r){n.constructor===e.constructor&&r===w&&n.constructor.resolve===x?function(t,e){e._state===T?M(t,e._result):e._state===C?P(t,e._result):I(e,void 0,function(e){return D(t,e)},function(e){return P(t,e)})}(e,n):r===O?(P(e,O.error),O.error=null):void 0===r?M(e,n):t(r)?function(t,e,n){a(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?D(t,n):M(t,n))},function(e){r||(r=!0,P(t,e))},t._label);!r&&i&&(r=!0,P(t,i))},t)}(e,n,r):M(e,n)}function D(t,e){var n,r;t===e?P(t,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=e),null===n||"object"!==r&&"function"!==r?M(t,e):B(t,e,A(e)))}function j(t){t._onerror&&t._onerror(t._result),L(t)}function M(t,e){t._state===k&&(t._result=e,t._state=T,0!==t._subscribers.length&&a(L,t))}function P(t,e){t._state===k&&(t._state=C,t._result=e,a(j,t))}function I(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+T]=n,i[o+C]=r,0===o&&t._state&&a(L,t)}function L(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?U(n,r,i,o):i(o);t._subscribers.length=0}}function U(e,n,r,i){var o=t(r),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return O.error=t,O}}(r,i))===O?(c=!0,a=s.error,s.error=null):u=!0,n===s)return void P(n,new TypeError("A promises callback cannot return that same promise."))}else s=i,u=!0;n._state!==k||(o&&u?D(n,s):c?P(n,a):e===T?M(n,s):e===C&&P(n,s))}var N=0;function z(t){t[S]=N++,t._state=void 0,t._result=void 0,t._subscribers=[]}var F=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(E),this.promise[S]||z(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?M(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&M(this.promise,this._result))):P(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===k&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===x){var i=A(t);if(i===w&&t._state!==k)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===q){var o=new n(E);B(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===k&&(this._remaining--,t===C?P(r,n):this._result[e]=n),0===this._remaining&&M(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;I(t,void 0,function(t){return n._settledAt(T,e,t)},function(t){return n._settledAt(C,e,t)})},t}(),q=function(){function e(t){this[S]=N++,this._result=this._state=void 0,this._subscribers=[],E!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e(function(e){D(t,e)},function(e){P(t,e)})}catch(e){P(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return q.prototype.then=w,q.all=function(t){return new F(this,t).promise},q.race=function(t){var e=this;return r(t)?new e(function(n,r){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(n,r)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},q.resolve=x,q.reject=function(t){var e=new this(E);return P(e,t),e},q._setScheduler=function(t){s=t},q._setAsap=function(t){a=t},q._asap=a,q.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=q},q.Promise=q,q},t.exports=r()}).call(this,n(55),n(17))},function(t,e){!function(){"use strict";if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}()},function(t,e){!function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,r=arguments.length;for(n=0;n<r;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}()},function(t,e){!function(){"use strict";/Trident/.test(navigator.userAgent)&&Object.defineProperty(HTMLElement.prototype,"contains",{writable:!0,enumerable:!1,configurable:!0,value:function(t){return!!t&&(this===t||!!(this.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY))}}),"function"!=typeof Document.prototype.contains&&Object.defineProperty(Document.prototype,"contains",{writable:!0,enumerable:!1,configurable:!0,value:function(t){return!!t&&this.documentElement.contains(t)}}),"function"!=typeof Range.prototype.intersectsNode&&Object.defineProperty(Range.prototype,"intersectsNode",{writable:!0,enumerable:!1,configurable:!0,value:function(t){if(!t)throw new TypeError("Failed to execute 'intersectsNode' on 'Range': 1 argument required, but only 0 present.");if(this.startContainer.ownerDocument!==t.ownerDocument)return!1;if(!t.parentNode)return!0;var e=document.createRange();e.selectNode(t);var n=this.compareBoundaryPoints(Range.START_TO_END,e),r=this.compareBoundaryPoints(Range.END_TO_START,e);return 1===n&&-1===r}})}()},function(t,e,n){var r=n(120),i=n(28),o="[object Arguments]",s="[object Array]",a="[object Object]",u="[object String]",c=Object.prototype.toString;t.exports=function(t){var e=!0;if(!t)return e;var n=c.call(t),l=t.length;return n==s||n==u||n==o||n==a&&"number"==typeof l&&i(t.splice)?!l:(r(t,function(){return e=!1}),e)}},function(t,e,n){var r=n(121),i=n(12),o=n(26);t.exports=function(t,e,n){var s,a=t,u=a;if(!a)return u;if(!o[typeof a])return u;e=e&&void 0===n?e:r(e,n,3);for(var c=-1,l=o[typeof a]&&i(a),f=l?l.length:0;++c<f;)if(!1===e(a[s=l[c]],s,t))return u;return u}},function(t,e,n){var r=n(122),i=n(126),o=n(33),s=n(127),a=/^\s*function[ \n\r\t]+\w/,u=/\bthis\b/,c=Function.prototype.toString;t.exports=function(t,e,n){if("function"!=typeof t)return i;if(void 0===e||!("prototype"in t))return t;var l=t.__bindData__;if(void 0===l&&(s.funcNames&&(l=!t.name),!(l=l||!s.funcDecomp))){var f=c.call(t);s.funcNames||(l=!a.test(f)),l||(l=u.test(f),o(t,l))}if(!1===l||!0!==l&&1&l[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return r(t,e)}},function(t,e,n){var r=n(123),i=n(27);t.exports=function(t,e){return arguments.length>2?r(t,17,i(arguments,2),null,e):r(t,1,null,null,e)}},function(t,e,n){var r=n(124),i=n(125),o=n(28),s=n(27),a=[],u=a.push,c=a.unshift;t.exports=function t(e,n,a,l,f,h){var p=1&n,d=4&n,y=16&n,v=32&n;if(!(2&n||o(e)))throw new TypeError;y&&!a.length&&(n&=-17,y=a=!1),v&&!l.length&&(n&=-33,v=l=!1);var g=e&&e.__bindData__;return g&&!0!==g?((g=s(g))[2]&&(g[2]=s(g[2])),g[3]&&(g[3]=s(g[3])),!p||1&g[1]||(g[4]=f),!p&&1&g[1]&&(n|=8),!d||4&g[1]||(g[5]=h),y&&u.apply(g[2]||(g[2]=[]),a),v&&c.apply(g[3]||(g[3]=[]),l),g[1]|=n,t.apply(null,g)):(1==n||17===n?r:i)([e,n,a,l,f,h])}},function(t,e,n){var r=n(56),i=n(18),o=n(33),s=n(27),a=[].push;t.exports=function(t){var e=t[0],n=t[2],u=t[4];function c(){if(n){var t=s(n);a.apply(t,arguments)}if(this instanceof c){var o=r(e.prototype),l=e.apply(o,t||arguments);return i(l)?l:o}return e.apply(u,t||arguments)}return o(c,t),c}},function(t,e,n){var r=n(56),i=n(18),o=n(33),s=n(27),a=[].push;t.exports=function t(e){var n=e[0],u=e[1],c=e[2],l=e[3],f=e[4],h=e[5],p=1&u,d=2&u,y=4&u,v=8&u,g=n;function m(){var e=p?f:this;if(c){var o=s(c);a.apply(o,arguments)}if((l||y)&&(o||(o=s(arguments)),l&&a.apply(o,l),y&&o.length<h))return u|=16,t([n,v?u:-4&u,o,null,f,h]);if(o||(o=arguments),d&&(n=e[g]),this instanceof m){e=r(n.prototype);var b=n.apply(e,o);return i(b)?b:e}return n.apply(e,o)}return o(m,e),m}},function(t,e){t.exports=function(t){return t}},function(t,e,n){(function(e){var r=n(25),i={};i.funcDecomp=!r(e.WinRTError)&&/\bthis\b/.test(function(){return this}),i.funcNames="string"==typeof Function.name,t.exports=i}).call(this,n(17))},function(t,e,n){var r=n(26),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e,n=t,o=[];if(!n)return o;if(!r[typeof t])return o;for(e in n)i.call(n,e)&&o.push(e);return o}},function(t,e){var n="[object String]",r=Object.prototype.toString;t.exports=function(t){return"string"==typeof t||t&&"object"==typeof t&&r.call(t)==n||!1}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,n){var r=n(28);t.exports=function(t,e){if(t){var n=t[e];return r(n)?t[e]():n}}},function(t,e,n){var r=n(133),i=(n(58),n(136)),o=n(12),s=n(60),a=n(137),u=n(138),c=/\b__p \+= '';/g,l=/\b(__p \+=) '' \+/g,f=/(__e\(.*?\)|\b__t\)) \+\n'';/g,h=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,p=/($^)/,d=/['\n\r\t\u2028\u2029\\]/g;t.exports=function(t,e,n){var y=a.imports._.templateSettings||a;t=String(t||""),n=r({},n,y);var v,g=r({},n.imports,y.imports),m=o(g),b=u(g),_=0,w=n.interpolate||p,x="__p += '",S=RegExp((n.escape||p).source+"|"+w.source+"|"+(w===s?h:p).source+"|"+(n.evaluate||p).source+"|$","g");t.replace(S,function(e,n,r,o,s,a){return r||(r=o),x+=t.slice(_,a).replace(d,i),n&&(x+="' +\n__e("+n+") +\n'"),s&&(v=!0,x+="';\n"+s+";\n__p += '"),r&&(x+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),_=a+e.length,e}),x+="';\n";var E=n.variable,k=E;k||(x="with ("+(E="obj")+") {\n"+x+"\n}\n"),x=(v?x.replace(c,""):x).replace(l,"$1").replace(f,"$1;"),x="function("+E+") {\n"+(k?"":E+" || ("+E+" = {});\n")+"var __t, __p = '', __e = _.escape"+(v?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+x+"return __p\n}";try{var T=Function(m,"return "+x).apply(void 0,b)}catch(t){throw t.source=x,t}return e?T(e):(T.source=x,T)}},function(t,e,n){var r=n(12),i=n(26);t.exports=function(t,e,n){var o,s=t,a=s;if(!s)return a;for(var u=arguments,c=0,l="number"==typeof n?2:u.length;++c<l;)if((s=u[c])&&i[typeof s])for(var f=-1,h=i[typeof s]&&r(s),p=h?h.length:0;++f<p;)void 0===a[o=h[f]]&&(a[o]=s[o]);return a}},function(t,e,n){var r=n(59);t.exports=function(t){return r[t]}},function(t,e,n){var r=n(59),i=n(12),o=RegExp("["+i(r).join("")+"]","g");t.exports=o},function(t,e){var n={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"};t.exports=function(t){return"\\"+n[t]}},function(t,e,n){var r=n(58),i={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:n(60),variable:"",imports:{_:{escape:r}}};t.exports=i},function(t,e,n){var r=n(12);t.exports=function(t){for(var e=-1,n=r(t),i=n.length,o=Array(i);++e<i;)o[e]=t[n[e]];return o}},function(t,e){var n=0;t.exports=function(t){var e=++n;return String(null==t?"":t)+e}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s={en:{general:{delete:"Delete?",drop:"Drag __block__ here",paste:"Or paste URL here",upload:"...or choose a file",close:"close",position:"Position",wait:"Please wait...",link:"Enter a link",yes:"Yes",no:"No"},errors:{title:"You have the following errors:",validation_fail:"__type__ block is invalid",block_empty:"__name__ must not be empty",type_missing:"You must have a block of type __type__",required_type_empty:"A required block type __type__ is empty",load_fail:"There was a problem loading the contents of the document"},blocks:{text:{title:"Text"},list:{title:"List"},quote:{title:"Quote",credit_field:"Credit"},image:{title:"Image",upload_error:"There was a problem with your upload"},video:{title:"Video"},tweet:{title:"Tweet",fetch_error:"There was a problem fetching your tweet"},embedly:{title:"Embedly",fetch_error:"There was a problem fetching your embed",key_missing:"An Embedly API key must be present"},heading:{title:"Heading"}}}};void 0===window.i18n?(o.log("Using i18n stub"),window.i18n={t:function(t,e){var n,o,a,u,c=t.split(":");for(o=s[i.language],u=0;u<c.length;u++)a=c[u],r.isUndefined(o[a])||(o=o[a]);return n=o,r.isString(n)?(n.indexOf("__")>=0&&Object.keys(e).forEach(function(t){n=n.replace("__"+t+"__",e[t])}),n):""}}):(o.log("Using i18next"),i18n.init({resStore:s,fallbackLng:i.language,ns:{namespaces:["general","blocks"],defaultNs:"general"}})),t.exports=s},function(t,e,n){var r,i;i=this,void 0===(r=function(){return i.Eventable=function(){var t=[].slice,e={on:function(t,e,n){if(!r(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!r(this,"once",t,[e,n])||!e)return this;var i=this,o=function(t){var e,n=2;return function(){return--n>0?e=t.apply(this,arguments):t=null,e}}(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var i,o,s,a,u,c,l,f;if(!this._events||!r(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=t?[t]:Object.keys(this._events),u=0,c=a.length;u<c;u++)if(t=a[u],s=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,f=s.length;l<f;l++)o=s[l],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(e){if(!this._events)return this;var n=t.call(arguments,1);if(!r(this,"trigger",e,n))return this;var o=this._events[e],s=this._events.all;return o&&i(o,n),s&&i(s,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;for(var o in"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t),r)r[o].off(e,n,this),i&&delete this._listeners[o];return this}},n=/\s+/,r=function(t,e,r,i){if(!r)return!0;if("object"==typeof r){for(var o in r)t[e].apply(t,[o,r[o]].concat(i));return!1}if(n.test(r)){for(var s=r.split(n),a=0,u=s.length;a<u;a++)t[e].apply(t,[s[a]].concat(i));return!1}return!0},i=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}};function o(t,n){e[t]=function(t,e,r){var i=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=(new Date).getTime());return i[o]=t,"object"==typeof e&&(r=this),t[n](e,r,this),this}}return o("listenTo","on"),o("listenToOnce","once"),e.bind=e.on,e.unbind=e.off,e}()}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){"use strict";n.r(e),n.d(e,"Headers",function(){return c}),n.d(e,"Request",function(){return v}),n.d(e,"Response",function(){return m}),n.d(e,"DOMException",function(){return _}),n.d(e,"fetch",function(){return w});var r={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(r.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(t){return t&&i.indexOf(Object.prototype.toString.call(t))>-1};function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function a(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r.iterable&&(e[Symbol.iterator]=function(){return e}),e}function c(t){this.map={},t instanceof c?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function h(t){var e=new FileReader,n=f(e);return e.readAsArrayBuffer(t),n}function p(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:r.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:r.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():r.arrayBuffer&&r.blob&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=p(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||o(t))?this._bodyArrayBuffer=p(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var t,e,n,r=l(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=f(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(t,e){t=s(t),e=a(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},c.prototype.delete=function(t){delete this.map[s(t)]},c.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},c.prototype.set=function(t,e){this.map[s(t)]=a(e)},c.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},c.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),u(t)},c.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),u(t)},c.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),u(t)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,e){var n,r,i=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),y.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function g(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function m(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},d.call(v.prototype),d.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var b=[301,302,303,307,308];m.redirect=function(t,e){if(-1===b.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})};var _=self.DOMException;try{new _}catch(t){(_=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),_.prototype.constructor=_}function w(t,e){return new Promise(function(n,i){var o=new v(t,e);if(o.signal&&o.signal.aborted)return i(new _("Aborted","AbortError"));var s=new XMLHttpRequest;function a(){s.abort()}s.onload=function(){var t,e,r={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new c,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;n(new m(i,r))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.onabort=function(){i(new _("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&r.blob&&(s.responseType="blob"),o.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),o.signal&&(o.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",a)}),s.send(void 0===o._bodyInit?null:o._bodyInit)})}w.polyfill=!0,self.fetch||(self.fetch=w,self.Headers=c,self.Request=v,self.Response=m)},function(t,e){var n=0;t.exports=function(t,e){var r,i,o,s,a=(e=e||{}).prefix||"__jp",u=e.param||"callback",c=e.timeout?e.timeout:15e3,l=document.getElementsByTagName("script")[0]||document.head,f=function(){},h=a+n++;return o=function(){r&&r.parentNode&&r.parentNode.removeChild(r),window[h]=f,i&&clearTimeout(i)},{promise:new Promise(function(e,n){c&&(i=setTimeout(function(){o(),n(new Error("Timeout"))},c)),window[h]=function(t){o(),e(t)},t=(t+=(~t.indexOf("?")?"&":"?")+u+"="+encodeURIComponent(h)).replace("?&","?"),(r=document.createElement("script")).src=t,l.parentNode.insertBefore(r,l),s=function(){window[h]&&(o(),n(new Error("Canceled")))}}),cancel:s}}},function(t,e,n){"use strict";t.exports=function(t){var e,n,r=new Promise(function(t,r){e=t,n=r});return t.then(function(t){r.cancelled||e(t)},function(t){r.cancelled||n(t)}),r.cancel=function(){this.cancelled=!0},r}},function(t,e,n){"use strict";var r=n(1),i=n(2),o=n(3),s=n(10);t.exports={mixinName:"Controllable",initializeControllable:function(){r.log("Adding controllable to block "+this.blockID),this.inner.classList.add("st-block__inner--controllable"),this.control_ui=o.createElement("div",{class:"st-block__control-ui"}),Object.keys(this.controls).forEach(function(t){this.addUiControl(t,this.controls[t].bind(this))},this),this.inner.appendChild(this.control_ui)},getControlTemplate:function(t){return o.createElement("a",{"data-icon":t,class:"st-icon st-block-control-ui-btn st-block-control-ui-btn--"+t,html:'<svg role="img" class="st-icon">\n                  <use xlink:href="'.concat(i.defaults.iconUrl,"#").concat(t,'"/>\n                </svg>')})},addUiControl:function(t,e){var n=this;this.control_ui.appendChild(this.getControlTemplate(t)),s.delegate(this.control_ui,".st-block-control-ui-btn--"+t,"click",function(r){n.selectUiControl(t),e(r)})},selectUiControl:function(t){var e=this;Object.keys(this.controls).forEach(function(t){e.getControlUiBtn(t).classList.remove("st-block-control-ui-btn--selected")}),this.getControlUiBtn(t).classList.add("st-block-control-ui-btn--selected")},getControlUiBtn:function(t){return this.control_ui.querySelector(".st-block-control-ui-btn--"+t)}}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(3),a=n(35),u=n(4);t.exports={mixinName:"Droppable",valid_drop_file_types:["File","Files","text/plain","text/uri-list"],requireInputs:!0,initializeDroppable:function(){o.log("Adding droppable to block "+this.blockID),this.drop_options=Object.assign({},i.defaults.Block.drop_options,this.drop_options),s.hide(this.editor),this.inputs.insertAdjacentHTML("beforeend",r.template(this.drop_options.html,{block:this,_:r,config:i})),a.dropArea(this.inputs.lastElementChild).addEventListener("drop",this._handleDrop.bind(this)),this.el.classList.add("st-block--droppable"),this.inner.classList.add("st-block__inner--droppable"),this._setupKeyEvents()},_handleDrop:function(t){t.preventDefault(),t.stopPropagation();var e=t.target,n=[].slice.call(t.dataTransfer.types);e.classList.remove("st-dropzone--dragover"),n&&n.some(function(t){return this.valid_drop_file_types.includes(t)},this)&&this.onDrop(t.dataTransfer),u.trigger("block:content:dropped",this.blockID)},focus:function(){this.inner.focus()},_setupKeyEvents:function(){var t=this;this.inner.setAttribute("tabindex",0),this.inner.addEventListener("keyup",function(e){if(e.target===t.inner)switch(e.keyCode){case 13:t.mediator.trigger("block:create","Text",null,t.el,{autoFocus:!0});break;case 8:return void t.onDeleteClick.call(t,new CustomEvent("click"))}})}}},function(t,e,n){"use strict";var r=n(0),i=n(64);t.exports={mixinName:"Fetchable",initializeFetchable:function(){this.withMixin(n(34))},fetch:function(t,e,n,o){var s=r.uniqueId(this.blockID+"_fetch"),a=i.fetch(t,e);function u(t,e){t.call(this,e),this.removeQueuedItem(s)}return this.resetMessages(),this.addQueuedItem(s,a),r.isUndefined(n)||a.then(u.bind(this,n)),r.isUndefined(o)||a.catch(u.bind(this,o)),a}}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1);t.exports={mixinName:"Pastable",requireInputs:!0,initializePastable:function(){var t=this;o.log("Adding pastable to block "+this.blockID),this.paste_options=Object.assign({},i.defaults.Block.paste_options,this.paste_options),this.inputs.insertAdjacentHTML("beforeend",r.template(this.paste_options.html,this)),Array.prototype.forEach.call(this.$(".st-paste-block"),function(e){e.addEventListener("click",function(){var t=document.createEvent("HTMLEvents");t.initEvent("select",!0,!1),this.dispatchEvent(t)}),e.addEventListener("paste",t._handleContentPaste),e.addEventListener("submit",t._handleContentPaste)})}}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(63);t.exports={mixinName:"Uploadable",uploadsCount:0,requireInputs:!0,initializeUploadable:function(){o.log("Adding uploadable to block "+this.blockID),this.withMixin(n(34)),this.upload_options=Object.assign({},i.defaults.Block.upload_options,this.upload_options),this.inputs.insertAdjacentHTML("beforeend",r.template(this.upload_options.html,this)),Array.prototype.forEach.call(this.inputs.querySelectorAll("button"),function(t){t.addEventListener("click",function(t){t.preventDefault()})}),Array.prototype.forEach.call(this.inputs.querySelectorAll("input"),function(t){t.addEventListener("change",function(t){this.onDrop(t.currentTarget)}.bind(this))}.bind(this))},uploader:function(t,e,n){return s(this,t,e,n)}}},function(t,e,n){"use strict";var r=n(13),i=n(0),o=n(68),s=n(16).trimScribeContent;t.exports={mixinName:"MultiEditable",initializeMultiEditable:function(){this.editors={}},newTextEditor:function(t,e){var n,r,s;(r=void 0===t.tagName)?((s=document.createElement("div")).innerHTML=t,n=s.querySelector(".st-block__editor")):n=t;var a=i.uniqueId("editor-");n.setAttribute("data-editorId",a),n.addEventListener("keyup",this.getSelectionForFormatter),n.addEventListener("mouseup",this.getSelectionForFormatter);var u=i.isFunction(this.configureScribe)?this.configureScribe.bind(this):null,c=o.initScribeInstance(n,this.scribeOptions,u);c.setContent(e);var l={node:r?s.removeChild(s.firstChild):n,el:n,scribe:c,id:a};return this.editors[a]=l,l},getCurrentTextEditor:function(){var t=document.activeElement.getAttribute("data-editorId"),e=this.getTextEditor(t);return e&&(this.currentEditor=e),this.currentEditor},appendToTextEditor:function(t,e){var n=this.getTextEditor(t).scribe;s(n);var i=document.createRange();i.selectNodeContents(n.el),i.collapse(!1);var o=new n.api.Selection;o.selection.removeAllRanges(),o.selection.addRange(i);var a=r(n.el);e&&n.insertHTML(e),r(n.el,{start:a.start,end:a.end})},getCurrentScribeInstance:function(){return this.getCurrentTextEditor().scribe},getTextEditor:function(t){return this.editors[t]},removeTextEditor:function(t){delete this.editors[t]},execTextBlockCommand:function(t){return o.execTextBlockCommand(this.getCurrentScribeInstance(),t)},queryTextBlockCommandState:function(t){return o.queryTextBlockCommandState(this.getCurrentScribeInstance(),t)}}},function(t,e,n){var r,i;try{r=n(66)}catch(t){r=n(66)}try{i=n(67)}catch(t){i=n(67)}function o(t,e){if(!(this instanceof o))return new o(t,e);if(this.node=this.start=this.peeked=t,this.root=e,this.closingTag=!1,this._revisit=!0,this._selects=[],this._rejects=[],t&&this.higher(t))throw new Error("root must be a parent or ancestor to node")}function s(t,e){var n="nextSibling"==t;return function(i,o,s){i=this.compile(i),o=o&&o>0?o:1;for(var a=this.node,u=this.closingTag,c=this._revisit;a;){if(r(n,u)&&a[e])a=a[e],u=!n;else if(1==a.nodeType&&!a[e]&&r(n,u)){if(u=n,!c)continue}else if(a[t])a=a[t],u=!n;else if(a=a.parentNode,u=n,!c)continue;if(!a||this.higher(a,this.root))break;if(i(a)&&this.selects(a,s)&&this.rejects(a,s)){if(--o)continue;return s||(this.node=a),this.closingTag=u,a}}return null}}t.exports=o,o.prototype.reset=function(t){return this.node=t||this.start,this},o.prototype.revisit=function(t){return this._revisit=null==t||t,this},o.prototype.opening=function(){return 1==this.node.nodeType&&(this.closingTag=!1),this},o.prototype.atOpening=function(){return!this.closingTag},o.prototype.closing=function(){return 1==this.node.nodeType&&(this.closingTag=!0),this},o.prototype.atClosing=function(){return this.closingTag},o.prototype.next=s("nextSibling","firstChild"),o.prototype.previous=o.prototype.prev=s("previousSibling","lastChild"),o.prototype.select=function(t){return t=this.compile(t),this._selects.push(t),this},o.prototype.selects=function(t,e){var n=this._selects,r=n.length;if(!r)return!0;for(var i=0;i<r;i++)if(n[i].call(this,t,e))return!0;return!1},o.prototype.reject=function(t){return t=this.compile(t),this._rejects.push(t),this},o.prototype.rejects=function(t,e){var n=this._rejects,r=n.length;if(!r)return!0;for(var i=0;i<r;i++)if(n[i].call(this,t,e))return!1;return!0},o.prototype.higher=function(t){var e=this.root;if(!e)return!1;for(t=t.parentNode;t&&t!=e;)t=t.parentNode;return t!=e},o.prototype.compile=function(t){switch(typeof t){case"number":return function(e){return t==e.nodeType};case"string":return new Function("node","return "+i(t,"node."));case"function":return t;default:return function(){return!0}}},o.prototype.peak=o.prototype.peek=function(t,e){return 1==arguments.length&&(e=t,t=!0),(e=null==e?1:e)?e>0?this.next(t,e,!0):this.prev(t,Math.abs(e),!0):this.node},o.prototype.use=function(t){return t(this),this}},function(t,e,n){var r,i;r=[n(153),n(160),n(168),n(171),n(174),n(182),n(187),n(188),n(189),n(29),n(5),n(190),n(70)],void 0===(i=function(t,e,n,r,i,o,s,a,u,c,l,f,h){"use strict";function p(c,h){u.call(this),this.el=c,this.commands={},this.options=f.checkOptions(h),this.commandPatches={},this._plainTextFormatterFactory=new d,this._htmlFormatterFactory=new y,this.api=new o(this),this.Immutable=l;var p=s(this);this.transactionManager=new p,this.undoManager=!1,this.options.undo.enabled&&(this.options.undo.manager?this.undoManager=this.options.undo.manager:this.undoManager=new a(this.options.undo.limit,this.el),this._merge=!1,this._forceMerge=!1,this._mergeTimer=0,this._lastItem={content:""}),this.setHTML(this.getHTML()),this.el.setAttribute("contenteditable",!0),function(){var t=!1,e=this,n={handleEvent:function(n){t||("compositionstart"!==n.type?"compositionend"===n.type?(t=!1,e.transactionManager.run()):e.transactionManager.run():t=!0)}};["compositionstart","compositionend","keydown","cut","paste"].forEach(function(t){this.el.addEventListener(t,n,!1)}.bind(this))}.call(this);var v=l.OrderedSet(this.options.defaultPlugins).sort(f.sortByPlugin("setRootPElement")).filter(f.filterByBlockLevelMode(this.allowsBlockElements())).map(function(e){return t[e]}),g=l.List(this.options.defaultFormatters).filter(function(t){return!!n[t]}).map(function(t){return n[t]}),m=l.List.of(i.events),b=l.List(this.options.defaultCommandPatches).map(function(t){return i.commands[t]}),_=l.List.of("indent","insertList","outdent","redo","subscript","superscript","undo").map(function(t){return e[t]});l.List().concat(v,g,m,b,_).forEach(function(t){this.use(t())}.bind(this)),this.use(r())}function d(){this.formatters=l.List()}function y(){this.formatters={sanitize:l.List(),normalize:l.List(),export:l.List()}}return p.prototype=Object.create(u.prototype),p.prototype.node=c,p.prototype.element=p.prototype.node,p.prototype.use=function(t){return t(this),this},p.prototype.setHTML=function(t,e){this.options.undo.enabled&&(this._lastItem.content=t),e&&(this._skipFormatters=!0),this.el.innerHTML!==t&&(this.el.innerHTML=t)},p.prototype.getHTML=function(){return this.el.innerHTML},p.prototype.getContent=function(){return this._htmlFormatterFactory.formatForExport(this.getHTML().replace(/<br>$/,""))},p.prototype.getTextContent=function(){return this.el.textContent},p.prototype.pushHistory=function(){var t=this;if(t.options.undo.enabled){var e=t._lastItem.content.replace(/<em [^>]*class="scribe-marker"[^>]*>[^<]*?<\/em>/g,"");if(t.getHTML()!==e){var n=new t.api.Selection;n.placeMarkers();var r=t.getHTML();n.removeMarkers();var i=t.undoManager.item(t.undoManager.position);return(t._merge||t._forceMerge)&&i&&t._lastItem==i[0]?t._lastItem.content=r:(t._lastItem={previousItem:t._lastItem,content:r,scribe:t,execute:function(){},undo:function(){this.scribe.restoreFromHistory(this.previousItem)},redo:function(){this.scribe.restoreFromHistory(this)}},t.undoManager.transact(t._lastItem,!1)),clearTimeout(t._mergeTimer),t._merge=!0,t._mergeTimer=setTimeout(function(){t._merge=!1},t.options.undo.interval),!0}}return!1},p.prototype.getCommand=function(t){return this.commands[t]||this.commandPatches[t]||new this.api.Command(t)},p.prototype.restoreFromHistory=function(t){this._lastItem=t,this.setHTML(t.content,!0),(new this.api.Selection).selectMarkers(),this.trigger(h.legacyContentChanged),this.trigger(h.contentChanged)},p.prototype.allowsBlockElements=function(){return this.options.allowBlockElements},p.prototype.setContent=function(t){this.allowsBlockElements()||(t+="<br>"),this.setHTML(t),this.trigger(h.legacyContentChanged),this.trigger(h.contentChanged)},p.prototype.insertPlainText=function(t){this.insertHTML("<p>"+this._plainTextFormatterFactory.format(t)+"</p>")},p.prototype.insertHTML=function(t){if(t=this._htmlFormatterFactory.format(t),Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject){var e=document.createElement("span");if(e.innerHTML=t,1===e.children.length&&"P"===e.children[0].tagName&&(t=e.children[0].innerHTML),""===this.getTextContent().trim())this.setContent(t);else{var n=document.getSelection().getRangeAt(0),r=document.createElement("span");n.surroundContents(r),r.innerHTML=t,n.collapse(!1),c.removeChromeArtifacts(this.el)}}else this.getCommand("insertHTML").execute(t)},p.prototype.isDebugModeEnabled=function(){return this.options.debug},p.prototype.registerHTMLFormatter=function(t,e){this._htmlFormatterFactory.formatters[t]=this._htmlFormatterFactory.formatters[t].push(e)},p.prototype.registerPlainTextFormatter=function(t){this._plainTextFormatterFactory.formatters=this._plainTextFormatterFactory.formatters.push(t)},p.prototype.destroy=function(t){this.trigger(h.destroy)},d.prototype.format=function(t){return this.formatters.reduce(function(t,e){return e(t)},t)},y.prototype=Object.create(d.prototype),y.prototype.constructor=y,y.prototype.format=function(t){return this.formatters.sanitize.concat(this.formatters.normalize).reduce(function(t,e){return e(t)},t)},y.prototype.formatForExport=function(t){return this.formatters.export.reduce(function(t,e){return e(t)},t)},p}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(154),n(155),n(156),n(159)],void 0===(i=function(t,e,n,r){"use strict";return{setRootPElement:t,enforcePElements:e,ensureSelectableContainers:n,inlineElementsMode:r}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){""===t.getHTML().trim()&&(window.navigator.userAgent.match(/MSIE 10/)?t.setContent("<p></p>"):t.setContent("<p><br></p>"))}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){"use strict";return function(){return function(e){var n=e.node;function r(e){var r=0;t.List(e.childNodes).filterNot(function(t){return n.isWhitespaceOnlyTextNode(Node,t)}).filter(function(t){return t.nodeType===Node.TEXT_NODE||!n.isBlockElement(t)}).groupBy(function(t,e,n){return 0===e||t.previousSibling===n.get(e-1)?r:r+=1}).forEach(function(t){n.wrap(t.toArray(),document.createElement("p"))})}e.registerHTMLFormatter("normalize",function(t){var e=document.createElement("div");return e.innerHTML=t,r(e),function(t){for(var e,n=0;e=t.children[n++];)"BLOCKQUOTE"===e.tagName&&r(e)}(e),e.innerHTML})}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(29),n(5)],void 0===(i=function(t,e){"use strict";var n=e.Set.of("AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR");function r(e){var i=e.firstElementChild;function o(e){return!!(0===e.children.length&&t.isBlockElement(e)||1===e.children.length&&t.isSelectionMarkerNode(e.children[0]))||!t.isBlockElement(e)&&0===e.children.length&&function(e){return!!t.isCaretPositionNode(e)||""===e.parentNode.textContent.trim()}(e)}for(;i;)t.isSelectionMarkerNode(i)||(o(i)&&""===i.textContent.trim()&&!n.includes(i.nodeName)&&-1===i.nodeName.indexOf("-")?i.appendChild(document.createElement("br")):i.children.length>0&&r(i)),i=i.nextElementSibling}return function(){return function(t){t.registerHTMLFormatter("normalize",function(t){var e=document.createElement("div");return e.innerHTML=t,r(e),e.innerHTML})}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){return t.Set.of("B","BIG","I","SMALL","TT","ABBR","ACRONYM","CITE","CODE","DFN","EM","KBD","STRONG","SAMP","VAR","A","BDO","BR","IMG","MAP","OBJECT","Q","SCRIPT","SPAN","SUB","SUP","BUTTON","INPUT","LABEL","SELECT","TEXTAREA")}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){return t.Set.of("ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","CANVAS","DD","DIV","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TD","TH","TFOOT","UL","VIDEO")}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(29)],void 0===(i=function(t){"use strict";return function(){return function(e){e.el.addEventListener("keydown",function(n){if(13===n.keyCode){var r=new e.api.Selection,i=r.range;r.getContaining(function(t){return"LI"===t.nodeName||/^(H[1-6])$/.test(t.nodeName)})||(n.preventDefault(),e.transactionManager.run(function(){i.collapsed||i.deleteContents(),e.el.lastChild&&"BR"===e.el.lastChild.nodeName&&e.el.removeChild(e.el.lastChild);var n=document.createElement("br");i.insertNode(n),i.setEndAfter(n),i.collapse(!1);var o=i.cloneRange();if(e.el.lastChild&&o.setEndAfter(e.el.lastChild),!function(e){for(var n=document.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1);n.nextNode();)if(n.currentNode&&(t.hasContent(n.currentNode)||t.isTextNodeWithContent(Node,n.currentNode)))return!0;return!1}(o.cloneContents())){var s=document.createElement("br");i.insertNode(s)}var a=i.cloneRange();a.setStartAfter(n),a.setEndAfter(n),r.selection.removeAllRanges(),r.selection.addRange(a)}))}}.bind(this)),""===e.getHTML().trim()&&e.setContent("")}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(161),n(162),n(163),n(164),n(165),n(166),n(167)],void 0===(i=function(t,e,n,r,i,o,s){"use strict";return{indent:t,insertList:e,outdent:n,redo:r,subscript:i,superscript:o,undo:s}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("indent");e.queryEnabled=function(){var e=(new t.api.Selection).getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName});return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()&&!e},t.commands.indent=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){"use strict";return function(){return function(e){var n=e.node,r=function(t){e.api.Command.call(this,t)};(r.prototype=Object.create(e.api.Command.prototype)).constructor=r,r.prototype.execute=function(r){function i(t){if(t.size){for(var e=document.createElement(a.nodeName);t.size;)e.appendChild(t.first()),t=t.shift();a.parentNode.insertBefore(e,a.nextElementSibling)}}if(this.queryState()){var o=new e.api.Selection,s=o.range,a=o.getContaining(function(t){return"OL"===t.nodeName||"UL"===t.nodeName}),u=o.getContaining(function(t){return"LI"===t.nodeName});e.transactionManager.run(function(){if(u){i(n.nextSiblings(u)),o.placeMarkers();var e=document.createElement("p");e.innerHTML=u.innerHTML,a.parentNode.insertBefore(e,a.nextElementSibling),u.parentNode.removeChild(u)}else{var r=t.List(a.querySelectorAll("li")).filter(function(t){return s.intersectsNode(t)}),c=r.last();i(n.nextSiblings(c)),o.placeMarkers();var l=document.createDocumentFragment();r.forEach(function(t){var e=document.createElement("p");e.innerHTML=t.innerHTML,l.appendChild(e)}),a.parentNode.insertBefore(l,a.nextElementSibling),r.forEach(function(t){t.parentNode.removeChild(t)})}0===a.childNodes.length&&a.parentNode.removeChild(a),o.selectMarkers()}.bind(this))}else e.api.Command.prototype.execute.call(this,r)},r.prototype.queryEnabled=function(){return e.api.Command.prototype.queryEnabled.call(this)&&e.allowsBlockElements()},e.commands.insertOrderedList=new r("insertOrderedList"),e.commands.insertUnorderedList=new r("insertUnorderedList")}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("outdent");e.queryEnabled=function(){var e=(new t.api.Selection).getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName});return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()&&!e},t.commands.outdent=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(69)],void 0===(i=function(t){"use strict";return function(){return function(e){var n=new e.api.Command("redo");n.execute=function(){e.undoManager.redo()},n.queryEnabled=function(){return e.undoManager.position>0},e.commands.redo=n,e.options.undo.enabled&&e.el.addEventListener("keydown",function(e){t.isRedoKeyCombination(e)&&(e.preventDefault(),n.execute())})}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("subscript");t.commands.subscript=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("superscript");t.commands.superscript=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(69)],void 0===(i=function(t){"use strict";return function(){return function(e){var n=new e.api.Command("undo");n.execute=function(){e.undoManager.undo()},n.queryEnabled=function(){return e.undoManager.position<e.undoManager.length},e.commands.undo=n,e.options.undo.enabled&&e.el.addEventListener("keydown",function(e){t.isUndoKeyCombination(e)&&(e.preventDefault(),n.execute())})}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(169),n(170)],void 0===(i=function(t,e){"use strict";return{replaceNbspCharsFormatter:t,escapeHtmlCharactersFormatter:e}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=/(\s|&nbsp;)+/g;t.registerHTMLFormatter("export",function(t){return t.replace(e," ")})}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i,o,s;r=function(){return function(t){return"string"==typeof t?t:null==t?"":t+""}}.apply(e,[]),i=function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};return function(e){return t[e]}}.apply(e,[]),o=function(t,e){var n=/[&<>"'`]/g,r=RegExp(n.source);return function(i){return(i=t(i))&&r.test(i)?i.replace(n,e):i}}.apply(e,[r,i]),void 0===(s=function(t){"use strict";return function(){return function(e){e.registerPlainTextFormatter(t)}}}.apply(e,[o]))||(t.exports=s)},function(t,e,n){var r,i;r=[n(172),n(5)],void 0===(i=function(t,e){"use strict";return function(){return function(n){var r=n.node;n.el.addEventListener("focus",function(){var t=new n.api.Selection;if(t.range&&(n.allowsBlockElements()&&t.range.startContainer===n.el)){var e=r.firstDeepestChild(n.el),i=t.range;i.setStart(e,0),i.setEnd(e,0),t.selection.removeAllRanges(),t.selection.addRange(i)}}.bind(n));var i=function(){if(!n._skipFormatters){var t=new n.api.Selection,e=t.range,r=function(){e&&t.placeMarkers(),n.setHTML(n._htmlFormatterFactory.format(n.getHTML())),t.selectMarkers()}.bind(n);n.transactionManager.run(r)}delete n._skipFormatters}.bind(n);t(n.el,i),n.allowsBlockElements()&&n.el.addEventListener("keydown",function(t){if(13===t.keyCode){var e=new n.api.Selection,r=e.range,i=e.getContaining(function(t){return/^(H[1-6])$/.test(t.nodeName)});if(i&&r.collapsed){var o=r.cloneRange();o.setEndAfter(i),""===o.cloneContents().firstChild.textContent&&(t.preventDefault(),n.transactionManager.run(function(){var t=document.createElement("p"),n=document.createElement("br");t.appendChild(n),i.parentNode.insertBefore(t,i.nextElementSibling),r.setStart(t,0),r.setEnd(t,0),e.selection.removeAllRanges(),e.selection.addRange(r)}))}}}),n.allowsBlockElements()&&n.el.addEventListener("keydown",function(t){if(13===t.keyCode||8===t.keyCode){var e=new n.api.Selection;if(e.range.collapsed){var r=e.getContaining(function(t){return"LI"===t.nodeName});if(r&&""===r.textContent.trim()){t.preventDefault();var i=e.getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName}),o=n.getCommand("OL"===i.nodeName?"insertOrderedList":"insertUnorderedList");o.event=t,o.execute()}}}}),n.el.addEventListener("paste",function(t){if(t.clipboardData&&t.clipboardData.types.length>0)t.preventDefault(),e.List(t.clipboardData.types).includes("text/html")?n.insertHTML(t.clipboardData.getData("text/html")):n.insertPlainText(t.clipboardData.getData("text/plain"));else{var r=new n.api.Selection;r.placeMarkers();var i=document.createElement("div");i.style.height=0,i.style.opacity=0,i.style.overflow="hidden",document.body.appendChild(i),i.setAttribute("contenteditable",!0),i.focus(),setTimeout(function(){var t=i.innerHTML;i.parentNode.removeChild(i),r.selectMarkers(),n.el.focus(),n.insertHTML(t)},1)}})}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(29),n(173)],void 0===(i=function(t,e){var n="object"==typeof window?window:void 0,r=e.determineMutationObserver(n);function i(e){return!t.isEmptyTextNode(e)&&!t.isSelectionMarkerNode(e)}return function(t,e){var n=!1,o=new r(function(t){if(!n&&function(t){return t.some(function(t){return Array.prototype.some.call(t.addedNodes,i)||Array.prototype.some.call(t.removedNodes,i)})}(t)){n=!0;try{e()}catch(t){throw t}finally{setTimeout(function(){n=!1},0)}}});return o.observe(t,{childList:!0,subtree:!0}),o}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){return{determineMutationObserver:function(t){return void 0===t?function(){return{observe:function(){}}}:t.MutationObserver||t.WebKitMutationObserver||t.MozMutationObserver}}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(175),n(176),n(177),n(178),n(179),n(180),n(181)],void 0===(i=function(t,e,n,r,i,o,s){"use strict";return{commands:{bold:t,indent:e,insertHTML:n,insertList:r,outdent:i,createLink:o},events:s}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("bold");e.queryEnabled=function(){var e=(new t.api.Selection).getContaining(function(t){return/^(H[1-6])$/.test(t.nodeName)});return t.api.CommandPatch.prototype.queryEnabled.apply(this,arguments)&&!e},t.commandPatches.bold=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("indent");e.execute=function(e){t.transactionManager.run(function(){var n=new t.api.Selection,r=n.range;if("P"===r.commonAncestorContainer.nodeName&&"<br>"===r.commonAncestorContainer.innerHTML){var i=document.createTextNode("\ufeff");r.insertNode(i),r.setStart(i,0),r.setEnd(i,0),n.selection.removeAllRanges(),n.selection.addRange(r)}t.api.CommandPatch.prototype.execute.call(this,e);var o=(n=new t.api.Selection).getContaining(function(t){return"BLOCKQUOTE"===t.nodeName});o&&o.removeAttribute("style")}.bind(this))},t.commandPatches.indent=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("insertHTML"),n=t.node;e.execute=function(e){t.transactionManager.run(function(){t.api.CommandPatch.prototype.execute.call(this,e),n.removeChromeArtifacts(t.el)}.bind(this))},t.commandPatches.insertHTML=e}}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=t.node,n=function(e){t.api.CommandPatch.call(this,e)};(n.prototype=Object.create(t.api.CommandPatch.prototype)).constructor=n,n.prototype.execute=function(n){t.transactionManager.run(function(){if(t.api.CommandPatch.prototype.execute.call(this,n),this.queryState()){var r=new t.api.Selection,i=r.getContaining(function(t){return"OL"===t.nodeName||"UL"===t.nodeName});if(i){i.nextElementSibling&&0===i.nextElementSibling.childNodes.length&&e.removeNode(i.nextElementSibling);var o=i.parentNode;o&&/^(H[1-6]|P)$/.test(o.nodeName)&&(r.placeMarkers(),e.insertAfter(i,o),r.selectMarkers(),2===o.childNodes.length&&e.isEmptyTextNode(o.firstChild)&&e.removeNode(o),0===o.childNodes.length&&e.removeNode(o)),e.removeChromeArtifacts(i)}}}.bind(this))},n.prototype.queryState=function(){try{return t.api.CommandPatch.prototype.queryState.apply(this,arguments)}catch(t){if("NS_ERROR_UNEXPECTED"==t.name)return!1;throw t}},t.commandPatches.insertOrderedList=new n("insertOrderedList"),t.commandPatches.insertUnorderedList=new n("insertUnorderedList")}}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=t.node,n=new t.api.CommandPatch("outdent");n.execute=function(){t.transactionManager.run(function(){var n=new t.api.Selection,r=n.range,i=n.getContaining(function(t){return"BLOCKQUOTE"===t.nodeName});if("BLOCKQUOTE"===r.commonAncestorContainer.nodeName){n.placeMarkers(),n.selectMarkers(!0);var o=r.cloneContents();i.parentNode.insertBefore(o,i),r.deleteContents(),n.selectMarkers(),""===i.textContent&&i.parentNode.removeChild(i)}else{var s=n.getContaining(function(t){return"P"===t.nodeName});if(s){var a=e.nextSiblings(s);if(a.size){for(var u=document.createElement(i.nodeName);a.size;)u.appendChild(a.first()),a=a.shift();i.parentNode.insertBefore(u,i.nextElementSibling)}n.placeMarkers(),i.parentNode.insertBefore(s,i.nextElementSibling),n.selectMarkers(),""===i.innerHTML&&i.parentNode.removeChild(i)}else t.api.CommandPatch.prototype.execute.call(this)}}.bind(this))},t.commandPatches.outdent=n}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("createLink");t.commandPatches.createLink=e,e.execute=function(e){var n=new t.api.Selection;if(n.isInScribe())if(n.range.collapsed){var r=document.createElement("a");r.setAttribute("href",e),r.textContent=e,n.range.insertNode(r);var i=document.createRange();i.setStartBefore(r),i.setEndAfter(r),n.selection.removeAllRanges(),n.selection.addRange(i)}else t.api.CommandPatch.prototype.execute.call(this,e)}}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=t.node;t.allowsBlockElements()&&t.el.addEventListener("keyup",function(n){if(8===n.keyCode||46===n.keyCode){var r=new t.api.Selection,i=r.getContaining(function(t){return"P"===t.nodeName});i&&t.transactionManager.run(function(){r.placeMarkers(),e.removeChromeArtifacts(i),r.selectMarkers()},!0)}})}}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(183),n(184),n(185),n(186)],void 0===(i=function(t,e,n,r){"use strict";return function(i){this.CommandPatch=t(i),this.Command=e(i),this.Selection=n(i),this.SimpleCommand=r(this,i)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(t){function e(t){this.commandName=t}return e.prototype.execute=function(e){t.transactionManager.run(function(){document.execCommand(this.commandName,!1,e||null)}.bind(this))},e.prototype.queryState=function(){return document.queryCommandState(this.commandName)},e.prototype.queryEnabled=function(){return document.queryCommandEnabled(this.commandName)},e}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(t){function e(e){this.commandName=e,this.patch=t.commandPatches[this.commandName]}return e.prototype.execute=function(e){this.patch?this.patch.execute(e):t.transactionManager.run(function(){document.execCommand(this.commandName,!1,e||null)}.bind(this))},e.prototype.queryState=function(){return this.patch?this.patch.queryState():document.queryCommandState(this.commandName)},e.prototype.queryEnabled=function(){return this.patch?this.patch.queryEnabled():document.queryCommandEnabled(this.commandName)},e}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(t){var e=t.el.ownerDocument,n=t.node;if(e.compareDocumentPosition(t.el)&Node.DOCUMENT_POSITION_DISCONNECTED){for(var r=t.el.parentNode;r&&n.isFragment(r);)r=r.parentNode;r&&r.getSelection&&(e=r)}function i(){var t=document.createElement("em");return t.style.display="none",t.classList.add("scribe-marker"),t}function o(t,e){t.insertNode(e),e.nextSibling&&n.isEmptyTextNode(e.nextSibling)&&n.removeNode(e.nextSibling),e.previousSibling&&n.isEmptyTextNode(e.previousSibling)&&n.removeNode(e.previousSibling)}function s(){if(this.selection=e.getSelection(),this.selection.rangeCount&&this.selection.anchorNode){var t=this.selection.anchorNode,r=this.selection.anchorOffset,i=this.selection.focusNode,o=this.selection.focusOffset;if(t===i&&o<r){var s=r;r=o,o=s}else if(n.isBefore(i,t)){var a=t,u=r;t=i,r=o,i=a,o=u}this.range=document.createRange(),this.range.setStart(t,r),this.range.setEnd(i,o)}}return s.prototype.getContaining=function(e){if(this.range){var r=this.range.commonAncestorContainer;return r&&t.el===r||!e(r)?n.getAncestor(r,t.el,e):r}},s.prototype.isInScribe=function(){var e=this.range;return e&&document.contains(t.el)&&t.el.contains(e.startContainer)&&t.el.contains(e.endContainer)},s.prototype.placeMarkers=function(){var t=this.range;if(this.isInScribe()){if(o(t.cloneRange(),i()),!t.collapsed){var e=t.cloneRange();e.collapse(!1),o(e,i())}this.selection.removeAllRanges(),this.selection.addRange(t)}},s.prototype.getMarkers=function(){return t.el.querySelectorAll("em.scribe-marker")},s.prototype.removeMarkers=function(){Array.prototype.forEach.call(this.getMarkers(),function(t){var e=t.parentNode;n.removeNode(t),window.navigator.userAgent.indexOf("MSIE ")||e.normalize()})},s.prototype.selectMarkers=function(t){var e=this.getMarkers();if(e.length){var n,r,i,o,s=document.createRange();n=s,r=e[0],i=r.previousSibling,o=r.nextSibling,i&&i.nodeType===Node.TEXT_NODE?n.setStart(i,i.data.length):o&&o.nodeType===Node.TEXT_NODE?n.setStart(o,0):n.setStartBefore(r),function(t,e){var n=e.previousSibling,r=e.nextSibling;n&&n.nodeType===Node.TEXT_NODE?t.setEnd(n,n.data.length):r&&r.nodeType===Node.TEXT_NODE?t.setEnd(r,0):t.setEndAfter(e)}(s,e.length>=2?e[1]:e[0]),t||this.removeMarkers(),this.selection.removeAllRanges(),this.selection.addRange(s)}},s.prototype.isCaretOnNewLine=function(){var t=this.getContaining(function(t){return"P"===t.nodeName});return!!t&&n.isEmptyInlineElement(t)},s}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(t,e){function n(t,n){e.api.Command.call(this,t),this._nodeName=n}return n.prototype=Object.create(t.Command.prototype),n.prototype.constructor=n,n.prototype.queryState=function(){var t=new e.api.Selection;return e.api.Command.prototype.queryState.call(this)&&!!t.getContaining(function(t){return t.nodeName===this._nodeName}.bind(this))},n}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(70)],void 0===(i=function(t){"use strict";return function(e){function n(){this.history=[]}return Object.assign(n.prototype,{start:function(){this.history.push(1)},end:function(){this.history.pop(),0===this.history.length&&(e.pushHistory(),e.trigger(t.legacyContentChanged),e.trigger(t.contentChanged))},run:function(t,n){this.start();try{t&&t()}finally{e._forceMerge=!0===n,this.end(),e._forceMerge=!1}}}),n}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){"use strict";function e(e,n){this._stack=t.List(),this._limit=e,this._fireEvent=n&&n.dispatchEvent,this._ush=n,this.position=0,this.length=0}return e.prototype.transact=function(e,n){if(arguments.length<2)throw new TypeError("Not enough arguments to UndoManager.transact.");var r;e.execute(),this.position>0&&this.clearRedo(),n&&this.length?(r=this._stack.first().push(e),this._stack=this._stack.shift().unshift(r)):(r=t.List.of(e),this._stack=this._stack.unshift(r),this.length++,this._limit&&this.length>this._limit&&this.clearUndo(this._limit)),this._dispatch("DOMTransaction",r)},e.prototype.undo=function(){if(!(this.position>=this.length)){for(var t=this._stack.get(this.position),e=t.size;e--;)t.get(e).undo();this.position++,this._dispatch("undo",t)}},e.prototype.redo=function(){if(0!==this.position){this.position--;for(var t=this._stack.get(this.position),e=0;e<t.size;e++)t.get(e).redo();this._dispatch("redo",t)}},e.prototype.item=function(t){return t>=0&&t<this.length?this._stack.get(t).toArray():null},e.prototype.clearUndo=function(t){this._stack=this._stack.take(void 0!==t?t:this.position),this.length=this._stack.size},e.prototype.clearRedo=function(){this._stack=this._stack.skip(this.position),this.length=this._stack.size,this.position=0},e.prototype._dispatch=function(t,e){this._fireEvent&&this._ush.dispatchEvent(new CustomEvent(t,{detail:{transactions:e.toArray()},bubbles:!0,cancelable:!1}))},e}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){"use strict";function e(){this._listeners={}}return e.prototype.on=function(e,n){var r=this._listeners[e]||t.Set();this._listeners[e]=r.add(n)},e.prototype.off=function(e,n){var r=this._listeners[e]||t.Set();this._listeners[e]=n?r.delete(n):r.clear()},e.prototype.trigger=function(e,n){for(var r=e.split(":");r.length;){var i=r.join(":");(this._listeners[i]||t.Set()).forEach(function(t){t.apply(null,n)}),r.splice(r.length-1,1)}},e}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){var e=["setRootPElement","enforcePElements","ensureSelectableContainers"],n=["inlineElementsMode"],r={allowBlockElements:!0,debug:!1,undo:{manager:!1,enabled:!0,limit:100,interval:250},defaultCommandPatches:["bold","indent","insertHTML","insertList","outdent","createLink"],defaultPlugins:e.concat(n),defaultFormatters:["escapeHtmlCharactersFormatter","replaceNbspCharsFormatter"]};function i(t){return function(e){return-1!==t.indexOf(e)}}return{defaultOptions:r,checkOptions:function(e){var n=e||{};return n.defaultPlugins&&(n.defaultPlugins=n.defaultPlugins.filter(i(r.defaultPlugins))),n.defaultFormatters&&(n.defaultFormatters=n.defaultFormatters.filter(i(r.defaultFormatters))),Object.freeze(function(e,n){var r=t.fromJS(e);return t.fromJS(n).merge(r).toJS()}(n,r))},sortByPlugin:function(t){return function(e,n){return e===t?-1:n===t?1:0}},filterByBlockLevelMode:function(t){return function(r){return-1!==(t?e:n).indexOf(r)}},filterByPluginExists:i}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){t.registerPlainTextFormatter(function(t){return t.replace(/\n([ \t]*\n)+/g,"</p><p>").replace(/\n/g,"<br>")})}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(193),n(194),n(195),n(196)],void 0===(i=function(t,e,n,r){"use strict";return function(i){i=e.init(i);return function(e){var o=new e.api.Command("createLink");o.nodeName="A",o.execute=function(o){var s,a=new e.api.Selection,u=a.range,c=a.getContaining(function(t){return t.nodeName===this.nodeName}.bind(this)),l=c?c.href:"";if(s=o||window.prompt("Enter a link.",l),s=r.run(i.transforms.pre,s),t.emptyLink(s)){if(i&&i.validation){var f=i.validation(s);if(!f.valid)return void window.alert(f.message||"The link is not valid")}c&&(u.selectNode(c),a.selection.removeAllRanges(),a.selection.addRange(u)),s&&(t.hasKnownProtocol(s)||(s=n.process(window,s)),s=r.run(i.transforms.post,s),e.api.SimpleCommand.prototype.execute.call(this,s))}else window.alert("This link appears empty")},o.queryState=function(){return!!(new e.api.Selection).getContaining(function(t){return t.nodeName===this.nodeName}.bind(this))},e.commands.linkPrompt=o}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";var t=[/^https?\:\/\//,/^mailto\:/,/^tel\:/];return{emptyLink:function(t){return/\w/.test(t)},hasKnownProtocol:function(e){return t.some(function(t){return t.test(e)})}}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){return{init:function(t){return(t=t||{}).transforms||(t.transforms={}),["pre","post"].forEach(function(e){t.transforms[e]||(t.transforms[e]=[])}),t}}}.apply(e,[]))||(t.exports=r)},function(t,e,n){(function(n){var r;void 0===(r=function(){var t=[{regexp:/@/,message:"The URL you entered appears to be an email address. Do you want to add the required mailto: prefix?",action:function(t){return"mailto:"+t}},{regexp:/\+?\d+/,message:"The URL you entered appears to be a telephone number. Do you want to add the required tel: prefix?",action:function(t){return"tel:"+t}},{regexp:/.+/,message:"The URL you entered appears to be a link. Do you want to add the required http:// prefix?",action:function(t){return"http://"+t}}];return{process:function(e,n){for(var r=0;r<t.length;r++){var i=t[r];if(i.regexp.test(n)&&e.confirm(i.message))return i.action(n)}return n}}}.apply(e,[]))||(t.exports=r)}).call(this,n(55))},function(t,e,n){var r;void 0===(r=function(){return{run:function(t,e){return t.reduce(function(t,e){return e(t)},e)}}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(198),n(199),n(214)],void 0===(i=function(t,e,n){"use strict";return function(r){var i=e(n(r),{tags:{em:{class:"scribe-marker"},br:{}}});return function(e){var n=new t(i);e.registerHTMLFormatter("sanitize",n.clean.bind(n))}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;void 0===(i="function"==typeof(r=function(){function t(t){var e=t.tags,n=Object.keys(e),r=n.map(function(t){return typeof e[t]}).every(function(t){return"object"===t||"boolean"===t||"function"===t});if(!r)throw new Error("The configuration was invalid");this.config=t}var e=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function n(t){return-1!==e.indexOf(t.nodeName)}var r=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function i(t){return-1!==r.indexOf(t.nodeName)}function o(t,e,n){return"function"==typeof t.tags[e]?t.tags[e](n):t.tags[e]}function s(t,e){return void 0===e||"boolean"==typeof e&&!e}function a(t,e,n){var r=t.name.toLowerCase();return!0!==e&&("function"==typeof e[r]?!e[r](t.value,n):void 0===e[r]||!1===e[r]||"string"==typeof e[r]&&e[r]!==t.value)}return t.prototype.clean=function(t){const e=document.implementation.createHTMLDocument(),n=e.createElement("div");return n.innerHTML=t,this._sanitize(e,n),n.innerHTML},t.prototype._sanitize=function(t,e){var r=function(t,e){return t.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}(t,e),u=r.firstChild();if(u)do{if(u.nodeType!==Node.TEXT_NODE){if(u.nodeType===Node.COMMENT_NODE){e.removeChild(u),this._sanitize(t,e);break}var c,l=i(u);l&&(c=Array.prototype.some.call(u.childNodes,n));var f=!!e.parentNode,h=n(e)&&n(u)&&f,p=u.nodeName.toLowerCase(),d=o(this.config,p,u);if(l&&c||s(0,d)||!this.config.keepNestedBlockElements&&h){if("SCRIPT"!==u.nodeName&&"STYLE"!==u.nodeName)for(;u.childNodes.length>0;)e.insertBefore(u.childNodes[0],u);e.removeChild(u),this._sanitize(t,e);break}for(var y=0;y<u.attributes.length;y+=1){var v=u.attributes[y];a(v,d,u)&&(u.removeAttribute(v.name),y-=1)}this._sanitize(t,u)}else if(""===u.data.trim()&&(u.previousElementSibling&&n(u.previousElementSibling)||u.nextElementSibling&&n(u.nextElementSibling))){e.removeChild(u),this._sanitize(t,e);break}}while(u=r.nextSibling())},t})?r.call(e,n,e,t):r)||(t.exports=i)},function(t,e,n){var r,i;r=[n(200),n(211)],void 0===(i=function(t,e){return e(t)}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(71),n(72),n(206),n(20),n(7),n(14),n(15),n(78)],void 0===(i=function(t,e,n,r,i,o,s,a){var u;return function c(l,f,h,p,d){if(!o(l))return l;var y=i(f.length)&&(r(f)||a(f));return(y?t:e)(f,function(t,e,r){if(s(t))return p||(p=[]),d||(d=[]),n(l,r,e,c,h,p,d);var i=l[e],o=h?h(i,t,e,l,r):u,a=void 0===o;a&&(o=t),!y&&void 0===o||!a&&(o==o?o===i:i!=i)||(l[e]=o)}),l}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(14)],void 0===(i=function(t){return function(e){return t(e)?e:Object(e)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(203)],void 0===(i=function(t){var e=/[.*+?^${}()|[\]\/\\]/g,n=RegExp(e.source);return function(r){return(r=t(r))&&n.test(r)?r.replace(e,"\\$&"):r}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){return function(t){return"string"==typeof t?t:null==t?"":t+""}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(36),n(20),n(37),n(7),n(38),n(75)],void 0===(i=function(t,e,n,r,i,o){var s=Object.prototype.hasOwnProperty;return function(a){for(var u=i(a),c=u.length,l=c&&a.length,f=l&&r(l)&&(e(a)||o.nonEnumArgs&&t(a)),h=-1,p=[];++h<c;){var d=u[h];(f&&n(d,l)||s.call(a,d))&&p.push(d)}return p}}.apply(e,r))||(t.exports=i)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r,i;r=[n(77),n(36),n(20),n(7),n(207),n(78),n(210)],void 0===(i=function(t,e,n,r,i,o,s){var a;return function(u,c,l,f,h,p,d){for(var y=p.length,v=c[l];y--;)if(p[y]==v)return void(u[l]=d[y]);var g=u[l],m=h?h(g,v,l,u,c):a,b=void 0===m;b&&(m=v,r(v.length)&&(n(v)||o(v))?m=n(g)?g:g?t(g):[]:i(v)||e(v)?m=e(g)?s(g):i(g)?g:{}:b=!1),p.push(v),d.push(m),b?u[l]=f(m,v,h,p,d):(m==m?m!==g:g==g)&&(u[l]=m)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(19),n(208)],void 0===(i=function(t,e){var n=Object.prototype.toString,r=t(r=Object.getPrototypeOf)&&r;return r?function(i){if(!i||"[object Object]"!=n.call(i))return!1;var o=i.valueOf,s=t(o)&&(s=r(o))&&r(s);return s?i==s||r(i)==s:e(i)}:e}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(209),n(15)],void 0===(i=function(t,e){var n="[object Object]",r=Object.prototype,i=r.hasOwnProperty,o=r.toString;return function(r){var s,a;return!(!e(r)||o.call(r)!=n||!(i.call(r,"constructor")||"function"!=typeof(s=r.constructor)||s instanceof s))&&(t(r,function(t,e){a=e}),void 0===a||i.call(r,a))}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(73),n(38)],void 0===(i=function(t,e){return function(n,r){return t(n,r,e)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(79),n(38)],void 0===(i=function(t,e){return function(n){return t(n,e(n))}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(80),n(213)],void 0===(i=function(t,e){return function(n){return function(){var r=arguments,i=r.length,o=r[0];if(i<2||null==o)return o;var s=r[i-2],a=r[i-1],u=r[3];i>3&&"function"==typeof s?(s=t(s,a,5),i-=2):i-=(s=i>2&&"function"==typeof a?a:null)?1:0,u&&e(r[1],r[2],u)&&(s=3==i?null:s,i=2);for(var c=0;++c<i;){var l=r[c];l&&n(o,l,s)}return o}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){return function(t){return t}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(37),n(7),n(14)],void 0===(i=function(t,e,n){return function(r,i,o){if(!n(o))return!1;var s=typeof i;if("number"==s)var a=o.length,u=e(a)&&t(i,a);else u="string"==s&&i in o;if(u){var c=o[i];return r==r?r===c:c!=c}return!1}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(215),n(80)],void 0===(i=function(t,e){return function(n,r,i){return r="function"==typeof r&&e(r,i,1),t(n,!0,r)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(77),n(71),n(79),n(72),n(216),n(217),n(220),n(20),n(14),n(74)],void 0===(i=function(t,e,n,r,i,o,s,a,u,c){var l="[object Arguments]",f="[object Function]",h="[object Object]",p={};p[l]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object Date]"]=p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Number]"]=p[h]=p["[object RegExp]"]=p["[object String]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p["[object Error]"]=p[f]=p["[object Map]"]=p["[object Set]"]=p["[object WeakMap]"]=!1;var d=Object.prototype.toString;return function y(v,g,m,b,_,w,x){var S;if(m&&(S=_?m(v,b,_):m(v)),void 0!==S)return S;if(!u(v))return v;var E=a(v);if(E){if(S=i(v),!g)return t(v,S)}else{var k=d.call(v),T=k==f;if(k!=h&&k!=l&&(!T||_))return p[k]?o(v,k,g):_?v:{};if(S=s(T?{}:v),!g)return n(v,S,c(v))}w||(w=[]),x||(x=[]);for(var C=w.length;C--;)if(w[C]==v)return x[C];return w.push(v),x.push(S),(E?e:r)(v,function(t,e){S[e]=y(t,g,m,e,v,w,x)}),S}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){var t=Object.prototype.hasOwnProperty;return function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r,i;r=[n(218)],void 0===(i=function(t){var e="[object Boolean]",n="[object Date]",r="[object Number]",i="[object RegExp]",o="[object String]",s="[object ArrayBuffer]",a="[object Float32Array]",u="[object Float64Array]",c="[object Int8Array]",l="[object Int16Array]",f="[object Int32Array]",h="[object Uint8Array]",p="[object Uint8ClampedArray]",d="[object Uint16Array]",y="[object Uint32Array]",v=/\w*$/;return function(g,m,b){var _=g.constructor;switch(m){case s:return t(g);case e:case n:return new _(+g);case a:case u:case c:case l:case f:case h:case p:case d:case y:var w=g.buffer;return new _(b?t(w):w,g.byteOffset,g.length);case r:case o:return new _(g);case i:var x=new _(g.source,v.exec(g));x.lastIndex=g.lastIndex}return x}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(219),n(19),n(76)],void 0===(i=function(t,e,n){var r=e(r=n.ArrayBuffer)&&r,i=e(i=r&&new r(0).slice)&&i,o=Math.floor,s=e(s=n.Uint8Array)&&s,a=function(){try{var t=e(t=n.Float64Array)&&t,i=new t(new r(10),0,1)&&t}catch(t){}return i}(),u=a?a.BYTES_PER_ELEMENT:0;function c(t){return i.call(t,0)}return i||(c=r&&s?function(t){var e=t.byteLength,n=a?o(e/u):0,i=n*u,c=new r(e);if(n){var l=new a(c,0,n);l.set(new a(t,0,n))}return e!=i&&(l=new s(c,i)).set(new s(t,i)),c}:t(null)),c}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){return function(t){return function(){return t}}}.apply(e,[]))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){return function(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}}.apply(e,[]))||(t.exports=r)},function(t,e,n){"use strict";var r=n(13),i=n(16),o=i.createBlocksFromParagraphs,s=i.getTotalLength;t.exports={mixinName:"Textable",initializeTextable:function(){this.el.classList.add("st-block--textable")},focusAtEnd:function(){this.focus();var t=s(this._scribe);t>0&&r(this._scribe.el,{start:t})},selectText:function(){var t=document.createRange();this._scribe.allowsBlockElements()?t.setStartAfter(this._scribe.el.firstChild,0):t.selectNodeContents(this._scribe.el),t.collapse(!1);var e=new this._scribe.api.Selection;e.selection.removeAllRanges(),e.selection.addRange(t)},getScribeInnerContent:function(t){var e="";if(""!==this._scribe.getTextContent()){var n=document.createElement("div");return n.innerHTML=this.getTextBlockHTML(),(e=n.children&&Array.prototype.slice.call(n.children).reduce(function(t,e){return t+e.innerHTML},"")||n.innerHTML).replace(/^[\s\uFEFF\xA0]+|$/g,"")}return e},getCaretPositionAtEnd:function(){return this.selectText(),r(this._scribe.el)},appendContent:function(t,e){e=e||{},this.focusAtEnd();var n=this.getCaretPositionAtEnd(),i=this.getScribeInnerContent();""!==i&&(t=i+t),""===t&&(window.navigator.userAgent.match(/MSIE 10/)||(t="<br>")),this.setTextBlockHTML(t),this.focus(),e.keepCaretPosition&&0!==n.start&&0!==n.end&&r(this._scribe.el,{start:n.start,end:n.end})},split:function(){o(this,this._scribe)}}},function(t,e,n){"use strict";var r=n(8),i=n(22),o=n(90),s=n(228),a=n(40),u=n(41);t.exports=r.extend({type:"text",editorHTML:'<div class="st-text-block" contenteditable="true"></div>',icon_name:"text",mergeable:!0,textable:!0,toolbarEnabled:!1,configureScribe:function(t){t.use(new o(this)),t.use(new s(this)),t.use(new a(this)),t.use(new u(this)),t.on("content-changed",this.toggleEmptyClass.bind(this))},scribeOptions:{allowBlockElements:!0,tags:{p:!0}},loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(i(t.text,this.type)):this.setTextBlockHTML(t.text)},onBlockRender:function(){this.toggleEmptyClass()},toggleEmptyClass:function(){this.el.classList.toggle("st-block--empty",this.isEmpty())},isEmpty:function(){return""===this._scribe.getTextContent()},asClipboardHTML:function(){var t=this.getBlockData();return"".concat(t.text)}})},function(t,e,n){"use strict";var r=n(224),i=n(88),o=n(225);t.exports=function(t){return"\n    <div class='st-block__inner'>\n      ".concat(t,"\n    </div>\n    ").concat(o(),"\n    ").concat(r(),"\n    ").concat(i(),"\n  ")}},function(t,e,n){"use strict";var r=n(2);t.exports=function(){return'\n    <div class="st-block-addition-top">\n      <div class="st-block-addition-top__button" type="button"></div>\n      <div class="st-block-addition-top__icon">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'.concat(r.defaults.iconUrl,'#add-block"/>\n        </svg>\n      </div>\n    </div>\n  ')}},function(t,e,n){"use strict";var r=n(2);t.exports=function(){return'\n    <button class="st-block-replacer" type="button">\n      <span class="st-block-replacer__button">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'.concat(r.defaults.iconUrl,'#add-block"/>\n        </svg>\n      </span>\n    </button>\n  ')}},function(t,e,n){"use strict";n.r(e),n.d(e,"Spinner",function(){return o});var r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},o=function(){function t(t){void 0===t&&(t={}),this.opts=r({},i,t)}return t.prototype.spin=function(t){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),s(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),t&&t.insertBefore(this.el,t.firstChild||null),function(t,e){var n=Math.round(e.corners*e.width*500)/1e3+"px",r="none";!0===e.shadow?r="0 2px 4px #000":"string"==typeof e.shadow&&(r=e.shadow);for(var i=function(t){for(var e=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,n=[],r=0,i=t.split(",");r<i.length;r++){var o=i[r],s=o.match(e);if(null!==s){var a=+s[2],u=+s[5],c=s[4],l=s[7];0!==a||c||(c=l),0!==u||l||(l=c),c===l&&n.push({prefix:s[1]||"",x:a,y:u,xUnits:c,yUnits:l,end:s[8]})}}return n}(r),o=0;o<e.lines;o++){var c=~~(360/e.lines*o+e.rotate),l=s(document.createElement("div"),{position:"absolute",top:-e.width/2+"px",width:e.length+e.width+"px",height:e.width+"px",background:a(e.fadeColor,o),borderRadius:n,transformOrigin:"left",transform:"rotate("+c+"deg) translateX("+e.radius+"px)"}),f=o*e.direction/e.lines/e.speed;f-=1/e.speed;var h=s(document.createElement("div"),{width:"100%",height:"100%",background:a(e.color,o),borderRadius:n,boxShadow:u(i,c),animation:1/e.speed+"s linear "+f+"s infinite "+e.animation});l.appendChild(h),t.appendChild(l)}}(this.el,this.opts),this},t.prototype.stop=function(){return this.el&&("undefined"!=typeof requestAnimationFrame?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},t}();function s(t,e){for(var n in e)t.style[n]=e[n];return t}function a(t,e){return"string"==typeof t?t:t[e%t.length]}function u(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r],s=c(o.x,o.y,e);n.push(o.prefix+s[0]+o.xUnits+" "+s[1]+o.yUnits+o.end)}return n.join(", ")}function c(t,e,n){var r=n*Math.PI/180,i=Math.sin(r),o=Math.cos(r);return[Math.round(1e3*(t*o+e*i))/1e3,Math.round(1e3*(-t*i+e*o))/1e3]}},function(t,e,n){"use strict";t.exports=function(){return'\n    <div class="st-block__ui-delete-controls">\n      <label class="st-block__delete-label">\n        '.concat(i18n.t("general:delete"),"\n      </label>\n      <button class='st-block-ui__confirm js-st-block-confirm-delete' type=\"button\">\n        ").concat(i18n.t("general:yes"),"\n      </button>\n      <button class='st-block-ui__confirm js-st-block-deny-delete' type=\"button\">\n        ").concat(i18n.t("general:no"),"\n      </button>\n    </div>\n  ")}},function(t,e,n){"use strict";function r(t,e){var n={format:"html",listItems:e.map(function(t){return{content:t.innerHTML.substr(2)}}).reverse()};t.mediator.trigger("block:create","List",n,t.el,{autoFocus:!0})}function i(t,e){return e.length>0&&r(t,e),[]}t.exports=function(t){function e(e){return-1!==t.editorOptions.blockTypes.indexOf("List")&&e.className.split(" ").filter(function(t){return t.startsWith("MsoListParagraph")}).length>0}return function(n){var o=new n.api.CommandPatch("insertHTML");o.execute=function(o){var s=this;n.transactionManager.run(function(){o=function(t){var e=document.createElement("div");if(e.innerHTML=t,1===e.childNodes.length){var n=[].slice.call(e.childNodes)[0];n&&"P"===n.nodeName&&(t=n.innerHTML)}return t}(o),n.api.CommandPatch.prototype.execute.call(s,o);var a=document.createElement("div");if(a.innerHTML=n.getContent(),a.childNodes.length>1){var u,c=[].slice.call(a.childNodes),l=[],f=!1;e(c[0])?(f=!0,n.setContent("")):n.setContent(c.shift().innerHTML),t.mediator.on("block:created",function e(n){u=n,t.mediator.off("block:created",e)}),c.reverse().forEach(function(n){if(e(n))l.push(n);else{l=i(t,l);var r={format:"html",text:n.innerHTML};t.mediator.trigger("block:create","Text",r,t.el,{autoFocus:!0})}}),l=i(t,l),f&&t.mediator.trigger("block:remove",t.blockID),u.focusAtEnd()}else{var h=a.firstChild;e(h)&&(n.setContent(""),r(t,[h]),t.mediator.trigger("block:remove",t.blockID))}})},n.commandPatches.insertHTML=o}}},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(22),s=n(40),a=n(41),u=r.template(['<blockquote class="st-required st-text-block st-text-block--quote" contenteditable="true"></blockquote>','<label class="st-input-label"> <%= i18n.t("blocks:quote:credit_field") %></label>','<input maxlength="140" name="cite" placeholder="<%= i18n.t("blocks:quote:credit_field") %>"',' class="st-input-string js-cite-input" type="text" />'].join("\n"));t.exports=i.extend({type:"quote",icon_name:"quote",mergeable:!0,textable:!0,toolbarEnabled:!1,editorHTML:function(){return u(this)},configureScribe:function(t){t.use(new s(this)),t.use(new a(this))},loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(o(t.text,this.type)):this.setTextBlockHTML(t.text),t.cite&&(this.$(".js-cite-input")[0].value=t.cite)},asClipboardHTML:function(){var t=this.getBlockData();return"<blockquote>".concat(t.text,"<cite>- ").concat(t.cite,"</cite></blockquote>")}})},function(t,e,n){"use strict";var r=n(3),i=n(8);t.exports=i.extend({type:"image",droppable:!0,uploadable:!0,icon_name:"image",loadData:function(t){this.editor.innerHTML="",this.editor.appendChild(r.createElement("img",{src:t.file.url}))},onDrop:function(t){var e=t.files[0],n="undefined"!=typeof URL?URL:"undefined"!=typeof webkitURL?webkitURL:null;/image/.test(e.type)&&(this.loading(),r.hide(this.inputs),this.editor.innerHTML="",this.editor.appendChild(r.createElement("img",{src:n.createObjectURL(e)})),r.show(this.editor),this.uploader(e,function(t){this.setData(t),this.ready()},function(t){this.addMessage(i18n.t("blocks:image:upload_error")),this.ready()}))},asClipboardHTML:function(){var t=this.getBlockData(),e=t.file&&t.file.url;if(e)return'<img src="'.concat(e,'" alt="').concat(e,'" />')}})},function(t,e,n){"use strict";var r=n(8),i=n(22),o=n(90),s=n(40),a=n(41);t.exports=r.extend({type:"heading",editorHTML:'<h2 class="st-required st-text-block st-text-block--heading" contenteditable="true"></h2>',configureScribe:function(t){t.use(new o(this)),t.use(new s(this)),t.use(new a(this)),t.on("content-changed",this.toggleEmptyClass.bind(this))},mergeable:!0,textable:!0,toolbarEnabled:!1,scribeOptions:{allowBlockElements:!1,tags:{p:!1}},icon_name:"heading",loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(i(t.text,this.type)):this.setTextBlockHTML(t.text)},onBlockRender:function(){this.toggleEmptyClass()},toggleEmptyClass:function(){this.el.classList.toggle("st-block--empty",0===this._scribe.getTextContent().length)},asClipboardHTML:function(){var t=this.getBlockData();return"<h2>".concat(t.text,"</h2>")}})},function(t,e,n){"use strict";var r=n(13),i=n(8),o=n(22),s=n(233),a=n(16),u=a.getTotalLength,c=a.rangeToHTML,l=a.selectToEnd;t.exports=i.extend({type:"list",icon_name:"list",multi_editable:!0,mergeable:!0,scribeOptions:{allowBlockElements:!1,tags:{p:!1}},configureScribe:function(t){t.use(new s(this))},editorHTML:'<ul class="st-list-block__list"></ul>',listItemEditorHTML:'<li class="st-list-block__item"><div class="st-list-block__editor st-block__editor"></div></li>',initialize:function(){this.editorIds=[]},beforeLoadingData:function(){this.setupListVariables(),this.loadData(this._getData())},onBlockRender:function(){this.ul||this.setupListVariables(),this.editorIds.length<1&&this.addListItem()},setupListVariables:function(){this.ul=this.inner.querySelector("ul")},loadData:function(t){var e=this;this.options.convertFromMarkdown&&"html"!==t.format&&(t=this.parseFromMarkdown(t.text)),t.listItems.length?t.listItems.forEach(function(t){e.addListItem(t.content)}):e.addListItem()},parseFromMarkdown:function(t){var e=t.replace(/^ - (.+)$/gm,"$1").split("\n");return{listItems:e=e.filter(function(t){return t.length}).map(function(t){return{content:o(t,this.type)}}.bind(this)),format:"html"}},_serializeData:function(){var t={format:"html",listItems:[]};return this.editorIds.forEach(function(e){var n={content:this.getTextEditor(e).scribe.getContent()};t.listItems.push(n)}.bind(this)),t},addListItemAfterCurrent:function(t){this.addListItem(t,this.getCurrentTextEditor())},addListItem:function(t,e){"<br>"===(t=(t=t||"").trim())&&(t="");var n=this.newTextEditor(this.listItemEditorHTML,t);if(e&&this.ul.lastchild!==e.node){var r=e.node.nextSibling;this.ul.insertBefore(n.node,r);var i=this.editorIds.indexOf(e.id)+1;this.editorIds.splice(i,0,n.id)}else this.ul.appendChild(n.node),this.editorIds.push(n.id);this.focusOn(n)},focus:function(){var t=this.getCurrentTextEditor();t||(t=this.getTextEditor(this.editorIds[0])),this.focusOn(t)},focusOnNeighbor:function(t){var e=this.previousListItem()||this.nextListItem();e&&this.focusOn(e)},focusOn:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.scribe,o=new i.api.Selection,s=i.el.lastChild;if(o.range&&(e=o.range.cloneRange()),t.el.focus(),e&&(e.setStartAfter(s,1),e.collapse(!1)),n&&n.focusAtEnd){var a=u(i);a>0&&r(i.el,{start:a})}n&&n.caretPosition&&r(i.el,{start:n.caretPosition})},focusAtStart:function(){var t=this.getTextEditor(this.editorIds[0]);this.focusOn(t)},focusAtEnd:function(){var t=this.editorIds[this.editorIds.length-1];this.appendToTextEditor(t)},removeCurrentListItem:function(){if(1!==this.editorIds.length){var t=this.getCurrentTextEditor(),e=this.editorIds.indexOf(t.id);this.focusOnNeighbor(t),this.editorIds.splice(e,1),this.ul.removeChild(t.node),this.removeTextEditor(t.id)}},appendToCurrentItem:function(t){this.appendToTextEditor(this.getCurrentTextEditor().id,t)},isLastListItem:function(){return 1===this.editorIds.length},nextListItem:function(){var t=this.editorIds.indexOf(this.getCurrentTextEditor().id),e=this.editorIds[t+1];return void 0!==e?this.getTextEditor(e):null},previousListItem:function(){var t=this.editorIds.indexOf(this.getCurrentTextEditor().id),e=this.editorIds[t-1];return void 0!==e?this.getTextEditor(e):null},asClipboardHTML:function(){var t=this.getBlockData().listItems.map(function(t){return"<li>".concat(t.content,"</li>")}).join("\n");return"<ul>".concat(t,"</ul>")},splitCurrentEditor:function(t){if(0===t.getTextContent().length)return!1;var e=c(l(t));return this.addListItemAfterCurrent(e),!0},split:function(){var t=this.getCurrentTextEditor();if(t){var e=t.scribe;this.splitCurrentEditor(e)&&(this.focusOnNeighbor(),this.addListItemAfterCurrent("")),this.splitListItem(this.getCurrentTextEditor().scribe)}},splitListItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=Object.assign({createTextBlock:!1},e),!this.splitCurrentEditor(t)){var n=this.nextListItem();if(n){var r={format:"html",listItems:[]};for(this.removeCurrentListItem(),this.focusOn(n);n;)r.listItems.push({content:n.scribe.getContent()}),this.focusOn(n),this.removeCurrentListItem(),n=this.nextListItem();this.mediator.trigger("block:create","List",r,this.el,{autoFocus:!0})}else this.removeCurrentListItem();e.createTextBlock&&this.mediator.trigger("block:create","Text",null,this.el,{autoFocus:!0})}}})},function(t,e,n){"use strict";n(13);var r=n(16),i=(r.getTotalLength,r.isAtStart),o=r.isAtEnd,s=r.isSelectedFromStart,a=r.isSelectedToEnd;r.rangeToHTML,r.selectToEnd;t.exports=function(t){return function(e){e.el.addEventListener("keydown",function(n){var r;if(!t.supressKeyListeners)if("Enter"!==n.key||n.shiftKey){if(["Left","ArrowLeft","Up","ArrowUp"].indexOf(n.key)>-1){if(n.shiftKey&&s(e))n.preventDefault(),n.stopPropagation(),document.activeElement&&document.activeElement.blur(),t.mediator.trigger("selection:block",t);else if(i(e)){n.preventDefault();var u=t.previousListItem();u?t.focusOn(u,{focusAtEnd:!0}):t.mediator.trigger("block:focusPrevious",t.blockID)}}else if(["Right","ArrowRight","Down","ArrowDown"].indexOf(n.key)>-1){if(n.shiftKey&&a(e))n.preventDefault(),n.stopPropagation(),document.activeElement&&document.activeElement.blur(),t.mediator.trigger("selection:block",t);else if(o(e)){n.preventDefault();var c=t.nextListItem();c?t.focusOn(c):t.mediator.trigger("block:focusNext",t.blockID)}}else if("Backspace"===n.key&&i(e))if(n.preventDefault(),t.previousListItem())r=e.getContent(),t.removeCurrentListItem(),t.appendToCurrentItem(r);else{var l={format:"html",text:e.getContent()};t.removeCurrentListItem(),t.mediator.trigger("block:createBefore","Text",l,t,{autoFocus:!0}),t.isLastListItem()&&t.mediator.trigger("block:remove",t.blockID)}}else n.preventDefault(),t.splitListItem(e,{createTextBlock:!0})})}}},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(3),s=n(8),a=r.template(["<blockquote class='twitter-tweet' align='center'>","<p><%= text %></p>","&mdash; <%= user.name %> (@<%= user.screen_name %>)","<a href='<%= status_url %>' data-datetime='<%= created_at %>'><%= created_at %></a>","</blockquote>"].join("\n"));t.exports=s.extend({type:"tweet",icon_name:"tweet",droppable:!0,pastable:!0,fetchable:!0,drop_options:{re_render_on_reorder:!0},fetchUrl:function(t){return"/tweets/?tweet_id="+t},loadData:function(t){r.isUndefined(t.status_url)&&(t.status_url="");var e=this.inner.querySelector("twitterwidget");o.remove(e),this.inner.insertAdjacentHTML("afterbegin",a(t));var n=o.createElement("script",{src:"//platform.twitter.com/widgets.js"});this.inner.appendChild(n)},onContentPasted:function(t){var e=t.target.value;this.handleTwitterDropPaste(e)},handleTwitterDropPaste:function(t){if(this.validTweetUrl(t)){var e=t.match(/[^\/]+$/);r.isEmpty(e)||(this.loading(),e=e[0],this.fetch(this.fetchUrl(e),{dataType:"json"},this.onTweetSuccess,this.onTweetFail))}else i.log("Invalid Tweet URL")},validTweetUrl:function(t){return i.isURI(t)&&-1!==t.indexOf("twitter")&&-1!==t.indexOf("status")},onTweetSuccess:function(t){var e={user:{profile_image_url:t.user.profile_image_url,profile_image_url_https:t.user.profile_image_url_https,screen_name:t.user.screen_name,name:t.user.name},id:t.id_str,text:t.text,created_at:t.created_at,entities:t.entities,status_url:"https://twitter.com/"+t.user.screen_name+"/status/"+t.id_str};this.setAndLoadData(e),this.ready()},onTweetFail:function(){this.addMessage(i18n.t("blocks:tweet:fetch_error")),this.ready()},onDrop:function(t){var e=t.getData("text/plain");this.handleTwitterDropPaste(e)},asClipboardHTML:function(){var t=this.getBlockData();if(t.status_url)return"<p>".concat(t.status_url,"</p>")}})},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(8);t.exports=o.extend({providers:{vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo\.co(?:.+(?:\/)([^\/].*)+$)/,html:'<iframe src="<%= protocol %>//player.vimeo.com/video/<%= remote_id %>?title=0&byline=0" width="580" height="320" frameborder="0"></iframe>',url:function(t){return"https://player.vimeo.com/video/".concat(t)}},youtube:{regex:/^.*(?:(?:youtu\.be\/)|(?:youtube\.com)\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)/,html:'<iframe src="<%= protocol %>//www.youtube.com/embed/<%= remote_id %>" width="580" height="320" frameborder="0" allowfullscreen></iframe>',url:function(t){return"https://www.youtube.com/embed/".concat(t)}}},type:"video",droppable:!0,pastable:!0,icon_name:"video",loadData:function(t){if(this.providers.hasOwnProperty(t.source)){var e=this.providers[t.source],n="file:"===window.location.protocol?"http:":window.location.protocol,i=e.square?"with-square-media":"with-sixteen-by-nine-media";this.editor.classList.add("st-block__editor--"+i),this.editor.innerHTML=r.template(e.html,{protocol:n,remote_id:t.remote_id,width:this.editor.style.width})}},onContentPasted:function(t){this.handleDropPaste(t.target.value)},matchVideoProvider:function(t,e,n){var i=t.regex.exec(n);return null==i||r.isUndefined(i[1])?{}:{source:e,remote_id:i[1]}},handleDropPaste:function(t){if(i.isURI(t))for(var e in this.providers)this.providers.hasOwnProperty(e)&&this.setAndLoadData(this.matchVideoProvider(this.providers[e],e,t))},onDrop:function(t){var e=t.getData("text/plain");this.handleDropPaste(e)},asClipboardHTML:function(){var t=this.getBlockData(),e=this.providers[t.source].url(t.remote_id);return"<p>".concat(e,"</p>")}})},function(t,e,n){"use strict";var r=n(2);t.exports=function(t){var e=t.name,n=(t.text,t.cmd),i=t.iconName;return'\n    <button type="button" class="st-format-btn st-format-btn--'.concat(e,'" data-cmd="').concat(n,'">\n      <svg role="img" class="st-icon">\n        <use xlink:href="').concat(r.defaults.iconUrl,"#").concat(i,'"/>\n      </svg>\n    </button>\n  ')}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(3),a=n(9),u=n(4),c=n(92),l=n(238),f=n(240),h=n(242),p=n(86),d=n(91),y=n(61),v=n(243),g=n(82),m=n(244),b=function(t){this.initialize(t)};Object.assign(b.prototype,n(6),n(9),{bound:["onFormSubmit","hideAllTheThings","changeBlockPosition","removeBlockDragOver","blockLimitReached","blockOrderUpdated","onBlockCountChange","renderBlockPositionerSelect"],events:{"block:reorder:dragend":"removeBlockDragOver","block:reorder:dropped":"removeBlockDragOver","block:content:dropped":"removeBlockDragOver"},initialize:function(t){if(o.log("Init SirTrevor.Editor"),this.options=Object.assign({},i.defaults,t||{}),this.ID=r.uniqueId("st-editor-"),!this._ensureAndSetElements())return!1;!r.isUndefined(this.options.onEditorRender)&&r.isFunction(this.options.onEditorRender)&&(this.onEditorRender=this.options.onEditorRender),this.mediator=Object.assign({},a),this._bindFunctions(),i.instances.push(this),this.build(),c.bindFormSubmit(this.form)},build:function(){s.hide(this.el),this.errorHandler=new v(this.outer,this.mediator,this.options.errorsContainer),this.store=new y(this.el.value,this.mediator),this.blockManager=new p(this),this.blockAddition=f.create(this),this.BlockAdditionTop=h.create(this),this.blockControls=l.create(this),this.blockPositionerSelect=new g(this.mediator),this.selectionHandler=new m(this.outer,this.mediator,this),this.formatBar=new d(this.options.formatBar,this.mediator,this),this.mediator.on("block:changePosition",this.changeBlockPosition),this.mediator.on("block:limitReached",this.blockLimitReached),this.mediator.on("block:rerender",this.blockOrderUpdated),this.mediator.on("block:create",this.blockOrderUpdated),this.mediator.on("block:remove",this.blockOrderUpdated),this.mediator.on("block:replace",this.blockOrderUpdated),this.mediator.on("block:countUpdate",this.onBlockCountChange),this.mediator.on("block-positioner-select:render",this.renderBlockPositionerSelect),this.dataStore="Please use store.retrieve();",this._setEvents(),window.addEventListener("click",this.hideAllTheThings),document.body.addEventListener("keydown",this.disableBackButton),this.createBlocks(),this.wrapper.classList.add("st-ready"),r.isUndefined(this.onEditorRender)||this.onEditorRender()},createBlocks:function(){var t=this.store.retrieve();if(t.data.length>0?t.data.forEach(function(t){this.mediator.trigger("block:create",t.type,t.data)},this):!1!==this.options.defaultType&&this.mediator.trigger("block:create",this.options.defaultType,{}),this.options.focusOnInit){var e=this.wrapper.querySelectorAll(".st-block")[0];if(e)this.blockManager.findBlockById(e.getAttribute("id")).focus()}},destroy:function(){this.formatBar.destroy(),this.blockAddition.destroy(),this.blockControls.destroy(),this.blockManager.blocks.forEach(function(t){this.mediator.trigger("block:remove",t.blockID)},this),this.mediator.stopListening(),this.stopListening(),i.instances=i.instances.filter(function(t){return t.ID!==this.ID},this),window.removeEventListener("click",this.hideAllTheThings),document.body.removeEventListener("keydown",this.disableBackButton),this.store.reset(),s.replaceWith(this.outer,this.el)},getData:function(){return this.onFormSubmit(),this.store.retrieve()},reinitialize:function(t){this.destroy(),this.initialize(t||this.options)},restore:function(t){this.el.value=t,this.reinitialize()},blockLimitReached:function(t){this.wrapper.classList.toggle("st--block-limit-reached",t)},blockOrderUpdated:function(){var t=this.wrapper.querySelectorAll(".st-block")[0],e=!1;if(t){var n=this.blockManager.findBlockById(t.getAttribute("id"));e=n&&n.textable}this._toggleHideTopControls(e)},_toggleHideTopControls:function(t){this.wrapper.classList.toggle("st--hide-top-controls",t)},onBlockCountChange:function(t){this.blockPositionerSelect.onBlockCountChange(t)},renderBlockPositionerSelect:function(t){this.blockPositionerSelect.renderInBlock(t)},_setEvents:function(){Object.keys(this.events).forEach(function(t){u.on(t,this[this.events[t]],this)},this)},hideAllTheThings:function(t){this.blockControls.hide(),this.blockAddition.hide(),null===document.activeElement.getAttribute("contenteditable")&&this.formatBar.hide();Array.prototype.forEach.call(this.wrapper.querySelectorAll(".st-block__ui-delete-controls"),function(t){t.classList.remove("active")})},store:function(t,e){return o.log("The store method has been removed, please call store[methodName]"),this.store[t].call(this,e||{})},removeBlockDragOver:function(){var t=this.outer.querySelector(".st-drag-over");t&&t.classList.remove("st-drag-over")},changeBlockPosition:function(t,e){e-=1;var n=this.blockManager.getBlockPosition(t),r=this.wrapper.querySelectorAll(".st-block")[e];r&&r.getAttribute("id")!==t.getAttribute("id")&&(this.hideAllTheThings(),n>e?r.parentNode.insertBefore(t,r):s.insertAfter(t,r))},onFormSubmit:function(t){return t=!1!==t,o.log("Handling form submission for Editor "+this.ID),this.mediator.trigger("errors:reset"),this.store.reset(),this.validateBlocks(t),this.blockManager.validateBlockTypesExist(t),this.mediator.trigger("errors:render"),this.el.value=this.store.toString(),this.errorHandler.errors.length},validateBlocks:function(t){var e=this;Array.prototype.forEach.call(this.wrapper.querySelectorAll(".st-block"),function(n,i){var o=e.blockManager.findBlockById(n.getAttribute("id"));r.isUndefined(o)||e.validateAndSaveBlock(o,t)})},validateAndSaveBlock:function(t,e){if(!i.skipValidation&&e&&!t.valid())return this.mediator.trigger("errors:add",{text:r.result(t,"validationFailMsg")}),void o.log("Block "+t.blockID+" failed validation");if("text"!==t.type||!t.isEmpty()){var n=t.getData();o.log("Adding data for block "+t.blockID+" to block store:",n),this.store.addData(n)}},disableBackButton:function(t){var e=t.target||t.srcElement;if(8===t.keyCode){if(e.getAttribute("contenteditable")||"INPUT"===e.tagName||"TEXTAREA"===e.tagName)return;t.preventDefault()}},findBlockById:function(t){return this.blockManager.findBlockById(t)},getBlocksByType:function(t){return this.blockManager.getBlocksByType(t)},getBlocksByIDs:function(t){return this.blockManager.getBlocksByIDs(t)},getBlockPosition:function(t){return o.log("This method has been moved to blockManager.getBlockPosition()"),this.blockManager.getBlockPosition(t)},getBlocks:function(){var t=this;return[].map.call(this.wrapper.querySelectorAll(".st-block"),function(e){return t.findBlockById(e.getAttribute("id"))})},_ensureAndSetElements:function(){if(r.isUndefined(this.options.el))return o.log("You must provide an el"),!1;this.el=this.options.el,this.form=s.getClosest(this.el,"form");var t=s.createElement("div",{id:this.ID,class:"st-outer notranslate",dropzone:"copy link move"}),e=s.createElement("div",{class:"st-blocks"});return s.wrap(s.wrap(this.el,t),e),this.outer=this.form.querySelector("#"+this.ID),this.wrapper=this.outer.querySelector(".st-blocks"),!0}}),t.exports=b},function(t,e,n){"use strict";var r=n(21),i=n(10),o=n(239);function s(t,e){var n=document.createElement("div");n.className="st-block-controls__buttons",n.innerHTML=function(t,e){return e.reduce(function(e,n){return t.hasOwnProperty(n)&&t[n].prototype.toolbarEnabled?e+o(t[n].prototype):e},"")}.apply(null,arguments);var r=document.createElement("div");return r.className="st-block-controls",r.appendChild(n),r}t.exports.create=function(t){var e=s(r,t.blockManager.blockTypes);function n(){var t=e.parentNode;if(t)return t.removeChild(e),t.classList.remove("st-block--controls-active"),t}return i.delegate(t.wrapper,".st-block-replacer","click",function(t){t.stopPropagation();var r=this.parentNode;r&&n()!==r&&(r.appendChild(e),r.classList.toggle("st-block--controls-active"))}),i.delegate(t.wrapper,".st-block-controls__button","click",function(n){t.mediator.trigger("block:replace",e.parentNode,this.getAttribute("data-type"))}),{el:e,hide:n,destroy:function(){t=null,e=null}}}},function(t,e,n){"use strict";var r=n(2);t.exports=function(t){return'\n    <button class="st-block-controls__button" data-type="'.concat(t.type,'" type="button">\n      <svg role="img" class="st-icon">\n        <use xlink:href="').concat(r.defaults.iconUrl,"#").concat(t.icon_name,'"/>\n      </svg>\n      ').concat(t.title(),"\n    </button>\n  ")}},function(t,e,n){"use strict";var r=n(35),i=n(4),o=n(3),s=n(10),a=n(241);t.exports.create=function(t){t.wrapper.insertAdjacentHTML("beforeend",a());var e=t.wrapper.querySelector(".st-top-controls");return r.dropArea(e),e.addEventListener("drop",function(n){n.preventDefault();var r=e,s=n.dataTransfer.getData("text/plain"),a=document.querySelector("#"+s);r.id!==s&&o.insertAfter(a,r),t.mediator.trigger("block:rerender",s),i.trigger("block:reorder:dropped",s)}),s.delegate(t.wrapper,".st-block-addition","click",function(e){t.mediator.trigger("block:create","Text",null,this.parentNode.parentNode.id?this.parentNode.parentNode:this.parentNode)}),{destroy:function(){t=null},hide:function(){}}}},function(t,e,n){"use strict";var r=n(88);t.exports=function(){return'\n    <div id="st_top" class="st-top-controls">\n      '.concat(r(),"\n    </div>\n  ")}},function(t,e,n){"use strict";var r=n(10);t.exports.create=function(t){function e(e){t.mediator.trigger("block:create","Text",null,this.parentNode.parentNode.previousSibling,{autoFocus:!0})}return r.delegate(t.wrapper,".st-block-addition-top__button","click",e),r.delegate(t.wrapper,".st-block-addition-top__icon","click",e),{destroy:function(){t=null},hide:function(){}}}},function(t,e,n){"use strict";var r=n(0),i=n(3),o=function(t,e,n){this.wrapper=t,this.mediator=e,this.el=n,r.isUndefined(this.el)&&(this._ensureElement(),this.wrapper.insertBefore(this.el,this.wrapper.firstChild)),i.hide(this.el),this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};Object.assign(o.prototype,n(6),n(30),n(11),{errors:[],className:"st-errors",eventNamespace:"errors",mediatedEvents:{reset:"reset",add:"addMessage",render:"render"},initialize:function(){var t=document.createElement("ul"),e=document.createElement("p");e.innerHTML=i18n.t("errors:title"),this.el.appendChild(e).appendChild(t),this.list=t},render:function(){if(0===this.errors.length)return!1;this.errors.forEach(this.createErrorItem,this),i.show(this.el)},createErrorItem:function(t){var e=document.createElement("li");e.classList.add("st-errors__msg"),e.innerHTML=t.text,this.list.appendChild(e)},addMessage:function(t){this.errors.push(t)},reset:function(){if(0===this.errors.length)return!1;this.errors=[],this.list.innerHTML="",i.hide(this.el)}}),t.exports=o},function(t,e,n){"use strict";n(0);var r=n(3),i="application/vnd.sirtrevor+json",o=function(t,e,n){this.wrapper=t,this.mediator=e,this.editor=n,this.options=n.options,this.startIndex=this.endIndex=0,this.selecting=!1,this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};Object.assign(o.prototype,n(6),n(30),{eventNamespace:"selection",bound:["onCopy","onCut","onKeyDown","onMouseUp","onMouseDown","onPaste"],mediatedEvents:{start:"start",render:"render",complete:"complete",all:"all",copy:"copy",update:"update",delete:"delete",cancel:"cancel",block:"block"},canSelect:function(){if(r.getClosest(document.activeElement,"input")!==document.body)return!1;var t=r.getClosest(document.activeElement,".st-outer");return!this.options.selectionLimitToEditor||t===this.wrapper},initialize:function(){if(!this.enabled())return!1;window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("mouseup",this.onMouseUp,!1),document.addEventListener("copy",this.onCopy,!1),this.options.selectionCut&&document.addEventListener("cut",this.onCut,!1),this.options.selectionPaste&&document.addEventListener("paste",this.onPaste,!0)},enabled:function(){return!!this.options.selectionCopy},start:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.enabled())return!1;e=Object.assign({mouseEnabled:!1,expand:!1},e),this.endIndex=t,e.expand||(this.startIndex=this.endIndex),this.selecting=!0,e.mouseEnabled&&(this.editor.mouseDown=!0,this.selecting=this.startIndex!==this.endIndex,this.selecting&&this.removeNativeSelection(),window.addEventListener("mousemove",this.onMouseMove)),this.mediator.trigger("selection:render")},startAtEnd:function(){this.start(this.editor.getBlocks().length-1)},move:function(t){this.start(this.endIndex+t)},onMouseMove:function(){},update:function(t){t<0||t>=this.editor.getBlocks().length||(this.endIndex=t,this.startIndex!==this.endIndex&&(this.selecting=!0),this.removeNativeSelection(),this.mediator.trigger("selection:render"))},expand:function(t){this.update(this.endIndex+t)},expandToStart:function(){this.update(0)},expandToEnd:function(){this.update(this.editor.getBlocks().length-1)},focusAtEnd:function(){this.editor.getBlocks()[this.endIndex].el.scrollIntoView({behavior:"smooth"})},complete:function(){window.removeEventListener("mousemove",this.onMouseMove)},all:function(){if(!this.enabled())return!1;this.removeNativeSelection();var t=this.editor.getBlocks();this.selecting=!0,this.startIndex=0,this.endIndex=t.length-1,this.mediator.trigger("selection:render")},cancel:function(){this.editor.mouseDown=!1,this.selecting=!1,this.render()},removeNativeSelection:function(){var t=window.getSelection?window.getSelection():document.selection;t&&(t.removeAllRanges?t.removeAllRanges():t.empty&&t.empty()),document.activeElement&&document.activeElement.blur()},render:function(){var t=this,e=this.selecting;this.editor.getBlocks().forEach(function(n,r){n.select(e&&t.indexSelected(r))})},getClipboardData:function(){var t=this;this.editor.getData();var e=[],n=[],r=[];return this.editor.getBlocks().forEach(function(i,o){if(t.indexSelected(o)){var s=i.asClipboardHTML(),a=s;e.push(s),n.push(a),r.push(i.getData())}}),{html:e.join(""),text:n.join("\n\n"),data:r}},copy:function(){var t=this.createFakeCopyArea();t.innerHTML=this.getClipboardData().html;var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n);try{document.execCommand("copy"),t.blur()}catch(t){console.log("Copy could not be performed")}},createFakeCopyArea:function(){var t=document.body.querySelector(".st-copy-area");return t||(t=r.createElement("div",{contenteditable:!0,class:"st-copy-area st-utils__hidden"}),document.body.appendChild(t)),t},delete:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({createNextBlock:!0},e),this.editor.getBlocks().forEach(function(n,r){t.indexSelected(r)&&t.mediator.trigger("block:remove",n.blockID,{focusOnNext:!0,createNextBlock:e.createNextBlock})}),this.cancel()},indexSelected:function(t){return t>=this.getStartIndex()&&t<=this.getEndIndex()},block:function(t){var e=this.editor.blockManager.getBlockPosition(t.el);this.mediator.trigger("formatter:hide"),this.removeNativeSelection(),this.start(e)},getStartIndex:function(){return Math.min(this.startIndex,this.endIndex)},getEndIndex:function(){return Math.max(this.startIndex,this.endIndex)},getStartBlock:function(){return this.editor.getBlocks()[this.getStartIndex()]},getEndBlock:function(){return this.editor.getBlocks()[this.getEndIndex()]},onKeyDown:function(t){var e=(t=t||window.event).ctrlKey||t.metaKey,n=t.key;if(this.selecting&&"Backspace"===n)t.preventDefault(),this.delete();else if(e&&"a"===n){if(!this.selecting&&!this.canSelect())return;t.preventDefault(),this.mediator.trigger("selection:all")}else if(this.selecting)if(["Down","ArrowDown"].indexOf(n)>-1){if(t.preventDefault(),t.shiftKey&&e)this.expandToEnd();else if(t.shiftKey)this.expand(1);else{if(!e)return this.cancel(),void this.mediator.trigger("block:focusNext",this.getEndBlock().blockID,{force:!0});this.startAtEnd()}this.focusAtEnd()}else if(["Up","ArrowUp"].indexOf(n)>-1){if(t.preventDefault(),t.shiftKey&&e)this.expandToStart();else if(t.shiftKey)this.expand(-1);else{if(!e)return this.cancel(),void this.mediator.trigger("block:focusPrevious",this.getStartBlock().blockID,{force:!0});this.start(0)}this.focusAtEnd()}},onMouseUp:function(){if(!this.editor.mouseDown)return window.addEventListener("mousedown",this.onMouseDown),this.mediator.trigger("selection:complete"),void this.mediator.trigger("selection:cancel");this.editor.mouseDown=!1,this.mediator.trigger("selection:complete"),this.mediator.trigger("selection:render")},onMouseDown:function(t){if(!this.editor.mouseDown)return window.removeEventListener("mousedown",this.onMouseDown),this.mediator.trigger("selection:complete"),void this.mediator.trigger("selection:cancel")},copySelection:function(t){var e=this.getClipboardData();t.clipboardData.setData(i,JSON.stringify(e.data)),t.clipboardData.setData("text/html",e.html),t.clipboardData.setData("text/plain",e.text),t.preventDefault()},onCopy:function(t){this.selecting&&this.copySelection(t)},onCut:function(t){this.selecting&&(this.copySelection(t),this.delete())},onPaste:function(t){if([].slice.call(t.clipboardData.types).includes(i)){if(!this.selecting&&!this.canSelect())return;t.preventDefault(),t.stopPropagation();var e=JSON.parse(t.clipboardData.getData(i));if(this.selecting){var n=this.editor.getBlocks()[this.getEndIndex()+1];this.delete({createNextBlock:!1}),n&&!n.isEmpty()?this.mediator.trigger("block:createBefore","text","",n,{autoFocus:!0}):this.mediator.trigger("block:create","text","",null,{autoFocus:!0})}this.mediator.trigger("block:paste",e)}}}),t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1);t.exports=function(t,e){var o=n(21);e=i.classify(e);var s=t;s=(s=s.replace(/&nbsp;/g," ")).replace(/( class=(")?Mso[a-zA-Z]+(")?)/g,"").replace(/<!--(.*?)-->/g,"").replace(/\/\*(.*?)\*\//g,"").replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var a,u,c=["style","script","applet","embed","noframes","noscript"];for(u=0;u<c.length;u++)a=new RegExp("<"+c[u]+".*?"+c[u]+"(.*?)>","gi"),s=s.replace(a,"");s=s.replace(/\*/g,"\\*").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\_/g,"\\_").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\-/g,"\\-");var l,f=["em","i","strong","b"];for(u=0;u<f.length;u++)a=new RegExp("<"+f[u]+"><br></"+f[u]+">","gi"),s=s.replace(a,"<br>");function h(t,e,n){return r.isUndefined(n)&&(n=""),"**"+e.replace(/<(.)?br(.)?>/g,"")+"**"+n}function p(t,e,n){return r.isUndefined(n)&&(n=""),"_"+e.replace(/<(.)?br(.)?>/g,"")+"_"+n}return s=(s=s.replace(/<(\w+)(?:\s+\w+="[^"]+(?:"\$[^"]+"[^"]+)?")*>\s*<\/\1>/gim,"").replace(/\n/gm,"").replace(/<a.*?href=[""'](.*?)[""'].*?>(.*?)<\/a>/gim,function(t,e,n){return"["+n.trim().replace(/<(.)?br(.)?>/g,"")+"]("+e+")"}).replace(/<strong>(?:\s*)(.*?)(\s)*?<\/strong>/gim,h).replace(/<b>(?:\s*)(.*?)(\s*)?<\/b>/gim,h).replace(/<em>(?:\s*)(.*?)(\s*)?<\/em>/gim,p).replace(/<i>(?:\s*)(.*?)(\s*)?<\/i>/gim,p)).replace(/([^<>]+)(<div>)/g,"$1\n$2").replace(/<div><div>/g,"\n<div>").replace(/(?:<div>)([^<>]+)(?:<div>)/g,"$1\n").replace(/(?:<div>)(?:<br>)?([^<>]+)(?:<br>)?(?:<\/div>)/g,"$1\n").replace(/<\/p>/g,"\n\n").replace(/<(.)?br(.)?>/g,"\n").replace(/&lt;/g,"<").replace(/&gt;/g,">"),o.hasOwnProperty(e)&&(l=o[e],!r.isUndefined(l.prototype.toMarkdown)&&r.isFunction(l.prototype.toMarkdown)&&(s=l.prototype.toMarkdown(s))),s=s.replace(/<\/?[^>]+(>|$)/g,"")}},function(t,e,n){}])});